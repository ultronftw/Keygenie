/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={4489:(e,t,n)=>{"use strict";var i=n(4531),r=Object.prototype.hasOwnProperty,o={align:"text-align",valign:"vertical-align",height:"height",width:"width"};function s(e){var t;if("tr"===e.tagName||"td"===e.tagName||"th"===e.tagName)for(t in o)r.call(o,t)&&void 0!==e.properties[t]&&(a(e,o[t],e.properties[t]),delete e.properties[t])}function a(e,t,n){var i=(e.properties.style||"").trim();i&&!/;\s*/.test(i)&&(i+=";"),i&&(i+=" ");var r=i+t+": "+n+";";e.properties.style=r}e.exports=function(e){return i(e,"element",s),e}},3667:e=>{"use strict";function t(e){if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if(null===e||void 0===e)return r;if("object"===typeof e)return("length"in e?i:n)(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(e){return function(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}function i(e){var n=function(e){for(var n=[],i=e.length,r=-1;++r<i;)n[r]=t(e[r]);return n}(e),i=n.length;return function(){var e=-1;for(;++e<i;)if(n[e].apply(this,arguments))return!0;return!1}}function r(){return!0}e.exports=t},7683:(e,t,n)=>{"use strict";e.exports=a;var i=n(3667),r=!0,o="skip",s=!1;function a(e,t,n,r){var a;function c(e,i,u){var d,h=[];return(t&&!a(e,i,u[u.length-1]||null)||(h=l(n(e,u)))[0]!==s)&&e.children&&h[0]!==o?(d=l(function(e,t){var n,i=-1,o=r?-1:1,a=(r?e.length:i)+o;for(;a>i&&a<e.length;){if((n=c(e[a],a,t))[0]===s)return n;a="number"===typeof n[1]?n[1]:a+o}}(e.children,u.concat(e))),d[0]===s?d:h):h}"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),a=i(t),c(e,null,[])}function l(e){return null!==e&&"object"===typeof e&&"length"in e?e:"number"===typeof e?[r,e]:[e]}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},4531:(e,t,n)=>{"use strict";e.exports=a;var i=n(7683),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},3393:function(e,t,n){!function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function i(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){o(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function r(e){return r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}function a(e,t){if(null==e)return{};var n,i,r=s(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e,t){return c(e)||u(e,t)||d(e,t)||p()}function c(e){if(Array.isArray(e))return e}function u(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}}function d(e,t){if(e){if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function p(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,g,v,b,y={exports:{}};function x(){return g?m:(g=1,m="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}function k(){if(b)return v;b=1;var e=x();function t(){}function n(){}return n.resetWarningCache=t,v=function(){function i(t,n,i,r,o,s){if(s!==e){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function r(){return i}i.isRequired=i;var o={array:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o}}y.exports=k()();var w=f(y.exports),S=function(e,n,i){var r=!!i,o=t.useRef(i);t.useEffect((function(){o.current=i}),[i]),t.useEffect((function(){if(!r||!e)return function(){};var t=function(){o.current&&o.current.apply(o,arguments)};return e.on(n,t),function(){e.off(n,t)}}),[r,n,e,o])},C=function(e){var n=t.useRef(e);return t.useEffect((function(){n.current=e}),[e]),n.current},T=function(e){return null!==e&&"object"===r(e)},E=function(e){return T(e)&&"function"===typeof e.then},_=function(e){return T(e)&&"function"===typeof e.elements&&"function"===typeof e.createToken&&"function"===typeof e.createPaymentMethod&&"function"===typeof e.confirmCardPayment},I="[object Object]",R=function e(t,n){if(!T(t)||!T(n))return t===n;var i=Array.isArray(t);if(i!==Array.isArray(n))return!1;var r=Object.prototype.toString.call(t)===I;if(r!==(Object.prototype.toString.call(n)===I))return!1;if(!r&&!i)return t===n;var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(var a={},l=0;l<o.length;l+=1)a[o[l]]=!0;for(var c=0;c<s.length;c+=1)a[s[c]]=!0;var u=Object.keys(a);if(u.length!==o.length)return!1;var d=t,h=n,p=function(t){return e(d[t],h[t])};return u.every(p)},P=function(e,t,n){return T(e)?Object.keys(e).reduce((function(r,s){var a=!T(t)||!R(e[s],t[s]);return n.includes(s)?(a&&console.warn("Unsupported prop change: options.".concat(s," is not a mutable property.")),r):a?i(i({},r||{}),{},o({},s,e[s])):r}),null):null},A="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(null===e||_(e))return e;throw new Error(t)},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;if(E(e))return{tag:"async",stripePromise:Promise.resolve(e).then((function(e){return O(e,t)}))};var n=O(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},N=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),e.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},D=t.createContext(null);D.displayName="ElementsContext";var j=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},L=function(e){var n=e.stripe,i=e.options,r=e.children,o=t.useMemo((function(){return M(n)}),[n]),s=l(t.useState((function(){return{stripe:"sync"===o.tag?o.stripe:null,elements:"sync"===o.tag?o.stripe.elements(i):null}})),2),a=s[0],c=s[1];t.useEffect((function(){var e=!0,t=function(e){c((function(t){return t.stripe?t:{stripe:e,elements:e.elements(i)}}))};return"async"!==o.tag||a.stripe?"sync"!==o.tag||a.stripe||t(o.stripe):o.stripePromise.then((function(n){n&&e&&t(n)})),function(){e=!1}}),[o,a,i]);var u=C(n);t.useEffect((function(){null!==u&&u!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")}),[u,n]);var d=C(i);return t.useEffect((function(){if(a.elements){var e=P(i,d,["clientSecret","fonts"]);e&&a.elements.update(e)}}),[i,d,a.elements]),t.useEffect((function(){N(a.stripe)}),[a.stripe]),t.createElement(D.Provider,{value:a},r)};L.propTypes={stripe:w.any,options:w.object};var F=function(e){var n=t.useContext(D);return j(n,e)},B=function(){return F("calls useElements()").elements},U=function(e){return(0,e.children)(F("mounts <ElementsConsumer>"))};U.propTypes={children:w.func.isRequired};var $=["on","session"],z=t.createContext(null);z.displayName="CheckoutSdkContext";var V=function(e,t){if(!e)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(t," in an <CheckoutProvider> provider."));return e},H=t.createContext(null);H.displayName="CheckoutContext";var q=function(e,t){if(!e)return null;e.on,e.session;var n=a(e,$);return i(i({},n),t||e.session())},W="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",G=function(e){var n=e.stripe,i=e.options,r=e.children,o=t.useMemo((function(){return M(n,W)}),[n]),s=l(t.useState(null),2),a=s[0],c=s[1],u=l(t.useState((function(){return{stripe:"sync"===o.tag?o.stripe:null,checkoutSdk:null}})),2),d=u[0],h=u[1],p=function(e,t){h((function(n){return n.stripe&&n.checkoutSdk?n:{stripe:e,checkoutSdk:t}}))},f=t.useRef(!1);t.useEffect((function(){var e=!0;return"async"!==o.tag||d.stripe?"sync"===o.tag&&o.stripe&&!f.current&&(f.current=!0,o.stripe.initCheckout(i).then((function(e){e&&(p(o.stripe,e),e.on("change",c))}))):o.stripePromise.then((function(t){t&&e&&!f.current&&(f.current=!0,t.initCheckout(i).then((function(e){e&&(p(t,e),e.on("change",c))})))})),function(){e=!1}}),[o,d,i,c]);var m=C(n);t.useEffect((function(){null!==m&&m!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[m,n]);var g=C(i);t.useEffect((function(){var e,t;if(d.checkoutSdk){!i.clientSecret||T(g)||R(i.clientSecret,g.clientSecret)||console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var n=null===g||void 0===g||null===(e=g.elementsOptions)||void 0===e?void 0:e.appearance,r=null===i||void 0===i||null===(t=i.elementsOptions)||void 0===t?void 0:t.appearance;r&&!R(r,n)&&d.checkoutSdk.changeAppearance(r)}}),[i,g,d.checkoutSdk]),t.useEffect((function(){N(d.stripe)}),[d.stripe]);var v=t.useMemo((function(){return q(d.checkoutSdk,a)}),[d.checkoutSdk,a]);return d.checkoutSdk?t.createElement(z.Provider,{value:d},t.createElement(H.Provider,{value:v},r)):null};G.propTypes={stripe:w.any,options:w.shape({clientSecret:w.string.isRequired,elementsOptions:w.object}).isRequired};var K=function(e){var n=t.useContext(z);return V(n,e)},Q=function(e){var n=t.useContext(z),i=t.useContext(D);if(n&&i)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return n?V(n,e):j(i,e)},X=function(){K("calls useCheckout()");var e=t.useContext(H);if(!e)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return e},Y=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},J=function(e,n){var i="".concat(Y(e),"Element"),r=n?function(e){Q("mounts <".concat(i,">"));var n=e.id,r=e.className;return t.createElement("div",{id:n,className:r})}:function(n){var r,o=n.id,s=n.className,a=n.options,c=void 0===a?{}:a,u=n.onBlur,d=n.onFocus,h=n.onReady,p=n.onChange,f=n.onEscape,m=n.onClick,g=n.onLoadError,v=n.onLoaderStart,b=n.onNetworksChange,y=n.onConfirm,x=n.onCancel,k=n.onShippingAddressChange,w=n.onShippingRateChange,T=Q("mounts <".concat(i,">")),E="elements"in T?T.elements:null,_="checkoutSdk"in T?T.checkoutSdk:null,I=l(t.useState(null),2),R=I[0],A=I[1],O=t.useRef(null),M=t.useRef(null);S(R,"blur",u),S(R,"focus",d),S(R,"escape",f),S(R,"click",m),S(R,"loaderror",g),S(R,"loaderstart",v),S(R,"networkschange",b),S(R,"confirm",y),S(R,"cancel",x),S(R,"shippingaddresschange",k),S(R,"shippingratechange",w),S(R,"change",p),h&&(r="expressCheckout"===e?h:function(){h(R)}),S(R,"ready",r),t.useLayoutEffect((function(){if(null===O.current&&null!==M.current&&(E||_)){var t=null;_?t=_.createElement(e,c):E&&(t=E.create(e,c)),O.current=t,A(t),t&&t.mount(M.current)}}),[E,_,c]);var N=C(c);return t.useEffect((function(){if(O.current){var e=P(c,N,["paymentRequest"]);e&&"update"in O.current&&O.current.update(e)}}),[c,N]),t.useLayoutEffect((function(){return function(){if(O.current&&"function"===typeof O.current.destroy)try{O.current.destroy(),O.current=null}catch(e){}}}),[]),t.createElement("div",{id:o,className:s,ref:M})};return r.propTypes={id:w.string,className:w.string,onChange:w.func,onBlur:w.func,onFocus:w.func,onReady:w.func,onEscape:w.func,onClick:w.func,onLoadError:w.func,onLoaderStart:w.func,onNetworksChange:w.func,onConfirm:w.func,onCancel:w.func,onShippingAddressChange:w.func,onShippingRateChange:w.func,options:w.object},r.displayName=i,r.__elementType=e,r},Z="undefined"===typeof window,ee=t.createContext(null);ee.displayName="EmbeddedCheckoutProviderContext";var te=function(){var e=t.useContext(ee);if(!e)throw new Error("<EmbeddedCheckout> must be used within <EmbeddedCheckoutProvider>");return e},ne="Invalid prop `stripe` supplied to `EmbeddedCheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",ie=function(e){var n=e.stripe,i=e.options,r=e.children,o=t.useMemo((function(){return M(n,ne)}),[n]),s=t.useRef(null),a=t.useRef(null),c=l(t.useState({embeddedCheckout:null}),2),u=c[0],d=c[1];t.useEffect((function(){if(!a.current&&!s.current){var e=function(e){a.current||s.current||(a.current=e,s.current=a.current.initEmbeddedCheckout(i).then((function(e){d({embeddedCheckout:e})})))};"async"!==o.tag||a.current||!i.clientSecret&&!i.fetchClientSecret?"sync"!==o.tag||a.current||!i.clientSecret&&!i.fetchClientSecret||e(o.stripe):o.stripePromise.then((function(t){t&&e(t)}))}}),[o,i,u,a]),t.useEffect((function(){return function(){u.embeddedCheckout?(s.current=null,u.embeddedCheckout.destroy()):s.current&&s.current.then((function(){s.current=null,u.embeddedCheckout&&u.embeddedCheckout.destroy()}))}}),[u.embeddedCheckout]),t.useEffect((function(){N(a)}),[a]);var h=C(n);t.useEffect((function(){null!==h&&h!==n&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the `stripe` prop after setting it.")}),[h,n]);var p=C(i);return t.useEffect((function(){null!=p&&(null!=i?(void 0===i.clientSecret&&void 0===i.fetchClientSecret&&console.warn("Invalid props passed to EmbeddedCheckoutProvider: You must provide one of either `options.fetchClientSecret` or `options.clientSecret`."),null!=p.clientSecret&&i.clientSecret!==p.clientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the client secret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.fetchClientSecret&&i.fetchClientSecret!==p.fetchClientSecret&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change fetchClientSecret after setting it. Unmount and create a new instance of EmbeddedCheckoutProvider instead."),null!=p.onComplete&&i.onComplete!==p.onComplete&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onComplete option after setting it."),null!=p.onShippingDetailsChange&&i.onShippingDetailsChange!==p.onShippingDetailsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onShippingDetailsChange option after setting it."),null!=p.onLineItemsChange&&i.onLineItemsChange!==p.onLineItemsChange&&console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot change the onLineItemsChange option after setting it.")):console.warn("Unsupported prop change on EmbeddedCheckoutProvider: You cannot unset options after setting them."))}),[p,i]),t.createElement(ee.Provider,{value:u},r)},re=function(e){var n=e.id,i=e.className,r=te().embeddedCheckout,o=t.useRef(!1),s=t.useRef(null);return t.useLayoutEffect((function(){return!o.current&&r&&null!==s.current&&(r.mount(s.current),o.current=!0),function(){if(o.current&&r)try{r.unmount(),o.current=!1}catch(e){}}}),[r]),t.createElement("div",{ref:s,id:n,className:i})},oe=function(e){var n=e.id,i=e.className;return te(),t.createElement("div",{id:n,className:i})},se=Z?oe:re,ae=function(){return Q("calls useStripe()").stripe},le=J("auBankAccount",Z),ce=J("card",Z),ue=J("cardNumber",Z),de=J("cardExpiry",Z),he=J("cardCvc",Z),pe=J("fpxBank",Z),fe=J("iban",Z),me=J("idealBank",Z),ge=J("p24Bank",Z),ve=J("epsBank",Z),be=J("payment",Z),ye=J("expressCheckout",Z),xe=J("currencySelector",Z),ke=J("paymentRequestButton",Z),we=J("linkAuthentication",Z),Se=J("address",Z),Ce=J("shippingAddress",Z),Te=J("paymentMethodMessaging",Z),Ee=J("affirmMessage",Z),_e=J("afterpayClearpayMessage",Z);e.AddressElement=Se,e.AffirmMessageElement=Ee,e.AfterpayClearpayMessageElement=_e,e.AuBankAccountElement=le,e.CardCvcElement=he,e.CardElement=ce,e.CardExpiryElement=de,e.CardNumberElement=ue,e.CheckoutProvider=G,e.CurrencySelectorElement=xe,e.Elements=L,e.ElementsConsumer=U,e.EmbeddedCheckout=se,e.EmbeddedCheckoutProvider=ie,e.EpsBankElement=ve,e.ExpressCheckoutElement=ye,e.FpxBankElement=pe,e.IbanElement=fe,e.IdealBankElement=me,e.LinkAuthenticationElement=we,e.P24BankElement=ge,e.PaymentElement=be,e.PaymentMethodMessagingElement=Te,e.PaymentRequestButtonElement=ke,e.ShippingAddressElement=Ce,e.useCheckout=X,e.useElements=B,e.useStripe=ae}(t,n(5043))},1850:(e,t)=>{"use strict";t.parse=function(e){var t,i=[],o=String(e||r),s=o.indexOf(n),a=0,l=!1;for(;!l;)-1===s&&(s=o.length,l=!0),!(t=o.slice(a,s).trim())&&l||i.push(t),a=s+1,s=o.indexOf(n,a);return i},t.stringify=function(e,t){var o=t||{},s=!1===o.padLeft?r:i,a=o.padRight?i:r;e[e.length-1]===r&&(e=e.concat(r));return e.join(a+n+s).trim()};var n=",",i=" ",r=""},4695:e=>{function t(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("function"!==typeof e)throw new TypeError(`Expected the first parameter to be a function, got \`${typeof e}\`.`);if(t<0)throw new RangeError("`wait` must not be negative.");const{immediate:i}="boolean"===typeof n?{immediate:n}:n;let r,o,s,a,l;function c(){const t=r,n=o;return r=void 0,o=void 0,l=e.apply(t,n),l}function u(){const e=Date.now()-a;e<t&&e>=0?s=setTimeout(u,t-e):(s=void 0,i||(l=c()))}const d=function(){if(r&&this!==r&&Object.getPrototypeOf(this)===Object.getPrototypeOf(r))throw new Error("Debounced method called with different contexts of the same prototype.");r=this;for(var e=arguments.length,n=new Array(e),d=0;d<e;d++)n[d]=arguments[d];o=n,a=Date.now();const h=i&&!s;return s||(s=setTimeout(u,t)),h&&(l=c()),l};return d.clear=()=>{s&&(clearTimeout(s),s=void 0)},d.flush=()=>{s&&d.trigger()},d.trigger=()=>{l=c(),d.clear()},d}e.exports.debounce=t,e.exports=t},3240:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n=Object.prototype.toString,i=Object.defineProperty,r=Object.getOwnPropertyDescriptor,o=function(e){return"function"===typeof Array.isArray?Array.isArray(e):"[object Array]"===n.call(e)},s=function(e){if(!e||"[object Object]"!==n.call(e))return!1;var i,r=t.call(e,"constructor"),o=e.constructor&&e.constructor.prototype&&t.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!r&&!o)return!1;for(i in e);return"undefined"===typeof i||t.call(e,i)},a=function(e,t){i&&"__proto__"===t.name?i(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},l=function(e,n){if("__proto__"===n){if(!t.call(e,n))return;if(r)return r(e,n).value}return e[n]};e.exports=function e(){var t,n,i,r,c,u,d=arguments[0],h=1,p=arguments.length,f=!1;for("boolean"===typeof d&&(f=d,d=arguments[1]||{},h=2),(null==d||"object"!==typeof d&&"function"!==typeof d)&&(d={});h<p;++h)if(null!=(t=arguments[h]))for(n in t)i=l(d,n),d!==(r=l(t,n))&&(f&&r&&(s(r)||(c=o(r)))?(c?(c=!1,u=i&&o(i)?i:[]):u=i&&s(i)?i:{},a(d,{name:n,newValue:e(f,u,r)})):"undefined"!==typeof r&&a(d,{name:n,newValue:r}));return d}},122:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},809:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,o;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,o[r]))return!1;for(r=i;0!==r--;){var s=o[r];if(("_owner"!==s||!t.$$typeof)&&!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}},2590:(e,t,n)=>{"use strict";var i=n(4509),r=n(4096),o=n(4851),s=n(308),a=n(5317),l=n(1850),c=n(7225),u=n(8403),d=n(6985),h=d("root"),p=d("element"),f=d("text");function m(e,t,n){var i,o,s=n.schema,a=s,l=t.tagName,c={},d=[],h=-1;for(i in"html"===s.space&&"svg"===l.toLowerCase()&&(a=r,n.schema=a),t.properties)g(c,i,t.properties[i],n,l);if(n.vdom&&("html"===a.space?l=l.toUpperCase():c.namespace=u[a.space]),n.prefix&&(n.key++,c.key=n.prefix+n.key),t.children)for(;++h<t.children.length;)o=t.children[h],p(o)?d.push(m(e,o,n)):f(o)&&d.push(o.value);return n.schema=s,d.length?e.call(t,l,c,d):e.call(t,l,c)}function g(e,t,n,i,r){var u,d=o(i.schema,t);null==n||n!==n||!1===n&&(i.vue||i.vdom||i.hyperscript)||!n&&d.boolean&&(i.vue||i.vdom||i.hyperscript)||(n&&"object"===typeof n&&"length"in n&&(n=(d.commaSeparated?l:a).stringify(n)),d.boolean&&i.hyperscript&&(n=""),"style"===d.property&&"string"===typeof n&&(i.react||i.vue||i.vdom)&&(n=function(e,t){var n={};try{c(e,i)}catch(r){throw r.message=t+"[style]"+r.message.slice(9),r}return n;function i(e,t){"-ms-"===e.slice(0,4)&&(e="ms-"+e.slice(4)),n[e.replace(/-([a-z])/g,b)]=t}}(n,r)),i.vue?"style"!==d.property&&(u="attrs"):d.mustUseProperty||(i.vdom?"style"!==d.property&&(u="attributes"):i.hyperscript&&(u="attrs")),u?(e[u]||(e[u]={}),e[u][d.attribute]=n):d.space&&i.react?e[s[d.property]||d.property]=n:e[d.attribute]=n)}function v(e){return Boolean(e&&e.context&&e.cleanup)}function b(e,t){return t.toUpperCase()}e.exports=function(e,t,n){var o,s=n||{},a=function(e){var t=e&&e("div");return Boolean(t&&("_owner"in t||"_store"in t)&&null==t.key)}(e),l=function(e){var t=e&&e("div");return Boolean(t&&t.context&&t.context._isVue)}(e),c=function(e){return e&&"VirtualNode"===e("div").type}(e);if("function"!==typeof e)throw new Error("h is not a function");"string"===typeof s||"boolean"===typeof s?(o=s,s={}):o=s.prefix;if(h(t))t=1===t.children.length&&p(t.children[0])?t.children[0]:{type:"element",tagName:"div",properties:{},children:t.children};else if(!p(t))throw new Error("Expected root or element, not `"+(t&&t.type||t)+"`");return m(e,t,{schema:"svg"===s.space?r:i,prefix:null==o?a||l||c?"h-":null:o,key:0,react:a,vue:l,vdom:c,hyperscript:v(e)})}},2741:e=>{var t=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,n=/\n/g,i=/^\s*/,r=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,o=/^:\s*/,s=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,a=/^[;\s]*/,l=/^\s+|\s+$/g,c="";function u(e){return e?e.replace(l,c):c}e.exports=function(e,l){if("string"!==typeof e)throw new TypeError("First argument must be a string");if(!e)return[];l=l||{};var d=1,h=1;function p(e){var t=e.match(n);t&&(d+=t.length);var i=e.lastIndexOf("\n");h=~i?e.length-i:h+e.length}function f(){var e={line:d,column:h};return function(t){return t.position=new m(e),y(),t}}function m(e){this.start=e,this.end={line:d,column:h},this.source=l.source}m.prototype.content=e;var g=[];function v(t){var n=new Error(l.source+":"+d+":"+h+": "+t);if(n.reason=t,n.filename=l.source,n.line=d,n.column=h,n.source=e,!l.silent)throw n;g.push(n)}function b(t){var n=t.exec(e);if(n){var i=n[0];return p(i),e=e.slice(i.length),n}}function y(){b(i)}function x(e){var t;for(e=e||[];t=k();)!1!==t&&e.push(t);return e}function k(){var t=f();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;c!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,c===e.charAt(n-1))return v("End of comment missing");var i=e.slice(2,n-2);return h+=2,p(i),e=e.slice(n),h+=2,t({type:"comment",comment:i})}}function w(){var e=f(),n=b(r);if(n){if(k(),!b(o))return v("property missing ':'");var i=b(s),l=e({type:"declaration",property:u(n[0].replace(t,c)),value:i?u(i[0].replace(t,c)):c});return b(a),l}}return y(),function(){var e,t=[];for(x(t);e=w();)!1!==e&&(t.push(e),x(t));return t}()}},7225:(e,t,n)=>{var i=n(2741);e.exports=function(e,t){var n,r=null;if(!e||"string"!==typeof e)return r;for(var o,s,a=i(e),l="function"===typeof t,c=0,u=a.length;c<u;c++)o=(n=a[c]).property,s=n.value,l?t(o,s,n):s&&(r||(r={}),r[o]=s);return r}},6985:e=>{"use strict";function t(e){if(null==e)return n;if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"===typeof e)return"length"in e?function(e){var n=[],i=-1;for(;++i<e.length;)n[i]=t(e[i]);return r;function r(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(){return!0}e.exports=t},5837:e=>{e.exports=function(e){return null!=e&&null!=e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},7577:(e,t,n)=>{"use strict";var i=n(8723);e.exports=function(e,t){return function(e){return t;function t(t){var n=t&&o(t);return n&&r.call(e,n)?e[n]:null}}(function(e){var t={};if(!e||!e.type)throw new Error("mdast-util-definitions expected node");return i(e,"definition",n),t;function n(e){var n=o(e.identifier);r.call(t,n)||(t[n]=e)}}(e))};var r={}.hasOwnProperty;function o(e){return e.toUpperCase()}},1843:e=>{"use strict";function t(e){if(null==e)return n;if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"===typeof e)return"length"in e?function(e){var n=[],i=-1;for(;++i<e.length;)n[i]=t(e[i]);return r;function r(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(){return!0}e.exports=t},9594:e=>{e.exports=function(e){return e}},6083:(e,t,n)=>{"use strict";e.exports=l;var i=n(1843),r=n(9594),o=!0,s="skip",a=!1;function l(e,t,n,l){var c,u;"function"===typeof t&&"function"!==typeof n&&(l=n,n=t,t=null),u=i(t),c=l?-1:1,function e(i,d,h){var p,f="object"===typeof i&&null!==i?i:{};"string"===typeof f.type&&(p="string"===typeof f.tagName?f.tagName:"string"===typeof f.name?f.name:void 0,m.displayName="node ("+r(f.type+(p?"<"+p+">":""))+")");return m;function m(){var r,p,f=h.concat(i),m=[];if((!t||u(i,d,h[h.length-1]||null))&&(m=function(e){if(null!==e&&"object"===typeof e&&"length"in e)return e;if("number"===typeof e)return[o,e];return[e]}(n(i,h)),m[0]===a))return m;if(i.children&&m[0]!==s)for(p=(l?i.children.length:-1)+c;p>-1&&p<i.children.length;){if((r=e(i.children[p],p,f)())[0]===a)return r;p="number"===typeof r[1]?r[1]:p+c}return m}}(e,null,[])()}l.CONTINUE=o,l.SKIP=s,l.EXIT=a},8723:(e,t,n)=>{"use strict";e.exports=a;var i=n(6083),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},2638:e=>{"use strict";var t={};function n(e,i,r){var o,s,a,l,c,u="";for("string"!==typeof i&&(r=i,i=n.defaultChars),"undefined"===typeof r&&(r=!0),c=function(e){var n,i,r=t[e];if(r)return r;for(r=t[e]=[],n=0;n<128;n++)i=String.fromCharCode(n),/^[0-9a-z]$/i.test(i)?r.push(i):r.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2));for(n=0;n<e.length;n++)r[e.charCodeAt(n)]=e[n];return r}(i),o=0,s=e.length;o<s;o++)if(a=e.charCodeAt(o),r&&37===a&&o+2<s&&/^[0-9a-f]{2}$/i.test(e.slice(o+1,o+3)))u+=e.slice(o,o+3),o+=2;else if(a<128)u+=c[a];else if(a>=55296&&a<=57343){if(a>=55296&&a<=56319&&o+1<s&&(l=e.charCodeAt(o+1))>=56320&&l<=57343){u+=encodeURIComponent(e[o]+e[o+1]),o++;continue}u+="%EF%BF%BD"}else u+=encodeURIComponent(e[o]);return u}n.defaultChars=";/?:@&=+$,-_.!~*'()#",n.componentChars="-_.!~*'()",e.exports=n},6909:e=>{"use strict";var t;e.exports=function(e){var n,i="&"+e+";";if((t=t||document.createElement("i")).innerHTML=i,59===(n=t.textContent).charCodeAt(n.length-1)&&"semi"!==e)return!1;return n!==i&&n}},4851:(e,t,n)=>{"use strict";var i=n(4141),r=n(3275),o=n(2803),s="data";e.exports=function(e,t){var n=i(t),h=t,p=o;if(n in e.normal)return e.property[e.normal[n]];n.length>4&&n.slice(0,4)===s&&a.test(t)&&("-"===t.charAt(4)?h=function(e){var t=e.slice(5).replace(l,d);return s+t.charAt(0).toUpperCase()+t.slice(1)}(t):t=function(e){var t=e.slice(4);if(l.test(t))return e;t=t.replace(c,u),"-"!==t.charAt(0)&&(t="-"+t);return s+t}(t),p=r);return new p(h,t)};var a=/^data[-\w.:]+$/i,l=/-[a-z]/g,c=/[A-Z]/g;function u(e){return"-"+e.toLowerCase()}function d(e){return e.charAt(1).toUpperCase()}},4509:(e,t,n)=>{"use strict";var i=n(2723),r=n(9366),o=n(8599),s=n(9696),a=n(5349),l=n(7321);e.exports=i([o,r,s,a,l])},5349:(e,t,n)=>{"use strict";var i=n(3498),r=n(6155),o=i.booleanish,s=i.number,a=i.spaceSeparated;e.exports=r({transform:function(e,t){return"role"===t?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:o,ariaAutoComplete:null,ariaBusy:o,ariaChecked:o,ariaColCount:s,ariaColIndex:s,ariaColSpan:s,ariaControls:a,ariaCurrent:null,ariaDescribedBy:a,ariaDetails:null,ariaDisabled:o,ariaDropEffect:a,ariaErrorMessage:null,ariaExpanded:o,ariaFlowTo:a,ariaGrabbed:o,ariaHasPopup:null,ariaHidden:o,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:a,ariaLevel:s,ariaLive:null,ariaModal:o,ariaMultiLine:o,ariaMultiSelectable:o,ariaOrientation:null,ariaOwns:a,ariaPlaceholder:null,ariaPosInSet:s,ariaPressed:o,ariaReadOnly:o,ariaRelevant:null,ariaRequired:o,ariaRoleDescription:a,ariaRowCount:s,ariaRowIndex:s,ariaRowSpan:s,ariaSelected:o,ariaSetSize:s,ariaSort:null,ariaValueMax:s,ariaValueMin:s,ariaValueNow:s,ariaValueText:null,role:null}})},7321:(e,t,n)=>{"use strict";var i=n(3498),r=n(6155),o=n(9010),s=i.boolean,a=i.overloadedBoolean,l=i.booleanish,c=i.number,u=i.spaceSeparated,d=i.commaSeparated;e.exports=r({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:o,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:d,acceptCharset:u,accessKey:u,action:null,allow:null,allowFullScreen:s,allowPaymentRequest:s,allowUserMedia:s,alt:null,as:null,async:s,autoCapitalize:null,autoComplete:u,autoFocus:s,autoPlay:s,capture:s,charSet:null,checked:s,cite:null,className:u,cols:c,colSpan:null,content:null,contentEditable:l,controls:s,controlsList:u,coords:c|d,crossOrigin:null,data:null,dateTime:null,decoding:null,default:s,defer:s,dir:null,dirName:null,disabled:s,download:a,draggable:l,encType:null,enterKeyHint:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:s,formTarget:null,headers:u,height:c,hidden:s,high:c,href:null,hrefLang:null,htmlFor:u,httpEquiv:u,id:null,imageSizes:null,imageSrcSet:d,inputMode:null,integrity:null,is:null,isMap:s,itemId:null,itemProp:u,itemRef:u,itemScope:s,itemType:u,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:s,low:c,manifest:null,max:null,maxLength:c,media:null,method:null,min:null,minLength:c,multiple:s,muted:s,name:null,nonce:null,noModule:s,noValidate:s,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforePrint:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextMenu:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:s,optimum:c,pattern:null,ping:u,placeholder:null,playsInline:s,poster:null,preload:null,readOnly:s,referrerPolicy:null,rel:u,required:s,reversed:s,rows:c,rowSpan:c,sandbox:u,scope:null,scoped:s,seamless:s,selected:s,shape:null,size:c,sizes:null,slot:null,span:c,spellCheck:l,src:null,srcDoc:null,srcLang:null,srcSet:d,start:c,step:null,style:null,tabIndex:c,target:null,title:null,translate:null,type:null,typeMustMatch:s,useMap:null,value:l,width:c,wrap:null,align:null,aLink:null,archive:u,axis:null,background:null,bgColor:null,border:c,borderColor:null,bottomMargin:c,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:s,declare:s,event:null,face:null,frame:null,frameBorder:null,hSpace:c,leftMargin:c,link:null,longDesc:null,lowSrc:null,marginHeight:c,marginWidth:c,noResize:s,noHref:s,noShade:s,noWrap:s,object:null,profile:null,prompt:null,rev:null,rightMargin:c,rules:null,scheme:null,scrolling:l,standby:null,summary:null,text:null,topMargin:c,valueType:null,version:null,vAlign:null,vLink:null,vSpace:c,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:s,disableRemotePlayback:s,prefix:null,property:null,results:c,security:null,unselectable:null}})},3292:(e,t,n)=>{"use strict";var i=n(3498),r=n(6155),o=n(2367),s=i.boolean,a=i.number,l=i.spaceSeparated,c=i.commaSeparated,u=i.commaOrSpaceSeparated;e.exports=r({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:o,properties:{about:u,accentHeight:a,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:a,amplitude:a,arabicForm:null,ascent:a,attributeName:null,attributeType:null,azimuth:a,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:a,by:null,calcMode:null,capHeight:a,className:l,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:a,diffuseConstant:a,direction:null,display:null,dur:null,divisor:a,dominantBaseline:null,download:s,dx:null,dy:null,edgeMode:null,editable:null,elevation:a,enableBackground:null,end:null,event:null,exponent:a,externalResourcesRequired:null,fill:null,fillOpacity:a,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:c,g2:c,glyphName:c,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:a,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:a,horizOriginX:a,horizOriginY:a,id:null,ideographic:a,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:a,k:a,k1:a,k2:a,k3:a,k4:a,kernelMatrix:u,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:a,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:a,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:a,overlineThickness:a,paintOrder:null,panose1:null,path:null,pathLength:a,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:l,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:a,pointsAtY:a,pointsAtZ:a,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:u,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:u,rev:u,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:u,requiredFeatures:u,requiredFonts:u,requiredFormats:u,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:a,specularExponent:a,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:a,strikethroughThickness:a,string:null,stroke:null,strokeDashArray:u,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:a,strokeOpacity:a,strokeWidth:null,style:null,surfaceScale:a,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:u,tabIndex:a,tableValues:null,target:null,targetX:a,targetY:a,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:u,to:null,transform:null,u1:null,u2:null,underlinePosition:a,underlineThickness:a,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:a,values:null,vAlphabetic:a,vMathematical:a,vectorEffect:null,vHanging:a,vIdeographic:a,version:null,vertAdvY:a,vertOriginX:a,vertOriginY:a,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:a,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}})},9010:(e,t,n)=>{"use strict";var i=n(2367);e.exports=function(e,t){return i(e,t.toLowerCase())}},2367:e=>{"use strict";e.exports=function(e,t){return t in e?e[t]:t}},6155:(e,t,n)=>{"use strict";var i=n(4141),r=n(5224),o=n(3275);e.exports=function(e){var t,n,s=e.space,a=e.mustUseProperty||[],l=e.attributes||{},c=e.properties,u=e.transform,d={},h={};for(t in c)n=new o(t,u(l,t),c[t],s),-1!==a.indexOf(t)&&(n.mustUseProperty=!0),d[t]=n,h[i(t)]=t,h[i(n.attribute)]=t;return new r(d,h,s)}},3275:(e,t,n)=>{"use strict";var i=n(2803),r=n(3498);e.exports=a,a.prototype=new i,a.prototype.defined=!0;var o=["boolean","booleanish","overloadedBoolean","number","commaSeparated","spaceSeparated","commaOrSpaceSeparated"],s=o.length;function a(e,t,n,a){var c,u=-1;for(l(this,"space",a),i.call(this,e,t);++u<s;)l(this,c=o[u],(n&r[c])===r[c])}function l(e,t,n){n&&(e[t]=n)}},2803:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t){this.property=e,this.attribute=t}t.space=null,t.attribute=null,t.property=null,t.boolean=!1,t.booleanish=!1,t.overloadedBoolean=!1,t.number=!1,t.commaSeparated=!1,t.spaceSeparated=!1,t.commaOrSpaceSeparated=!1,t.mustUseProperty=!1,t.defined=!1},2723:(e,t,n)=>{"use strict";var i=n(49),r=n(5224);e.exports=function(e){var t,n,o=e.length,s=[],a=[],l=-1;for(;++l<o;)t=e[l],s.push(t.property),a.push(t.normal),n=t.space;return new r(i.apply(null,s),i.apply(null,a),n)}},5224:e=>{"use strict";e.exports=n;var t=n.prototype;function n(e,t,n){this.property=e,this.normal=t,n&&(this.space=n)}t.space=null,t.normal={},t.property={}},3498:(e,t)=>{"use strict";var n=0;function i(){return Math.pow(2,++n)}t.boolean=i(),t.booleanish=i(),t.overloadedBoolean=i(),t.number=i(),t.spaceSeparated=i(),t.commaSeparated=i(),t.commaOrSpaceSeparated=i()},9366:(e,t,n)=>{"use strict";var i=n(6155);e.exports=i({space:"xlink",transform:function(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}})},8599:(e,t,n)=>{"use strict";var i=n(6155);e.exports=i({space:"xml",transform:function(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}})},9696:(e,t,n)=>{"use strict";var i=n(6155),r=n(9010);e.exports=i({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:r,properties:{xmlns:null,xmlnsXLink:null}})},4141:e=>{"use strict";e.exports=function(e){return e.toLowerCase()}},4096:(e,t,n)=>{"use strict";var i=n(2723),r=n(9366),o=n(8599),s=n(9696),a=n(5349),l=n(3292);e.exports=i([o,r,s,a,l])},2730:(e,t,n)=>{"use strict";var i=n(5043),r=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function m(e,t,n,i,r,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function y(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!d.call(f,e)||!d.call(p,e)&&(h.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),_=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),O=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var j,L=Object.assign;function F(e){if(void 0===j)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);j=t&&t[1]||""}return"\n"+j+e}var B=!1;function U(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),o=i.stack.split("\n"),s=r.length-1,a=o.length-1;1<=s&&0<=a&&r[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(r[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||r[s]!==o[a]){var l="\n"+r[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function $(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case T:return"Profiler";case C:return"StrictMode";case R:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=q(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Y(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function J(e,t){Y(e,t);var n=H(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),i=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Ce=null;function Te(e){if(e=yr(e)){if("function"!==typeof we)throw Error(o(280));var t=e.stateNode;t&&(t=kr(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?Ce?Ce.push(e):Ce=[e]:Se=e}function _e(){if(Se){var e=Se,t=Ce;if(Ce=Se=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ie(e,t){return e(t)}function Re(){}var Pe=!1;function Ae(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ie(e,t,n)}finally{Pe=!1,(null!==Se||null!==Ce)&&(Re(),_e())}}function Oe(e,t){var n=e.stateNode;if(null===n)return null;var i=kr(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var Me=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Me=!1}function De(e,t,n,i,r,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var je=!1,Le=null,Fe=!1,Be=null,Ue={onError:function(e){je=!0,Le=e}};function $e(e,t,n,i,r,o,s,a,l){je=!1,Le=null,De.apply(Ue,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(o(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return He(r),e;if(s===i)return He(r),t;s=s.sibling}throw Error(o(188))}if(n.return!==i.return)n=r,i=s;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=s;break}if(l===i){a=!0,i=r,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,i=r;break}if(l===i){a=!0,i=s,n=r;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==i)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Qe=r.unstable_shouldYield,Xe=r.unstable_requestPaint,Ye=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,o=e.pingedLanes,s=268435455&n;if(0!==s){var a=s&~r;0!==a?i=dt(a):0!==(o&=s)&&(i=dt(o))}else 0!==(s=n&~r)?i=dt(s):0!==o&&(i=dt(o));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(o=t&-t)||16===r&&0!==(4194240&o)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-st(t)),i|=e[n],t&=~r;return i}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-st(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var yt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,St,Ct,Tt,Et=!1,_t=[],It=null,Rt=null,Pt=null,At=new Map,Ot=new Map,Mt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Rt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ot.delete(t.pointerId)}}function jt(e,t,n,i,r,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Lt(e){var t=br(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void Tt(e.priority,(function(){St(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);xe=i,n.target.dispatchEvent(i),xe=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function Ut(){Et=!1,null!==It&&Ft(It)&&(It=null),null!==Rt&&Ft(Rt)&&(Rt=null),null!==Pt&&Ft(Pt)&&(Pt=null),At.forEach(Bt),Ot.forEach(Bt)}function $t(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function zt(e){function t(t){return $t(t,e)}if(0<_t.length){$t(_t[0],e);for(var n=1;n<_t.length;n++){var i=_t[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==It&&$t(It,e),null!==Rt&&$t(Rt,e),null!==Pt&&$t(Pt,e),At.forEach(t),Ot.forEach(t),n=0;n<Mt.length;n++)(i=Mt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Mt.shift()}var Vt=x.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,i){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=1,Gt(e,t,n,i)}finally{yt=r,Vt.transition=o}}function Wt(e,t,n,i){var r=yt,o=Vt.transition;Vt.transition=null;try{yt=4,Gt(e,t,n,i)}finally{yt=r,Vt.transition=o}}function Gt(e,t,n,i){if(Ht){var r=Qt(e,t,n,i);if(null===r)Hi(e,t,i,Kt,n),Dt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return It=jt(It,e,t,n,i,r),!0;case"dragenter":return Rt=jt(Rt,e,t,n,i,r),!0;case"mouseover":return Pt=jt(Pt,e,t,n,i,r),!0;case"pointerover":var o=r.pointerId;return At.set(o,jt(At.get(o)||null,e,t,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,Ot.set(o,jt(Ot.get(o)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Dt(e,i),4&t&&-1<Nt.indexOf(e)){for(;null!==r;){var o=yr(r);if(null!==o&&kt(o),null===(o=Qt(e,t,n,i))&&Hi(e,t,i,Kt,n),o===r)break;r=o}null!==r&&i.stopPropagation()}else Hi(e,t,i,null,n)}}var Kt=null;function Qt(e,t,n,i){if(Kt=null,null!==(e=br(e=ke(i))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Yt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in Yt?Yt.value:Yt.textContent,o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var s=i-e;for(t=1;t<=s&&n[i-t]===r[o-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,i,r,o){for(var s in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(r):r[s]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),dn=L({},cn,{view:0,detail:0}),hn=on(dn),pn=L({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(sn=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=sn=0,ln=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:an}}),fn=on(pn),mn=on(L({},pn,{dataTransfer:0})),gn=on(L({},dn,{relatedTarget:0})),vn=on(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=on(bn),xn=on(L({},cn,{data:0})),kn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Tn(){return Cn}var En=L({},dn,{key:function(e){if(e.key){var t=kn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=on(En),In=on(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Rn=on(L({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),Pn=on(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),On=on(An),Mn=[9,13,27,32],Nn=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var jn=u&&"TextEvent"in window&&!Dn,Ln=u&&(!Nn||Dn&&8<Dn&&11>=Dn),Fn=String.fromCharCode(32),Bn=!1;function Un(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,i){Ee(i),0<(t=Wi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function Kn(e){Fi(e,0)}function Qn(e){if(G(xr(e)))return e}function Xn(e,t){if("change"===e)return t}var Yn=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;Yn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Wn&&(Wn.detachEvent("onpropertychange",ni),Gn=Wn=null)}function ni(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];qn(t,Gn,e,ke(e)),Ae(Kn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Gn=n,(Wn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function oi(e,t){if("click"===e)return Qn(t)}function si(e,t){if("input"===e||"change"===e)return Qn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!d.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function di(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?di(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hi(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function pi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fi(e){var t=hi(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&di(n.ownerDocument.documentElement,n)){if(null!==i&&pi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,o=Math.min(i.start,r);i=void 0===i.end?o:Math.min(i.end,r),!e.extend&&o>i&&(r=i,i=o,o=r),r=ui(n,o);var s=ui(n,i);r&&s&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),o>i?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,bi=null,yi=!1;function xi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==K(i)||("selectionStart"in(i=gi)&&pi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},bi&&li(bi,i)||(bi=i,0<(i=Wi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function ki(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionend:ki("Transition","TransitionEnd")},Si={},Ci={};function Ti(e){if(Si[e])return Si[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ci)return Si[e]=n[t];return e}u&&(Ci=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ei=Ti("animationend"),_i=Ti("animationiteration"),Ii=Ti("animationstart"),Ri=Ti("transitionend"),Pi=new Map,Ai="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Oi(e,t){Pi.set(e,t),l(t,[e])}for(var Mi=0;Mi<Ai.length;Mi++){var Ni=Ai[Mi];Oi(Ni.toLowerCase(),"on"+(Ni[0].toUpperCase()+Ni.slice(1)))}Oi(Ei,"onAnimationEnd"),Oi(_i,"onAnimationIteration"),Oi(Ii,"onAnimationStart"),Oi("dblclick","onDoubleClick"),Oi("focusin","onFocus"),Oi("focusout","onBlur"),Oi(Ri,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Di="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ji=new Set("cancel close invalid load scroll toggle".split(" ").concat(Di));function Li(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,s,a,l,c){if($e.apply(this,arguments),je){if(!je)throw Error(o(198));var u=Le;je=!1,Le=null,Fe||(Fe=!0,Be=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var o=void 0;if(t)for(var s=i.length-1;0<=s;s--){var a=i[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&r.isPropagationStopped())break e;Li(r,a,c),o=l}else for(s=0;s<i.length;s++){if(l=(a=i[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&r.isPropagationStopped())break e;Li(r,a,c),o=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Bi(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Vi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),Vi(n,e,i,t)}var $i="_reactListening"+Math.random().toString(36).slice(2);function zi(e){if(!e[$i]){e[$i]=!0,s.forEach((function(t){"selectionchange"!==t&&(ji.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$i]||(t[$i]=!0,Ui("selectionchange",!1,t))}}function Vi(e,t,n,i){switch(Xt(t)){case 1:var r=qt;break;case 4:r=Wt;break;default:r=Gt}n=r.bind(null,t,n,e),r=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Hi(e,t,n,i,r){var o=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===s)for(s=i.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;s=s.return}for(;null!==a;){if(null===(s=br(a)))return;if(5===(l=s.tag)||6===l){i=o=s;continue e}a=a.parentNode}}i=i.return}Ae((function(){var i=o,r=ke(n),s=[];e:{var a=Pi.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Rn;break;case Ei:case _i:case Ii:l=vn;break;case Ri:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=On;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&(null!=(m=Oe(f,h))&&u.push(qi(f,m,p)))),d)break;f=f.return}0<u.length&&(a=new l(a,c,null,n,r),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!br(c)&&!c[fr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?br(c):null)&&(c!==(d=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=fn,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(u=In,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?a:xr(l),p=null==c?a:xr(c),(a=new u(m,f+"leave",l,n,r)).target=d,a.relatedTarget=p,m=null,br(r)===i&&((u=new u(h,f+"enter",c,n,r)).target=p,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,f=0,p=u=l;p;p=Gi(p))f++;for(p=0,m=h;m;m=Gi(m))p++;for(;0<f-p;)u=Gi(u),f--;for(;0<p-f;)h=Gi(h),p--;for(;f--;){if(u===h||null!==h&&u===h.alternate)break e;u=Gi(u),h=Gi(h)}u=null}else u=null;null!==l&&Ki(s,a,l,u,!1),null!==c&&null!==d&&Ki(s,d,c,u,!0)}if("select"===(l=(a=i?xr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(Hn(a))if(Yn)g=si;else{g=ri;var v=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=oi);switch(g&&(g=g(e,i))?qn(s,g,n,r):(v&&v(e,a,i),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=i?xr(i):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,bi=null);break;case"focusout":bi=vi=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,xi(s,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":xi(s,n,r)}var b;if(Nn)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else zn?Un(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==y?"onCompositionEnd"===y&&zn&&(b=en()):(Jt="value"in(Yt=r)?Yt.value:Yt.textContent,zn=!0)),0<(v=Wi(i,y)).length&&(y=new xn(y,e,null,n,r),s.push({event:y,listeners:v}),b?y.data=b:null!==(b=$n(n))&&(y.data=b))),(b=jn?function(e,t){switch(e){case"compositionend":return $n(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Nn&&Un(e,t)?(e=en(),Zt=Jt=Yt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Wi(i,"onBeforeInput")).length&&(r=new xn("onBeforeInput","beforeinput",null,n,r),s.push({event:r,listeners:i}),r.data=b))}Fi(s,t)}))}function qi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Oe(e,n))&&i.unshift(qi(e,o,r)),null!=(o=Oe(e,t))&&i.push(qi(e,o,r))),e=e.return}return i}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ki(e,t,n,i,r){for(var o=t._reactName,s=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Oe(n,o))&&s.unshift(qi(n,l,a)):r||null!=(l=Oe(n,o))&&s.push(qi(n,l,a))),n=n.return}0!==s.length&&e.push({event:t,listeners:s})}var Qi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function Yi(e){return("string"===typeof e?e:""+e).replace(Qi,"\n").replace(Xi,"")}function Ji(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(o(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,or="function"===typeof Promise?Promise:void 0,sr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof or?function(e){return or.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void zt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);zt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var dr=Math.random().toString(36).slice(2),hr="__reactFiber$"+dr,pr="__reactProps$"+dr,fr="__reactContainer$"+dr,mr="__reactEvents$"+dr,gr="__reactListeners$"+dr,vr="__reactHandles$"+dr;function br(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[hr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function kr(e){return e[pr]||null}var wr=[],Sr=-1;function Cr(e){return{current:e}}function Tr(e){0>Sr||(e.current=wr[Sr],wr[Sr]=null,Sr--)}function Er(e,t){Sr++,wr[Sr]=e.current,e.current=t}var _r={},Ir=Cr(_r),Rr=Cr(!1),Pr=_r;function Ar(e,t){var n=e.type.contextTypes;if(!n)return _r;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Or(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(){Tr(Rr),Tr(Ir)}function Nr(e,t,n){if(Ir.current!==_r)throw Error(o(168));Er(Ir,t),Er(Rr,n)}function Dr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(o(108,V(e)||"Unknown",r));return L({},n,i)}function jr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Pr=Ir.current,Er(Ir,e),Er(Rr,Rr.current),!0}function Lr(e,t,n){var i=e.stateNode;if(!i)throw Error(o(169));n?(e=Dr(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Tr(Rr),Tr(Ir),Er(Ir,e)):Tr(Rr),Er(Rr,n)}var Fr=null,Br=!1,Ur=!1;function $r(e){null===Fr?Fr=[e]:Fr.push(e)}function zr(){if(!Ur&&null!==Fr){Ur=!0;var e=0,t=yt;try{var n=Fr;for(yt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,Br=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Ge(Ze,zr),r}finally{yt=t,Ur=!1}}return null}var Vr=[],Hr=0,qr=null,Wr=0,Gr=[],Kr=0,Qr=null,Xr=1,Yr="";function Jr(e,t){Vr[Hr++]=Wr,Vr[Hr++]=qr,qr=e,Wr=t}function Zr(e,t,n){Gr[Kr++]=Xr,Gr[Kr++]=Yr,Gr[Kr++]=Qr,Qr=e;var i=Xr;e=Yr;var r=32-st(i)-1;i&=~(1<<r),n+=1;var o=32-st(t)+r;if(30<o){var s=r-r%5;o=(i&(1<<s)-1).toString(32),i>>=s,r-=s,Xr=1<<32-st(t)+r|n<<r|i,Yr=o+e}else Xr=1<<o|n<<r|i,Yr=e}function eo(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function to(e){for(;e===qr;)qr=Vr[--Hr],Vr[Hr]=null,Wr=Vr[--Hr],Vr[Hr]=null;for(;e===Qr;)Qr=Gr[--Kr],Gr[Kr]=null,Yr=Gr[--Kr],Gr[Kr]=null,Xr=Gr[--Kr],Gr[Kr]=null}var no=null,io=null,ro=!1,oo=null;function so(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ao(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,io=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qr?{id:Xr,overflow:Yr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,io=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(ro){var t=io;if(t){var n=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=cr(n.nextSibling);var i=no;t&&ao(e,t)?so(i,n):(e.flags=-4097&e.flags|2,ro=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,ro=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!ro)return uo(e),ro=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=io)){if(lo(e))throw po(),Error(o(418));for(;t;)so(e,t),t=cr(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=no?cr(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=cr(e.nextSibling)}function fo(){io=no=null,ro=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var i=n.stateNode}if(!i)throw Error(o(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function bo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yo(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Lc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var o=n.type;return o===S?d(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===O&&yo(o)===t.type)?((i=r(t,n.props)).ref=vo(e,t,n),i.return=e,i):((i=Nc(n.type,n.key,n.props,null,e.mode,i)).ref=vo(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function d(e,t,n,i,o){return null===t||7!==t.tag?((t=Dc(n,e.mode,i,o)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case O:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Dc(t,e.mode,n,null)).return=e,t;bo(e,t)}return null}function p(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case k:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case O:return p(e,t,(r=n._init)(n._payload),i)}if(te(n)||D(n))return null!==r?null:d(e,t,n,i,null);bo(e,n)}return null}function f(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case k:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case O:return f(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||D(i))return d(t,e=e.get(n)||null,i,r,null);bo(t,i)}return null}function m(r,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=p(r,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(r,d),o=s(v,o,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(r,d),ro&&Jr(r,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(r,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return ro&&Jr(r,m),c}for(d=i(r,d);m<a.length;m++)null!==(g=f(d,r,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(r,e)})),ro&&Jr(r,m),c}function g(r,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,v=null,b=l.next();null!==m&&!b.done;g++,b=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var y=p(r,m,b.value,c);if(null===y){null===m&&(m=v);break}e&&m&&null===y.alternate&&t(r,m),a=s(y,a,g),null===d?u=y:d.sibling=y,d=y,m=v}if(b.done)return n(r,m),ro&&Jr(r,g),u;if(null===m){for(;!b.done;g++,b=l.next())null!==(b=h(r,b.value,c))&&(a=s(b,a,g),null===d?u=b:d.sibling=b,d=b);return ro&&Jr(r,g),u}for(m=i(r,m);!b.done;g++,b=l.next())null!==(b=f(m,r,g,b.value,c))&&(e&&null!==b.alternate&&m.delete(null===b.key?g:b.key),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b);return e&&m.forEach((function(e){return t(r,e)})),ro&&Jr(r,g),u}return function e(i,o,s,l){if("object"===typeof s&&null!==s&&s.type===S&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case k:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===S){if(7===u.tag){n(i,u.sibling),(o=r(u,s.props.children)).return=i,i=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===O&&yo(c)===u.type){n(i,u.sibling),(o=r(u,s.props)).ref=vo(i,u,s),o.return=i,i=o;break e}n(i,u);break}t(i,u),u=u.sibling}s.type===S?((o=Dc(s.props.children,i.mode,l,s.key)).return=i,i=o):((l=Nc(s.type,s.key,s.props,null,i.mode,l)).ref=vo(i,o,s),l.return=i,i=l)}return a(i);case w:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(i,o.sibling),(o=r(o,s.children||[])).return=i,i=o;break e}n(i,o);break}t(i,o),o=o.sibling}(o=Fc(s,i.mode,l)).return=i,i=o}return a(i);case O:return e(i,o,(u=s._init)(s._payload),l)}if(te(s))return m(i,o,s,l);if(D(s))return g(i,o,s,l);bo(i,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(i,o.sibling),(o=r(o,s)).return=i,i=o):(n(i,o),(o=Lc(s,i.mode,l)).return=i,i=o),a(i)):n(i,o)}}var ko=xo(!0),wo=xo(!1),So=Cr(null),Co=null,To=null,Eo=null;function _o(){Eo=To=Co=null}function Io(e){var t=So.current;Tr(So),e._currentValue=t}function Ro(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Po(e,t){Co=e,Eo=To=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ya=!0),e.firstContext=null)}function Ao(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===To){if(null===Co)throw Error(o(308));To=e,Co.dependencies={lanes:0,firstContext:e}}else To=To.next=e;return t}var Oo=null;function Mo(e){null===Oo?Oo=[e]:Oo.push(e)}function No(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Mo(t)):(n.next=r.next,r.next=n),t.interleaved=n,Do(e,i)}function Do(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var jo=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Il)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Do(e,n)}return null===(r=i.interleaved)?(t.next=t,Mo(i)):(t.next=r.next,r.next=t),i.interleaved=t,Do(e,n)}function $o(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}function zo(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?r=o=t:o=o.next=t}else r=o=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vo(e,t,n,i){var r=e.updateQueue;jo=!1;var o=r.firstBaseUpdate,s=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=r.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,p=a.eventTime;if((i&h)===h){null!==u&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var f=e,m=a;switch(h=t,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=m.payload)?f.call(p,d,h):f)||void 0===h)break e;d=L({},d,h);break e;case 2:jo=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[a]:h.push(a))}else p={eventTime:p,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=p,l=d):u=u.next=p,s|=h;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(h=a).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===u&&(l=d),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{s|=r.lane,r=r.next}while(r!==t)}else null===o&&(r.shared.lanes=0);jl|=s,e.lanes=s,e.memoizedState=d}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(o(191,r));r.call(i)}}}var qo={},Wo=Cr(qo),Go=Cr(qo),Ko=Cr(qo);function Qo(e){if(e===qo)throw Error(o(174));return e}function Xo(e,t){switch(Er(Ko,t),Er(Go,e),Er(Wo,qo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Tr(Wo),Er(Wo,t)}function Yo(){Tr(Wo),Tr(Go),Tr(Ko)}function Jo(e){Qo(Ko.current);var t=Qo(Wo.current),n=le(t,e.type);t!==n&&(Er(Go,e),Er(Wo,n))}function Zo(e){Go.current===e&&(Tr(Wo),Tr(Go))}var es=Cr(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ns=[];function is(){for(var e=0;e<ns.length;e++)ns[e]._workInProgressVersionPrimary=null;ns.length=0}var rs=x.ReactCurrentDispatcher,os=x.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,ps=0;function fs(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function gs(e,t,n,i,r,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,rs.current=null===e||null===e.memoizedState?Zs:ea,e=n(i,r),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,rs.current=ta,e=n(i,r)}while(ds)}if(rs.current=Js,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function vs(){var e=0!==hs;return hs=0,e}function bs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function ys(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function xs(e,t){return"function"===typeof t?t(e):t}function ks(e){var t=ys(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=ls,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var a=r.next;r.next=s.next,s.next=a}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=i):c=c.next=h,as.lanes|=d,jl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(ya=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,as.lanes|=s,jl|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ws(e){var t=ys(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{s=e(s,a.action),a=a.next}while(a!==r);ai(s,t.memoizedState)||(ya=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function Ss(){}function Cs(e,t){var n=as,i=ys(),r=t(),s=!ai(i.memoizedState,r);if(s&&(i.memoizedState=r,ya=!0),i=i.queue,js(_s.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(n.flags|=2048,As(9,Es.bind(null,n,i,r,t),void 0,null),null===Rl)throw Error(o(349));0!==(30&ss)||Ts(n,t,r)}return r}function Ts(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Es(e,t,n,i){t.value=n,t.getSnapshot=i,Is(t)&&Rs(e)}function _s(e,t,n){return n((function(){Is(t)&&Rs(e)}))}function Is(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Rs(e){var t=Do(e,1);null!==t&&nc(t,e,1,-1)}function Ps(e){var t=bs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ks.bind(null,as,e),[t.memoizedState,e]}function As(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Os(){return ys().memoizedState}function Ms(e,t,n,i){var r=bs();as.flags|=e,r.memoizedState=As(1|t,n,void 0,void 0===i?null:i)}function Ns(e,t,n,i){var r=ys();i=void 0===i?null:i;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==i&&ms(i,s.deps))return void(r.memoizedState=As(t,n,o,i))}as.flags|=e,r.memoizedState=As(1|t,n,o,i)}function Ds(e,t){return Ms(8390656,8,e,t)}function js(e,t){return Ns(2048,8,e,t)}function Ls(e,t){return Ns(4,2,e,t)}function Fs(e,t){return Ns(4,4,e,t)}function Bs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Us(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ns(4,4,Bs.bind(null,t,e),n)}function $s(){}function zs(e,t){var n=ys();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Vs(e,t){var n=ys();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ms(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Hs(e,t,n){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ya=!0),e.memoizedState=n):(ai(n,t)||(n=mt(),as.lanes|=n,jl|=n,e.baseState=!0),t)}function qs(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var i=os.transition;os.transition={};try{e(!1),t()}finally{yt=n,os.transition=i}}function Ws(){return ys().memoizedState}function Gs(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Qs(e))Xs(t,n);else if(null!==(n=No(e,t,n,i))){nc(n,e,i,ec()),Ys(n,t,i)}}function Ks(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qs(e))Xs(t,r);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,s)){var l=t.interleaved;return null===l?(r.next=r,Mo(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=No(e,t,r,i))&&(nc(n,e,i,r=ec()),Ys(n,t,i))}}function Qs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Xs(e,t){ds=us=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ys(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,bt(e,n)}}var Js={readContext:Ao,useCallback:fs,useContext:fs,useEffect:fs,useImperativeHandle:fs,useInsertionEffect:fs,useLayoutEffect:fs,useMemo:fs,useReducer:fs,useRef:fs,useState:fs,useDebugValue:fs,useDeferredValue:fs,useTransition:fs,useMutableSource:fs,useSyncExternalStore:fs,useId:fs,unstable_isNewReconciler:!1},Zs={readContext:Ao,useCallback:function(e,t){return bs().memoizedState=[e,void 0===t?null:t],e},useContext:Ao,useEffect:Ds,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ms(4194308,4,Bs.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ms(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ms(4,2,e,t)},useMemo:function(e,t){var n=bs();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=bs();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Gs.bind(null,as,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},bs().memoizedState=e},useState:Ps,useDebugValue:$s,useDeferredValue:function(e){return bs().memoizedState=e},useTransition:function(){var e=Ps(!1),t=e[0];return e=qs.bind(null,e[1]),bs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=as,r=bs();if(ro){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Rl)throw Error(o(349));0!==(30&ss)||Ts(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Ds(_s.bind(null,i,s,e),[e]),i.flags|=2048,As(9,Es.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=bs(),t=Rl.identifierPrefix;if(ro){var n=Yr;t=":"+t+"R"+(n=(Xr&~(1<<32-st(Xr)-1)).toString(32)+n),0<(n=hs++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ps++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:Ao,useCallback:zs,useContext:Ao,useEffect:js,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Vs,useReducer:ks,useRef:Os,useState:function(){return ks(xs)},useDebugValue:$s,useDeferredValue:function(e){return Hs(ys(),ls.memoizedState,e)},useTransition:function(){return[ks(xs)[0],ys().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Cs,useId:Ws,unstable_isNewReconciler:!1},ta={readContext:Ao,useCallback:zs,useContext:Ao,useEffect:js,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Fs,useMemo:Vs,useReducer:ws,useRef:Os,useState:function(){return ws(xs)},useDebugValue:$s,useDeferredValue:function(e){var t=ys();return null===ls?t.memoizedState=e:Hs(t,ls.memoizedState,e)},useTransition:function(){return[ws(xs)[0],ys().memoizedState]},useMutableSource:Ss,useSyncExternalStore:Cs,useId:Ws,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ia(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ra={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=Bo(i,r);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,r))&&(nc(t,e,r,i),$o(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),o=Bo(i,r);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Uo(e,o,r))&&(nc(t,e,r,i),$o(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Bo(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Uo(e,r,i))&&(nc(t,e,i,n),$o(t,e,i))}};function oa(e,t,n,i,r,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function sa(e,t,n){var i=!1,r=_r,o=t.contextType;return"object"===typeof o&&null!==o?o=Ao(o):(r=Or(t)?Pr:Ir.current,o=(i=null!==(i=t.contextTypes)&&void 0!==i)?Ar(e,r):_r),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ra,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ra.enqueueReplaceState(t,t.state,null)}function la(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?r.context=Ao(o):(o=Or(t)?Pr:Ir.current,r.context=Ar(e,o)),r.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(ia(e,t,o,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&ra.enqueueReplaceState(r,r.state,null),Vo(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var n="",i=t;do{n+=$(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:r,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Bo(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hl||(Hl=!0,ql=i),da(0,t)},n}function fa(e,t,n){(n=Bo(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ha;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Bo(-1,1)).tag=2,Uo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ba=x.ReactCurrentOwner,ya=!1;function xa(e,t,n,i){t.child=null===e?wo(t,null,n,i):ko(t,e.child,n,i)}function ka(e,t,n,i,r){n=n.render;var o=t.ref;return Po(t,r),i=gs(e,t,n,i,o,r),n=vs(),null===e||ya?(ro&&n&&eo(t),t.flags|=1,xa(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function wa(e,t,n,i,r){if(null===e){var o=n.type;return"function"!==typeof o||Oc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Sa(e,t,o,i,r))}if(o=e.child,0===(e.lanes&r)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:li)(s,i)&&e.ref===t.ref)return Ha(e,t,r)}return t.flags|=1,(e=Mc(o,i)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,i,r){if(null!==e){var o=e.memoizedProps;if(li(o,i)&&e.ref===t.ref){if(ya=!1,t.pendingProps=i=o,0===(e.lanes&r))return t.lanes=e.lanes,Ha(e,t,r);0!==(131072&e.flags)&&(ya=!0)}}return Ea(e,t,n,i,r)}function Ca(e,t,n){var i=t.pendingProps,r=i.children,o=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ml,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Ml,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==o?o.baseLanes:n,Er(Ml,Ol),Ol|=i}else null!==o?(i=o.baseLanes|n,t.memoizedState=null):i=n,Er(Ml,Ol),Ol|=i;return xa(e,t,r,n),t.child}function Ta(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ea(e,t,n,i,r){var o=Or(n)?Pr:Ir.current;return o=Ar(t,o),Po(t,r),n=gs(e,t,n,i,o,r),i=vs(),null===e||ya?(ro&&i&&eo(t),t.flags|=1,xa(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function _a(e,t,n,i,r){if(Or(n)){var o=!0;jr(t)}else o=!1;if(Po(t,r),null===t.stateNode)Va(e,t),sa(t,n,i),la(t,n,i,r),i=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ao(c):c=Ar(t,c=Or(n)?Pr:Ir.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==i||l!==c)&&aa(t,s,i,c),jo=!1;var h=t.memoizedState;s.state=h,Vo(t,i,s,r),l=t.memoizedState,a!==i||h!==l||Rr.current||jo?("function"===typeof u&&(ia(t,n,u,i),l=t.memoizedState),(a=jo||oa(t,n,a,i,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),s.props=i,s.state=l,s.context=c,i=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),i=!1)}else{s=t.stateNode,Fo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:na(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ao(l):l=Ar(t,l=Or(n)?Pr:Ir.current);var p=n.getDerivedStateFromProps;(u="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,i,l),jo=!1,h=t.memoizedState,s.state=h,Vo(t,i,s,r);var f=t.memoizedState;a!==d||h!==f||Rr.current||jo?("function"===typeof p&&(ia(t,n,p,i),f=t.memoizedState),(c=jo||oa(t,n,c,i,h,f,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,f,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,f,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=f),s.props=i,s.state=f,s.context=l,i=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),i=!1)}return Ia(e,t,n,i,o,r)}function Ia(e,t,n,i,r,o){Ta(e,t);var s=0!==(128&t.flags);if(!i&&!s)return r&&Lr(t,n,!1),Ha(e,t,o);i=t.stateNode,ba.current=t;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=ko(t,e.child,null,o),t.child=ko(t,null,a,o)):xa(e,t,a,o),t.memoizedState=i.state,r&&Lr(t,n,!0),t.child}function Ra(e){var t=e.stateNode;t.pendingContext?Nr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Nr(0,t.context,!1),Xo(e,t.containerInfo)}function Pa(e,t,n,i,r){return fo(),mo(r),t.flags|=256,xa(e,t,n,i),t.child}var Aa,Oa,Ma,Na,Da={dehydrated:null,treeContext:null,retryLane:0};function ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var i,r=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Er(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=jc(l,r,0,null),e=Dc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ja(n),t.memoizedState=Da,e):Fa(t,l));if(null!==(s=e.memoizedState)&&null!==(i=s.dehydrated))return function(e,t,n,i,r,s,a){if(n)return 256&t.flags?(t.flags&=-257,Ba(e,t,a,i=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,r=t.mode,i=jc({mode:"visible",children:i.children},r,0,null),(s=Dc(s,r,a,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&ko(t,e.child,null,a),t.child.memoizedState=ja(a),t.memoizedState=Da,s);if(0===(1&t.mode))return Ba(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ba(e,t,a,i=ua(s=Error(o(419)),i,void 0))}if(l=0!==(a&e.childLanes),ya||l){if(null!==(i=Rl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==s.retryLane&&(s.retryLane=r,Do(e,r),nc(i,e,r,-1))}return mc(),Ba(e,t,a,i=ua(Error(o(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,io=cr(r.nextSibling),no=t,ro=!0,oo=null,null!==e&&(Gr[Kr++]=Xr,Gr[Kr++]=Yr,Gr[Kr++]=Qr,Xr=e.id,Yr=e.overflow,Qr=t),t=Fa(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,s,n);if(a){a=r.fallback,l=t.mode,i=(s=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==i?a=Mc(i,a):(a=Dc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?ja(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Da,r}return e=(a=e.child).sibling,r=Mc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fa(e,t){return(t=jc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ba(e,t,n,i){return null!==i&&mo(i),ko(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),Ro(e.return,t,n)}function $a(e,t,n,i,r){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=r)}function za(e,t,n){var i=t.pendingProps,r=i.revealOrder,o=i.tail;if(xa(e,t,i.children,n),0!==(2&(i=es.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,n,t);else if(19===e.tag)Ua(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er(es,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ts(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),$a(t,!1,r,n,o);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ts(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}$a(t,!0,n,null,o);break;case"together":$a(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),jl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Ga(e,t,n){var i=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return Or(t.type)&&Mr(),Wa(t),null;case 3:return i=t.stateNode,Yo(),Tr(Rr),Tr(Ir),is(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Oa(e,t),Wa(t),null;case 5:Zo(t);var r=Qo(Ko.current);if(n=t.type,null!==e&&null!=t.stateNode)Ma(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(o(166));return Wa(t),null}if(e=Qo(Wo.current),ho(t)){i=t.stateNode,n=t.type;var s=t.memoizedProps;switch(i[hr]=t,i[pr]=s,e=0!==(1&t.mode),n){case"dialog":Bi("cancel",i),Bi("close",i);break;case"iframe":case"object":case"embed":Bi("load",i);break;case"video":case"audio":for(r=0;r<Di.length;r++)Bi(Di[r],i);break;case"source":Bi("error",i);break;case"img":case"image":case"link":Bi("error",i),Bi("load",i);break;case"details":Bi("toggle",i);break;case"input":X(i,s),Bi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Bi("invalid",i);break;case"textarea":re(i,s),Bi("invalid",i)}for(var l in be(n,s),r=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Bi("scroll",i)}switch(n){case"input":W(i),Z(i,s,!0);break;case"textarea":W(i),se(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[hr]=t,e[pr]=i,Aa(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,i),n){case"dialog":Bi("cancel",e),Bi("close",e),r=i;break;case"iframe":case"object":case"embed":Bi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Di.length;r++)Bi(Di[r],e);r=i;break;case"source":Bi("error",e),r=i;break;case"img":case"image":case"link":Bi("error",e),Bi("load",e),r=i;break;case"details":Bi("toggle",e),r=i;break;case"input":X(e,i),r=Q(e,i),Bi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=L({},i,{value:void 0}),Bi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),Bi("invalid",e)}for(s in be(n,r),c=r)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Bi("scroll",e):null!=u&&y(e,s,u,l))}switch(n){case"input":W(e),Z(e,i,!1);break;case"textarea":W(e),se(e);break;case"option":null!=i.value&&e.setAttribute("value",""+H(i.value));break;case"select":e.multiple=!!i.multiple,null!=(s=i.value)?ne(e,!!i.multiple,s,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Na(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(o(166));if(n=Qo(Ko.current),Qo(Wo.current),ho(t)){if(i=t.stateNode,n=t.memoizedProps,i[hr]=t,(s=i.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}s&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[hr]=t,t.stateNode=i}return Wa(t),null;case 13:if(Tr(es),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ro&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),fo(),t.flags|=98560,s=!1;else if(s=ho(t),null!==i&&null!==i.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hr]=t}else fo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===Nl&&(Nl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Yo(),Oa(e,t),null===e&&zi(t.stateNode.containerInfo),Wa(t),null;case 10:return Io(t.type._context),Wa(t),null;case 19:if(Tr(es),null===(s=t.memoizedState))return Wa(t),null;if(i=0!==(128&t.flags),null===(l=s.rendering))if(i)qa(s,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,qa(s,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ye()>zl&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ts(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!ro)return Wa(t),null}else 2*Ye()-s.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,i=!0,qa(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=s.last)?n.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ye(),t.sibling=null,n=es.current,Er(es,i?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ka(e,t){switch(to(t),t.tag){case 1:return Or(t.type)&&Mr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yo(),Tr(Rr),Tr(Ir),is(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Zo(t),null;case 13:if(Tr(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));fo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Tr(es),null;case 4:return Yo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Aa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Ma=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Qo(Wo.current);var o,s=null;switch(n){case"input":r=Q(e,r),i=Q(e,i),s=[];break;case"select":r=L({},r,{value:void 0}),i=L({},i,{value:void 0}),s=[];break;case"textarea":r=ie(e,r),i=ie(e,i),s=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in be(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Bi("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},Na=function(e,t,n,i){n!==i&&(t.flags|=4)};var Qa=!1,Xa=!1,Ya="function"===typeof WeakSet?WeakSet:Set,Ja=null;function Za(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Cc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Cc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var o=r.destroy;r.destroy=void 0,void 0!==o&&el(t,n,o)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[pr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,dl=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:Xa||Za(n,t);case 6:var i=ul,r=dl;ul=null,hl(e,t,n),dl=r,null!==(ul=i)&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(dl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),zt(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=dl,ul=n.stateNode.containerInfo,dl=!0,hl(e,t,n),ul=i,dl=r;break;case 0:case 11:case 14:case 15:if(!Xa&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var o=r,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(n,t,s),r=r.next}while(r!==i)}hl(e,t,n);break;case 1:if(!Xa&&(Za(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Cc(n,t,a)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xa=(i=Xa)||null!==n.memoizedState,hl(e,t,n),Xa=i):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ya),t.forEach((function(t){var i=Ic.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));pl(s,a,r),ul=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Cc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Cc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&Za(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&Za(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(g){Cc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var s=e.memoizedProps,a=null!==n?n.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Y(r,s),ye(l,a);var u=ye(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(r,h):"dangerouslySetInnerHTML"===d?de(r,h):"children"===d?he(r,h):y(r,d,h,u)}switch(l){case"input":J(r,s);break;case"textarea":oe(r,s);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?ne(r,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?ne(r,!!s.multiple,s.defaultValue,!0):ne(r,!!s.multiple,s.multiple?[]:"",!1))}r[pr]=s}catch(g){Cc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(o(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(g){Cc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(s=null!==r.memoizedState,r.stateNode.isHidden=s,!s||null!==r.alternate&&null!==r.alternate.memoizedState||($l=Ye())),4&i&&fl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Xa=(u=Xa)||d,ml(t,e),Xa=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ja=e,d=e.child;null!==d;){for(h=Ja=d;null!==Ja;){switch(f=(p=Ja).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Za(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,n=p.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(i,n,g)}}break;case 5:Za(p,p.return);break;case 22:if(null!==p.memoizedState){kl(h);continue}}null!==f?(f.return=p,Ja=f):kl(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{r=h.stateNode,u?"function"===typeof(s=r.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),vl(e),4&i&&fl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var i=n;break e}n=n.return}throw Error(o(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(he(r,""),i.flags&=-33),cl(e,al(e),r);break;case 3:case 4:var s=i.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Ja=e,yl(e,t,n)}function yl(e,t,n){for(var i=0!==(1&e.mode);null!==Ja;){var r=Ja,o=r.child;if(22===r.tag&&i){var s=null!==r.memoizedState||Qa;if(!s){var a=r.alternate,l=null!==a&&null!==a.memoizedState||Xa;a=Qa;var c=Xa;if(Qa=s,(Xa=l)&&!c)for(Ja=r;null!==Ja;)l=(s=Ja).child,22===s.tag&&null!==s.memoizedState?wl(r):null!==l?(l.return=s,Ja=l):wl(r);for(;null!==o;)Ja=o,yl(o,t,n),o=o.sibling;Ja=r,Qa=a,Xa=c}xl(e)}else 0!==(8772&r.subtreeFlags)&&null!==o?(o.return=r,Ja=o):xl(e)}}function xl(e){for(;null!==Ja;){var t=Ja;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xa||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Xa)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Ho(t,s,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(o(163))}Xa||512&t.flags&&rl(t)}catch(p){Cc(t,t.return,p)}}if(t===e){Ja=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ja=n;break}Ja=t.return}}function kl(e){for(;null!==Ja;){var t=Ja;if(t===e){Ja=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ja=n;break}Ja=t.return}}function wl(e){for(;null!==Ja;){var t=Ja;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Cc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Cc(t,r,l)}}var o=t.return;try{rl(t)}catch(l){Cc(t,o,l)}break;case 5:var s=t.return;try{rl(t)}catch(l){Cc(t,s,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Ja=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ja=a;break}Ja=t.return}}var Sl,Cl=Math.ceil,Tl=x.ReactCurrentDispatcher,El=x.ReactCurrentOwner,_l=x.ReactCurrentBatchConfig,Il=0,Rl=null,Pl=null,Al=0,Ol=0,Ml=Cr(0),Nl=0,Dl=null,jl=0,Ll=0,Fl=0,Bl=null,Ul=null,$l=0,zl=1/0,Vl=null,Hl=!1,ql=null,Wl=null,Gl=!1,Kl=null,Ql=0,Xl=0,Yl=null,Jl=-1,Zl=0;function ec(){return 0!==(6&Il)?Ye():-1!==Jl?Jl:Jl=Ye()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Al?Al&-Al:null!==go.transition?(0===Zl&&(Zl=mt()),Zl):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,i){if(50<Xl)throw Xl=0,Yl=null,Error(o(185));vt(e,n,i),0!==(2&Il)&&e===Rl||(e===Rl&&(0===(2&Il)&&(Ll|=n),4===Nl&&ac(e,Al)),ic(e,i),1===n&&0===Il&&0===(1&t.mode)&&(zl=Ye()+500,Br&&zr()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=r[s];-1===l?0!==(a&n)&&0===(a&i)||(r[s]=pt(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var i=ht(e,e===Rl?Al:0);if(0===i)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Br=!0,$r(e)}(lc.bind(null,e)):$r(lc.bind(null,e)),sr((function(){0===(6&Il)&&zr()})),n=null;else{switch(xt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Rc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,Zl=0,0!==(6&Il))throw Error(o(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=ht(e,e===Rl?Al:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Il;Il|=2;var s=fc();for(Rl===e&&Al===t||(Vl=null,zl=Ye()+500,hc(e,t));;)try{bc();break}catch(l){pc(e,l)}_o(),Tl.current=s,Il=r,null!==Pl?t=0:(Rl=null,Al=0,t=Nl)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(i=r,t=oc(e,r))),1===t)throw n=Dl,hc(e,0),ac(e,i),ic(e,Ye()),n;if(6===t)ac(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],o=r.getSnapshot;r=r.value;try{if(!ai(o(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(s=ft(e))&&(i=s,t=oc(e,s))),1===t))throw n=Dl,hc(e,0),ac(e,i),ic(e,Ye()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(o(345));case 2:case 5:kc(e,Ul,Vl);break;case 3:if(ac(e,i),(130023424&i)===i&&10<(t=$l+500-Ye())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(kc.bind(null,e,Ul,Vl),t);break}kc(e,Ul,Vl);break;case 4:if(ac(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-st(i);s=1<<a,(a=t[a])>r&&(r=a),i&=~s}if(i=r,10<(i=(120>(i=Ye()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Cl(i/1960))-i)){e.timeoutHandle=ir(kc.bind(null,e,Ul,Vl),i);break}kc(e,Ul,Vl);break;default:throw Error(o(329))}}}return ic(e,Ye()),e.callbackNode===n?rc.bind(null,e):null}function oc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=n,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Il))throw Error(o(327));wc();var t=ht(e,0);if(0===(1&t))return ic(e,Ye()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=ft(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Dl,hc(e,0),ac(e,t),ic(e,Ye()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kc(e,Ul,Vl),ic(e,Ye()),null}function cc(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(zl=Ye()+500,Br&&zr())}}function uc(e){null!==Kl&&0===Kl.tag&&0===(6&Il)&&wc();var t=Il;Il|=1;var n=_l.transition,i=yt;try{if(_l.transition=null,yt=1,e)return e()}finally{yt=i,_l.transition=n,0===(6&(Il=t))&&zr()}}function dc(){Ol=Ml.current,Tr(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(to(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Mr();break;case 3:Yo(),Tr(Rr),Tr(Ir),is();break;case 5:Zo(i);break;case 4:Yo();break;case 13:case 19:Tr(es);break;case 10:Io(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Rl=e,Pl=e=Mc(e.current,null),Al=Ol=t,Nl=0,Dl=null,Fl=Ll=jl=0,Ul=Bl=null,null!==Oo){for(t=0;t<Oo.length;t++)if(null!==(i=(n=Oo[t]).interleaved)){n.interleaved=null;var r=i.next,o=n.pending;if(null!==o){var s=o.next;o.next=r,i.next=s}n.pending=i}Oo=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(_o(),rs.current=Js,us){for(var i=as.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,El.current=null,null===n||null===n.return){Nl=1,Dl=t,Pl=null;break}e:{var s=e,a=n.return,l=n,c=t;if(t=Al,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var f=ga(a);if(null!==f){f.flags&=-257,va(f,a,l,0,t),1&f.mode&&ma(s,u,t),c=u;var m=(t=f).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(ro&&1&l.mode){var v=ga(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),va(v,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==Nl&&(Nl=2),null===Bl?Bl=[s]:Bl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,zo(s,pa(0,c,t));break e;case 1:l=c;var b=s.type,y=s.stateNode;if(0===(128&s.flags)&&("function"===typeof b.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Wl||!Wl.has(y)))){s.flags|=65536,t&=-t,s.lanes|=t,zo(s,fa(s,l,t));break e}}s=s.return}while(null!==s)}xc(n)}catch(x){t=x,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function fc(){var e=Tl.current;return Tl.current=Js,null===e?Js:e}function mc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Rl||0===(268435455&jl)&&0===(268435455&Ll)||ac(Rl,Al)}function gc(e,t){var n=Il;Il|=2;var i=fc();for(Rl===e&&Al===t||(Vl=null,hc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(_o(),Il=n,Tl.current=i,null!==Pl)throw Error(o(261));return Rl=null,Al=0,Nl}function vc(){for(;null!==Pl;)yc(Pl)}function bc(){for(;null!==Pl&&!Qe();)yc(Pl)}function yc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?xc(e):Pl=t,El.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ga(n,t,Ol)))return void(Pl=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Nl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Nl&&(Nl=5)}function kc(e,t,n){var i=yt,r=_l.transition;try{_l.transition=null,yt=1,function(e,t,n,i){do{wc()}while(null!==Kl);if(0!==(6&Il))throw Error(o(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-st(n),o=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~o}}(e,s),e===Rl&&(Pl=Rl=null,Al=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Rc(tt,(function(){return wc(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=_l.transition,_l.transition=null;var a=yt;yt=1;var l=Il;Il|=4,El.current=null,function(e,t){if(er=Ht,pi(e=hi())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch(k){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=a+r),h!==s||0!==i&&3!==h.nodeType||(c=a+i),3===h.nodeType&&(a+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===n&&++u===r&&(l=a),p===s&&++d===i&&(c=a),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Ht=!1,Ja=t;null!==Ja;)if(e=(t=Ja).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ja=e;else for(;null!==Ja;){t=Ja;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(k){Cc(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Ja=e;break}Ja=t.return}m=tl,tl=!1}(e,n),gl(n,e),fi(tr),Ht=!!er,tr=er=null,e.current=n,bl(n,e,r),Xe(),Il=l,yt=a,_l.transition=s}else e.current=n;if(Gl&&(Gl=!1,Kl=e,Ql=r),s=e.pendingLanes,0===s&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Ye()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Ql)&&0!==e.tag&&wc(),s=e.pendingLanes,0!==(1&s)?e===Yl?Xl++:(Xl=0,Yl=e):Xl=0,zr()}(e,t,n,i)}finally{_l.transition=r,yt=i}return null}function wc(){if(null!==Kl){var e=xt(Ql),t=_l.transition,n=yt;try{if(_l.transition=null,yt=16>e?16:e,null===Kl)var i=!1;else{if(e=Kl,Kl=null,Ql=0,0!==(6&Il))throw Error(o(331));var r=Il;for(Il|=4,Ja=e.current;null!==Ja;){var s=Ja,a=s.child;if(0!==(16&Ja.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ja=u;null!==Ja;){var d=Ja;switch(d.tag){case 0:case 11:case 15:nl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Ja=h;else for(;null!==Ja;){var p=(d=Ja).sibling,f=d.return;if(ol(d),d===u){Ja=null;break}if(null!==p){p.return=f,Ja=p;break}Ja=f}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Ja=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ja=a;else e:for(;null!==Ja;){if(0!==(2048&(s=Ja).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var b=s.sibling;if(null!==b){b.return=s.return,Ja=b;break e}Ja=s.return}}var y=e.current;for(Ja=y;null!==Ja;){var x=(a=Ja).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,Ja=x;else e:for(a=y;null!==Ja;){if(0!==(2048&(l=Ja).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Cc(l,l.return,w)}if(l===a){Ja=null;break e}var k=l.sibling;if(null!==k){k.return=l.return,Ja=k;break e}Ja=l.return}}if(Il=r,zr(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{yt=n,_l.transition=t}}return!1}function Sc(e,t,n){e=Uo(e,t=pa(0,t=ca(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Cc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Wl||!Wl.has(i))){t=Uo(t,e=fa(t,e=ca(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Rl===e&&(Al&n)===n&&(4===Nl||3===Nl&&(130023424&Al)===Al&&500>Ye()-$l?hc(e,0):Fl|=n),ic(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Do(e,t))&&(vt(e,t,n),ic(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ic(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(o(314))}null!==i&&i.delete(t),Ec(e,n)}function Rc(e,t){return Ge(e,t)}function Pc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,i){return new Pc(e,t,n,i)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,i,r,s){var a=2;if(i=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case S:return Dc(n.children,r,s,t);case C:a=8,r|=8;break;case T:return(e=Ac(12,n,t,2|r)).elementType=T,e.lanes=s,e;case R:return(e=Ac(13,n,t,r)).elementType=R,e.lanes=s,e;case P:return(e=Ac(19,n,t,r)).elementType=P,e.lanes=s,e;case M:return jc(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case _:a=9;break e;case I:a=11;break e;case A:a=14;break e;case O:a=16,i=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function Dc(e,t,n,i){return(e=Ac(7,e,i,t)).lanes=n,e}function jc(e,t,n,i){return(e=Ac(22,e,i,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Uc(e,t,n,i,r,o,s,a,l){return e=new Bc(e,t,n,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ac(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function $c(e){if(!e)return _r;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Or(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Or(n))return Dr(e,n,t)}return t}function zc(e,t,n,i,r,o,s,a,l){return(e=Uc(n,i,!0,e,0,o,0,a,l)).context=$c(null),n=e.current,(o=Bo(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Uo(n,o,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Vc(e,t,n,i){var r=t.current,o=ec(),s=tc(r);return n=$c(n),null===t.context?t.context=n:t.pendingContext=n,(t=Bo(o,s)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Uo(r,t,s))&&(nc(e,r,s,o),$o(e,r,s)),s}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Rr.current)ya=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ya=!1,function(e,t,n){switch(t.tag){case 3:Ra(t),fo();break;case 5:Jo(t);break;case 1:Or(t.type)&&jr(t);break;case 4:Xo(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(So,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er(es,1&es.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Er(es,1&es.current),null!==(e=Ha(e,t,n))?e.sibling:null);Er(es,1&es.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return za(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(es,es.current),i)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,n)}return Ha(e,t,n)}(e,t,n);ya=0!==(131072&e.flags)}else ya=!1,ro&&0!==(1048576&t.flags)&&Zr(t,Wr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Va(e,t),e=t.pendingProps;var r=Ar(t,Ir.current);Po(t,n),r=gs(null,t,i,e,r,n);var s=vs();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Or(i)?(s=!0,jr(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Lo(t),r.updater=ra,t.stateNode=r,r._reactInternals=t,la(t,i,e,n),t=Ia(null,t,i,!0,s,n)):(t.tag=0,ro&&s&&eo(t),xa(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===A)return 14}return 2}(i),e=na(i,e),r){case 0:t=Ea(null,t,i,e,n);break e;case 1:t=_a(null,t,i,e,n);break e;case 11:t=ka(null,t,i,e,n);break e;case 14:t=wa(null,t,i,na(i.type,e),n);break e}throw Error(o(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ea(e,t,i,r=t.elementType===i?r:na(i,r),n);case 1:return i=t.type,r=t.pendingProps,_a(e,t,i,r=t.elementType===i?r:na(i,r),n);case 3:e:{if(Ra(t),null===e)throw Error(o(387));i=t.pendingProps,r=(s=t.memoizedState).element,Fo(e,t),Vo(t,i,null,n);var a=t.memoizedState;if(i=a.element,s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Pa(e,t,i,n,r=ca(Error(o(423)),t));break e}if(i!==r){t=Pa(e,t,i,n,r=ca(Error(o(424)),t));break e}for(io=cr(t.stateNode.containerInfo.firstChild),no=t,ro=!0,oo=null,n=wo(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fo(),i===r){t=Ha(e,t,n);break e}xa(e,t,i,n)}t=t.child}return t;case 5:return Jo(t),null===e&&co(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==s&&nr(i,s)&&(t.flags|=32),Ta(e,t),xa(e,t,a,n),t.child;case 6:return null===e&&co(t),null;case 13:return La(e,t,n);case 4:return Xo(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=ko(t,null,i,n):xa(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,ka(e,t,i,r=t.elementType===i?r:na(i,r),n);case 7:return xa(e,t,t.pendingProps,n),t.child;case 8:case 12:return xa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,a=r.value,Er(So,i._currentValue),i._currentValue=a,null!==s)if(ai(s.value,a)){if(s.children===r.children&&!Rr.current){t=Ha(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=Bo(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),Ro(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ro(a,n,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}xa(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Po(t,n),i=i(r=Ao(r)),t.flags|=1,xa(e,t,i,n),t.child;case 14:return r=na(i=t.type,t.pendingProps),wa(e,t,i,r=na(i.type,r),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:na(i,r),Va(e,t),t.tag=1,Or(i)?(e=!0,jr(t)):e=!1,Po(t,n),sa(t,i,r),la(t,i,r,n),Ia(null,t,i,!0,e,n);case 19:return za(e,t,n);case 22:return Ca(e,t,n)}throw Error(o(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Kc(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,i,r){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof r){var a=r;r=function(){var e=Hc(s);a.call(e)}}Vc(t,s,e,r)}else s=function(e,t,n,i,r){if(r){if("function"===typeof i){var o=i;i=function(){var e=Hc(s);o.call(e)}}var s=zc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=s,e[fr]=s.current,zi(8===e.nodeType?e.parentNode:e),uc(),s}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Hc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[fr]=l.current,zi(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,n,i)})),l}(n,t,e,r,i);return Hc(s)}Qc.prototype.render=Kc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},Qc.prototype.unmount=Kc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[fr]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Lt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),ic(t,Ye()),0===(6&Il)&&(zl=Ye()+500,zr()))}break;case 13:uc((function(){var t=Do(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},wt=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Do(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Ct=function(){return yt},Tt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=kr(i);if(!r)throw Error(o(90));G(i),J(i,r)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ie=cc,Re=uc;var eu={usingClientEntryPoint:!1,Events:[yr,xr,kr,Ee,_e,cc]},tu={findFiberByHostInstance:br,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),ot=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(o(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(o(299));var n=!1,i="",r=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Uc(e,1,!1,null,0,n,0,i,r),e[fr]=t.current,zi(8===e.nodeType?e.parentNode:e),new Kc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Yc(t))throw Error(o(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(o(405));var i=null!=n&&n.hydratedSources||null,r=!1,s="",a=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,r,0,s,a),e[fr]=t.current,zi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Qc(t)},t.render=function(e,t,n){if(!Yc(t))throw Error(o(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Yc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Zc(null,null,e,!1,(function(){e._reactRootContainer=null,e[fr]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Yc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Zc(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var i=n(7950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8686:e=>{"use strict";e.exports=function(e){if(e)throw e}},7927:e=>{"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},5604:(e,t,n)=>{"use strict";e.exports=function(e,t,n){"string"!==typeof t&&(n=t,t=void 0);return function(e){var t=e||{},n=function(e,t){var n=-1;for(;++n<t.length;)p(e,t[n]);return e}({transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:v(he),autolinkProtocol:L,autolinkEmail:L,atxHeading:v(le),blockQuote:v(ie),characterEscape:L,characterReference:L,codeFenced:v(re),codeFencedFenceInfo:b,codeFencedFenceMeta:b,codeIndented:v(re,b),codeText:v(oe,b),codeTextData:L,data:L,codeFlowValue:L,definition:v(se),definitionDestinationString:b,definitionLabelString:b,definitionTitleString:b,emphasis:v(ae),hardBreakEscape:v(ce),hardBreakTrailing:v(ce),htmlFlow:v(ue,b),htmlFlowData:L,htmlText:v(ue,b),htmlTextData:L,image:v(de),label:b,link:v(he),listItem:v(fe),listItemValue:C,listOrdered:v(pe,S),listUnordered:v(pe),paragraph:v(me),reference:Y,referenceString:b,resourceDestinationString:b,resourceTitleString:b,setextHeading:v(le),strong:v(ge),thematicBreak:v(be)},exit:{atxHeading:x(),atxHeadingSequence:M,autolink:x(),autolinkEmail:ne,autolinkProtocol:te,blockQuote:x(),characterEscapeValue:F,characterReferenceMarkerHexadecimal:Z,characterReferenceMarkerNumeric:Z,characterReferenceValue:ee,codeFenced:x(I),codeFencedFence:_,codeFencedFenceInfo:T,codeFencedFenceMeta:E,codeFlowValue:F,codeIndented:x(R),codeText:x(V),codeTextData:F,data:F,definition:x(),definitionDestinationString:O,definitionLabelString:P,definitionTitleString:A,emphasis:x(),hardBreakEscape:x(U),hardBreakTrailing:x(U),htmlFlow:x($),htmlFlowData:F,htmlText:x(z),htmlTextData:F,image:x(q),label:G,labelText:W,lineEnding:B,link:x(H),listItem:x(),listOrdered:x(),listUnordered:x(),paragraph:x(),referenceString:J,resourceDestinationString:K,resourceTitleString:Q,resource:X,setextHeading:x(j),setextHeadingLineSequence:D,setextHeadingText:N,strong:x(),thematicBreak:x()}},t.mdastExtensions||[]),l={};return c;function c(e){for(var t,i={type:"root",children:[]},s=[],a=[],l=-1,c={stack:[i],tokenStack:s,config:n,enter:y,exit:k,buffer:b,resume:w,setData:f,getData:m};++l<e.length;)"listOrdered"!==e[l][1].type&&"listUnordered"!==e[l][1].type||("enter"===e[l][0]?a.push(l):l=u(e,a.pop(l),l));for(l=-1;++l<e.length;)t=n[e[l][0]],o.call(t,e[l][1].type)&&t[e[l][1].type].call(r({sliceSerialize:e[l][2].sliceSerialize},c),e[l][1]);if(s.length)throw new Error("Cannot close document, a token (`"+s[s.length-1].type+"`, "+h({start:s[s.length-1].start,end:s[s.length-1].end})+") is still open");for(i.position={start:g(e.length?e[0][1].start:{line:1,column:1,offset:0}),end:g(e.length?e[e.length-2][1].end:{line:1,column:1,offset:0})},l=-1;++l<n.transforms.length;)i=n.transforms[l](i)||i;return i}function u(e,t,n){for(var i,r,o,s,a,l,c,u=t-1,d=-1,h=!1;++u<=n;)if("listUnordered"===(a=e[u])[1].type||"listOrdered"===a[1].type||"blockQuote"===a[1].type?("enter"===a[0]?d++:d--,c=void 0):"lineEndingBlank"===a[1].type?"enter"===a[0]&&(!i||c||d||l||(l=u),c=void 0):"linePrefix"===a[1].type||"listItemValue"===a[1].type||"listItemMarker"===a[1].type||"listItemPrefix"===a[1].type||"listItemPrefixWhitespace"===a[1].type||(c=void 0),!d&&"enter"===a[0]&&"listItemPrefix"===a[1].type||-1===d&&"exit"===a[0]&&("listUnordered"===a[1].type||"listOrdered"===a[1].type)){if(i){for(r=u,o=void 0;r--;)if("lineEnding"===(s=e[r])[1].type||"lineEndingBlank"===s[1].type){if("exit"===s[0])continue;o&&(e[o][1].type="lineEndingBlank",h=!0),s[1].type="lineEnding",o=r}else if("linePrefix"!==s[1].type&&"blockQuotePrefix"!==s[1].type&&"blockQuotePrefixWhitespace"!==s[1].type&&"blockQuoteMarker"!==s[1].type&&"listItemIndent"!==s[1].type)break;l&&(!o||l<o)&&(i._spread=!0),i.end=g(o?e[o][1].start:a[1].end),e.splice(o||u,0,["exit",i,a[2]]),u++,n++}"listItemPrefix"===a[1].type&&(i={type:"listItem",_spread:!1,start:g(a[1].start)},e.splice(u,0,["enter",i,a[2]]),u++,n++,l=void 0,c=!0)}return e[t][1]._spread=h,n}function f(e,t){l[e]=t}function m(e){return l[e]}function g(e){return{line:e.line,column:e.column,offset:e.offset}}function v(e,t){return n;function n(n){y.call(this,e(n),n),t&&t.call(this,n)}}function b(){this.stack.push({type:"fragment",children:[]})}function y(e,t){return this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push(t),e.position={start:g(t.start)},e}function x(e){return t;function t(t){e&&e.call(this,t),k.call(this,t)}}function k(e){var t=this.stack.pop(),n=this.tokenStack.pop();if(!n)throw new Error("Cannot close `"+e.type+"` ("+h({start:e.start,end:e.end})+"): it\u2019s not open");if(n.type!==e.type)throw new Error("Cannot close `"+e.type+"` ("+h({start:e.start,end:e.end})+"): a different token (`"+n.type+"`, "+h({start:n.start,end:n.end})+") is open");return t.position.end=g(e.end),t}function w(){return i(this.stack.pop())}function S(){f("expectingFirstListItemValue",!0)}function C(e){m("expectingFirstListItemValue")&&(this.stack[this.stack.length-2].start=parseInt(this.sliceSerialize(e),10),f("expectingFirstListItemValue"))}function T(){var e=this.resume();this.stack[this.stack.length-1].lang=e}function E(){var e=this.resume();this.stack[this.stack.length-1].meta=e}function _(){m("flowCodeInside")||(this.buffer(),f("flowCodeInside",!0))}function I(){var e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),f("flowCodeInside")}function R(){var e=this.resume();this.stack[this.stack.length-1].value=e}function P(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase()}function A(){var e=this.resume();this.stack[this.stack.length-1].title=e}function O(){var e=this.resume();this.stack[this.stack.length-1].url=e}function M(e){this.stack[this.stack.length-1].depth||(this.stack[this.stack.length-1].depth=this.sliceSerialize(e).length)}function N(){f("setextHeadingSlurpLineEnding",!0)}function D(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).charCodeAt(0)?1:2}function j(){f("setextHeadingSlurpLineEnding")}function L(e){var t=this.stack[this.stack.length-1].children,n=t[t.length-1];n&&"text"===n.type||((n=ve()).position={start:g(e.start)},this.stack[this.stack.length-1].children.push(n)),this.stack.push(n)}function F(e){var t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=g(e.end)}function B(e){var t=this.stack[this.stack.length-1];if(m("atHardBreak"))return t.children[t.children.length-1].position.end=g(e.end),void f("atHardBreak");!m("setextHeadingSlurpLineEnding")&&n.canContainEols.indexOf(t.type)>-1&&(L.call(this,e),F.call(this,e))}function U(){f("atHardBreak",!0)}function $(){var e=this.resume();this.stack[this.stack.length-1].value=e}function z(){var e=this.resume();this.stack[this.stack.length-1].value=e}function V(){var e=this.resume();this.stack[this.stack.length-1].value=e}function H(){var e=this.stack[this.stack.length-1];m("inReference")?(e.type+="Reference",e.referenceType=m("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),f("referenceType")}function q(){var e=this.stack[this.stack.length-1];m("inReference")?(e.type+="Reference",e.referenceType=m("referenceType")||"shortcut",delete e.url,delete e.title):(delete e.identifier,delete e.label,delete e.referenceType),f("referenceType")}function W(e){this.stack[this.stack.length-2].identifier=s(this.sliceSerialize(e)).toLowerCase()}function G(){var e=this.stack[this.stack.length-1],t=this.resume();this.stack[this.stack.length-1].label=t,f("inReference",!0),"link"===this.stack[this.stack.length-1].type?this.stack[this.stack.length-1].children=e.children:this.stack[this.stack.length-1].alt=t}function K(){var e=this.resume();this.stack[this.stack.length-1].url=e}function Q(){var e=this.resume();this.stack[this.stack.length-1].title=e}function X(){f("inReference")}function Y(){f("referenceType","collapsed")}function J(e){var t=this.resume();this.stack[this.stack.length-1].label=t,this.stack[this.stack.length-1].identifier=s(this.sliceSerialize(e)).toLowerCase(),f("referenceType","full")}function Z(e){f("characterReferenceType",e.type)}function ee(e){var t,n,i=this.sliceSerialize(e),r=m("characterReferenceType");r?(t=a(i,"characterReferenceMarkerNumeric"===r?10:16),f("characterReferenceType")):t=d(i),(n=this.stack.pop()).value+=t,n.position.end=g(e.end)}function te(e){F.call(this,e),this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function ne(e){F.call(this,e),this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function ie(){return{type:"blockquote",children:[]}}function re(){return{type:"code",lang:null,meta:null,value:""}}function oe(){return{type:"inlineCode",value:""}}function se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ae(){return{type:"emphasis",children:[]}}function le(){return{type:"heading",depth:void 0,children:[]}}function ce(){return{type:"break"}}function ue(){return{type:"html",value:""}}function de(){return{type:"image",title:null,url:"",alt:null}}function he(){return{type:"link",title:null,url:"",children:[]}}function pe(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function fe(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function me(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ve(){return{type:"text",value:""}}function be(){return{type:"thematicBreak"}}}(n)(u(l(n).document().write(c()(e,t,!0))))};var i=n(3740),r=n(3160),o=n(7856),s=n(1008),a=n(8149),l=n(4727),c=n(7860),u=n(7311),d=n(6909),h=n(394);function p(e,t){var n,i;for(n in t)i=o.call(e,n)?e[n]:e[n]={},"canContainEols"===n||"transforms"===n?e[n]=[].concat(i,t[n]):Object.assign(i,t[n])}},3935:(e,t,n)=>{"use strict";e.exports=n(5604)},177:(e,t,n)=>{"use strict";e.exports=n(7625)},7986:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r,o=t.children||[],s=o.length,a=[],l=-1;for(;++l<s;)(n=i(e,o[l],t))&&(l&&"break"===o[l-1].type&&(n.value&&(n.value=n.value.replace(/^\s+/,"")),(r=n.children&&n.children[0])&&r.value&&(r.value=r.value.replace(/^\s+/,""))),a=a.concat(n));return a};var i=n(1717)},9766:(e,t,n)=>{"use strict";e.exports=function(e){var t,n,s,a,l=e.footnoteById,c=e.footnoteOrder,u=c.length,d=-1,h=[];for(;++d<u;)(t=l[c[d].toUpperCase()])&&(a=(s=t.children.concat())[s.length-1],n={type:"link",url:"#fnref-"+t.identifier,data:{hProperties:{className:["footnote-backref"]}},children:[{type:"text",value:"\u21a9"}]},a&&"paragraph"===a.type||(a={type:"paragraph",children:[]},s.push(a)),a.children.push(n),h.push({type:"listItem",data:{hProperties:{id:"fn-"+t.identifier}},children:s,position:t.position}));if(0===h.length)return null;return e(null,"div",{className:["footnotes"]},o([i(e),r(e,{type:"list",ordered:!0,children:h})],!0))};var i=n(7518),r=n(9475),o=n(5633)},7644:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"blockquote",i(r(e,t),!0))};var i=n(5633),r=n(7986)},5352:(e,t,n)=>{"use strict";e.exports=function(e,t){return[e(t,"br"),i("text","\n")]};var i=n(5591)},674:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,r=t.value?t.value+"\n":"",o=t.lang&&t.lang.match(/^[^ \t]+(?=[ \t]|$)/),s={};o&&(s.className=["language-"+o]);n=e(t,"code",s,[i("text",r)]),t.meta&&(n.data={meta:t.meta});return e(t.position,"pre",[n])};var i=n(5591)},1791:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"del",i(e,t))};var i=n(7986)},1413:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"em",i(e,t))};var i=n(7986)},6295:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteOrder,r=String(t.identifier);-1===n.indexOf(r)&&n.push(r);return e(t.position,"sup",{id:"fnref-"+r},[e(t,"a",{href:"#fn-"+r,className:["footnote-ref"]},[i("text",t.label||r)])])};var i=n(5591)},363:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=e.footnoteById,r=e.footnoteOrder,o=1;for(;o in n;)o++;return o=String(o),r.push(o),n[o]={type:"footnoteDefinition",identifier:o,children:[{type:"paragraph",children:t.children}],position:t.position},i(e,{type:"footnoteReference",identifier:o,position:t.position})};var i=n(6295)},1317:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"h"+t.depth,i(e,t))};var i=n(7986)},1266:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.dangerous?e.augment(t,i("raw",t.value)):null};var i=n(5591)},4778:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o=e.definition(t.identifier);if(!o)return r(e,t);n={src:i(o.url||""),alt:t.alt},null!==o.title&&void 0!==o.title&&(n.title=o.title);return e(t,"img",n)};var i=n(2638),r=n(6515)},2602:(e,t,n)=>{"use strict";var i=n(2638);e.exports=function(e,t){var n={src:i(t.url),alt:t.alt};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"img",n)}},4943:(e,t,n)=>{"use strict";function i(){return null}e.exports={blockquote:n(7644),break:n(5352),code:n(674),delete:n(1791),emphasis:n(1413),footnoteReference:n(6295),footnote:n(363),heading:n(1317),html:n(1266),imageReference:n(4778),image:n(2602),inlineCode:n(274),linkReference:n(8231),link:n(7531),listItem:n(1267),list:n(9475),paragraph:n(1909),root:n(9075),strong:n(9552),table:n(4167),text:n(8432),thematicBreak:n(7518),toml:i,yaml:i,definition:i,footnoteDefinition:i}},274:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=t.value.replace(/\r?\n|\r/g," ");return e(t,"code",[i("text",n)])};var i=n(5591)},8231:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,s=e.definition(t.identifier);if(!s)return r(e,t);n={href:i(s.url||"")},null!==s.title&&void 0!==s.title&&(n.title=s.title);return e(t,"a",n,o(e,t))};var i=n(2638),r=n(6515),o=n(7986)},7531:(e,t,n)=>{"use strict";var i=n(2638),r=n(7986);e.exports=function(e,t){var n={href:i(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);return e(t,"a",n,r(e,t))}},1267:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var s,a,l,c=r(e,t),u=c[0],d=n?function(e){var t=e.spread,n=e.children,i=n.length,r=-1;for(;!t&&++r<i;)t=o(n[r]);return t}(n):o(t),h={},p=[];"boolean"===typeof t.checked&&(u&&"p"===u.tagName||(u=e(null,"p",[]),c.unshift(u)),u.children.length>0&&u.children.unshift(i("text"," ")),u.children.unshift(e(null,"input",{type:"checkbox",checked:t.checked,disabled:!0})),h.className=["task-list-item"]);s=c.length,a=-1;for(;++a<s;)l=c[a],(d||0!==a||"p"!==l.tagName)&&p.push(i("text","\n")),"p"!==l.tagName||d?p.push(l):p=p.concat(l.children);s&&(d||"p"!==l.tagName)&&p.push(i("text","\n"));return e(t,"li",h,p)};var i=n(5591),r=n(7986);function o(e){var t=e.spread;return void 0===t||null===t?e.children.length>1:t}},9475:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,s={},a=t.ordered?"ol":"ul",l=-1;"number"===typeof t.start&&1!==t.start&&(s.start=t.start);n=r(e,t),o=n.length;for(;++l<o;)if(n[l].properties.className&&-1!==n[l].properties.className.indexOf("task-list-item")){s.className=["contains-task-list"];break}return e(t,a,s,i(n,!0))};var i=n(5633),r=n(7986)},1909:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"p",i(e,t))};var i=n(7986)},9075:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("root",r(o(e,t))))};var i=n(5591),r=n(5633),o=n(7986)},9552:(e,t,n)=>{"use strict";e.exports=function(e,t){return e(t,"strong",i(e,t))};var i=n(7986)},4167:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,s,a,l,c,u=t.children,d=u.length,h=t.align||[],p=h.length,f=[];for(;d--;){for(s=u[d].children,l=0===d?"th":"td",n=p||s.length,a=[];n--;)c=s[n],a[n]=e(c,l,{align:h[n]},c?o(e,c):[]);f[d]=e(u[d],"tr",r(a,!0))}return e(t,"table",r([e(f[0].position,"thead",r([f[0]],!0))].concat(f[1]?e({start:i.start(f[1]),end:i.end(f[f.length-1])},"tbody",r(f.slice(1),!0)):[]),!0))};var i=n(2210),r=n(5633),o=n(7986)},8432:(e,t,n)=>{"use strict";e.exports=function(e,t){return e.augment(t,i("text",String(t.value).replace(/[ \t]*(\r?\n|\r)[ \t]*/g,"$1")))};var i=n(5591)},7518:e=>{"use strict";e.exports=function(e,t){return e(t,"hr")}},7625:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=function(e,t){var n=t||{};void 0===n.allowDangerousHTML||h||(h=!0,console.warn("mdast-util-to-hast: deprecation: `allowDangerousHTML` is nonstandard, use `allowDangerousHtml` instead"));var i=n.allowDangerousHtml||n.allowDangerousHTML,l={};return p.dangerous=i,p.definition=a(e),p.footnoteById=l,p.footnoteOrder=[],p.augment=c,p.handlers=Object.assign({},u,n.handlers),p.unknownHandler=n.unknownHandler,p.passThrough=n.passThrough,r(e,"footnoteDefinition",f),p;function c(e,t){var n,i;return e&&e.data&&((n=e.data).hName&&("element"!==t.type&&(t={type:"element",tagName:"",properties:{},children:[]}),t.tagName=n.hName),"element"===t.type&&n.hProperties&&(t.properties=Object.assign({},t.properties,n.hProperties)),t.children&&n.hChildren&&(t.children=n.hChildren)),i=e&&e.position?e:{position:e},s(i)||(t.position={start:o.start(i),end:o.end(i)}),t}function p(e,t,n,i){return void 0!==i&&null!==i||"object"!==typeof n||!("length"in n)||(i=n,n={}),c(e,{type:"element",tagName:t,properties:n||{},children:i||[]})}function f(e){var t=String(e.identifier).toUpperCase();d.call(l,t)||(l[t]=e)}}(e,t),p=l(n,e),f=c(n);f&&(p.children=p.children.concat(i("text","\n"),f));return p};var i=n(5591),r=n(9512),o=n(2210),s=n(2108),a=n(7577),l=n(1717),c=n(9766),u=n(4943),d={}.hasOwnProperty,h=!1},1717:(e,t,n)=>{"use strict";e.exports=function(e,t,n){var i,r=t&&t.type;if(!r)throw new Error("Expected node, got `"+t+"`");i=o.call(e.handlers,r)?e.handlers[r]:e.passThrough&&e.passThrough.indexOf(r)>-1?a:e.unknownHandler;return("function"===typeof i?i:s)(e,t,n)};var i=n(5591),r=n(7986),o={}.hasOwnProperty;function s(e,t){return function(e){var t=e.data||{};if(o.call(t,"hName")||o.call(t,"hProperties")||o.call(t,"hChildren"))return!1;return"value"in e}(t)?e.augment(t,i("text",t.value)):e(t,"div",r(e,t))}function a(e,t){var n;return t.children?((n=Object.assign({},t)).children=r(e,t),n):t}},6515:(e,t,n)=>{"use strict";e.exports=function(e,t){var n,o,s,a=t.referenceType,l="]";"collapsed"===a?l+="[]":"full"===a&&(l+="["+(t.label||t.identifier)+"]");if("imageReference"===t.type)return i("text","!["+t.alt+l);n=r(e,t),(o=n[0])&&"text"===o.type?o.value="["+o.value:n.unshift(i("text","["));(s=n[n.length-1])&&"text"===s.type?s.value+=l:n.push(i("text",l));return n};var i=n(5591),r=n(7986)},5633:(e,t,n)=>{"use strict";e.exports=function(e,t){var n=[],r=-1,o=e.length;t&&n.push(i("text","\n"));for(;++r<o;)r&&n.push(i("text","\n")),n.push(e[r]);t&&e.length>0&&n.push(i("text","\n"));return n};var i=n(5591)},3740:e=>{"use strict";function t(e){return e&&(e.value||e.alt||e.title||"children"in e&&n(e.children)||"length"in e&&n(e))||""}function n(e){for(var n=[],i=-1;++i<e.length;)n[i]=t(e[i]);return n.join("")}e.exports=t},4542:(e,t,n)=>{"use strict";var i=n(107)(/[A-Za-z]/);e.exports=i},6647:(e,t,n)=>{"use strict";var i=n(107)(/[\dA-Za-z]/);e.exports=i},3790:(e,t,n)=>{"use strict";var i=n(107)(/[#-'*+\--9=?A-Z^-~]/);e.exports=i},3347:e=>{"use strict";e.exports=function(e){return e<32||127===e}},9675:(e,t,n)=>{"use strict";var i=n(107)(/\d/);e.exports=i},507:(e,t,n)=>{"use strict";var i=n(107)(/[\dA-Fa-f]/);e.exports=i},6402:(e,t,n)=>{"use strict";var i=n(107)(/[!-/:-@[-`{-~]/);e.exports=i},6415:e=>{"use strict";e.exports=function(e){return e<0||32===e}},3400:e=>{"use strict";e.exports=function(e){return e<-2}},1336:e=>{"use strict";e.exports=function(e){return-2===e||-1===e||32===e}},4130:(e,t,n)=>{"use strict";var i=n(1273),r=n(107)(i);e.exports=r},8077:(e,t,n)=>{"use strict";var i=n(107)(/\s/);e.exports=i},3160:e=>{"use strict";var t=Object.assign;e.exports=t},6714:e=>{"use strict";var t=String.fromCharCode;e.exports=t},7856:e=>{"use strict";var t={}.hasOwnProperty;e.exports=t},7753:e=>{"use strict";e.exports=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","section","source","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"]},7782:e=>{"use strict";e.exports=["pre","script","style","textarea"]},7789:e=>{"use strict";var t=[].splice;e.exports=t},1273:e=>{"use strict";e.exports=/[!-\/:-@\[-`\{-~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/},7196:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(292),r=n(7346),o=n(97),s=n(5164),a=n(5887),l=n(4219),c=n(2519),u=n(7375),d=n(3731),h=n(7591),p=n(8829),f=n(2484),m=n(2944),g=n(5135),v=n(1446),b=n(6959),y=n(4172),x=n(7854),k=n(8394),w=n(8904),S=n(6519),C={42:k,43:k,45:k,48:k,49:k,50:k,51:k,52:k,53:k,54:k,55:k,56:k,57:k,62:s},T={91:h},E={"-2":u,"-1":u,32:u},_={35:f,42:S,45:[w,S],60:m,61:w,95:S,96:c,126:c},I={38:l,92:a},R={"-5":x,"-4":x,"-3":x,33:b,38:l,42:r,60:[o,g],91:y,92:[p,a],93:v,95:r,96:d},P={null:[r,i.resolver]};t.contentInitial=T,t.disable={null:[]},t.document=C,t.flow=_,t.flowInitial=E,t.insideSpan=P,t.string=I,t.text=R},1878:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3400),r=n(6449),o=function(e){var t,n=e.attempt(this.parser.constructs.contentInitial,(function(t){if(null===t)return void e.consume(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,n,"linePrefix")}),(function(t){return e.enter("paragraph"),o(t)}));return n;function o(n){var i=e.enter("chunkText",{contentType:"text",previous:t});return t&&(t.next=i),t=i,s(n)}function s(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):i(t)?(e.consume(t),e.exit("chunkText"),o):(e.consume(t),s)}};t.tokenize=o},2882:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3400),r=n(6449),o=n(9097),s=function(e){var t,n,r,s=this,c=[],u=0,d={tokenize:function(e,i){var r=0;return t={},u;function u(i){return r<c.length?(s.containerState=c[r][1],e.attempt(c[r][0].continuation,d,h)(i)):n.currentConstruct&&n.currentConstruct.concrete?(t.flowContinue=!0,m(i)):(s.interrupt=n.currentConstruct&&n.currentConstruct.interruptible,s.containerState={},e.attempt(a,f,m)(i))}function d(e){return r++,s.containerState._closeFlow?f(e):u(e)}function h(t){return n.currentConstruct&&n.currentConstruct.lazy?(s.containerState={},e.attempt(a,f,e.attempt(l,f,e.check(o,f,p)))(t)):f(t)}function p(e){return r=c.length,t.lazy=!0,t.flowContinue=!0,m(e)}function f(e){return t.flowEnd=!0,m(e)}function m(e){return t.continued=r,s.interrupt=s.containerState=void 0,i(e)}},partial:!0};return h;function h(t){return u<c.length?(s.containerState=c[u][1],e.attempt(c[u][0].continuation,p,f)(t)):f(t)}function p(e){return u++,h(e)}function f(i){return t&&t.flowContinue?g(i):(s.interrupt=n&&n.currentConstruct&&n.currentConstruct.interruptible,s.containerState={},e.attempt(a,m,g)(i))}function m(e){return c.push([s.currentConstruct,s.containerState]),s.containerState=void 0,f(e)}function g(t){return null===t?(x(0,!0),void e.consume(t)):(n=n||s.parser.flow(s.now()),e.enter("chunkFlow",{contentType:"flow",previous:r,_tokenizer:n}),v(t))}function v(t){return null===t?(y(e.exit("chunkFlow")),g(t)):i(t)?(e.consume(t),y(e.exit("chunkFlow")),e.check(d,b)):(e.consume(t),v)}function b(e){return x(t.continued,t&&t.flowEnd),u=0,h(e)}function y(e){r&&(r.next=e),r=e,n.lazy=t&&t.lazy,n.defineSkip(e.start),n.write(s.sliceStream(e))}function x(t,i){var o=c.length;for(n&&i&&(n.write([null]),r=n=void 0);o-- >t;)s.containerState=c[o][1],c[o][0].exit.call(s,e);c.length=t}},a={tokenize:function(e,t,n){return r(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},l={tokenize:function(e,t,n){return r(e,e.lazy(this.parser.constructs.flow,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}};t.tokenize=s},8079:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4797),r=n(6449),o=n(9097),s=function(e){var t=this,n=e.attempt(o,(function(i){if(null===i)return void e.consume(i);return e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}),e.attempt(this.parser.constructs.flowInitial,s,r(e,e.attempt(this.parser.constructs.flow,s,e.attempt(i,s)),"linePrefix")));return n;function s(i){if(null!==i)return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(i)}};t.tokenize=s},292:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3160),r=n(5669),o=l("text"),s=l("string"),a={resolveAll:c()};function l(e){return{tokenize:function(t){var n=this,i=this.parser.constructs[e],r=t.attempt(i,o,s);return o;function o(e){return l(e)?r(e):s(e)}function s(e){if(null!==e)return t.enter("data"),t.consume(e),a;t.consume(e)}function a(e){return l(e)?(t.exit("data"),r(e)):(t.consume(e),a)}function l(e){var t=i[e],r=-1;if(null===e)return!0;if(t)for(;++r<t.length;)if(!t[r].previous||t[r].previous.call(n,n.previous))return!0}},resolveAll:c("text"===e?u:void 0)}}function c(e){return function(t,n){var i,r=-1;for(;++r<=t.length;)void 0===i?t[r]&&"data"===t[r][1].type&&(i=r,r++):t[r]&&"data"===t[r][1].type||(r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),r=i+2),i=void 0);return e?e(t,n):t}}function u(e,t){for(var n,o,s,a,l,c,u,d,h=-1;++h<=e.length;)if((h===e.length||"lineEnding"===e[h][1].type)&&"data"===e[h-1][1].type){for(o=e[h-1][1],a=(n=t.sliceStream(o)).length,l=-1,c=0,u=void 0;a--;)if("string"===typeof(s=n[a])){for(l=s.length;32===s.charCodeAt(l-1);)c++,l--;if(l)break;l=-1}else if(-2===s)u=!0,c++;else if(-1!==s){a++;break}c&&(d={type:h===e.length||u||c<2?"lineSuffix":"hardBreakTrailing",start:{line:o.end.line,column:o.end.column-c,offset:o.end.offset-c,_index:o.start._index+a,_bufferIndex:a?l:o.start._bufferIndex+l},end:r(o.end)},o.end=r(d.start),o.start.offset===o.end.offset?i(o,d):(e.splice(h,0,["enter",d,t],["exit",d,t]),h+=2)),h++}return e}t.resolver=a,t.string=s,t.text=o},4727:(e,t,n)=>{"use strict";var i=n(1878),r=n(2882),o=n(8079),s=n(292),a=n(4903),l=n(3045),c=n(7177),u=n(7196);e.exports=function(e){var t={defined:[],constructs:a([u].concat(c((e||{}).extensions))),content:n(i),document:n(r),flow:n(o),string:n(s.string),text:n(s.text)};return t;function n(e){return function(n){return l(t,e,n)}}}},7311:(e,t,n)=>{"use strict";var i=n(8866);e.exports=function(e){for(;!i(e););return e}},7860:e=>{"use strict";var t=/[\0\t\n\r]/g;e.exports=function(){var e,n=!0,i=1,r="";return function(o,s,a){var l,c,u,d,h,p=[];o=r+o.toString(s),u=0,r="",n&&(65279===o.charCodeAt(0)&&u++,n=void 0);for(;u<o.length;){if(t.lastIndex=u,d=(l=t.exec(o))?l.index:o.length,h=o.charCodeAt(d),!l){r=o.slice(u);break}if(10===h&&u===d&&e)p.push(-3),e=void 0;else if(e&&(p.push(-5),e=void 0),u<d&&(p.push(o.slice(u,d)),i+=d-u),0===h)p.push(65533),i++;else if(9===h)for(c=4*Math.ceil(i/4),p.push(-2);i++<c;)p.push(-1);else 10===h?(p.push(-4),i=1):(e=!0,i=1);u=d+1}a&&(e&&p.push(-5),r&&p.push(r),p.push(null));return p}}},7346:(e,t,n)=>{"use strict";var i=n(8398),r=n(8334),o=n(5217),s=n(4235),a=n(2375),l=n(5669),c={name:"attention",tokenize:function(e,t){var n,i=o(this.previous);return function(t){return e.enter("attentionSequence"),n=t,r(t)};function r(s){var a,l,c,u;return s===n?(e.consume(s),r):(a=e.exit("attentionSequence"),c=!(l=o(s))||2===l&&i,u=!i||2===i&&l,a._open=42===n?c:c&&(i||!u),a._close=42===n?u:u&&(l||!c),t(s))}},resolveAll:function(e,t){var n,o,c,u,d,h,p,f,m=-1;for(;++m<e.length;)if("enter"===e[m][0]&&"attentionSequence"===e[m][1].type&&e[m][1]._close)for(n=m;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[m][1]).charCodeAt(0)){if((e[n][1]._close||e[m][1]._open)&&(e[m][1].end.offset-e[m][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[m][1].end.offset-e[m][1].start.offset)%3))continue;u={type:(h=e[n][1].end.offset-e[n][1].start.offset>1&&e[m][1].end.offset-e[m][1].start.offset>1?2:1)>1?"strongSequence":"emphasisSequence",start:s(l(e[n][1].end),-h),end:l(e[n][1].end)},d={type:h>1?"strongSequence":"emphasisSequence",start:l(e[m][1].start),end:s(l(e[m][1].start),h)},c={type:h>1?"strongText":"emphasisText",start:l(e[n][1].end),end:l(e[m][1].start)},o={type:h>1?"strong":"emphasis",start:l(u.start),end:l(d.end)},e[n][1].end=l(u.start),e[m][1].start=l(d.end),p=[],e[n][1].end.offset-e[n][1].start.offset&&(p=i(p,[["enter",e[n][1],t],["exit",e[n][1],t]])),p=i(p,[["enter",o,t],["enter",u,t],["exit",u,t],["enter",c,t]]),p=i(p,a(t.parser.constructs.insideSpan.null,e.slice(n+1,m),t)),p=i(p,[["exit",c,t],["enter",d,t],["exit",d,t],["exit",o,t]]),e[m][1].end.offset-e[m][1].start.offset?(f=2,p=i(p,[["enter",e[m][1],t],["exit",e[m][1],t]])):f=0,r(e,n-1,m-n+3,p),m=n+p.length-f-2;break}m=-1;for(;++m<e.length;)"attentionSequence"===e[m][1].type&&(e[m][1].type="data");return e}};e.exports=c},97:(e,t,n)=>{"use strict";var i=n(4542),r=n(6647),o=n(3790),s=n(3347),a={name:"autolink",tokenize:function(e,t,n){var a=1;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),l};function l(t){return i(t)?(e.consume(t),c):o(t)?h(t):n(t)}function c(e){return 43===e||45===e||46===e||r(e)?u(e):h(e)}function u(t){return 58===t?(e.consume(t),d):(43===t||45===t||46===t||r(t))&&a++<32?(e.consume(t),u):h(t)}function d(t){return 62===t?(e.exit("autolinkProtocol"),g(t)):32===t||60===t||s(t)?n(t):(e.consume(t),d)}function h(t){return 64===t?(e.consume(t),a=0,p):o(t)?(e.consume(t),h):n(t)}function p(e){return r(e)?f(e):n(e)}function f(t){return 46===t?(e.consume(t),a=0,p):62===t?(e.exit("autolinkProtocol").type="autolinkEmail",g(t)):m(t)}function m(t){return(45===t||r(t))&&a++<63?(e.consume(t),45===t?m:f):n(t)}function g(n){return e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t}}};e.exports=a},5164:(e,t,n)=>{"use strict";var i=n(1336),r=n(6449),o={name:"blockQuote",tokenize:function(e,t,n){var r=this;return function(t){if(62===t)return r.containerState.open||(e.enter("blockQuote",{_container:!0}),r.containerState.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),o;return n(t)};function o(n){return i(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}},continuation:{tokenize:function(e,t,n){return r(e,e.attempt(o,t,n),"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}},exit:function(e){e.exit("blockQuote")}};e.exports=o},5887:(e,t,n)=>{"use strict";var i=n(6402),r={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),r};function r(r){return i(r)?(e.enter("characterEscapeValue"),e.consume(r),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(r)}}};e.exports=r},4219:(e,t,n)=>{"use strict";var i=n(6909),r=n(6647),o=n(9675),s=n(507);function a(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var l=a(i),c={name:"characterReference",tokenize:function(e,t,n){var i,a,c=this,u=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),d};function d(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),h):(e.enter("characterReferenceValue"),i=31,a=r,p(t))}function h(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,a=s,p):(e.enter("characterReferenceValue"),i=7,a=o,p(t))}function p(o){var s;return 59===o&&u?(s=e.exit("characterReferenceValue"),a!==r||l.default(c.sliceSerialize(s))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)):a(o)&&u++<i?(e.consume(o),p):n(o)}}};e.exports=c},2519:(e,t,n)=>{"use strict";var i=n(3400),r=n(6415),o=n(2707),s=n(6449),a={name:"codeFenced",tokenize:function(e,t,n){var a,l=this,c={tokenize:function(e,t,n){var r=0;return s(e,o,"linePrefix",this.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4);function o(t){return e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}function l(t){return t===a?(e.consume(t),r++,l):r<d?n(t):(e.exit("codeFencedFenceSequence"),s(e,c,"whitespace")(t))}function c(r){return null===r||i(r)?(e.exit("codeFencedFence"),t(r)):n(r)}},partial:!0},u=o(this.events,"linePrefix"),d=0;return function(t){return e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),a=t,h(t)};function h(t){return t===a?(e.consume(t),d++,h):(e.exit("codeFencedFenceSequence"),d<3?n(t):s(e,p,"whitespace")(t))}function p(t){return null===t||i(t)?v(t):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(t))}function f(t){return null===t||r(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),s(e,m,"whitespace")(t)):96===t&&t===a?n(t):(e.consume(t),f)}function m(t){return null===t||i(t)?v(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),g(t))}function g(t){return null===t||i(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),v(t)):96===t&&t===a?n(t):(e.consume(t),g)}function v(n){return e.exit("codeFencedFence"),l.interrupt?t(n):b(n)}function b(t){return null===t?x(t):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),e.attempt(c,x,u?s(e,b,"linePrefix",u+1):b)):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||i(t)?(e.exit("codeFlowValue"),b(t)):(e.consume(t),y)}function x(n){return e.exit("codeFenced"),t(n)}},concrete:!0};e.exports=a},7375:(e,t,n)=>{"use strict";var i=n(3400),r=n(8334),o=n(2707),s=n(6449),a={name:"codeIndented",tokenize:function(e,t,n){return e.attempt(l,r,n);function r(n){return null===n?t(n):i(n)?e.attempt(l,r,t)(n):(e.enter("codeFlowValue"),o(n))}function o(t){return null===t||i(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),o)}},resolve:function(e,t){var n={type:"codeIndented",start:e[0][1].start,end:e[e.length-1][1].end};return r(e,0,0,[["enter",n,t]]),r(e,e.length,0,[["exit",n,t]]),e}},l={tokenize:function(e,t,n){var r=this;return s(e,(function a(l){if(i(l))return e.enter("lineEnding"),e.consume(l),e.exit("lineEnding"),s(e,a,"linePrefix",5);return o(r.events,"linePrefix")<4?n(l):t(l)}),"linePrefix",5)},partial:!0};e.exports=a},3731:(e,t,n)=>{"use strict";var i=n(3400),r={name:"codeText",tokenize:function(e,t,n){var r,o,s=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),s++,a):(e.exit("codeTextSequence"),l(t))}function l(t){return null===t?n(t):96===t?(o=e.enter("codeTextSequence"),r=0,u(t)):32===t?(e.enter("space"),e.consume(t),e.exit("space"),l):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l):(e.enter("codeTextData"),c(t))}function c(t){return null===t||32===t||96===t||i(t)?(e.exit("codeTextData"),l(t)):(e.consume(t),c)}function u(n){return 96===n?(e.consume(n),r++,u):r===s?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(o.type="codeTextData",c(n))}},resolve:function(e){var t,n,i=e.length-4,r=3;if(("lineEnding"===e[r][1].type||"space"===e[r][1].type)&&("lineEnding"===e[i][1].type||"space"===e[i][1].type))for(t=r;++t<i;)if("codeTextData"===e[t][1].type){e[i][1].type=e[r][1].type="codeTextPadding",r+=2,i-=2;break}t=r-1,i++;for(;++t<=i;)void 0===n?t!==i&&"lineEnding"!==e[t][1].type&&(n=t):t!==i&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),i-=t-n-2,t=n+2),n=void 0);return e},previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type}};e.exports=r},4797:(e,t,n)=>{"use strict";var i=n(3400),r=n(2707),o=n(8866),s=n(6449),a={tokenize:function(e,t){var n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),r(t)};function r(t){return null===t?o(t):i(t)?e.check(l,s,o)(t):(e.consume(t),r)}function o(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function s(t){return e.consume(t),e.exit("chunkContent"),n=n.next=e.enter("chunkContent",{contentType:"content",previous:n}),r}},resolve:function(e){return o(e),e},interruptible:!0,lazy:!0},l={tokenize:function(e,t,n){var o=this;return function(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),s(e,a,"linePrefix")};function a(s){return null===s||i(s)?n(s):o.parser.constructs.disable.null.indexOf("codeIndented")>-1||r(o.events,"linePrefix")<4?e.interrupt(o.parser.constructs.flow,n,t)(s):t(s)}},partial:!0};e.exports=a},7591:(e,t,n)=>{"use strict";var i=n(3400),r=n(6415),o=n(1008),s=n(8031),a=n(8185),l=n(6449),c=n(6366),u=n(4729),d={name:"definition",tokenize:function(e,t,n){var r,u=this;return function(t){return e.enter("definition"),a.call(u,e,d,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)};function d(t){return r=o(u.sliceSerialize(u.events[u.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),c(e,s(e,e.attempt(h,l(e,p,"whitespace"),l(e,p,"whitespace")),n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString"))):n(t)}function p(o){return null===o||i(o)?(e.exit("definition"),u.parser.defined.indexOf(r)<0&&u.parser.defined.push(r),t(o)):n(o)}}},h={tokenize:function(e,t,n){return function(t){return r(t)?c(e,o)(t):n(t)};function o(t){return 34===t||39===t||40===t?u(e,l(e,s,"whitespace"),n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t):n(t)}function s(e){return null===e||i(e)?t(e):n(e)}},partial:!0};e.exports=d},8031:(e,t,n)=>{"use strict";var i=n(3347),r=n(6415),o=n(3400);e.exports=function(e,t,n,s,a,l,c,u,d){var h=d||1/0,p=0;return function(t){if(60===t)return e.enter(s),e.enter(a),e.enter(l),e.consume(t),e.exit(l),f;if(i(t)||41===t)return n(t);return e.enter(s),e.enter(c),e.enter(u),e.enter("chunkString",{contentType:"string"}),v(t)};function f(n){return 62===n?(e.enter(l),e.consume(n),e.exit(l),e.exit(a),e.exit(s),t):(e.enter(u),e.enter("chunkString",{contentType:"string"}),m(n))}function m(t){return 62===t?(e.exit("chunkString"),e.exit(u),f(t)):null===t||60===t||o(t)?n(t):(e.consume(t),92===t?g:m)}function g(t){return 60===t||62===t||92===t?(e.consume(t),m):m(t)}function v(o){return 40===o?++p>h?n(o):(e.consume(o),v):41===o?p--?(e.consume(o),v):(e.exit("chunkString"),e.exit(u),e.exit(c),e.exit(s),t(o)):null===o||r(o)?p?n(o):(e.exit("chunkString"),e.exit(u),e.exit(c),e.exit(s),t(o)):i(o)?n(o):(e.consume(o),92===o?b:v)}function b(t){return 40===t||41===t||92===t?(e.consume(t),v):v(t)}}},8185:(e,t,n)=>{"use strict";var i=n(3400),r=n(1336);e.exports=function(e,t,n,o,s,a){var l,c=this,u=0;return function(t){return e.enter(o),e.enter(s),e.consume(t),e.exit(s),e.enter(a),d};function d(r){return null===r||91===r||93===r&&!l||94===r&&!u&&"_hiddenFootnoteSupport"in c.parser.constructs||u>999?n(r):93===r?(e.exit(a),e.enter(s),e.consume(r),e.exit(s),e.exit(o),t):i(r)?(e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),d):(e.enter("chunkString",{contentType:"string"}),h(r))}function h(t){return null===t||91===t||93===t||i(t)||u++>999?(e.exit("chunkString"),d(t)):(e.consume(t),l=l||!r(t),92===t?p:h)}function p(t){return 91===t||92===t||93===t?(e.consume(t),u++,h):h(t)}}},6449:(e,t,n)=>{"use strict";var i=n(1336);e.exports=function(e,t,n,r){var o=r?r-1:1/0,s=0;return function(r){if(i(r))return e.enter(n),a(r);return t(r)};function a(r){return i(r)&&s++<o?(e.consume(r),a):(e.exit(n),t(r))}}},4729:(e,t,n)=>{"use strict";var i=n(3400),r=n(6449);e.exports=function(e,t,n,o,s,a){var l;return function(t){return e.enter(o),e.enter(s),e.consume(t),e.exit(s),l=40===t?41:t,c};function c(n){return n===l?(e.enter(s),e.consume(n),e.exit(s),e.exit(o),t):(e.enter(a),u(n))}function u(t){return t===l?(e.exit(a),c(l)):null===t?n(t):i(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),r(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return t===l||null===t||i(t)?(e.exit("chunkString"),u(t)):(e.consume(t),92===t?h:d)}function h(t){return t===l||92===t?(e.consume(t),d):d(t)}}},6366:(e,t,n)=>{"use strict";var i=n(3400),r=n(1336),o=n(6449);e.exports=function(e,t){var n;return function s(a){if(i(a))return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,s;if(r(a))return o(e,s,n?"linePrefix":"lineSuffix")(a);return t(a)}}},8829:(e,t,n)=>{"use strict";var i=n(3400),r={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.enter("escapeMarker"),e.consume(t),r};function r(r){return i(r)?(e.exit("escapeMarker"),e.exit("hardBreakEscape"),t(r)):n(r)}}};e.exports=r},2484:(e,t,n)=>{"use strict";var i=n(3400),r=n(6415),o=n(1336),s=n(8334),a=n(6449),l={name:"headingAtx",tokenize:function(e,t,n){var s=this,l=0;return function(t){return e.enter("atxHeading"),e.enter("atxHeadingSequence"),c(t)};function c(i){return 35===i&&l++<6?(e.consume(i),c):null===i||r(i)?(e.exit("atxHeadingSequence"),s.interrupt?t(i):u(i)):n(i)}function u(n){return 35===n?(e.enter("atxHeadingSequence"),d(n)):null===n||i(n)?(e.exit("atxHeading"),t(n)):o(n)?a(e,u,"whitespace")(n):(e.enter("atxHeadingText"),h(n))}function d(t){return 35===t?(e.consume(t),d):(e.exit("atxHeadingSequence"),u(t))}function h(t){return null===t||35===t||r(t)?(e.exit("atxHeadingText"),u(t)):(e.consume(t),h)}},resolve:function(e,t){var n,i,r=e.length-2,o=3;"whitespace"===e[o][1].type&&(o+=2);r-2>o&&"whitespace"===e[r][1].type&&(r-=2);"atxHeadingSequence"===e[r][1].type&&(o===r-1||r-4>o&&"whitespace"===e[r-2][1].type)&&(r-=o+1===r?2:4);r>o&&(n={type:"atxHeadingText",start:e[o][1].start,end:e[r][1].end},i={type:"chunkText",start:e[o][1].start,end:e[r][1].end,contentType:"text"},s(e,o,r-o+1,[["enter",n,t],["enter",i,t],["exit",i,t],["exit",n,t]]));return e}};e.exports=l},2944:(e,t,n)=>{"use strict";var i=n(4542),r=n(6647),o=n(3400),s=n(6415),a=n(1336),l=n(6714),c=n(7753),u=n(7782),d=n(9097),h={name:"htmlFlow",tokenize:function(e,t,n){var d,h,f,m,g,v=this;return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),b};function b(r){return 33===r?(e.consume(r),y):47===r?(e.consume(r),w):63===r?(e.consume(r),d=3,v.interrupt?t:z):i(r)?(e.consume(r),f=l(r),h=!0,S):n(r)}function y(r){return 45===r?(e.consume(r),d=2,x):91===r?(e.consume(r),d=5,f="CDATA[",m=0,k):i(r)?(e.consume(r),d=4,v.interrupt?t:z):n(r)}function x(i){return 45===i?(e.consume(i),v.interrupt?t:z):n(i)}function k(i){return i===f.charCodeAt(m++)?(e.consume(i),m===f.length?v.interrupt?t:D:k):n(i)}function w(t){return i(t)?(e.consume(t),f=l(t),S):n(t)}function S(i){return null===i||47===i||62===i||s(i)?47!==i&&h&&u.indexOf(f.toLowerCase())>-1?(d=1,v.interrupt?t(i):D(i)):c.indexOf(f.toLowerCase())>-1?(d=6,47===i?(e.consume(i),C):v.interrupt?t(i):D(i)):(d=7,v.interrupt?n(i):h?E(i):T(i)):45===i||r(i)?(e.consume(i),f+=l(i),S):n(i)}function C(i){return 62===i?(e.consume(i),v.interrupt?t:D):n(i)}function T(t){return a(t)?(e.consume(t),T):M(t)}function E(t){return 47===t?(e.consume(t),M):58===t||95===t||i(t)?(e.consume(t),_):a(t)?(e.consume(t),E):M(t)}function _(t){return 45===t||46===t||58===t||95===t||r(t)?(e.consume(t),_):I(t)}function I(t){return 61===t?(e.consume(t),R):a(t)?(e.consume(t),I):E(t)}function R(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),g=t,P):a(t)?(e.consume(t),R):(g=void 0,A(t))}function P(t){return t===g?(e.consume(t),O):null===t||o(t)?n(t):(e.consume(t),P)}function A(t){return null===t||34===t||39===t||60===t||61===t||62===t||96===t||s(t)?I(t):(e.consume(t),A)}function O(e){return 47===e||62===e||a(e)?E(e):n(e)}function M(t){return 62===t?(e.consume(t),N):n(t)}function N(t){return a(t)?(e.consume(t),N):null===t||o(t)?D(t):n(t)}function D(t){return 45===t&&2===d?(e.consume(t),F):60===t&&1===d?(e.consume(t),B):62===t&&4===d?(e.consume(t),V):63===t&&3===d?(e.consume(t),z):93===t&&5===d?(e.consume(t),$):!o(t)||6!==d&&7!==d?null===t||o(t)?j(t):(e.consume(t),D):e.check(p,V,j)(t)}function j(t){return e.exit("htmlFlowData"),L(t)}function L(t){return null===t?H(t):o(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),L):(e.enter("htmlFlowData"),D(t))}function F(t){return 45===t?(e.consume(t),z):D(t)}function B(t){return 47===t?(e.consume(t),f="",U):D(t)}function U(t){return 62===t&&u.indexOf(f.toLowerCase())>-1?(e.consume(t),V):i(t)&&f.length<8?(e.consume(t),f+=l(t),U):D(t)}function $(t){return 93===t?(e.consume(t),z):D(t)}function z(t){return 62===t?(e.consume(t),V):D(t)}function V(t){return null===t||o(t)?(e.exit("htmlFlowData"),H(t)):(e.consume(t),V)}function H(n){return e.exit("htmlFlow"),t(n)}},resolveTo:function(e){var t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},concrete:!0},p={tokenize:function(e,t,n){return function(i){return e.exit("htmlFlowData"),e.enter("lineEndingBlank"),e.consume(i),e.exit("lineEndingBlank"),e.attempt(d,t,n)}},partial:!0};e.exports=h},5135:(e,t,n)=>{"use strict";var i=n(4542),r=n(6647),o=n(3400),s=n(6415),a=n(1336),l=n(6449),c={name:"htmlText",tokenize:function(e,t,n){var c,u,d,h,p=this;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),f};function f(t){return 33===t?(e.consume(t),m):47===t?(e.consume(t),I):63===t?(e.consume(t),E):i(t)?(e.consume(t),A):n(t)}function m(t){return 45===t?(e.consume(t),g):91===t?(e.consume(t),u="CDATA[",d=0,k):i(t)?(e.consume(t),T):n(t)}function g(t){return 45===t?(e.consume(t),v):n(t)}function v(t){return null===t||62===t?n(t):45===t?(e.consume(t),b):y(t)}function b(e){return null===e||62===e?n(e):y(e)}function y(t){return null===t?n(t):45===t?(e.consume(t),x):o(t)?(h=y,B(t)):(e.consume(t),y)}function x(t){return 45===t?(e.consume(t),$):y(t)}function k(t){return t===u.charCodeAt(d++)?(e.consume(t),d===u.length?w:k):n(t)}function w(t){return null===t?n(t):93===t?(e.consume(t),S):o(t)?(h=w,B(t)):(e.consume(t),w)}function S(t){return 93===t?(e.consume(t),C):w(t)}function C(t){return 62===t?$(t):93===t?(e.consume(t),C):w(t)}function T(t){return null===t||62===t?$(t):o(t)?(h=T,B(t)):(e.consume(t),T)}function E(t){return null===t?n(t):63===t?(e.consume(t),_):o(t)?(h=E,B(t)):(e.consume(t),E)}function _(e){return 62===e?$(e):E(e)}function I(t){return i(t)?(e.consume(t),R):n(t)}function R(t){return 45===t||r(t)?(e.consume(t),R):P(t)}function P(t){return o(t)?(h=P,B(t)):a(t)?(e.consume(t),P):$(t)}function A(t){return 45===t||r(t)?(e.consume(t),A):47===t||62===t||s(t)?O(t):n(t)}function O(t){return 47===t?(e.consume(t),$):58===t||95===t||i(t)?(e.consume(t),M):o(t)?(h=O,B(t)):a(t)?(e.consume(t),O):$(t)}function M(t){return 45===t||46===t||58===t||95===t||r(t)?(e.consume(t),M):N(t)}function N(t){return 61===t?(e.consume(t),D):o(t)?(h=N,B(t)):a(t)?(e.consume(t),N):O(t)}function D(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),c=t,j):o(t)?(h=D,B(t)):a(t)?(e.consume(t),D):(e.consume(t),c=void 0,F)}function j(t){return t===c?(e.consume(t),L):null===t?n(t):o(t)?(h=j,B(t)):(e.consume(t),j)}function L(e){return 62===e||47===e||s(e)?O(e):n(e)}function F(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):62===t||s(t)?O(t):(e.consume(t),F)}function B(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l(e,U,"linePrefix",p.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)}function U(t){return e.enter("htmlTextData"),h(t)}function $(i){return 62===i?(e.consume(i),e.exit("htmlTextData"),e.exit("htmlText"),t):n(i)}}};e.exports=c},1446:(e,t,n)=>{"use strict";var i=n(6415),r=n(8398),o=n(8334),s=n(1008),a=n(2375),l=n(5669),c=n(8031),u=n(8185),d=n(4729),h=n(6366),p={name:"labelEnd",tokenize:function(e,t,n){var i,r,o=this,a=o.events.length;for(;a--;)if(("labelImage"===o.events[a][1].type||"labelLink"===o.events[a][1].type)&&!o.events[a][1]._balanced){i=o.events[a][1];break}return function(t){if(!i)return n(t);return i._inactive?c(t):(r=o.parser.defined.indexOf(s(o.sliceSerialize({start:i.end,end:o.now()})))>-1,e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),l)};function l(n){return 40===n?e.attempt(f,t,r?t:c)(n):91===n?e.attempt(m,t,r?e.attempt(g,t,c):c)(n):r?t(n):c(n)}function c(e){return i._balanced=!0,n(e)}},resolveTo:function(e,t){var n,i,s,c,u,d,h,p=e.length,f=0;for(;p--;)if(c=e[p][1],u){if("link"===c.type||"labelLink"===c.type&&c._inactive)break;"enter"===e[p][0]&&"labelLink"===c.type&&(c._inactive=!0)}else if(d){if("enter"===e[p][0]&&("labelImage"===c.type||"labelLink"===c.type)&&!c._balanced&&(u=p,"labelLink"!==c.type)){f=2;break}}else"labelEnd"===c.type&&(d=p);return n={type:"labelLink"===e[u][1].type?"link":"image",start:l(e[u][1].start),end:l(e[e.length-1][1].end)},i={type:"label",start:l(e[u][1].start),end:l(e[d][1].end)},s={type:"labelText",start:l(e[u+f+2][1].end),end:l(e[d-2][1].start)},h=r(h=[["enter",n,t],["enter",i,t]],e.slice(u+1,u+f+3)),h=r(h,[["enter",s,t]]),h=r(h,a(t.parser.constructs.insideSpan.null,e.slice(u+f+4,d-3),t)),h=r(h,[["exit",s,t],e[d-2],e[d-1],["exit",i,t]]),h=r(h,e.slice(d+1)),h=r(h,[["exit",n,t]]),o(e,u,e.length,h),e},resolveAll:function(e){var t,n=-1;for(;++n<e.length;)(t=e[n][1])._used||"labelImage"!==t.type&&"labelLink"!==t.type&&"labelEnd"!==t.type||(e.splice(n+1,"labelImage"===t.type?4:2),t.type="data",n++);return e}},f={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),h(e,r)};function r(t){return 41===t?a(t):c(e,o,n,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",3)(t)}function o(t){return i(t)?h(e,s)(t):a(t)}function s(t){return 34===t||39===t||40===t?d(e,h(e,a),n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):a(t)}function a(i){return 41===i?(e.enter("resourceMarker"),e.consume(i),e.exit("resourceMarker"),e.exit("resource"),t):n(i)}}},m={tokenize:function(e,t,n){var i=this;return function(t){return u.call(i,e,r,n,"reference","referenceMarker","referenceString")(t)};function r(e){return i.parser.defined.indexOf(s(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))<0?n(e):t(e)}}},g={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),i};function i(i){return 93===i?(e.enter("referenceMarker"),e.consume(i),e.exit("referenceMarker"),e.exit("reference"),t):n(i)}}};e.exports=p},6959:(e,t,n)=>{"use strict";var i={name:"labelStartImage",tokenize:function(e,t,n){var i=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),r};function r(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),o):n(t)}function o(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}},resolveAll:n(1446).resolveAll};e.exports=i},4172:(e,t,n)=>{"use strict";var i={name:"labelStartLink",tokenize:function(e,t,n){var i=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),r};function r(e){return 94===e&&"_hiddenFootnoteSupport"in i.parser.constructs?n(e):t(e)}},resolveAll:n(1446).resolveAll};e.exports=i},7854:(e,t,n)=>{"use strict";var i=n(6449),r={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),i(e,t,"linePrefix")}}};e.exports=r},8394:(e,t,n)=>{"use strict";var i=n(9675),r=n(1336),o=n(2707),s=n(1175),a=n(6449),l=n(9097),c=n(6519),u={name:"list",tokenize:function(e,t,n){var a=this,u=o(a.events,"linePrefix"),h=0;return function(t){var r=a.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===r?!a.containerState.marker||t===a.containerState.marker:i(t)){if(a.containerState.type||(a.containerState.type=r,e.enter(r,{_container:!0})),"listUnordered"===r)return e.enter("listItemPrefix"),42===t||45===t?e.check(c,n,f)(t):f(t);if(!a.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),p(t)}return n(t)};function p(t){return i(t)&&++h<10?(e.consume(t),p):(!a.interrupt||h<2)&&(a.containerState.marker?t===a.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),f(t)):n(t)}function f(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),a.containerState.marker=a.containerState.marker||t,e.check(l,a.interrupt?n:m,e.attempt(d,v,g))}function m(e){return a.containerState.initialBlankLine=!0,u++,v(e)}function g(t){return r(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),v):n(t)}function v(n){return a.containerState.size=u+s(a.sliceStream(e.exit("listItemPrefix"))),t(n)}},continuation:{tokenize:function(e,t,n){var i=this;return i.containerState._closeFlow=void 0,e.check(l,(function(n){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,a(e,t,"listItemIndent",i.containerState.size+1)(n)}),(function(n){if(i.containerState.furtherBlankLines||!r(n))return i.containerState.furtherBlankLines=i.containerState.initialBlankLine=void 0,o(n);return i.containerState.furtherBlankLines=i.containerState.initialBlankLine=void 0,e.attempt(h,t,o)(n)}));function o(r){return i.containerState._closeFlow=!0,i.interrupt=void 0,a(e,e.attempt(u,t,n),"linePrefix",i.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:4)(r)}}},exit:function(e){e.exit(this.containerState.type)}},d={tokenize:function(e,t,n){var i=this;return a(e,(function(e){return r(e)||!o(i.events,"listItemPrefixWhitespace")?n(e):t(e)}),"listItemPrefixWhitespace",i.parser.constructs.disable.null.indexOf("codeIndented")>-1?void 0:5)},partial:!0},h={tokenize:function(e,t,n){var i=this;return a(e,(function(e){return o(i.events,"listItemIndent")===i.containerState.size?t(e):n(e)}),"listItemIndent",i.containerState.size+1)},partial:!0};e.exports=u},9097:(e,t,n)=>{"use strict";var i=n(3400),r=n(6449),o={tokenize:function(e,t,n){return r(e,(function(e){return null===e||i(e)?t(e):n(e)}),"linePrefix")},partial:!0};e.exports=o},8904:(e,t,n)=>{"use strict";var i=n(3400),r=n(5669),o=n(6449),s={name:"setextUnderline",tokenize:function(e,t,n){var r,s,a=this,l=a.events.length;for(;l--;)if("lineEnding"!==a.events[l][1].type&&"linePrefix"!==a.events[l][1].type&&"content"!==a.events[l][1].type){s="paragraph"===a.events[l][1].type;break}return function(t){if(!a.lazy&&(a.interrupt||s))return e.enter("setextHeadingLine"),e.enter("setextHeadingLineSequence"),r=t,c(t);return n(t)};function c(t){return t===r?(e.consume(t),c):(e.exit("setextHeadingLineSequence"),o(e,u,"lineSuffix")(t))}function u(r){return null===r||i(r)?(e.exit("setextHeadingLine"),t(r)):n(r)}},resolveTo:function(e,t){var n,i,o,s,a=e.length;for(;a--;)if("enter"===e[a][0]){if("content"===e[a][1].type){n=a;break}"paragraph"===e[a][1].type&&(i=a)}else"content"===e[a][1].type&&e.splice(a,1),o||"definition"!==e[a][1].type||(o=a);s={type:"setextHeading",start:r(e[i][1].start),end:r(e[e.length-1][1].end)},e[i][1].type="setextHeadingText",o?(e.splice(i,0,["enter",s,t]),e.splice(o+1,0,["exit",e[n][1],t]),e[n][1].end=r(e[o][1].end)):e[n][1]=s;return e.push(["exit",s,t]),e}};e.exports=s},6519:(e,t,n)=>{"use strict";var i=n(3400),r=n(1336),o=n(6449),s={name:"thematicBreak",tokenize:function(e,t,n){var s,a=0;return function(t){return e.enter("thematicBreak"),s=t,l(t)};function l(u){return u===s?(e.enter("thematicBreakSequence"),c(u)):r(u)?o(e,l,"whitespace")(u):a<3||null!==u&&!i(u)?n(u):(e.exit("thematicBreak"),t(u))}function c(t){return t===s?(e.consume(t),a++,c):(e.exit("thematicBreakSequence"),l(t))}}};e.exports=s},8398:(e,t,n)=>{"use strict";var i=n(8334);e.exports=function(e,t){return e.length?(i(e,e.length,0,t),e):t}},8334:(e,t,n)=>{"use strict";var i=n(7789);e.exports=function(e,t,n,r){var o,s=e.length,a=0;if(t=t<0?-t>s?0:s+t:t>s?s:t,n=n>0?n:0,r.length<1e4)(o=Array.from(r)).unshift(t,n),i.apply(e,o);else for(n&&i.apply(e,[t,n]);a<r.length;)(o=r.slice(a,a+1e4)).unshift(t,0),i.apply(e,o),a+=1e4,t+=1e4}},5217:(e,t,n)=>{"use strict";var i=n(6415),r=n(4130),o=n(8077);e.exports=function(e){return null===e||i(e)||o(e)?1:r(e)?2:void 0}},4903:(e,t,n)=>{"use strict";var i=n(7856),r=n(8334),o=n(7177);function s(e,t){var n,r,s,l;for(n in t)for(l in r=i.call(e,n)?e[n]:e[n]={},s=t[n])r[l]=a(o(s[l]),i.call(r,l)?r[l]:[])}function a(e,t){for(var n=-1,i=[];++n<e.length;)("after"===e[n].add?t:i).push(e[n]);return r(t,0,0,i),t}e.exports=function(e){for(var t={},n=-1;++n<e.length;)s(t,e[n]);return t}},3045:(e,t,n)=>{"use strict";var i=n(3160),r=n(3400),o=n(8398),s=n(8334),a=n(7177),l=n(2375),c=n(5570),u=n(5669),d=n(570);e.exports=function(e,t,n){var h=n?u(n):{line:1,column:1,offset:0},p={},f=[],m=[],g=[],v={consume:function(e){r(e)?(h.line++,h.column=1,h.offset+=-3===e?2:1,_()):-1!==e&&(h.column++,h.offset++);h._bufferIndex<0?h._index++:(h._bufferIndex++,h._bufferIndex===m[h._index].length&&(h._bufferIndex=-1,h._index++));b.previous=e},enter:function(e,t){var n=t||{};return n.type=e,n.start=k(),b.events.push(["enter",n,b]),g.push(n),n},exit:function(e){var t=g.pop();return t.end=k(),b.events.push(["exit",t,b]),t},attempt:T((function(e,t){E(e,t.from)})),check:T(C),interrupt:T(C,{interrupt:!0}),lazy:T(C,{lazy:!0})},b={previous:null,events:[],parser:e,sliceStream:x,sliceSerialize:function(e){return c(x(e))},now:k,defineSkip:function(e){p[e.line]=e.column,_()},write:function(e){if(m=o(m,e),w(),null!==m[m.length-1])return[];return E(t,0),b.events=l(f,b.events,b),b.events}},y=t.tokenize.call(b,v);return t.resolveAll&&f.push(t),h._index=0,h._bufferIndex=-1,b;function x(e){return d(m,e)}function k(){return u(h)}function w(){for(var e,t;h._index<m.length;)if("string"===typeof(t=m[h._index]))for(e=h._index,h._bufferIndex<0&&(h._bufferIndex=0);h._index===e&&h._bufferIndex<t.length;)S(t.charCodeAt(h._bufferIndex));else S(t)}function S(e){y=y(e)}function C(e,t){t.restore()}function T(e,t){return function(n,r,o){var s,l,c,u;return n.tokenize||"length"in n?d(a(n)):function(e){if(e in n||null in n)return d(n.null?a(n[e]).concat(a(n.null)):n[e])(e);return o(e)};function d(e){return s=e,p(e[l=0])}function p(e){return function(n){u=function(){var e=k(),t=b.previous,n=b.currentConstruct,i=b.events.length,r=Array.from(g);return{restore:o,from:i};function o(){h=e,b.previous=t,b.currentConstruct=n,b.events.length=i,g=r,_()}}(),c=e,e.partial||(b.currentConstruct=e);if(e.name&&b.parser.constructs.disable.null.indexOf(e.name)>-1)return m();return e.tokenize.call(t?i({},b,t):b,v,f,m)(n)}}function f(t){return e(c,u),r}function m(e){return u.restore(),++l<s.length?p(s[l]):o}}}function E(e,t){e.resolveAll&&f.indexOf(e)<0&&f.push(e),e.resolve&&s(b.events,t,b.events.length-t,e.resolve(b.events.slice(t),b)),e.resolveTo&&(b.events=e.resolveTo(b.events,b))}function _(){h.line in p&&h.column<2&&(h.column=p[h.line],h.offset+=p[h.line]-1)}}},7177:e=>{"use strict";e.exports=function(e){return null===e||void 0===e?[]:"length"in e?e:[e]}},4235:e=>{"use strict";e.exports=function(e,t){return e.column+=t,e.offset+=t,e._bufferIndex+=t,e}},1008:e=>{"use strict";e.exports=function(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}},2707:(e,t,n)=>{"use strict";var i=n(1175);e.exports=function(e,t){var n=e[e.length-1];return n&&n[1].type===t?i(n[2].sliceStream(n[1])):0}},107:(e,t,n)=>{"use strict";var i=n(6714);e.exports=function(e){return function(t){return e.test(i(t))}}},2375:e=>{"use strict";e.exports=function(e,t,n){for(var i,r=[],o=-1;++o<e.length;)(i=e[o].resolveAll)&&r.indexOf(i)<0&&(t=i(t,n),r.push(i));return t}},8149:(e,t,n)=>{"use strict";var i=n(6714);e.exports=function(e,t){var n=parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||65535===(65535&n)||65534===(65535&n)||n>1114111?"\ufffd":i(n)}},5570:(e,t,n)=>{"use strict";var i=n(6714);e.exports=function(e){for(var t,n,r,o=-1,s=[];++o<e.length;){if("string"===typeof(t=e[o]))n=t;else if(-5===t)n="\r";else if(-4===t)n="\n";else if(-3===t)n="\r\n";else if(-2===t)n="\t";else if(-1===t){if(r)continue;n=" "}else n=i(t);r=-2===t,s.push(n)}return s.join("")}},5669:(e,t,n)=>{"use strict";var i=n(3160);e.exports=function(e){return i({},e)}},1175:e=>{"use strict";e.exports=function(e){for(var t=-1,n=0;++t<e.length;)n+="string"===typeof e[t]?e[t].length:1;return n}},570:e=>{"use strict";e.exports=function(e,t){var n,i=t.start._index,r=t.start._bufferIndex,o=t.end._index,s=t.end._bufferIndex;return i===o?n=[e[i].slice(r,s)]:(n=e.slice(i,o),r>-1&&(n[0]=n[0].slice(r)),s>0&&n.push(e[o].slice(0,s))),n}},8866:(e,t,n)=>{"use strict";var i=n(3160),r=n(8334),o=n(5669);function s(e,t){for(var n,i,o,s,a,l,c=e[t][1],u=e[t][2],d=t-1,h=[],p=c._tokenizer||u.parser[c.contentType](c.start),f=p.events,m=[],g={};c;){for(;e[++d][1]!==c;);h.push(d),c._tokenizer||(n=u.sliceStream(c),c.next||n.push(null),i&&p.defineSkip(c.start),c.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=!0),p.write(n),c.isInFirstContentOfListItem&&(p._gfmTasklistFirstContentOfListItem=void 0)),i=c,c=c.next}for(c=i,o=f.length;o--;)"enter"===f[o][0]?s=!0:s&&f[o][1].type===f[o-1][1].type&&f[o][1].start.line!==f[o][1].end.line&&(v(f.slice(o+1,a)),c._tokenizer=c.next=void 0,c=c.previous,a=o+1);for(p.events=c._tokenizer=c.next=void 0,v(f.slice(0,a)),o=-1,l=0;++o<m.length;)g[l+m[o][0]]=l+m[o][1],l+=m[o][1]-m[o][0]-1;return g;function v(t){var n=h.pop();m.unshift([n,n+t.length-1]),r(e,n,2,t)}}e.exports=function(e){for(var t,n,a,l,c,u,d,h={},p=-1;++p<e.length;){for(;p in h;)p=h[p];if(t=e[p],p&&"chunkFlow"===t[1].type&&"listItemPrefix"===e[p-1][1].type&&((a=0)<(u=t[1]._tokenizer.events).length&&"lineEndingBlank"===u[a][1].type&&(a+=2),a<u.length&&"content"===u[a][1].type))for(;++a<u.length&&"content"!==u[a][1].type;)"chunkText"===u[a][1].type&&(u[a][1].isInFirstContentOfListItem=!0,a++);if("enter"===t[0])t[1].contentType&&(i(h,s(e,p)),p=h[p],d=!0);else if(t[1]._container||t[1]._movePreviousLineEndings){for(a=p,n=void 0;a--&&("lineEnding"===(l=e[a])[1].type||"lineEndingBlank"===l[1].type);)"enter"===l[0]&&(n&&(e[n][1].type="lineEndingBlank"),l[1].type="lineEnding",n=a);n&&(t[1].end=o(e[n][1].start),(c=e.slice(n,p)).unshift(t),r(e,n,p-n+1,c))}}return!d}},6928:(e,t,n)=>{"use strict";e.exports=function(e){var t=this;this.Parser=function(n){return i(n,Object.assign({},t.data("settings"),e,{extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]}))}};var i=n(3935)},6248:(e,t,n)=>{"use strict";var i=n(177);e.exports=function(e,t){e&&!e.process&&(t=e,e=null);return e?function(e,t){return n;function n(n,r,o){function s(e){o(e)}e.run(i(n,t),r,s)}}(e,t):function(e){return t;function t(t){return i(t,e)}}(t)}},1223:(e,t,n)=>{"use strict";var i=n(4015);e.exports=o,o.wrap=i;var r=[].slice;function o(){var e=[],t={run:function(){var t=-1,n=r.call(arguments,0,-1),o=arguments[arguments.length-1];if("function"!==typeof o)throw new Error("Expected function as last argument, not "+o);(function s(a){var l=e[++t],c=r.call(arguments,0).slice(1),u=n.length,d=-1;if(a)o(a);else{for(;++d<u;)null!==c[d]&&void 0!==c[d]||(c[d]=n[d]);n=c,l?i(l,s).apply(null,n):o.apply(null,[null].concat(n))}}).apply(null,[null].concat(n))},use:function(n){if("function"!==typeof n)throw new Error("Expected `fn` to be a function, not "+n);return e.push(n),t}};return t}},4015:e=>{"use strict";var t=[].slice;e.exports=function(e,n){var i;return function(){var n,s=t.call(arguments,0),a=e.length>s.length;a&&s.push(r);try{n=e.apply(null,s)}catch(l){if(a&&i)throw l;return r(l)}a||(n&&"function"===typeof n.then?n.then(o,r):n instanceof Error?r(n):o(n))};function r(){i||(i=!0,n.apply(null,arguments))}function o(e){r(null,e)}}},9212:(e,t,n)=>{"use strict";var i=n(8686),r=n(5837),o=n(3240),s=n(7927),a=n(1223),l=n(3226);e.exports=function e(){var t,n=[],r=a(),b={},y=-1;return x.data=function(e,n){if("string"===typeof e)return 2===arguments.length?(m("data",t),b[e]=n,x):u.call(b,e)&&b[e]||null;if(e)return m("data",t),b=e,x;return b},x.freeze=k,x.attachers=n,x.use=function(e){var i;if(m("use",t),null===e||void 0===e);else if("function"===typeof e)u.apply(null,arguments);else{if("object"!==typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?l(e):r(e)}i&&(b.settings=o(b.settings||{},i));return x;function r(e){l(e.plugins),e.settings&&(i=o(i||{},e.settings))}function a(e){if("function"===typeof e)u(e);else{if("object"!==typeof e)throw new Error("Expected usable value, not `"+e+"`");"length"in e?u.apply(null,e):r(e)}}function l(e){var t=-1;if(null===e||void 0===e);else{if("object"!==typeof e||!("length"in e))throw new Error("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;)a(e[t])}}function u(e,t){var i=w(e);i?(s(i[1])&&s(t)&&(t=o(!0,i[1],t)),i[1]=t):n.push(c.call(arguments))}},x.parse=function(e){var t,n=l(e);if(k(),p("parse",t=x.Parser),h(t,"parse"))return new t(String(n),n).parse();return t(String(n),n)},x.stringify=function(e,t){var n,i=l(t);if(k(),f("stringify",n=x.Compiler),g(e),h(n,"compile"))return new n(e,i).compile();return n(e,i)},x.run=S,x.runSync=function(e,t){var n,r;return S(e,t,o),v("runSync","run",r),n;function o(e,t){r=!0,n=t,i(e)}},x.process=C,x.processSync=function(e){var t,n;return k(),p("processSync",x.Parser),f("processSync",x.Compiler),C(t=l(e),r),v("processSync","process",n),t;function r(e){n=!0,i(e)}},x;function x(){for(var t=e(),i=-1;++i<n.length;)t.use.apply(null,n[i]);return t.data(o(!0,{},b)),t}function k(){var e,i;if(t)return x;for(;++y<n.length;)!1!==(e=n[y])[1]&&(!0===e[1]&&(e[1]=void 0),"function"===typeof(i=e[0].apply(x,e.slice(1)))&&r.use(i));return t=!0,y=1/0,x}function w(e){for(var t=-1;++t<n.length;)if(n[t][0]===e)return n[t]}function S(e,t,n){if(g(e),k(),n||"function"!==typeof t||(n=t,t=null),!n)return new Promise(i);function i(i,o){r.run(e,l(t),(function(t,r,s){r=r||e,t?o(t):i?i(r):n(null,r,s)}))}i(null,n)}function C(e,t){if(k(),p("process",x.Parser),f("process",x.Compiler),!t)return new Promise(n);function n(n,i){var r=l(e);d.run(x,{file:r},(function(e){e?i(e):n?n(r):t(null,r)}))}n(null,t)}}().freeze();var c=[].slice,u={}.hasOwnProperty,d=a().use((function(e,t){t.tree=e.parse(t.file)})).use((function(e,t,n){e.run(t.tree,t.file,(function(e,i,r){e?n(e):(t.tree=i,t.file=r,n())}))})).use((function(e,t){var n=e.stringify(t.tree,t.file);void 0===n||null===n||("string"===typeof n||r(n)?("value"in t.file&&(t.file.value=n),t.file.contents=n):t.file.result=n)}));function h(e,t){return"function"===typeof e&&e.prototype&&(function(e){var t;for(t in e)return!0;return!1}(e.prototype)||t in e.prototype)}function p(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Parser`")}function f(e,t){if("function"!==typeof t)throw new Error("Cannot `"+e+"` without `Compiler`")}function m(e,t){if(t)throw new Error("Cannot invoke `"+e+"` on a frozen processor.\nCreate a new processor first, by invoking it: use `processor()` instead of `processor`.")}function g(e){if(!e||"string"!==typeof e.type)throw new Error("Expected node, got `"+e+"`")}function v(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}},730:e=>{"use strict";function t(e){if(null==e)return n;if("string"===typeof e)return function(e){return t;function t(t){return Boolean(t&&t.type===e)}}(e);if("object"===typeof e)return"length"in e?function(e){var n=[],i=-1;for(;++i<e.length;)n[i]=t(e[i]);return r;function r(){for(var e=-1;++e<n.length;)if(n[e].apply(this,arguments))return!0;return!1}}(e):function(e){return t;function t(t){var n;for(n in e)if(t[n]!==e[n])return!1;return!0}}(e);if("function"===typeof e)return e;throw new Error("Expected function, string, or object as test")}function n(){return!0}e.exports=t},2210:e=>{"use strict";var t=r("start"),n=r("end");function i(e){return{start:t(e),end:n(e)}}function r(e){return t.displayName=e,t;function t(t){var n=t&&t.position&&t.position[e]||{};return{line:n.line||null,column:n.column||null,offset:isNaN(n.offset)?null:n.offset}}}e.exports=i,i.start=t,i.end=n},394:e=>{"use strict";var t={}.hasOwnProperty;function n(e){return e&&"object"===typeof e||(e={}),r(e.line)+":"+r(e.column)}function i(e){return e&&"object"===typeof e||(e={}),n(e.start)+"-"+n(e.end)}function r(e){return e&&"number"===typeof e?e:1}e.exports=function(e){if(!e||"object"!==typeof e)return"";if(t.call(e,"position")||t.call(e,"type"))return i(e.position);if(t.call(e,"start")||t.call(e,"end"))return i(e);if(t.call(e,"line")||t.call(e,"column"))return n(e);return""}},4461:e=>{e.exports=function(e){return e}},6476:(e,t,n)=>{"use strict";e.exports=l;var i=n(730),r=n(4461),o=!0,s="skip",a=!1;function l(e,t,n,l){var c,u;"function"===typeof t&&"function"!==typeof n&&(l=n,n=t,t=null),u=i(t),c=l?-1:1,function e(i,d,h){var p,f="object"===typeof i&&null!==i?i:{};"string"===typeof f.type&&(p="string"===typeof f.tagName?f.tagName:"string"===typeof f.name?f.name:void 0,m.displayName="node ("+r(f.type+(p?"<"+p+">":""))+")");return m;function m(){var r,p,f=h.concat(i),m=[];if((!t||u(i,d,h[h.length-1]||null))&&(m=function(e){if(null!==e&&"object"===typeof e&&"length"in e)return e;if("number"===typeof e)return[o,e];return[e]}(n(i,h)),m[0]===a))return m;if(i.children&&m[0]!==s)for(p=(l?i.children.length:-1)+c;p>-1&&p<i.children.length;){if((r=e(i.children[p],p,f)())[0]===a)return r;p="number"===typeof r[1]?r[1]:p+c}return m}}(e,null,[])()}l.CONTINUE=o,l.SKIP=s,l.EXIT=a},9512:(e,t,n)=>{"use strict";e.exports=a;var i=n(6476),r=i.CONTINUE,o=i.SKIP,s=i.EXIT;function a(e,t,n,r){"function"===typeof t&&"function"!==typeof n&&(r=n,n=t,t=null),i(e,t,(function(e,t){var i=t[t.length-1],r=i?i.children.indexOf(e):null;return n(e,r,i)}),r)}a.CONTINUE=r,a.SKIP=o,a.EXIT=s},840:(e,t,n)=>{"use strict";var i=n(394);function r(){}e.exports=s,r.prototype=Error.prototype,s.prototype=new r;var o=s.prototype;function s(e,t,n){var r,o,s;"string"===typeof t&&(n=t,t=null),r=function(e){var t,n=[null,null];"string"===typeof e&&(-1===(t=e.indexOf(":"))?n[1]=e:(n[0]=e.slice(0,t),n[1]=e.slice(t+1)));return n}(n),o=i(t)||"1:1",s={start:{line:null,column:null},end:{line:null,column:null}},t&&t.position&&(t=t.position),t&&(t.start?(s=t,t=t.start):s.start=t),e.stack&&(this.stack=e.stack,e=e.message),this.message=e,this.name=o,this.reason=e,this.line=t?t.line:null,this.column=t?t.column:null,this.location=s,this.source=r[0],this.ruleId=r[1]}o.file="",o.name="",o.reason="",o.message="",o.stack="",o.fatal=null,o.column=null,o.line=null},3226:(e,t,n)=>{"use strict";e.exports=n(654)},3459:(e,t,n)=>{"use strict";var i=n(8299),r=n(1904),o=n(5837);e.exports=l;var s={}.hasOwnProperty,a=["history","path","basename","stem","extname","dirname"];function l(e){var t,n;if(e){if("string"===typeof e||o(e))e={contents:e};else if("message"in e&&"messages"in e)return e}else e={};if(!(this instanceof l))return new l(e);for(this.data={},this.messages=[],this.history=[],this.cwd=r.cwd(),n=-1;++n<a.length;)t=a[n],s.call(e,t)&&(this[t]=e[t]);for(t in e)a.indexOf(t)<0&&(this[t]=e[t])}function c(e,t){if(e&&e.indexOf(i.sep)>-1)throw new Error("`"+t+"` cannot be a path: did not expect `"+i.sep+"`")}function u(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function d(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}l.prototype.toString=function(e){return(this.contents||"").toString(e)},Object.defineProperty(l.prototype,"path",{get:function(){return this.history[this.history.length-1]},set:function(e){u(e,"path"),this.path!==e&&this.history.push(e)}}),Object.defineProperty(l.prototype,"dirname",{get:function(){return"string"===typeof this.path?i.dirname(this.path):void 0},set:function(e){d(this.path,"dirname"),this.path=i.join(e||"",this.basename)}}),Object.defineProperty(l.prototype,"basename",{get:function(){return"string"===typeof this.path?i.basename(this.path):void 0},set:function(e){u(e,"basename"),c(e,"basename"),this.path=i.join(this.dirname||"",e)}}),Object.defineProperty(l.prototype,"extname",{get:function(){return"string"===typeof this.path?i.extname(this.path):void 0},set:function(e){if(c(e,"extname"),d(this.path,"extname"),e){if(46!==e.charCodeAt(0))throw new Error("`extname` must start with `.`");if(e.indexOf(".",1)>-1)throw new Error("`extname` cannot contain multiple dots")}this.path=i.join(this.dirname,this.stem+(e||""))}}),Object.defineProperty(l.prototype,"stem",{get:function(){return"string"===typeof this.path?i.basename(this.path,this.extname):void 0},set:function(e){u(e,"stem"),c(e,"stem"),this.path=i.join(this.dirname||"",e+(this.extname||""))}})},654:(e,t,n)=>{"use strict";var i=n(840),r=n(3459);e.exports=r,r.prototype.message=function(e,t,n){var r=new i(e,t,n);this.path&&(r.name=this.path+":"+r.name,r.file=this.path);return r.fatal=!1,this.messages.push(r),r},r.prototype.info=function(){var e=this.message.apply(this,arguments);return e.fatal=null,e},r.prototype.fail=function(){var e=this.message.apply(this,arguments);throw e.fatal=!0,e}},8299:(e,t)=>{"use strict";function n(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}t.basename=function(e,t){var i,r,o,s,a=0,l=-1;if(void 0!==t&&"string"!==typeof t)throw new TypeError('"ext" argument must be a string');if(n(e),i=e.length,void 0===t||!t.length||t.length>e.length){for(;i--;)if(47===e.charCodeAt(i)){if(o){a=i+1;break}}else l<0&&(o=!0,l=i+1);return l<0?"":e.slice(a,l)}if(t===e)return"";r=-1,s=t.length-1;for(;i--;)if(47===e.charCodeAt(i)){if(o){a=i+1;break}}else r<0&&(o=!0,r=i+1),s>-1&&(e.charCodeAt(i)===t.charCodeAt(s--)?s<0&&(l=i):(s=-1,l=r));a===l?l=r:l<0&&(l=e.length);return e.slice(a,l)},t.dirname=function(e){var t,i,r;if(n(e),!e.length)return".";t=-1,r=e.length;for(;--r;)if(47===e.charCodeAt(r)){if(i){t=r;break}}else i||(i=!0);return t<0?47===e.charCodeAt(0)?"/":".":1===t&&47===e.charCodeAt(0)?"//":e.slice(0,t)},t.extname=function(e){var t,i,r,o=-1,s=0,a=-1,l=0;n(e),r=e.length;for(;r--;)if(47!==(i=e.charCodeAt(r)))a<0&&(t=!0,a=r+1),46===i?o<0?o=r:1!==l&&(l=1):o>-1&&(l=-1);else if(t){s=r+1;break}if(o<0||a<0||0===l||1===l&&o===a-1&&o===s+1)return"";return e.slice(o,a)},t.join=function(){var e,t=-1;for(;++t<arguments.length;)n(arguments[t]),arguments[t]&&(e=void 0===e?arguments[t]:e+"/"+arguments[t]);return void 0===e?".":function(e){var t,i;n(e),t=47===e.charCodeAt(0),i=function(e,t){var n,i,r="",o=0,s=-1,a=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.charCodeAt(l);else{if(47===n)break;n=47}if(47===n){if(s===l-1||1===a);else if(s!==l-1&&2===a){if(r.length<2||2!==o||46!==r.charCodeAt(r.length-1)||46!==r.charCodeAt(r.length-2))if(r.length>2){if((i=r.lastIndexOf("/"))!==r.length-1){i<0?(r="",o=0):o=(r=r.slice(0,i)).length-1-r.lastIndexOf("/"),s=l,a=0;continue}}else if(r.length){r="",o=0,s=l,a=0;continue}t&&(r=r.length?r+"/..":"..",o=2)}else r.length?r+="/"+e.slice(s+1,l):r=e.slice(s+1,l),o=l-s-1;s=l,a=0}else 46===n&&a>-1?a++:a=-1}return r}(e,!t),i.length||t||(i=".");i.length&&47===e.charCodeAt(e.length-1)&&(i+="/");return t?"/"+i:i}(e)},t.sep="/"},1904:(e,t)=>{"use strict";t.cwd=function(){return"/"}},1153:(e,t,n)=>{"use strict";var i=n(5043),r=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,o={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,i)&&!l.hasOwnProperty(i)&&(o[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===o[i]&&(o[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}function b(){}function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||f}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var x=y.prototype=new b;x.constructor=y,m(x,v.prototype),x.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,i){var r,o={},s=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,r)&&!C.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(1===l)o.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===o[r]&&(o[r]=l[r]);return{$$typeof:n,type:e,key:s,ref:a,props:o,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function R(e,t,r,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,k(s)?(r="",null!=e&&(r=e.replace(_,"$&/")+"/"),R(s,t,r,"",(function(e){return e}))):null!=s&&(E(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(_,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",k(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=R(a,t,r,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=R(a=a.value,t,r,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return R(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var O={current:null},M={transition:null},N={ReactCurrentDispatcher:O,ReactCurrentBatchConfig:M,ReactCurrentOwner:S};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=s,t.PureComponent=y,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=D,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=S.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!C.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:o,ref:s,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return O.current.useCallback(e,t)},t.useContext=function(e){return O.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return O.current.useDeferredValue(e)},t.useEffect=function(e,t){return O.current.useEffect(e,t)},t.useId=function(){return O.current.useId()},t.useImperativeHandle=function(e,t,n){return O.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return O.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return O.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return O.current.useMemo(e,t)},t.useReducer=function(e,t,n){return O.current.useReducer(e,t,n)},t.useRef=function(e){return O.current.useRef(e)},t.useState=function(e){return O.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return O.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return O.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},3251:(e,t,n)=>{"use strict";var i=n(2590),r=n(4489);e.exports=function(e){var t=e||{},n=t.createElement;function a(e,i,r){var a=e;return r&&s.has(e)&&(r=r.filter((function(e){return"\n"!==e}))),t.components&&o.call(t.components,e)&&(a=t.components[e],t.passNode&&(i.node=this)),n(a,i,r)}this.Compiler=function(e){var o=i(a,r(e),t.prefix);return"root"===e.type?(o="div"!==o.type||1===e.children.length&&"element"===e.children[0].type?[o]:o.props.children,n(t.Fragment||"div",{},o)):o}};var o={}.hasOwnProperty,s=new Set(["table","thead","tbody","tfoot","tr","th","td"])},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<o(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,s=r>>>1;i<s;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,n))c<r&&0>o(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>o(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,p=3,f=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function k(e){if(g=!1,x(e),!m)if(null!==i(c))m=!0,M(w);else{var t=i(u);null!==t&&N(k,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,b(E),E=-1),f=!0;var o=p;try{for(x(n),h=i(c);null!==h&&(!(h.expirationTime>n)||e&&!R());){var s=h.callback;if("function"===typeof s){h.callback=null,p=h.priorityLevel;var a=s(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===i(c)&&r(c),x(n)}else r(c);h=i(c)}if(null!==h)var l=!0;else{var d=i(u);null!==d&&N(k,d.startTime-n),l=!1}return l}finally{h=null,p=o,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,C=!1,T=null,E=-1,_=5,I=-1;function R(){return!(t.unstable_now()-I<_)}function P(){if(null!==T){var e=t.unstable_now();I=e;var n=!0;try{n=T(!0,e)}finally{n?S():(C=!1,T=null)}}else C=!1}if("function"===typeof y)S=function(){y(P)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,O=A.port2;A.port1.onmessage=P,S=function(){O.postMessage(null)}}else S=function(){v(P,0)};function M(e){T=e,C||(C=!0,S())}function N(e,n){E=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,M(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,r,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:r,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,n(u,e),null===i(c)&&e===i(u)&&(g?(b(E),E=-1):g=!0,N(k,o-s))):(e.sortIndex=a,n(c,e),m||f||(m=!0,M(w))),e},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},7324:e=>{e.exports=function(e,t,n,i){var r=n?n.call(i,e,t):void 0;if(void 0!==r)return!!r;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var o=Object.keys(e),s=Object.keys(t);if(o.length!==s.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<o.length;l++){var c=o[l];if(!a(c))return!1;var u=e[c],d=t[c];if(!1===(r=n?n.call(i,u,d,c):void 0)||void 0===r&&u!==d)return!1}return!0}},5317:(e,t)=>{"use strict";t.parse=function(e){var t=String(e||n).trim();return t===n?[]:t.split(r)},t.stringify=function(e){return e.join(i).trim()};var n="",i=" ",r=/[ \t\n\r\f]+/g},5591:e=>{"use strict";e.exports=function(e,t,n){var i;null!==n&&void 0!==n||"object"===typeof t&&!Array.isArray(t)||(n=t,t={});i=Object.assign({type:String(e)},t),Array.isArray(n)?i.children=n:null!==n&&void 0!==n&&(i.value=String(n));return i}},2108:e=>{"use strict";e.exports=function(e){return!e||!e.position||!e.position.start||!e.position.start.line||!e.position.start.column||!e.position.end||!e.position.end.line||!e.position.end.column}},49:e=>{e.exports=function(){for(var e={},n=0;n<arguments.length;n++){var i=arguments[n];for(var r in i)t.call(i,r)&&(e[r]=i[r])}return e};var t=Object.prototype.hasOwnProperty},5891:e=>{function t(e){return e instanceof Map?e.clear=e.delete=e.set=function(){throw new Error("map is read-only")}:e instanceof Set&&(e.add=e.clear=e.delete=function(){throw new Error("set is read-only")}),Object.freeze(e),Object.getOwnPropertyNames(e).forEach((n=>{const i=e[n],r=typeof i;"object"!==r&&"function"!==r||Object.isFrozen(i)||t(i)})),e}class n{constructor(e){void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}ignoreMatch(){this.isMatchIgnored=!0}}function i(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")}function r(e){const t=Object.create(null);for(const o in e)t[o]=e[o];for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.forEach((function(e){for(const n in e)t[n]=e[n]})),t}const o=e=>!!e.scope;class s{constructor(e,t){this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){this.buffer+=i(e)}openNode(e){if(!o(e))return;const t=((e,t)=>{let{prefix:n}=t;if(e.startsWith("language:"))return e.replace("language:","language-");if(e.includes(".")){const t=e.split(".");return[`${n}${t.shift()}`,...t.map(((e,t)=>`${e}${"_".repeat(t+1)}`))].join(" ")}return`${n}${e}`})(e.scope,{prefix:this.classPrefix});this.span(t)}closeNode(e){o(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){this.buffer+=`<span class="${e}">`}}const a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={children:[]};return Object.assign(t,e),t};class l{constructor(){this.rootNode=a(),this.stack=[this.rootNode]}get top(){return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){this.top.children.push(e)}openNode(e){const t=a({scope:e});this.add(t),this.stack.push(t)}closeNode(){if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){return"string"===typeof t?e.addText(t):t.children&&(e.openNode(t),t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){"string"!==typeof e&&e.children&&(e.children.every((e=>"string"===typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{l._collapse(e)})))}}class c extends l{constructor(e){super(),this.options=e}addText(e){""!==e&&this.add(e)}startScope(e){this.openNode(e)}endScope(){this.closeNode()}__addSublanguage(e,t){const n=e.root;t&&(n.scope=`language:${t}`),this.add(n)}toHTML(){return new s(this,this.options).value()}finalize(){return this.closeAllNodes(),!0}}function u(e){return e?"string"===typeof e?e:e.source:null}function d(e){return f("(?=",e,")")}function h(e){return f("(?:",e,")*")}function p(e){return f("(?:",e,")?")}function f(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((e=>u(e))).join("")}function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=function(e){const t=e[e.length-1];return"object"===typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(t);return"("+(i.capture?"":"?:")+t.map((e=>u(e))).join("|")+")"}function g(e){return new RegExp(e.toString()+"|").exec("").length-1}const v=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./;function b(e,t){let{joinWith:n}=t,i=0;return e.map((e=>{i+=1;const t=i;let n=u(e),r="";for(;n.length>0;){const e=v.exec(n);if(!e){r+=n;break}r+=n.substring(0,e.index),n=n.substring(e.index+e[0].length),"\\"===e[0][0]&&e[1]?r+="\\"+String(Number(e[1])+t):(r+=e[0],"("===e[0]&&i++)}return r})).map((e=>`(${e})`)).join(n)}const y="[a-zA-Z]\\w*",x="[a-zA-Z_]\\w*",k="\\b\\d+(\\.\\d+)?",w="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",S="\\b(0b[01]+)",C={begin:"\\\\[\\s\\S]",relevance:0},T={scope:"string",begin:"'",end:"'",illegal:"\\n",contains:[C]},E={scope:"string",begin:'"',end:'"',illegal:"\\n",contains:[C]},_=function(e,t){const n=r({scope:"comment",begin:e,end:t,contains:[]},arguments.length>2&&void 0!==arguments[2]?arguments[2]:{});n.contains.push({scope:"doctag",begin:"[ ]*(?=(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):)",end:/(TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):/,excludeBegin:!0,relevance:0});const i=m("I","a","is","so","us","to","at","if","in","it","on",/[A-Za-z]+['](d|ve|re|ll|t|s|n)/,/[A-Za-z]+[-][a-z]+/,/[A-Za-z][a-z]{2,}/);return n.contains.push({begin:f(/[ ]+/,"(",i,/[.]?[:]?([.][ ]|[ ])/,"){3}")}),n},I=_("//","$"),R=_("/\\*","\\*/"),P=_("#","$"),A={scope:"number",begin:k,relevance:0},O={scope:"number",begin:w,relevance:0},M={scope:"number",begin:S,relevance:0},N={scope:"regexp",begin:/\/(?=[^/\n]*\/)/,end:/\/[gimuy]*/,contains:[C,{begin:/\[/,end:/\]/,relevance:0,contains:[C]}]},D={scope:"title",begin:y,relevance:0},j={scope:"title",begin:x,relevance:0},L={begin:"\\.\\s*"+x,relevance:0};var F=Object.freeze({__proto__:null,APOS_STRING_MODE:T,BACKSLASH_ESCAPE:C,BINARY_NUMBER_MODE:M,BINARY_NUMBER_RE:S,COMMENT:_,C_BLOCK_COMMENT_MODE:R,C_LINE_COMMENT_MODE:I,C_NUMBER_MODE:O,C_NUMBER_RE:w,END_SAME_AS_BEGIN:function(e){return Object.assign(e,{"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}})},HASH_COMMENT_MODE:P,IDENT_RE:y,MATCH_NOTHING_RE:/\b\B/,METHOD_GUARD:L,NUMBER_MODE:A,NUMBER_RE:k,PHRASAL_WORDS_MODE:{begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},QUOTE_STRING_MODE:E,REGEXP_MODE:N,RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",SHEBANG:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=/^#![ ]*\//;return e.binary&&(e.begin=f(t,/.*\b/,e.binary,/\b.*/)),r({scope:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{0!==e.index&&t.ignoreMatch()}},e)},TITLE_MODE:D,UNDERSCORE_IDENT_RE:x,UNDERSCORE_TITLE_MODE:j});function B(e,t){"."===e.input[e.index-1]&&t.ignoreMatch()}function U(e,t){void 0!==e.className&&(e.scope=e.className,delete e.className)}function $(e,t){t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",e.__beforeBegin=B,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,void 0===e.relevance&&(e.relevance=0))}function z(e,t){Array.isArray(e.illegal)&&(e.illegal=m(...e.illegal))}function V(e,t){if(e.match){if(e.begin||e.end)throw new Error("begin & end are not supported with match");e.begin=e.match,delete e.match}}function H(e,t){void 0===e.relevance&&(e.relevance=1)}const q=(e,t)=>{if(!e.beforeMatch)return;if(e.starts)throw new Error("beforeMatch cannot be used with starts");const n=Object.assign({},e);Object.keys(e).forEach((t=>{delete e[t]})),e.keywords=n.keywords,e.begin=f(n.beforeMatch,d(n.begin)),e.starts={relevance:0,contains:[Object.assign(n,{endsParent:!0})]},e.relevance=0,delete n.beforeMatch},W=["of","and","for","in","not","or","if","then","parent","list","value"],G="keyword";function K(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;const i=Object.create(null);return"string"===typeof e?r(n,e.split(" ")):Array.isArray(e)?r(n,e):Object.keys(e).forEach((function(n){Object.assign(i,K(e[n],t,n))})),i;function r(e,n){t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((function(t){const n=t.split("|");i[n[0]]=[e,Q(n[0],n[1])]}))}}function Q(e,t){return t?Number(t):function(e){return W.includes(e.toLowerCase())}(e)?0:1}const X={},Y=e=>{console.error(e)},J=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];console.log(`WARN: ${e}`,...n)},Z=(e,t)=>{X[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),X[`${e}/${t}`]=!0)},ee=new Error;function te(e,t,n){let{key:i}=n,r=0;const o=e[i],s={},a={};for(let l=1;l<=t.length;l++)a[l+r]=o[l],s[l+r]=!0,r+=g(t[l-1]);e[i]=a,e[i]._emit=s,e[i]._multi=!0}function ne(e){!function(e){e.scope&&"object"===typeof e.scope&&null!==e.scope&&(e.beginScope=e.scope,delete e.scope)}(e),"string"===typeof e.beginScope&&(e.beginScope={_wrap:e.beginScope}),"string"===typeof e.endScope&&(e.endScope={_wrap:e.endScope}),function(e){if(Array.isArray(e.begin)){if(e.skip||e.excludeBegin||e.returnBegin)throw Y("skip, excludeBegin, returnBegin not compatible with beginScope: {}"),ee;if("object"!==typeof e.beginScope||null===e.beginScope)throw Y("beginScope must be object"),ee;te(e,e.begin,{key:"beginScope"}),e.begin=b(e.begin,{joinWith:""})}}(e),function(e){if(Array.isArray(e.end)){if(e.skip||e.excludeEnd||e.returnEnd)throw Y("skip, excludeEnd, returnEnd not compatible with endScope: {}"),ee;if("object"!==typeof e.endScope||null===e.endScope)throw Y("endScope must be object"),ee;te(e,e.end,{key:"endScope"}),e.end=b(e.end,{joinWith:""})}}(e)}function ie(e){function t(t,n){return new RegExp(u(t),"m"+(e.case_insensitive?"i":"")+(e.unicodeRegex?"u":"")+(n?"g":""))}class n{constructor(){this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}addRule(e,t){t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),this.matchAt+=g(e)+1}compile(){0===this.regexes.length&&(this.exec=()=>null);const e=this.regexes.map((e=>e[1]));this.matcherRe=t(b(e,{joinWith:"|"}),!0),this.lastIndex=0}exec(e){this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e);if(!t)return null;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),i=this.matchIndexes[n];return t.splice(0,n),Object.assign(t,i)}}class i{constructor(){this.rules=[],this.multiRegexes=[],this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){if(this.multiRegexes[e])return this.multiRegexes[e];const t=new n;return this.rules.slice(e).forEach((e=>{let[n,i]=e;return t.addRule(n,i)})),t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex;let n=t.exec(e);if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}return n&&(this.regexIndex+=n.position+1,this.regexIndex===this.count&&this.considerAll()),n}}if(e.compilerExtensions||(e.compilerExtensions=[]),e.contains&&e.contains.includes("self"))throw new Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.");return e.classNameAliases=r(e.classNameAliases||{}),function n(o,s){const a=o;if(o.isCompiled)return a;[U,V,ne,q].forEach((e=>e(o,s))),e.compilerExtensions.forEach((e=>e(o,s))),o.__beforeBegin=null,[$,z,H].forEach((e=>e(o,s))),o.isCompiled=!0;let l=null;return"object"===typeof o.keywords&&o.keywords.$pattern&&(o.keywords=Object.assign({},o.keywords),l=o.keywords.$pattern,delete o.keywords.$pattern),l=l||/\w+/,o.keywords&&(o.keywords=K(o.keywords,e.case_insensitive)),a.keywordPatternRe=t(l,!0),s&&(o.begin||(o.begin=/\B|\b/),a.beginRe=t(a.begin),o.end||o.endsWithParent||(o.end=/\B|\b/),o.end&&(a.endRe=t(a.end)),a.terminatorEnd=u(a.end)||"",o.endsWithParent&&s.terminatorEnd&&(a.terminatorEnd+=(o.end?"|":"")+s.terminatorEnd)),o.illegal&&(a.illegalRe=t(o.illegal)),o.contains||(o.contains=[]),o.contains=[].concat(...o.contains.map((function(e){return function(e){e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((function(t){return r(e,{variants:null},t)})));if(e.cachedVariants)return e.cachedVariants;if(re(e))return r(e,{starts:e.starts?r(e.starts):null});if(Object.isFrozen(e))return r(e);return e}("self"===e?o:e)}))),o.contains.forEach((function(e){n(e,a)})),o.starts&&n(o.starts,s),a.matcher=function(e){const t=new i;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t}(a),a}(e)}function re(e){return!!e&&(e.endsWithParent||re(e.starts))}class oe extends Error{constructor(e,t){super(e),this.name="HTMLInjectionError",this.html=t}}const se=i,ae=r,le=Symbol("nomatch"),ce=function(e){const i=Object.create(null),r=Object.create(null),o=[];let s=!0;const a="Could not find the language '{}', did you forget to load/include a language module?",l={disableAutodetect:!0,name:"Plain text",contains:[]};let u={ignoreUnescapedHTML:!1,throwUnescapedHTML:!1,noHighlightRe:/^(no-?highlight)$/i,languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",cssSelector:"pre code",languages:null,__emitter:c};function g(e){return u.noHighlightRe.test(e)}function v(e,t,n){let i="",r="";"object"===typeof t?(i=e,n=t.ignoreIllegals,r=t.language):(Z("10.7.0","highlight(lang, code, ...args) has been deprecated."),Z("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),r=e,i=t),void 0===n&&(n=!0);const o={code:i,language:r};E("before:highlight",o);const s=o.result?o.result:b(o.language,o.code,n);return s.code=o.code,E("after:highlight",s),s}function b(e,t,r,o){const l=Object.create(null);function c(){if(!E.keywords)return void I.addText(R);let e=0;E.keywordPatternRe.lastIndex=0;let t=E.keywordPatternRe.exec(R),n="";for(;t;){n+=R.substring(e,t.index);const r=w.case_insensitive?t[0].toLowerCase():t[0],o=(i=r,E.keywords[i]);if(o){const[e,i]=o;if(I.addText(n),n="",l[r]=(l[r]||0)+1,l[r]<=7&&(P+=i),e.startsWith("_"))n+=t[0];else{const n=w.classNameAliases[e]||e;h(t[0],n)}}else n+=t[0];e=E.keywordPatternRe.lastIndex,t=E.keywordPatternRe.exec(R)}var i;n+=R.substring(e),I.addText(n)}function d(){null!=E.subLanguage?function(){if(""===R)return;let e=null;if("string"===typeof E.subLanguage){if(!i[E.subLanguage])return void I.addText(R);e=b(E.subLanguage,R,!0,_[E.subLanguage]),_[E.subLanguage]=e._top}else e=y(R,E.subLanguage.length?E.subLanguage:null);E.relevance>0&&(P+=e.relevance),I.__addSublanguage(e._emitter,e.language)}():c(),R=""}function h(e,t){""!==e&&(I.startScope(t),I.addText(e),I.endScope())}function p(e,t){let n=1;const i=t.length-1;for(;n<=i;){if(!e._emit[n]){n++;continue}const i=w.classNameAliases[e[n]]||e[n],r=t[n];i?h(r,i):(R=r,c(),R=""),n++}}function f(e,t){return e.scope&&"string"===typeof e.scope&&I.openNode(w.classNameAliases[e.scope]||e.scope),e.beginScope&&(e.beginScope._wrap?(h(R,w.classNameAliases[e.beginScope._wrap]||e.beginScope._wrap),R=""):e.beginScope._multi&&(p(e.beginScope,t),R="")),E=Object.create(e,{parent:{value:E}}),E}function m(e,t,i){let r=function(e,t){const n=e&&e.exec(t);return n&&0===n.index}(e.endRe,i);if(r){if(e["on:end"]){const i=new n(e);e["on:end"](t,i),i.isMatchIgnored&&(r=!1)}if(r){for(;e.endsParent&&e.parent;)e=e.parent;return e}}if(e.endsWithParent)return m(e.parent,t,i)}function g(e){return 0===E.matcher.regexIndex?(R+=e[0],1):(M=!0,0)}function v(e){const n=e[0],i=t.substring(e.index),r=m(E,e,i);if(!r)return le;const o=E;E.endScope&&E.endScope._wrap?(d(),h(n,E.endScope._wrap)):E.endScope&&E.endScope._multi?(d(),p(E.endScope,e)):o.skip?R+=n:(o.returnEnd||o.excludeEnd||(R+=n),d(),o.excludeEnd&&(R=n));do{E.scope&&I.closeNode(),E.skip||E.subLanguage||(P+=E.relevance),E=E.parent}while(E!==r.parent);return r.starts&&f(r.starts,e),o.returnEnd?0:n.length}let x={};function k(i,o){const a=o&&o[0];if(R+=i,null==a)return d(),0;if("begin"===x.type&&"end"===o.type&&x.index===o.index&&""===a){if(R+=t.slice(o.index,o.index+1),!s){const t=new Error(`0 width match regex (${e})`);throw t.languageName=e,t.badRule=x.rule,t}return 1}if(x=o,"begin"===o.type)return function(e){const t=e[0],i=e.rule,r=new n(i),o=[i.__beforeBegin,i["on:begin"]];for(const n of o)if(n&&(n(e,r),r.isMatchIgnored))return g(t);return i.skip?R+=t:(i.excludeBegin&&(R+=t),d(),i.returnBegin||i.excludeBegin||(R=t)),f(i,e),i.returnBegin?0:t.length}(o);if("illegal"===o.type&&!r){const e=new Error('Illegal lexeme "'+a+'" for mode "'+(E.scope||"<unnamed>")+'"');throw e.mode=E,e}if("end"===o.type){const e=v(o);if(e!==le)return e}if("illegal"===o.type&&""===a)return 1;if(O>1e5&&O>3*o.index){throw new Error("potential infinite loop, way more iterations than matches")}return R+=a,a.length}const w=S(e);if(!w)throw Y(a.replace("{}",e)),new Error('Unknown language: "'+e+'"');const C=ie(w);let T="",E=o||C;const _={},I=new u.__emitter(u);!function(){const e=[];for(let t=E;t!==w;t=t.parent)t.scope&&e.unshift(t.scope);e.forEach((e=>I.openNode(e)))}();let R="",P=0,A=0,O=0,M=!1;try{if(w.__emitTokens)w.__emitTokens(t,I);else{for(E.matcher.considerAll();;){O++,M?M=!1:E.matcher.considerAll(),E.matcher.lastIndex=A;const e=E.matcher.exec(t);if(!e)break;const n=k(t.substring(A,e.index),e);A=e.index+n}k(t.substring(A))}return I.finalize(),T=I.toHTML(),{language:e,value:T,relevance:P,illegal:!1,_emitter:I,_top:E}}catch(N){if(N.message&&N.message.includes("Illegal"))return{language:e,value:se(t),illegal:!0,relevance:0,_illegalBy:{message:N.message,index:A,context:t.slice(A-100,A+100),mode:N.mode,resultSoFar:T},_emitter:I};if(s)return{language:e,value:se(t),illegal:!1,relevance:0,errorRaised:N,_emitter:I,_top:E};throw N}}function y(e,t){t=t||u.languages||Object.keys(i);const n=function(e){const t={value:se(e),illegal:!1,relevance:0,_top:l,_emitter:new u.__emitter(u)};return t._emitter.addText(e),t}(e),r=t.filter(S).filter(T).map((t=>b(t,e,!1)));r.unshift(n);const o=r.sort(((e,t)=>{if(e.relevance!==t.relevance)return t.relevance-e.relevance;if(e.language&&t.language){if(S(e.language).supersetOf===t.language)return 1;if(S(t.language).supersetOf===e.language)return-1}return 0})),[s,a]=o,c=s;return c.secondBest=a,c}function x(e){let t=null;const n=function(e){let t=e.className+" ";t+=e.parentNode?e.parentNode.className:"";const n=u.languageDetectRe.exec(t);if(n){const t=S(n[1]);return t||(J(a.replace("{}",n[1])),J("Falling back to no-highlight mode for this block.",e)),t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>g(e)||S(e)))}(e);if(g(n))return;if(E("before:highlightElement",{el:e,language:n}),e.dataset.highlighted)return void console.log("Element previously highlighted. To highlight again, first unset `dataset.highlighted`.",e);if(e.children.length>0&&(u.ignoreUnescapedHTML||(console.warn("One of your code blocks includes unescaped HTML. This is a potentially serious security risk."),console.warn("https://github.com/highlightjs/highlight.js/wiki/security"),console.warn("The element with unescaped HTML:"),console.warn(e)),u.throwUnescapedHTML)){throw new oe("One of your code blocks includes unescaped HTML.",e.innerHTML)}t=e;const i=t.textContent,o=n?v(i,{language:n,ignoreIllegals:!0}):y(i);e.innerHTML=o.value,e.dataset.highlighted="yes",function(e,t,n){const i=t&&r[t]||n;e.classList.add("hljs"),e.classList.add(`language-${i}`)}(e,n,o.language),e.result={language:o.language,re:o.relevance,relevance:o.relevance},o.secondBest&&(e.secondBest={language:o.secondBest.language,relevance:o.secondBest.relevance}),E("after:highlightElement",{el:e,result:o,text:i})}let k=!1;function w(){if("loading"===document.readyState)return void(k=!0);document.querySelectorAll(u.cssSelector).forEach(x)}function S(e){return e=(e||"").toLowerCase(),i[e]||i[r[e]]}function C(e,t){let{languageName:n}=t;"string"===typeof e&&(e=[e]),e.forEach((e=>{r[e.toLowerCase()]=n}))}function T(e){const t=S(e);return t&&!t.disableAutodetect}function E(e,t){const n=e;o.forEach((function(e){e[n]&&e[n](t)}))}"undefined"!==typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(function(){k&&w()}),!1),Object.assign(e,{highlight:v,highlightAuto:y,highlightAll:w,highlightElement:x,highlightBlock:function(e){return Z("10.7.0","highlightBlock will be removed entirely in v12.0"),Z("10.7.0","Please use highlightElement now."),x(e)},configure:function(e){u=ae(u,e)},initHighlighting:()=>{w(),Z("10.6.0","initHighlighting() deprecated.  Use highlightAll() now.")},initHighlightingOnLoad:function(){w(),Z("10.6.0","initHighlightingOnLoad() deprecated.  Use highlightAll() now.")},registerLanguage:function(t,n){let r=null;try{r=n(e)}catch(o){if(Y("Language definition for '{}' could not be registered.".replace("{}",t)),!s)throw o;Y(o),r=l}r.name||(r.name=t),i[t]=r,r.rawDefinition=n.bind(null,e),r.aliases&&C(r.aliases,{languageName:t})},unregisterLanguage:function(e){delete i[e];for(const t of Object.keys(r))r[t]===e&&delete r[t]},listLanguages:function(){return Object.keys(i)},getLanguage:S,registerAliases:C,autoDetection:T,inherit:ae,addPlugin:function(e){!function(e){e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{e["before:highlightBlock"](Object.assign({block:t.el},t))}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{e["after:highlightBlock"](Object.assign({block:t.el},t))})}(e),o.push(e)},removePlugin:function(e){const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}),e.debugMode=function(){s=!1},e.safeMode=function(){s=!0},e.versionString="11.9.0",e.regex={concat:f,lookahead:d,either:m,optional:p,anyNumberOfTimes:h};for(const n in F)"object"===typeof F[n]&&t(F[n]);return Object.assign(e,F),e},ue=ce({});ue.newInstance=()=>ce({}),e.exports=ue,ue.HighlightJS=ue,ue.default=ue},308:e=>{"use strict";e.exports=JSON.parse('{"classId":"classID","dataType":"datatype","itemId":"itemID","strokeDashArray":"strokeDasharray","strokeDashOffset":"strokeDashoffset","strokeLineCap":"strokeLinecap","strokeLineJoin":"strokeLinejoin","strokeMiterLimit":"strokeMiterlimit","typeOf":"typeof","xLinkActuate":"xlinkActuate","xLinkArcRole":"xlinkArcrole","xLinkHref":"xlinkHref","xLinkRole":"xlinkRole","xLinkShow":"xlinkShow","xLinkTitle":"xlinkTitle","xLinkType":"xlinkType","xmlnsXLink":"xmlnsXlink"}')},8403:e=>{"use strict";e.exports=JSON.parse('{"html":"http://www.w3.org/1999/xhtml","mathml":"http://www.w3.org/1998/Math/MathML","svg":"http://www.w3.org/2000/svg","xlink":"http://www.w3.org/1999/xlink","xml":"http://www.w3.org/XML/1998/namespace","xmlns":"http://www.w3.org/2000/xmlns/"}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(i,r){if(1&r&&(i=this(i)),8&r)return i;if("object"===typeof i&&i){if(4&r&&i.__esModule)return i;if(16&r&&"function"===typeof i.then)return i}var o=Object.create(null);n.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&r&&i;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>i[e]));return s.default=()=>i,n.d(o,s),o}})(),n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".c38787b0.chunk.js",n.miniCssF=e=>{},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="webview-ui:";n.l=(i,r,o,s)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==i||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+o),a.src=i),e[i]=[r];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var o=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=o);var s=n.p+n.u(t),a=new Error;n.l(s,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,o,s=i[0],a=i[1],l=i[2],c=0;if(s.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<s.length;c++)o=s[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},i=self.webpackChunkwebview_ui=self.webpackChunkwebview_ui||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),n.nc=void 0,(()=>{"use strict";var e={};n.r(e),n.d(e,{Decoder:()=>Fx,Encoder:()=>jx,PacketType:()=>Dx,protocol:()=>Nx});var t=n(5043),i=n.t(t,2),r=n(4391);function o(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function s(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var a="undefined"!==typeof window,l=a?window:null,c=function(e){return!!e.addEventListener},u=function(e){return!!e.on};const d=function(e,n,i,r){void 0===i&&(i=l),(0,t.useEffect)((function(){if(n&&i)return c(i)?o(i,e,n,r):u(i)&&i.on(e,n,r),function(){c(i)?s(i,e,n,r):u(i)&&i.off(e,n,r)}}),[e,n,i,JSON.stringify(r)])},h=function(){if("undefined"!==typeof globalThis)return globalThis;if("undefined"!==typeof global)return global;if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;try{return new Function("return this")()}catch(e){return{}}}();void 0===h.trustedTypes&&(h.trustedTypes={createPolicy:(e,t)=>t});const p={configurable:!1,enumerable:!1,writable:!1};void 0===h.FAST&&Reflect.defineProperty(h,"FAST",Object.assign({value:Object.create(null)},p));const f=h.FAST;if(void 0===f.getById){const e=Object.create(null);Reflect.defineProperty(f,"getById",Object.assign({value(t,n){let i=e[t];return void 0===i&&(i=n?e[t]=n():null),i}},p))}const m=Object.freeze([]);function g(){const e=new WeakMap;return function(t){let n=e.get(t);if(void 0===n){let i=Reflect.getPrototypeOf(t);for(;void 0===n&&null!==i;)n=e.get(i),i=Reflect.getPrototypeOf(i);n=void 0===n?[]:n.slice(0),e.set(t,n)}return n}}const v=h.FAST.getById(1,(()=>{const e=[],t=[];function n(){if(t.length)throw t.shift()}function i(e){try{e.call()}catch(i){t.push(i),setTimeout(n,0)}}function r(){let t=0;for(;t<e.length;)if(i(e[t]),t++,t>1024){for(let n=0,i=e.length-t;n<i;n++)e[n]=e[n+t];e.length-=t,t=0}e.length=0}return Object.freeze({enqueue:function(t){e.length<1&&h.requestAnimationFrame(r),e.push(t)},process:r})})),b=h.trustedTypes.createPolicy("fast-html",{createHTML:e=>e});let y=b;const x=`fast-${Math.random().toString(36).substring(2,8)}`,k=`${x}{`,w=`}${x}`,S=Object.freeze({supportsAdoptedStyleSheets:Array.isArray(document.adoptedStyleSheets)&&"replace"in CSSStyleSheet.prototype,setHTMLPolicy(e){if(y!==b)throw new Error("The HTML policy can only be set once.");y=e},createHTML:e=>y.createHTML(e),isMarker:e=>e&&8===e.nodeType&&e.data.startsWith(x),extractDirectiveIndexFromMarker:e=>parseInt(e.data.replace(`${x}:`,"")),createInterpolationPlaceholder:e=>`${k}${e}${w}`,createCustomAttributePlaceholder(e,t){return`${e}="${this.createInterpolationPlaceholder(t)}"`},createBlockPlaceholder:e=>`\x3c!--${x}:${e}--\x3e`,queueUpdate:v.enqueue,processUpdates:v.process,nextUpdate:()=>new Promise(v.enqueue),setAttribute(e,t,n){null===n||void 0===n?e.removeAttribute(t):e.setAttribute(t,n)},setBooleanAttribute(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)},removeChildNodes(e){for(let t=e.firstChild;null!==t;t=e.firstChild)e.removeChild(t)},createTemplateWalker:e=>document.createTreeWalker(e,133,null,!1)});class C{constructor(e,t){this.sub1=void 0,this.sub2=void 0,this.spillover=void 0,this.source=e,this.sub1=t}has(e){return void 0===this.spillover?this.sub1===e||this.sub2===e:-1!==this.spillover.indexOf(e)}subscribe(e){const t=this.spillover;if(void 0===t){if(this.has(e))return;if(void 0===this.sub1)return void(this.sub1=e);if(void 0===this.sub2)return void(this.sub2=e);this.spillover=[this.sub1,this.sub2,e],this.sub1=void 0,this.sub2=void 0}else{-1===t.indexOf(e)&&t.push(e)}}unsubscribe(e){const t=this.spillover;if(void 0===t)this.sub1===e?this.sub1=void 0:this.sub2===e&&(this.sub2=void 0);else{const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}notify(e){const t=this.spillover,n=this.source;if(void 0===t){const t=this.sub1,i=this.sub2;void 0!==t&&t.handleChange(n,e),void 0!==i&&i.handleChange(n,e)}else for(let i=0,r=t.length;i<r;++i)t[i].handleChange(n,e)}}class T{constructor(e){this.subscribers={},this.sourceSubscribers=null,this.source=e}notify(e){var t;const n=this.subscribers[e];void 0!==n&&n.notify(e),null===(t=this.sourceSubscribers)||void 0===t||t.notify(e)}subscribe(e,t){var n;if(t){let n=this.subscribers[t];void 0===n&&(this.subscribers[t]=n=new C(this.source)),n.subscribe(e)}else this.sourceSubscribers=null!==(n=this.sourceSubscribers)&&void 0!==n?n:new C(this.source),this.sourceSubscribers.subscribe(e)}unsubscribe(e,t){var n;if(t){const n=this.subscribers[t];void 0!==n&&n.unsubscribe(e)}else null===(n=this.sourceSubscribers)||void 0===n||n.unsubscribe(e)}}const E=f.getById(2,(()=>{const e=/(:|&&|\|\||if)/,t=new WeakMap,n=S.queueUpdate;let i,r=e=>{throw new Error("Must call enableArrayObservation before observing arrays.")};function o(e){let n=e.$fastController||t.get(e);return void 0===n&&(Array.isArray(e)?n=r(e):t.set(e,n=new T(e))),n}const s=g();class a{constructor(e){this.name=e,this.field=`_${e}`,this.callback=`${e}Changed`}getValue(e){return void 0!==i&&i.watch(e,this.name),e[this.field]}setValue(e,t){const n=this.field,i=e[n];if(i!==t){e[n]=t;const r=e[this.callback];"function"===typeof r&&r.call(e,i,t),o(e).notify(this.name)}}}class l extends C{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(e,t),this.binding=e,this.isVolatileBinding=n,this.needsRefresh=!0,this.needsQueue=!0,this.first=this,this.last=null,this.propertySource=void 0,this.propertyName=void 0,this.notifier=void 0,this.next=void 0}observe(e,t){this.needsRefresh&&null!==this.last&&this.disconnect();const n=i;i=this.needsRefresh?this:void 0,this.needsRefresh=this.isVolatileBinding;const r=this.binding(e,t);return i=n,r}disconnect(){if(null!==this.last){let e=this.first;for(;void 0!==e;)e.notifier.unsubscribe(this,e.propertyName),e=e.next;this.last=null,this.needsRefresh=this.needsQueue=!0}}watch(e,t){const n=this.last,r=o(e),s=null===n?this.first:{};if(s.propertySource=e,s.propertyName=t,s.notifier=r,r.subscribe(this,t),null!==n){if(!this.needsRefresh){let t;i=void 0,t=n.propertySource[n.propertyName],i=this,e===t&&(this.needsRefresh=!0)}n.next=s}this.last=s}handleChange(){this.needsQueue&&(this.needsQueue=!1,n(this))}call(){null!==this.last&&(this.needsQueue=!0,this.notify(this))}records(){let e=this.first;return{next:()=>{const t=e;return void 0===t?{value:void 0,done:!0}:(e=e.next,{value:t,done:!1})},[Symbol.iterator]:function(){return this}}}}return Object.freeze({setArrayObserverFactory(e){r=e},getNotifier:o,track(e,t){void 0!==i&&i.watch(e,t)},trackVolatile(){void 0!==i&&(i.needsRefresh=!0)},notify(e,t){o(e).notify(t)},defineProperty(e,t){"string"===typeof t&&(t=new a(t)),s(e).push(t),Reflect.defineProperty(e,t.name,{enumerable:!0,get:function(){return t.getValue(this)},set:function(e){t.setValue(this,e)}})},getAccessors:s,binding(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.isVolatileBinding(e);return new l(e,t,n)},isVolatileBinding:t=>e.test(t.toString())})}));function _(e,t){E.defineProperty(e,t)}const I=f.getById(3,(()=>{let e=null;return{get:()=>e,set(t){e=t}}}));class R{constructor(){this.index=0,this.length=0,this.parent=null,this.parentContext=null}get event(){return I.get()}get isEven(){return this.index%2===0}get isOdd(){return this.index%2!==0}get isFirst(){return 0===this.index}get isInMiddle(){return!this.isFirst&&!this.isLast}get isLast(){return this.index===this.length-1}static setEvent(e){I.set(e)}}E.defineProperty(R.prototype,"index"),E.defineProperty(R.prototype,"length");const P=Object.seal(new R);class A{constructor(){this.targets=new WeakSet}addStylesTo(e){this.targets.add(e)}removeStylesFrom(e){this.targets.delete(e)}isAttachedTo(e){return this.targets.has(e)}withBehaviors(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.behaviors=null===this.behaviors?t:this.behaviors.concat(t),this}}function O(e){return e.map((e=>e instanceof A?O(e.styles):[e])).reduce(((e,t)=>e.concat(t)),[])}function M(e){return e.map((e=>e instanceof A?e.behaviors:null)).reduce(((e,t)=>null===t?e:(null===e&&(e=[]),e.concat(t))),null)}A.create=(()=>{if(S.supportsAdoptedStyleSheets){const e=new Map;return t=>new F(t,e)}return e=>new U(e)})();const N=Symbol("prependToAdoptedStyleSheets");function D(e){const t=[],n=[];return e.forEach((e=>(e[N]?t:n).push(e))),{prepend:t,append:n}}let j=(e,t)=>{const{prepend:n,append:i}=D(t);e.adoptedStyleSheets=[...n,...e.adoptedStyleSheets,...i]},L=(e,t)=>{e.adoptedStyleSheets=e.adoptedStyleSheets.filter((e=>-1===t.indexOf(e)))};if(S.supportsAdoptedStyleSheets)try{document.adoptedStyleSheets.push(),document.adoptedStyleSheets.splice(),j=(e,t)=>{const{prepend:n,append:i}=D(t);e.adoptedStyleSheets.splice(0,0,...n),e.adoptedStyleSheets.push(...i)},L=(e,t)=>{for(const n of t){const t=e.adoptedStyleSheets.indexOf(n);-1!==t&&e.adoptedStyleSheets.splice(t,1)}}}catch(WU){}class F extends A{constructor(e,t){super(),this.styles=e,this.styleSheetCache=t,this._styleSheets=void 0,this.behaviors=M(e)}get styleSheets(){if(void 0===this._styleSheets){const e=this.styles,t=this.styleSheetCache;this._styleSheets=O(e).map((e=>{if(e instanceof CSSStyleSheet)return e;let n=t.get(e);return void 0===n&&(n=new CSSStyleSheet,n.replaceSync(e),t.set(e,n)),n}))}return this._styleSheets}addStylesTo(e){j(e,this.styleSheets),super.addStylesTo(e)}removeStylesFrom(e){L(e,this.styleSheets),super.removeStylesFrom(e)}}let B=0;class U extends A{constructor(e){super(),this.styles=e,this.behaviors=null,this.behaviors=M(e),this.styleSheets=O(e),this.styleClass="fast-style-class-"+ ++B}addStylesTo(e){const t=this.styleSheets,n=this.styleClass;e=this.normalizeTarget(e);for(let i=0;i<t.length;i++){const r=document.createElement("style");r.innerHTML=t[i],r.className=n,e.append(r)}super.addStylesTo(e)}removeStylesFrom(e){const t=(e=this.normalizeTarget(e)).querySelectorAll(`.${this.styleClass}`);for(let n=0,i=t.length;n<i;++n)e.removeChild(t[n]);super.removeStylesFrom(e)}isAttachedTo(e){return super.isAttachedTo(this.normalizeTarget(e))}normalizeTarget(e){return e===document?document.body:e}}const $=Object.freeze({locate:g()}),z={toView:e=>e?"true":"false",fromView:e=>null!==e&&void 0!==e&&"false"!==e&&!1!==e&&0!==e},V={toView(e){if(null===e||void 0===e)return null;const t=1*e;return isNaN(t)?null:t.toString()},fromView(e){if(null===e||void 0===e)return null;const t=1*e;return isNaN(t)?null:t}};class H{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.toLowerCase(),i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"reflect",r=arguments.length>4?arguments[4]:void 0;this.guards=new Set,this.Owner=e,this.name=t,this.attribute=n,this.mode=i,this.converter=r,this.fieldName=`_${t}`,this.callbackName=`${t}Changed`,this.hasCallback=this.callbackName in e.prototype,"boolean"===i&&void 0===r&&(this.converter=z)}setValue(e,t){const n=e[this.fieldName],i=this.converter;void 0!==i&&(t=i.fromView(t)),n!==t&&(e[this.fieldName]=t,this.tryReflectToAttribute(e),this.hasCallback&&e[this.callbackName](n,t),e.$fastController.notify(this.name))}getValue(e){return E.track(e,this.name),e[this.fieldName]}onAttributeChangedCallback(e,t){this.guards.has(e)||(this.guards.add(e),this.setValue(e,t),this.guards.delete(e))}tryReflectToAttribute(e){const t=this.mode,n=this.guards;n.has(e)||"fromView"===t||S.queueUpdate((()=>{n.add(e);const i=e[this.fieldName];switch(t){case"reflect":const t=this.converter;S.setAttribute(e,this.attribute,void 0!==t?t.toView(i):i);break;case"boolean":S.setBooleanAttribute(e,this.attribute,i)}n.delete(e)}))}static collect(e){const t=[];for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.push($.locate(e));for(let o=0,s=i.length;o<s;++o){const n=i[o];if(void 0!==n)for(let i=0,r=n.length;i<r;++i){const r=n[i];"string"===typeof r?t.push(new H(e,r)):t.push(new H(e,r.property,r.attribute,r.mode,r.converter))}}return t}}function q(e,t){let n;function i(e,t){arguments.length>1&&(n.property=t),$.locate(e.constructor).push(n)}return arguments.length>1?(n={},void i(e,t)):(n=void 0===e?{}:e,i)}const W={mode:"open"},G={},K=f.getById(4,(()=>{const e=new Map;return Object.freeze({register:t=>!e.has(t.type)&&(e.set(t.type,t),!0),getByType:t=>e.get(t)})}));class Q{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.definition;"string"===typeof t&&(t={name:t}),this.type=e,this.name=t.name,this.template=t.template;const n=H.collect(e,t.attributes),i=new Array(n.length),r={},o={};for(let s=0,a=n.length;s<a;++s){const e=n[s];i[s]=e.attribute,r[e.name]=e,o[e.attribute]=e}this.attributes=n,this.observedAttributes=i,this.propertyLookup=r,this.attributeLookup=o,this.shadowOptions=void 0===t.shadowOptions?W:null===t.shadowOptions?void 0:Object.assign(Object.assign({},W),t.shadowOptions),this.elementOptions=void 0===t.elementOptions?G:Object.assign(Object.assign({},G),t.elementOptions),this.styles=void 0===t.styles?void 0:Array.isArray(t.styles)?A.create(t.styles):t.styles instanceof A?t.styles:A.create([t.styles])}get isDefined(){return!!K.getByType(this.type)}define(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:customElements;const t=this.type;if(K.register(this)){const e=this.attributes,n=t.prototype;for(let t=0,i=e.length;t<i;++t)E.defineProperty(n,e[t]);Reflect.defineProperty(t,"observedAttributes",{value:this.observedAttributes,enumerable:!0})}return e.get(this.name)||e.define(this.name,t,this.elementOptions),this}}Q.forType=K.getByType;function X(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}const Y=new WeakMap,J={bubbles:!0,composed:!0,cancelable:!0};function Z(e){return e.shadowRoot||Y.get(e)||null}class ee extends T{constructor(e,t){super(e),this.boundObservables=null,this.behaviors=null,this.needsInitialization=!0,this._template=null,this._styles=null,this._isConnected=!1,this.$fastController=this,this.view=null,this.element=e,this.definition=t;const n=t.shadowOptions;if(void 0!==n){const t=e.attachShadow(n);"closed"===n.mode&&Y.set(e,t)}const i=E.getAccessors(e);if(i.length>0){const t=this.boundObservables=Object.create(null);for(let n=0,r=i.length;n<r;++n){const r=i[n].name,o=e[r];void 0!==o&&(delete e[r],t[r]=o)}}}get isConnected(){return E.track(this,"isConnected"),this._isConnected}setIsConnected(e){this._isConnected=e,E.notify(this,"isConnected")}get template(){return this._template}set template(e){this._template!==e&&(this._template=e,this.needsInitialization||this.renderTemplate(e))}get styles(){return this._styles}set styles(e){this._styles!==e&&(null!==this._styles&&this.removeStyles(this._styles),this._styles=e,this.needsInitialization||null===e||this.addStyles(e))}addStyles(e){const t=Z(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)t.append(e);else if(!e.isAttachedTo(t)){const n=e.behaviors;e.addStylesTo(t),null!==n&&this.addBehaviors(n)}}removeStyles(e){const t=Z(this.element)||this.element.getRootNode();if(e instanceof HTMLStyleElement)t.removeChild(e);else if(e.isAttachedTo(t)){const n=e.behaviors;e.removeStylesFrom(t),null!==n&&this.removeBehaviors(n)}}addBehaviors(e){const t=this.behaviors||(this.behaviors=new Map),n=e.length,i=[];for(let r=0;r<n;++r){const n=e[r];t.has(n)?t.set(n,t.get(n)+1):(t.set(n,1),i.push(n))}if(this._isConnected){const e=this.element;for(let t=0;t<i.length;++t)i[t].bind(e,P)}}removeBehaviors(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.behaviors;if(null===n)return;const i=e.length,r=[];for(let o=0;o<i;++o){const i=e[o];if(n.has(i)){const e=n.get(i)-1;0===e||t?n.delete(i)&&r.push(i):n.set(i,e)}}if(this._isConnected){const e=this.element;for(let t=0;t<r.length;++t)r[t].unbind(e)}}onConnectedCallback(){if(this._isConnected)return;const e=this.element;this.needsInitialization?this.finishInitialization():null!==this.view&&this.view.bind(e,P);const t=this.behaviors;if(null!==t)for(const[n]of t)n.bind(e,P);this.setIsConnected(!0)}onDisconnectedCallback(){if(!this._isConnected)return;this.setIsConnected(!1);const e=this.view;null!==e&&e.unbind();const t=this.behaviors;if(null!==t){const e=this.element;for(const[n]of t)n.unbind(e)}}onAttributeChangedCallback(e,t,n){const i=this.definition.attributeLookup[e];void 0!==i&&i.onAttributeChangedCallback(this.element,n)}emit(e,t,n){return!!this._isConnected&&this.element.dispatchEvent(new CustomEvent(e,Object.assign(Object.assign({detail:t},J),n)))}finishInitialization(){const e=this.element,t=this.boundObservables;if(null!==t){const n=Object.keys(t);for(let i=0,r=n.length;i<r;++i){const r=n[i];e[r]=t[r]}this.boundObservables=null}const n=this.definition;null===this._template&&(this.element.resolveTemplate?this._template=this.element.resolveTemplate():n.template&&(this._template=n.template||null)),null!==this._template&&this.renderTemplate(this._template),null===this._styles&&(this.element.resolveStyles?this._styles=this.element.resolveStyles():n.styles&&(this._styles=n.styles||null)),null!==this._styles&&this.addStyles(this._styles),this.needsInitialization=!1}renderTemplate(e){const t=this.element,n=Z(t)||t;null!==this.view?(this.view.dispose(),this.view=null):this.needsInitialization||S.removeChildNodes(n),e&&(this.view=e.render(t,n,t))}static forCustomElement(e){const t=e.$fastController;if(void 0!==t)return t;const n=Q.forType(e.constructor);if(void 0===n)throw new Error("Missing FASTElement definition.");return e.$fastController=new ee(e,n)}}function te(e){return class extends e{constructor(){super(),ee.forCustomElement(this)}$emit(e,t,n){return this.$fastController.emit(e,t,n)}connectedCallback(){this.$fastController.onConnectedCallback()}disconnectedCallback(){this.$fastController.onDisconnectedCallback()}attributeChangedCallback(e,t,n){this.$fastController.onAttributeChangedCallback(e,t,n)}}}const ne=Object.assign(te(HTMLElement),{from:e=>te(e),define:(e,t)=>new Q(e,t).define().type});const ie=new Map;"metadata"in Reflect||(Reflect.metadata=function(e,t){return function(n){Reflect.defineMetadata(e,t,n)}},Reflect.defineMetadata=function(e,t,n){let i=ie.get(n);void 0===i&&ie.set(n,i=new Map),i.set(e,t)},Reflect.getOwnMetadata=function(e,t){const n=ie.get(t);if(void 0!==n)return n.get(e)});class re{constructor(e,t){this.container=e,this.key=t}instance(e){return this.registerResolver(0,e)}singleton(e){return this.registerResolver(1,e)}transient(e){return this.registerResolver(2,e)}callback(e){return this.registerResolver(3,e)}cachedCallback(e){return this.registerResolver(3,Pe(e))}aliasTo(e){return this.registerResolver(5,e)}registerResolver(e,t){const{container:n,key:i}=this;return this.container=this.key=void 0,n.registerResolver(i,new be(i,e,t))}}function oe(e){const t=e.slice(),n=Object.keys(e),i=n.length;let r;for(let o=0;o<i;++o)r=n[o],Fe(r)||(t[r]=e[r]);return t}const se=Object.freeze({none(e){throw Error(`${e.toString()} not registered, did you forget to add @singleton()?`)},singleton:e=>new be(e,1,e),transient:e=>new be(e,2,e)}),ae=Object.freeze({default:Object.freeze({parentLocator:()=>null,responsibleForOwnerRequests:!1,defaultResolver:se.singleton})}),le=new Map;function ce(e){return t=>Reflect.getOwnMetadata(e,t)}let ue=null;const de=Object.freeze({createContainer:e=>new Ie(null,Object.assign({},ae.default,e)),findResponsibleContainer(e){const t=e.$$container$$;return t&&t.responsibleForOwnerRequests?t:de.findParentContainer(e)},findParentContainer(e){const t=new CustomEvent(Ee,{bubbles:!0,composed:!0,cancelable:!0,detail:{container:void 0}});return e.dispatchEvent(t),t.detail.container||de.getOrCreateDOMContainer()},getOrCreateDOMContainer:(e,t)=>e?e.$$container$$||new Ie(e,Object.assign({},ae.default,t,{parentLocator:de.findParentContainer})):ue||(ue=new Ie(null,Object.assign({},ae.default,t,{parentLocator:()=>null}))),getDesignParamtypes:ce("design:paramtypes"),getAnnotationParamtypes:ce("di:paramtypes"),getOrCreateAnnotationParamTypes(e){let t=this.getAnnotationParamtypes(e);return void 0===t&&Reflect.defineMetadata("di:paramtypes",t=[],e),t},getDependencies(e){let t=le.get(e);if(void 0===t){const n=e.inject;if(void 0===n){const n=de.getDesignParamtypes(e),i=de.getAnnotationParamtypes(e);if(void 0===n)if(void 0===i){const n=Object.getPrototypeOf(e);t="function"===typeof n&&n!==Function.prototype?oe(de.getDependencies(n)):[]}else t=oe(i);else if(void 0===i)t=oe(n);else{t=oe(n);let e,r=i.length;for(let n=0;n<r;++n)e=i[n],void 0!==e&&(t[n]=e);const o=Object.keys(i);let s;r=o.length;for(let n=0;n<r;++n)s=o[n],Fe(s)||(t[s]=i[s])}}else t=oe(n);le.set(e,t)}return t},defineProperty(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=`$di_${t}`;Reflect.defineProperty(e,t,{get:function(){let e=this[r];if(void 0===e){const o=this instanceof HTMLElement?de.findResponsibleContainer(this):de.getOrCreateDOMContainer();if(e=o.get(n),this[r]=e,i&&this instanceof ne){const i=this.$fastController,o=()=>{de.findResponsibleContainer(this).get(n)!==this[r]&&(this[r]=e,i.notify(t))};i.subscribe({handleChange:o},"isConnected")}}return e}})},createInterface(e,t){const n="function"===typeof e?e:t,i="string"===typeof e?e:e&&"friendlyName"in e&&e.friendlyName||Ne,r="string"!==typeof e&&(e&&"respectConnection"in e&&e.respectConnection||!1),o=function(e,t,n){if(null==e||void 0!==new.target)throw new Error(`No registration for interface: '${o.friendlyName}'`);if(t)de.defineProperty(e,t,o,r);else{de.getOrCreateAnnotationParamTypes(e)[n]=o}};return o.$isInterface=!0,o.friendlyName=null==i?"(anonymous)":i,null!=n&&(o.register=function(e,t){return n(new re(e,null!==t&&void 0!==t?t:o))}),o.toString=function(){return`InterfaceSymbol<${o.friendlyName}>`},o},inject(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n,i){if("number"===typeof i){const n=de.getOrCreateAnnotationParamTypes(e),r=t[0];void 0!==r&&(n[i]=r)}else if(n)de.defineProperty(e,n,t[0]);else{const n=i?de.getOrCreateAnnotationParamTypes(i.value):de.getOrCreateAnnotationParamTypes(e);let r;for(let e=0;e<t.length;++e)r=t[e],void 0!==r&&(n[e]=r)}}},transient:e=>(e.register=function(t){return Ae.transient(e,e).register(t)},e.registerInRequestor=!1,e),singleton(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;return e.register=function(t){return Ae.singleton(e,e).register(t)},e.registerInRequestor=t.scoped,e}}),he=de.createInterface("Container");function pe(e){return function(t){const n=function(e,t,i){de.inject(n)(e,t,i)};return n.$isResolver=!0,n.resolve=function(n,i){return e(t,n,i)},n}}de.inject;const fe={scoped:!1};me=(e,t,n,i)=>n.getAll(e,i);var me;pe(((e,t,n)=>()=>n.get(e))),pe(((e,t,n)=>n.has(e,!0)?n.get(e):void 0));function ge(e,t,n){de.inject(ge)(e,t,n)}ge.$isResolver=!0,ge.resolve=()=>{};pe(((e,t,n)=>{const i=ve(e,t),r=new be(e,0,i);return n.registerResolver(e,r),i})),pe(((e,t,n)=>ve(e,t)));function ve(e,t){return t.getFactory(e).construct(t)}class be{constructor(e,t,n){this.key=e,this.strategy=t,this.state=n,this.resolving=!1}get $isResolver(){return!0}register(e){return e.registerResolver(this.key,this)}resolve(e,t){switch(this.strategy){case 0:return this.state;case 1:if(this.resolving)throw new Error(`Cyclic dependency found: ${this.state.name}`);return this.resolving=!0,this.state=e.getFactory(this.state).construct(t),this.strategy=0,this.resolving=!1,this.state;case 2:{const n=e.getFactory(this.state);if(null===n)throw new Error(`Resolver for ${String(this.key)} returned a null factory`);return n.construct(t)}case 3:return this.state(e,t,this);case 4:return this.state[0].resolve(e,t);case 5:return t.get(this.state);default:throw new Error(`Invalid resolver strategy specified: ${this.strategy}.`)}}getFactory(e){var t,n,i;switch(this.strategy){case 1:case 2:return e.getFactory(this.state);case 5:return null!==(i=null===(n=null===(t=e.getResolver(this.state))||void 0===t?void 0:t.getFactory)||void 0===n?void 0:n.call(t,e))&&void 0!==i?i:null;default:return null}}}function ye(e){return this.get(e)}function xe(e,t){return t(e)}class ke{constructor(e,t){this.Type=e,this.dependencies=t,this.transformers=null}construct(e,t){let n;return n=void 0===t?new this.Type(...this.dependencies.map(ye,e)):new this.Type(...this.dependencies.map(ye,e),...t),null==this.transformers?n:this.transformers.reduce(xe,n)}registerTransformer(e){(this.transformers||(this.transformers=[])).push(e)}}const we={$isResolver:!0,resolve:(e,t)=>t};function Se(e){return"function"===typeof e.register}function Ce(e){return function(e){return Se(e)&&"boolean"===typeof e.registerInRequestor}(e)&&e.registerInRequestor}const Te=new Set(["Array","ArrayBuffer","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Number","Object","Promise","RangeError","ReferenceError","RegExp","Set","SharedArrayBuffer","String","SyntaxError","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","URIError","WeakMap","WeakSet"]),Ee="__DI_LOCATE_PARENT__",_e=new Map;class Ie{constructor(e,t){this.owner=e,this.config=t,this._parent=void 0,this.registerDepth=0,this.context=null,null!==e&&(e.$$container$$=this),this.resolvers=new Map,this.resolvers.set(he,we),e instanceof Node&&e.addEventListener(Ee,(e=>{e.composedPath()[0]!==this.owner&&(e.detail.container=this,e.stopImmediatePropagation())}))}get parent(){return void 0===this._parent&&(this._parent=this.config.parentLocator(this.owner)),this._parent}get depth(){return null===this.parent?0:this.parent.depth+1}get responsibleForOwnerRequests(){return this.config.responsibleForOwnerRequests}registerWithContext(e){this.context=e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.register(...n),this.context=null,this}register(){if(100===++this.registerDepth)throw new Error("Unable to autoregister dependency");let e,t,n,i,r;const o=this.context;for(let s=0,a=arguments.length;s<a;++s)if(e=s<0||arguments.length<=s?void 0:arguments[s],De(e))if(Se(e))e.register(this,o);else if(void 0!==e.prototype)Ae.singleton(e,e).register(this);else for(t=Object.keys(e),i=0,r=t.length;i<r;++i)n=e[t[i]],De(n)&&(Se(n)?n.register(this,o):this.register(n));return--this.registerDepth,this}registerResolver(e,t){Oe(e);const n=this.resolvers,i=n.get(e);return null==i?n.set(e,t):i instanceof be&&4===i.strategy?i.state.push(t):n.set(e,new be(e,4,[i,t])),t}registerTransformer(e,t){const n=this.getResolver(e);if(null==n)return!1;if(n.getFactory){const e=n.getFactory(this);return null!=e&&(e.registerTransformer(t),!0)}return!1}getResolver(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Oe(e),void 0!==e.resolve)return e;let n,i=this;for(;null!=i;){if(n=i.resolvers.get(e),null!=n)return n;if(null==i.parent){const n=Ce(e)?this:i;return t?this.jitRegister(e,n):null}i=i.parent}return null}has(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!!this.resolvers.has(e)||!(!t||null==this.parent)&&this.parent.has(e,!0)}get(e){if(Oe(e),e.$isResolver)return e.resolve(this,this);let t,n=this;for(;null!=n;){if(t=n.resolvers.get(e),null!=t)return t.resolve(n,this);if(null==n.parent){const i=Ce(e)?this:n;return t=this.jitRegister(e,i),t.resolve(n,this)}n=n.parent}throw new Error(`Unable to resolve key: ${String(e)}`)}getAll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Oe(e);const n=this;let i,r=n;if(t){let t=m;for(;null!=r;)i=r.resolvers.get(e),null!=i&&(t=t.concat(Me(i,r,n))),r=r.parent;return t}for(;null!=r;){if(i=r.resolvers.get(e),null!=i)return Me(i,r,n);if(r=r.parent,null==r)return m}return m}getFactory(e){let t=_e.get(e);if(void 0===t){if(je(e))throw new Error(`${e.name} is a native function and therefore cannot be safely constructed by DI. If this is intentional, please use a callback or cachedCallback resolver.`);_e.set(e,t=new ke(e,de.getDependencies(e)))}return t}registerFactory(e,t){_e.set(e,t)}createChild(e){return new Ie(null,Object.assign({},this.config,e,{parentLocator:()=>this}))}jitRegister(e,t){if("function"!==typeof e)throw new Error(`Attempted to jitRegister something that is not a constructor: '${e}'. Did you forget to register this dependency?`);if(Te.has(e.name))throw new Error(`Attempted to jitRegister an intrinsic type: ${e.name}. Did you forget to add @inject(Key)`);if(Se(e)){const n=e.register(t);if(!(n instanceof Object)||null==n.resolve){const n=t.resolvers.get(e);if(void 0!=n)return n;throw new Error("A valid resolver was not returned from the static register method")}return n}if(e.$isInterface)throw new Error(`Attempted to jitRegister an interface: ${e.friendlyName}`);{const n=this.config.defaultResolver(e,t);return t.resolvers.set(e,n),n}}}const Re=new WeakMap;function Pe(e){return function(t,n,i){if(Re.has(i))return Re.get(i);const r=e(t,n,i);return Re.set(i,r),r}}const Ae=Object.freeze({instance:(e,t)=>new be(e,0,t),singleton:(e,t)=>new be(e,1,t),transient:(e,t)=>new be(e,2,t),callback:(e,t)=>new be(e,3,t),cachedCallback:(e,t)=>new be(e,3,Pe(t)),aliasTo:(e,t)=>new be(t,5,e)});function Oe(e){if(null===e||void 0===e)throw new Error("key/value cannot be null or undefined. Are you trying to inject/register something that doesn't exist with DI?")}function Me(e,t,n){if(e instanceof be&&4===e.strategy){const i=e.state;let r=i.length;const o=new Array(r);for(;r--;)o[r]=i[r].resolve(t,n);return o}return[e.resolve(t,n)]}const Ne="(anonymous)";function De(e){return"object"===typeof e&&null!==e||"function"===typeof e}const je=function(){const e=new WeakMap;let t=!1,n="",i=0;return function(r){return t=e.get(r),void 0===t&&(n=r.toString(),i=n.length,t=i>=29&&i<=100&&125===n.charCodeAt(i-1)&&n.charCodeAt(i-2)<=32&&93===n.charCodeAt(i-3)&&101===n.charCodeAt(i-4)&&100===n.charCodeAt(i-5)&&111===n.charCodeAt(i-6)&&99===n.charCodeAt(i-7)&&32===n.charCodeAt(i-8)&&101===n.charCodeAt(i-9)&&118===n.charCodeAt(i-10)&&105===n.charCodeAt(i-11)&&116===n.charCodeAt(i-12)&&97===n.charCodeAt(i-13)&&110===n.charCodeAt(i-14)&&88===n.charCodeAt(i-15),e.set(r,t)),t}}(),Le={};function Fe(e){switch(typeof e){case"number":return e>=0&&(0|e)===e;case"string":{const t=Le[e];if(void 0!==t)return t;const n=e.length;if(0===n)return Le[e]=!1;let i=0;for(let r=0;r<n;++r)if(i=e.charCodeAt(r),0===r&&48===i&&n>1||i<48||i>57)return Le[e]=!1;return Le[e]=!0}default:return!1}}function Be(e){return`${e.toLowerCase()}:presentation`}const Ue=new Map,$e=Object.freeze({define(e,t,n){const i=Be(e);void 0===Ue.get(i)?Ue.set(i,t):Ue.set(i,!1),n.register(Ae.instance(i,t))},forTag(e,t){const n=Be(e),i=Ue.get(n);if(!1===i){return de.findResponsibleContainer(t).get(n)}return i||null}});class ze{constructor(e,t){this.template=e||null,this.styles=void 0===t?null:Array.isArray(t)?A.create(t):t instanceof A?t:A.create([t])}applyTo(e){const t=e.$fastController;null===t.template&&(t.template=this.template),null===t.styles&&(t.styles=this.styles)}}class Ve extends ne{constructor(){super(...arguments),this._presentation=void 0}get $presentation(){return void 0===this._presentation&&(this._presentation=$e.forTag(this.tagName,this)),this._presentation}templateChanged(){void 0!==this.template&&(this.$fastController.template=this.template)}stylesChanged(){void 0!==this.styles&&(this.$fastController.styles=this.styles)}connectedCallback(){null!==this.$presentation&&this.$presentation.applyTo(this),super.connectedCallback()}static compose(e){var t=this;return function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new qe(t===Ve?class extends Ve{}:t,e,n)}}}function He(e,t,n){return"function"===typeof e?e(t,n):e}X([_],Ve.prototype,"template",void 0),X([_],Ve.prototype,"styles",void 0);class qe{constructor(e,t,n){this.type=e,this.elementDefinition=t,this.overrideDefinition=n,this.definition=Object.assign(Object.assign({},this.elementDefinition),this.overrideDefinition)}register(e,t){const n=this.definition,i=this.overrideDefinition,r=`${n.prefix||t.elementPrefix}-${n.baseName}`;t.tryDefineElement({name:r,type:this.type,baseClass:this.elementDefinition.baseClass,callback:e=>{const t=new ze(He(n.template,e,n),He(n.styles,e,n));e.definePresentation(t);let r=He(n.shadowOptions,e,n);e.shadowRootMode&&(r?i.shadowOptions||(r.mode=e.shadowRootMode):null!==r&&(r={mode:e.shadowRootMode})),e.defineElement({elementOptions:He(n.elementOptions,e,n),shadowOptions:r,attributes:He(n.attributes,e,n)})}})}}const We=new Set(["children","localName","ref","style","className"]),Ge=Object.freeze(Object.create(null)),Ke="_default",Qe=new Map;function Xe(e,t){if(!t.name){const n=Q.forType(e);if(!n)throw new Error("React wrappers must wrap a FASTElement or be configured with a name.");t.name=n.name}return t.name}function Ye(e){return e.events||(e.events={})}function Je(e,t,n){return!We.has(n)||(console.warn(`${Xe(e,t)} contains property ${n} which is a React reserved property. It will be used by React and not set on the element.`),!1)}class Ze extends Ve{constructor(){super(...arguments),this.generateBadgeStyle=()=>{if(!this.fill&&!this.color)return;const e=`background-color: var(--badge-fill-${this.fill});`,t=`color: var(--badge-color-${this.color});`;return this.fill&&!this.color?e:this.color&&!this.fill?t:`${t} ${e}`}}}X([q({attribute:"fill"})],Ze.prototype,"fill",void 0),X([q({attribute:"color"})],Ze.prototype,"color",void 0),X([q({mode:"boolean"})],Ze.prototype,"circular",void 0);class et{constructor(){this.targetIndex=0}}class tt extends et{constructor(){super(...arguments),this.createPlaceholder=S.createInterpolationPlaceholder}}class nt extends et{constructor(e,t,n){super(),this.name=e,this.behavior=t,this.options=n}createPlaceholder(e){return S.createCustomAttributePlaceholder(this.name,e)}createBehavior(e){return new this.behavior(e,this.options)}}function it(e,t){this.source=e,this.context=t,null===this.bindingObserver&&(this.bindingObserver=E.binding(this.binding,this,this.isBindingVolatile)),this.updateTarget(this.bindingObserver.observe(e,t))}function rt(e,t){this.source=e,this.context=t,this.target.addEventListener(this.targetName,this)}function ot(){this.bindingObserver.disconnect(),this.source=null,this.context=null}function st(){this.bindingObserver.disconnect(),this.source=null,this.context=null;const e=this.target.$fastView;void 0!==e&&e.isComposed&&(e.unbind(),e.needsBindOnly=!0)}function at(){this.target.removeEventListener(this.targetName,this),this.source=null,this.context=null}function lt(e){S.setAttribute(this.target,this.targetName,e)}function ct(e){S.setBooleanAttribute(this.target,this.targetName,e)}function ut(e){if(null!==e&&void 0!==e||(e=""),e.create){this.target.textContent="";let t=this.target.$fastView;void 0===t?t=e.create():this.target.$fastTemplate!==e&&(t.isComposed&&(t.remove(),t.unbind()),t=e.create()),t.isComposed?t.needsBindOnly&&(t.needsBindOnly=!1,t.bind(this.source,this.context)):(t.isComposed=!0,t.bind(this.source,this.context),t.insertBefore(this.target),this.target.$fastView=t,this.target.$fastTemplate=e)}else{const t=this.target.$fastView;void 0!==t&&t.isComposed&&(t.isComposed=!1,t.remove(),t.needsBindOnly?t.needsBindOnly=!1:t.unbind()),this.target.textContent=e}}function dt(e){this.target[this.targetName]=e}function ht(e){const t=this.classVersions||Object.create(null),n=this.target;let i=this.version||0;if(null!==e&&void 0!==e&&e.length){const r=e.split(/\s+/);for(let e=0,o=r.length;e<o;++e){const o=r[e];""!==o&&(t[o]=i,n.classList.add(o))}}if(this.classVersions=t,this.version=i+1,0!==i){i-=1;for(const e in t)t[e]===i&&n.classList.remove(e)}}class pt extends tt{constructor(e){super(),this.binding=e,this.bind=it,this.unbind=ot,this.updateTarget=lt,this.isBindingVolatile=E.isVolatileBinding(this.binding)}get targetName(){return this.originalTargetName}set targetName(e){if(this.originalTargetName=e,void 0!==e)switch(e[0]){case":":if(this.cleanedTargetName=e.substr(1),this.updateTarget=dt,"innerHTML"===this.cleanedTargetName){const e=this.binding;this.binding=(t,n)=>S.createHTML(e(t,n))}break;case"?":this.cleanedTargetName=e.substr(1),this.updateTarget=ct;break;case"@":this.cleanedTargetName=e.substr(1),this.bind=rt,this.unbind=at;break;default:this.cleanedTargetName=e,"class"===e&&(this.updateTarget=ht)}}targetAtContent(){this.updateTarget=ut,this.unbind=st}createBehavior(e){return new ft(e,this.binding,this.isBindingVolatile,this.bind,this.unbind,this.updateTarget,this.cleanedTargetName)}}class ft{constructor(e,t,n,i,r,o,s){this.source=null,this.context=null,this.bindingObserver=null,this.target=e,this.binding=t,this.isBindingVolatile=n,this.bind=i,this.unbind=r,this.updateTarget=o,this.targetName=s}handleChange(){this.updateTarget(this.bindingObserver.observe(this.source,this.context))}handleEvent(e){R.setEvent(e);const t=this.binding(this.source,this.context);R.setEvent(null),!0!==t&&e.preventDefault()}}let mt=null;class gt{addFactory(e){e.targetIndex=this.targetIndex,this.behaviorFactories.push(e)}captureContentBinding(e){e.targetAtContent(),this.addFactory(e)}reset(){this.behaviorFactories=[],this.targetIndex=-1}release(){mt=this}static borrow(e){const t=mt||new gt;return t.directives=e,t.reset(),mt=null,t}}function vt(e){if(1===e.length)return e[0];let t;const n=e.length,i=e.map((e=>"string"===typeof e?()=>e:(t=e.targetName||t,e.binding))),r=new pt(((e,t)=>{let r="";for(let o=0;o<n;++o)r+=i[o](e,t);return r}));return r.targetName=t,r}const bt=w.length;function yt(e,t){const n=t.split(k);if(1===n.length)return null;const i=[];for(let r=0,o=n.length;r<o;++r){const t=n[r],o=t.indexOf(w);let s;if(-1===o)s=t;else{const n=parseInt(t.substring(0,o));i.push(e.directives[n]),s=t.substring(o+bt)}""!==s&&i.push(s)}return i}function xt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=t.attributes;for(let r=0,o=i.length;r<o;++r){const s=i[r],a=s.value,l=yt(e,a);let c=null;null===l?n&&(c=new pt((()=>a)),c.targetName=s.name):c=vt(l),null!==c&&(t.removeAttributeNode(s),r--,o--,e.addFactory(c))}}function kt(e,t,n){const i=yt(e,t.textContent);if(null!==i){let r=t;for(let o=0,s=i.length;o<s;++o){const s=i[o],a=0===o?t:r.parentNode.insertBefore(document.createTextNode(""),r.nextSibling);"string"===typeof s?a.textContent=s:(a.textContent=" ",e.captureContentBinding(s)),r=a,e.targetIndex++,a!==t&&n.nextNode()}e.targetIndex--}}const wt=document.createRange();class St{constructor(e,t){this.fragment=e,this.behaviors=t,this.source=null,this.context=null,this.firstChild=e.firstChild,this.lastChild=e.lastChild}appendTo(e){e.appendChild(this.fragment)}insertBefore(e){if(this.fragment.hasChildNodes())e.parentNode.insertBefore(this.fragment,e);else{const t=this.lastChild;if(e.previousSibling===t)return;const n=e.parentNode;let i,r=this.firstChild;for(;r!==t;)i=r.nextSibling,n.insertBefore(r,e),r=i;n.insertBefore(t,e)}}remove(){const e=this.fragment,t=this.lastChild;let n,i=this.firstChild;for(;i!==t;)n=i.nextSibling,e.appendChild(i),i=n;e.appendChild(t)}dispose(){const e=this.firstChild.parentNode,t=this.lastChild;let n,i=this.firstChild;for(;i!==t;)n=i.nextSibling,e.removeChild(i),i=n;e.removeChild(t);const r=this.behaviors,o=this.source;for(let s=0,a=r.length;s<a;++s)r[s].unbind(o)}bind(e,t){const n=this.behaviors;if(this.source!==e)if(null!==this.source){const i=this.source;this.source=e,this.context=t;for(let r=0,o=n.length;r<o;++r){const o=n[r];o.unbind(i),o.bind(e,t)}}else{this.source=e,this.context=t;for(let i=0,r=n.length;i<r;++i)n[i].bind(e,t)}}unbind(){if(null===this.source)return;const e=this.behaviors,t=this.source;for(let n=0,i=e.length;n<i;++n)e[n].unbind(t);this.source=null}static disposeContiguousBatch(e){if(0!==e.length){wt.setStartBefore(e[0].firstChild),wt.setEndAfter(e[e.length-1].lastChild),wt.deleteContents();for(let t=0,n=e.length;t<n;++t){const n=e[t],i=n.behaviors,r=n.source;for(let e=0,t=i.length;e<t;++e)i[e].unbind(r)}}}}class Ct{constructor(e,t){this.behaviorCount=0,this.hasHostBehaviors=!1,this.fragment=null,this.targetOffset=0,this.viewBehaviorFactories=null,this.hostBehaviorFactories=null,this.html=e,this.directives=t}create(e){if(null===this.fragment){let e;const t=this.html;if("string"===typeof t){e=document.createElement("template"),e.innerHTML=S.createHTML(t);const n=e.content.firstElementChild;null!==n&&"TEMPLATE"===n.tagName&&(e=n)}else e=t;const n=function(e,t){const n=e.content;document.adoptNode(n);const i=gt.borrow(t);xt(i,e,!0);const r=i.behaviorFactories;i.reset();const o=S.createTemplateWalker(n);let s;for(;s=o.nextNode();)switch(i.targetIndex++,s.nodeType){case 1:xt(i,s);break;case 3:kt(i,s,o);break;case 8:S.isMarker(s)&&i.addFactory(t[S.extractDirectiveIndexFromMarker(s)])}let a=0;(S.isMarker(n.firstChild)||1===n.childNodes.length&&t.length)&&(n.insertBefore(document.createComment(""),n.firstChild),a=-1);const l=i.behaviorFactories;return i.release(),{fragment:n,viewBehaviorFactories:l,hostBehaviorFactories:r,targetOffset:a}}(e,this.directives);this.fragment=n.fragment,this.viewBehaviorFactories=n.viewBehaviorFactories,this.hostBehaviorFactories=n.hostBehaviorFactories,this.targetOffset=n.targetOffset,this.behaviorCount=this.viewBehaviorFactories.length+this.hostBehaviorFactories.length,this.hasHostBehaviors=this.hostBehaviorFactories.length>0}const t=this.fragment.cloneNode(!0),n=this.viewBehaviorFactories,i=new Array(this.behaviorCount),r=S.createTemplateWalker(t);let o=0,s=this.targetOffset,a=r.nextNode();for(let l=n.length;o<l;++o){const e=n[o],t=e.targetIndex;for(;null!==a;){if(s===t){i[o]=e.createBehavior(a);break}a=r.nextNode(),s++}}if(this.hasHostBehaviors){const t=this.hostBehaviorFactories;for(let n=0,r=t.length;n<r;++n,++o)i[o]=t[n].createBehavior(e)}return new St(t,i)}render(e,t,n){"string"===typeof t&&(t=document.getElementById(t)),void 0===n&&(n=t);const i=this.create(n);return i.bind(e,P),i.appendTo(t),i}}const Tt=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;function Et(e){const t=[];let n="";for(let i=0,r=e.length-1;i<r;++i){const r=e[i];let o=i+1<1||arguments.length<=i+1?void 0:arguments[i+1];if(n+=r,o instanceof Ct){const e=o;o=()=>e}if("function"===typeof o&&(o=new pt(o)),o instanceof tt){const e=Tt.exec(r);null!==e&&(o.targetName=e[2])}o instanceof et?(n+=o.createPlaceholder(t.length),t.push(o)):n+=o}return n+=e[e.length-1],new Ct(n,t)}const _t=(e,t)=>Et`
    <template class="${e=>e.circular?"circular":""}">
        <div class="control" part="control" style="${e=>e.generateBadgeStyle()}">
            <slot></slot>
        </div>
    </template>
`;class It{createCSS(){return""}createBehavior(){}}function Rt(e,t){const n=[];let i="";const r=[];for(let o=0,s=e.length-1;o<s;++o){i+=e[o];let s=t[o];if(s instanceof It){const e=s.createBehavior();s=s.createCSS(),e&&r.push(e)}s instanceof A||s instanceof CSSStyleSheet?(""!==i.trim()&&(n.push(i),i=""),n.push(s)):i+=s}return i+=e[e.length-1],""!==i.trim()&&n.push(i),{styles:n,behaviors:r}}function Pt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const{styles:r,behaviors:o}=Rt(e,n),s=A.create(r);return o.length&&s.withBehaviors(...o),s}function At(e){return`:host([hidden]){display:none}:host{display:${e}}`}function Ot(e){const t=e.parentElement;if(t)return t;{const t=e.getRootNode();if(t.host instanceof HTMLElement)return t.host}return null}const Mt=document.createElement("div");class Nt{setProperty(e,t){S.queueUpdate((()=>this.target.setProperty(e,t)))}removeProperty(e){S.queueUpdate((()=>this.target.removeProperty(e)))}}class Dt extends Nt{constructor(){super();const e=new CSSStyleSheet;this.target=e.cssRules[e.insertRule(":root{}")].style,document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}class jt extends Nt{constructor(){super(),this.style=document.createElement("style"),document.head.appendChild(this.style);const{sheet:e}=this.style;if(e){const t=e.insertRule(":root{}",e.cssRules.length);this.target=e.cssRules[t].style}}}class Lt{constructor(e){this.store=new Map,this.target=null;const t=e.$fastController;this.style=document.createElement("style"),t.addStyles(this.style),E.getNotifier(t).subscribe(this,"isConnected"),this.handleChange(t,"isConnected")}targetChanged(){if(null!==this.target)for(const[e,t]of this.store.entries())this.target.setProperty(e,t)}setProperty(e,t){this.store.set(e,t),S.queueUpdate((()=>{null!==this.target&&this.target.setProperty(e,t)}))}removeProperty(e){this.store.delete(e),S.queueUpdate((()=>{null!==this.target&&this.target.removeProperty(e)}))}handleChange(e,t){const{sheet:n}=this.style;if(n){const e=n.insertRule(":host{}",n.cssRules.length);this.target=n.cssRules[e].style}else this.target=null}}X([_],Lt.prototype,"target",void 0);class Ft{constructor(e){this.target=e.style}setProperty(e,t){S.queueUpdate((()=>this.target.setProperty(e,t)))}removeProperty(e){S.queueUpdate((()=>this.target.removeProperty(e)))}}class Bt{setProperty(e,t){Bt.properties[e]=t;for(const n of Bt.roots.values())zt.getOrCreate(Bt.normalizeRoot(n)).setProperty(e,t)}removeProperty(e){delete Bt.properties[e];for(const t of Bt.roots.values())zt.getOrCreate(Bt.normalizeRoot(t)).removeProperty(e)}static registerRoot(e){const{roots:t}=Bt;if(!t.has(e)){t.add(e);const n=zt.getOrCreate(this.normalizeRoot(e));for(const e in Bt.properties)n.setProperty(e,Bt.properties[e])}}static unregisterRoot(e){const{roots:t}=Bt;if(t.has(e)){t.delete(e);const n=zt.getOrCreate(Bt.normalizeRoot(e));for(const e in Bt.properties)n.removeProperty(e)}}static normalizeRoot(e){return e===Mt?document:e}}Bt.roots=new Set,Bt.properties={};const Ut=new WeakMap,$t=S.supportsAdoptedStyleSheets?class extends Nt{constructor(e){super();const t=new CSSStyleSheet;t[N]=!0,this.target=t.cssRules[t.insertRule(":host{}")].style,e.$fastController.addStyles(A.create([t]))}}:Lt,zt=Object.freeze({getOrCreate(e){if(Ut.has(e))return Ut.get(e);let t;return e===Mt?t=new Bt:e instanceof Document?t=S.supportsAdoptedStyleSheets?new Dt:new jt:t=e instanceof ne?new $t(e):new Ft(e),Ut.set(e,t),t}});class Vt extends It{constructor(e){super(),this.subscribers=new WeakMap,this._appliedTo=new Set,this.name=e.name,null!==e.cssCustomPropertyName&&(this.cssCustomProperty=`--${e.cssCustomPropertyName}`,this.cssVar=`var(${this.cssCustomProperty})`),this.id=Vt.uniqueId(),Vt.tokensById.set(this.id,this)}get appliedTo(){return[...this._appliedTo]}static from(e){return new Vt({name:"string"===typeof e?e:e.name,cssCustomPropertyName:"string"===typeof e?e:void 0===e.cssCustomPropertyName?e.name:e.cssCustomPropertyName})}static isCSSDesignToken(e){return"string"===typeof e.cssCustomProperty}static isDerivedDesignTokenValue(e){return"function"===typeof e}static getTokenById(e){return Vt.tokensById.get(e)}getOrCreateSubscriberSet(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;return this.subscribers.get(e)||this.subscribers.set(e,new Set)&&this.subscribers.get(e)}createCSS(){return this.cssVar||""}getValueFor(e){const t=Kt.getOrCreate(e).get(this);if(void 0!==t)return t;throw new Error(`Value could not be retrieved for token named "${this.name}". Ensure the value is set for ${e} or an ancestor of ${e}.`)}setValueFor(e,t){return this._appliedTo.add(e),t instanceof Vt&&(t=this.alias(t)),Kt.getOrCreate(e).set(this,t),this}deleteValueFor(e){return this._appliedTo.delete(e),Kt.existsFor(e)&&Kt.getOrCreate(e).delete(this),this}withDefault(e){return this.setValueFor(Mt,e),this}subscribe(e,t){const n=this.getOrCreateSubscriberSet(t);t&&!Kt.existsFor(t)&&Kt.getOrCreate(t),n.has(e)||n.add(e)}unsubscribe(e,t){const n=this.subscribers.get(t||this);n&&n.has(e)&&n.delete(e)}notify(e){const t=Object.freeze({token:this,target:e});this.subscribers.has(this)&&this.subscribers.get(this).forEach((e=>e.handleChange(t))),this.subscribers.has(e)&&this.subscribers.get(e).forEach((e=>e.handleChange(t)))}alias(e){return t=>e.getValueFor(t)}}Vt.uniqueId=(()=>{let e=0;return()=>(e++,e.toString(16))})(),Vt.tokensById=new Map;class Ht{constructor(e,t,n){this.source=e,this.token=t,this.node=n,this.dependencies=new Set,this.observer=E.binding(e,this,!1),this.observer.handleChange=this.observer.call,this.handleChange()}disconnect(){this.observer.disconnect()}handleChange(){this.node.store.set(this.token,this.observer.observe(this.node.target,P))}}class qt{constructor(){this.values=new Map}set(e,t){this.values.get(e)!==t&&(this.values.set(e,t),E.getNotifier(this).notify(e.id))}get(e){return E.track(this,e.id),this.values.get(e)}delete(e){this.values.delete(e)}all(){return this.values.entries()}}const Wt=new WeakMap,Gt=new WeakMap;class Kt{constructor(e){this.target=e,this.store=new qt,this.children=[],this.assignedValues=new Map,this.reflecting=new Set,this.bindingObservers=new Map,this.tokenValueChangeHandler={handleChange:(e,t)=>{const n=Vt.getTokenById(t);n&&(n.notify(this.target),this.updateCSSTokenReflection(e,n))}},Wt.set(e,this),E.getNotifier(this.store).subscribe(this.tokenValueChangeHandler),e instanceof ne?e.$fastController.addBehaviors([this]):e.isConnected&&this.bind()}static getOrCreate(e){return Wt.get(e)||new Kt(e)}static existsFor(e){return Wt.has(e)}static findParent(e){if(Mt!==e.target){let t=Ot(e.target);for(;null!==t;){if(Wt.has(t))return Wt.get(t);t=Ot(t)}return Kt.getOrCreate(Mt)}return null}static findClosestAssignedNode(e,t){let n=t;do{if(n.has(e))return n;n=n.parent?n.parent:n.target!==Mt?Kt.getOrCreate(Mt):null}while(null!==n);return null}get parent(){return Gt.get(this)||null}updateCSSTokenReflection(e,t){if(Vt.isCSSDesignToken(t)){const n=this.parent,i=this.isReflecting(t);if(n){const r=n.get(t),o=e.get(t);r===o||i?r===o&&i&&this.stopReflectToCSS(t):this.reflectToCSS(t)}else i||this.reflectToCSS(t)}}has(e){return this.assignedValues.has(e)}get(e){const t=this.store.get(e);if(void 0!==t)return t;const n=this.getRaw(e);return void 0!==n?(this.hydrate(e,n),this.get(e)):void 0}getRaw(e){var t;return this.assignedValues.has(e)?this.assignedValues.get(e):null===(t=Kt.findClosestAssignedNode(e,this))||void 0===t?void 0:t.getRaw(e)}set(e,t){Vt.isDerivedDesignTokenValue(this.assignedValues.get(e))&&this.tearDownBindingObserver(e),this.assignedValues.set(e,t),Vt.isDerivedDesignTokenValue(t)?this.setupBindingObserver(e,t):this.store.set(e,t)}delete(e){this.assignedValues.delete(e),this.tearDownBindingObserver(e);const t=this.getRaw(e);t?this.hydrate(e,t):this.store.delete(e)}bind(){const e=Kt.findParent(this);e&&e.appendChild(this);for(const t of this.assignedValues.keys())t.notify(this.target)}unbind(){if(this.parent){Gt.get(this).removeChild(this)}}appendChild(e){e.parent&&Gt.get(e).removeChild(e);const t=this.children.filter((t=>e.contains(t)));Gt.set(e,this),this.children.push(e),t.forEach((t=>e.appendChild(t))),E.getNotifier(this.store).subscribe(e);for(const[n,i]of this.store.all())e.hydrate(n,this.bindingObservers.has(n)?this.getRaw(n):i)}removeChild(e){const t=this.children.indexOf(e);return-1!==t&&this.children.splice(t,1),E.getNotifier(this.store).unsubscribe(e),e.parent===this&&Gt.delete(e)}contains(e){return function(e,t){let n=t;for(;null!==n;){if(n===e)return!0;n=Ot(n)}return!1}(this.target,e.target)}reflectToCSS(e){this.isReflecting(e)||(this.reflecting.add(e),Kt.cssCustomPropertyReflector.startReflection(e,this.target))}stopReflectToCSS(e){this.isReflecting(e)&&(this.reflecting.delete(e),Kt.cssCustomPropertyReflector.stopReflection(e,this.target))}isReflecting(e){return this.reflecting.has(e)}handleChange(e,t){const n=Vt.getTokenById(t);n&&(this.hydrate(n,this.getRaw(n)),this.updateCSSTokenReflection(this.store,n))}hydrate(e,t){if(!this.has(e)){const n=this.bindingObservers.get(e);Vt.isDerivedDesignTokenValue(t)?n?n.source!==t&&(this.tearDownBindingObserver(e),this.setupBindingObserver(e,t)):this.setupBindingObserver(e,t):(n&&this.tearDownBindingObserver(e),this.store.set(e,t))}}setupBindingObserver(e,t){const n=new Ht(t,e,this);return this.bindingObservers.set(e,n),n}tearDownBindingObserver(e){return!!this.bindingObservers.has(e)&&(this.bindingObservers.get(e).disconnect(),this.bindingObservers.delete(e),!0)}}Kt.cssCustomPropertyReflector=new class{startReflection(e,t){e.subscribe(this,t),this.handleChange({token:e,target:t})}stopReflection(e,t){e.unsubscribe(this,t),this.remove(e,t)}handleChange(e){const{token:t,target:n}=e;this.add(t,n)}add(e,t){zt.getOrCreate(t).setProperty(e.cssCustomProperty,this.resolveCSSValue(Kt.getOrCreate(t).get(e)))}remove(e,t){zt.getOrCreate(t).removeProperty(e.cssCustomProperty)}resolveCSSValue(e){return e&&"function"===typeof e.createCSS?e.createCSS():e}},X([_],Kt.prototype,"children",void 0);const Qt=Object.freeze({create:function(e){return Vt.from(e)},notifyConnection:e=>!(!e.isConnected||!Kt.existsFor(e))&&(Kt.getOrCreate(e).bind(),!0),notifyDisconnection:e=>!(e.isConnected||!Kt.existsFor(e))&&(Kt.getOrCreate(e).unbind(),!0),registerRoot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;Bt.registerRoot(e)},unregisterRoot(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt;Bt.unregisterRoot(e)}});function Xt(e){const t=getComputedStyle(document.body),n=document.querySelector("body");if(n){const i=n.getAttribute("data-vscode-theme-kind");for(const[r,o]of e){let e=t.getPropertyValue(r).toString();if("vscode-high-contrast"===i)0===e.length&&o.name.includes("background")&&(e="transparent"),"button-icon-hover-background"===o.name&&(e="transparent");else if("vscode-high-contrast-light"===i){if(0===e.length&&o.name.includes("background"))switch(o.name){case"button-primary-hover-background":e="#0F4A85";break;case"button-secondary-hover-background":case"button-icon-hover-background":e="transparent"}}else"contrast-active-border"===o.name&&(e="transparent");o.setValueFor(n,e)}}}const Yt=new Map;let Jt=!1;function Zt(e,t){const n=Qt.create(e);if(t){if(t.includes("--fake-vscode-token")){t=`${t}-${"id"+Math.random().toString(16).slice(2)}`}Yt.set(t,n)}return Jt||(!function(e){window.addEventListener("load",(()=>{new MutationObserver((()=>{Xt(e)})).observe(document.body,{attributes:!0,attributeFilter:["class"]}),Xt(e)}))}(Yt),Jt=!0),n}const en=Zt("background","--vscode-editor-background").withDefault("#1e1e1e"),tn=Zt("border-width").withDefault(1),nn=Zt("contrast-active-border","--vscode-contrastActiveBorder").withDefault("#f38518"),rn=(Zt("contrast-border","--vscode-contrastBorder").withDefault("#6fc3df"),Zt("corner-radius").withDefault(0)),on=Zt("corner-radius-round").withDefault(2),sn=Zt("design-unit").withDefault(4),an=Zt("disabled-opacity").withDefault(.4),ln=Zt("focus-border","--vscode-focusBorder").withDefault("#007fd4"),cn=Zt("font-family","--vscode-font-family").withDefault("-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol"),un=(Zt("font-weight","--vscode-font-weight").withDefault("400"),Zt("foreground","--vscode-foreground").withDefault("#cccccc")),dn=Zt("input-height").withDefault("26"),hn=Zt("input-min-width").withDefault("100px"),pn=Zt("type-ramp-base-font-size","--vscode-font-size").withDefault("13px"),fn=Zt("type-ramp-base-line-height").withDefault("normal"),mn=Zt("type-ramp-minus1-font-size").withDefault("11px"),gn=Zt("type-ramp-minus1-line-height").withDefault("16px"),vn=(Zt("type-ramp-minus2-font-size").withDefault("9px"),Zt("type-ramp-minus2-line-height").withDefault("16px"),Zt("type-ramp-plus1-font-size").withDefault("16px"),Zt("type-ramp-plus1-line-height").withDefault("24px"),Zt("scrollbarWidth").withDefault("10px")),bn=Zt("scrollbarHeight").withDefault("10px"),yn=Zt("scrollbar-slider-background","--vscode-scrollbarSlider-background").withDefault("#79797966"),xn=Zt("scrollbar-slider-hover-background","--vscode-scrollbarSlider-hoverBackground").withDefault("#646464b3"),kn=Zt("scrollbar-slider-active-background","--vscode-scrollbarSlider-activeBackground").withDefault("#bfbfbf66"),wn=Zt("badge-background","--vscode-badge-background").withDefault("#4d4d4d"),Sn=Zt("badge-foreground","--vscode-badge-foreground").withDefault("#ffffff"),Cn=Zt("button-border","--vscode-button-border").withDefault("transparent"),Tn=Zt("button-icon-background").withDefault("transparent"),En=Zt("button-icon-corner-radius").withDefault("5px"),_n=Zt("button-icon-outline-offset").withDefault(0),In=Zt("button-icon-hover-background","--fake-vscode-token").withDefault("rgba(90, 93, 94, 0.31)"),Rn=Zt("button-icon-padding").withDefault("3px"),Pn=Zt("button-primary-background","--vscode-button-background").withDefault("#0e639c"),An=Zt("button-primary-foreground","--vscode-button-foreground").withDefault("#ffffff"),On=Zt("button-primary-hover-background","--vscode-button-hoverBackground").withDefault("#1177bb"),Mn=Zt("button-secondary-background","--vscode-button-secondaryBackground").withDefault("#3a3d41"),Nn=Zt("button-secondary-foreground","--vscode-button-secondaryForeground").withDefault("#ffffff"),Dn=Zt("button-secondary-hover-background","--vscode-button-secondaryHoverBackground").withDefault("#45494e"),jn=Zt("button-padding-horizontal").withDefault("11px"),Ln=Zt("button-padding-vertical").withDefault("4px"),Fn=Zt("checkbox-background","--vscode-checkbox-background").withDefault("#3c3c3c"),Bn=Zt("checkbox-border","--vscode-checkbox-border").withDefault("#3c3c3c"),Un=Zt("checkbox-corner-radius").withDefault(3),$n=(Zt("checkbox-foreground","--vscode-checkbox-foreground").withDefault("#f0f0f0"),Zt("list-active-selection-background","--vscode-list-activeSelectionBackground").withDefault("#094771")),zn=Zt("list-active-selection-foreground","--vscode-list-activeSelectionForeground").withDefault("#ffffff"),Vn=Zt("list-hover-background","--vscode-list-hoverBackground").withDefault("#2a2d2e"),Hn=Zt("divider-background","--vscode-settings-dropdownListBorder").withDefault("#454545"),qn=Zt("dropdown-background","--vscode-dropdown-background").withDefault("#3c3c3c"),Wn=Zt("dropdown-border","--vscode-dropdown-border").withDefault("#3c3c3c"),Gn=(Zt("dropdown-foreground","--vscode-dropdown-foreground").withDefault("#f0f0f0"),Zt("dropdown-list-max-height").withDefault("200px")),Kn=Zt("input-background","--vscode-input-background").withDefault("#3c3c3c"),Qn=Zt("input-foreground","--vscode-input-foreground").withDefault("#cccccc"),Xn=(Zt("input-placeholder-foreground","--vscode-input-placeholderForeground").withDefault("#cccccc"),Zt("link-active-foreground","--vscode-textLink-activeForeground").withDefault("#3794ff")),Yn=Zt("link-foreground","--vscode-textLink-foreground").withDefault("#3794ff"),Jn=Zt("progress-background","--vscode-progressBar-background").withDefault("#0e70c0"),Zn=Zt("panel-tab-active-border","--vscode-panelTitle-activeBorder").withDefault("#e7e7e7"),ei=Zt("panel-tab-active-foreground","--vscode-panelTitle-activeForeground").withDefault("#e7e7e7"),ti=Zt("panel-tab-foreground","--vscode-panelTitle-inactiveForeground").withDefault("#e7e7e799"),ni=(Zt("panel-view-background","--vscode-panel-background").withDefault("#1e1e1e"),Zt("panel-view-border","--vscode-panel-border").withDefault("#80808059"),Zt("tag-corner-radius").withDefault("2px"));const ii=class extends Ze{connectedCallback(){super.connectedCallback(),this.circular||(this.circular=!0)}}.compose({baseName:"badge",template:_t,styles:(e,t)=>Pt`
	${At("inline-block")} :host {
		box-sizing: border-box;
		font-family: ${cn};
		font-size: ${mn};
		line-height: ${gn};
		text-align: center;
	}
	.control {
		align-items: center;
		background-color: ${wn};
		border: calc(${tn} * 1px) solid ${Cn};
		border-radius: 11px;
		box-sizing: border-box;
		color: ${Sn};
		display: flex;
		height: calc(${sn} * 4px);
		justify-content: center;
		min-width: calc(${sn} * 4px + 2px);
		min-height: calc(${sn} * 4px + 2px);
		padding: 3px 6px;
	}
`});function ri(e,t,n,i){var r,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,n,s):r(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}Object.create;function oi(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var i=Array(e),r=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,r++)i[r]=o[s];return i}Object.create;"function"===typeof SuppressedError&&SuppressedError;class si{}X([q({attribute:"aria-atomic"})],si.prototype,"ariaAtomic",void 0),X([q({attribute:"aria-busy"})],si.prototype,"ariaBusy",void 0),X([q({attribute:"aria-controls"})],si.prototype,"ariaControls",void 0),X([q({attribute:"aria-current"})],si.prototype,"ariaCurrent",void 0),X([q({attribute:"aria-describedby"})],si.prototype,"ariaDescribedby",void 0),X([q({attribute:"aria-details"})],si.prototype,"ariaDetails",void 0),X([q({attribute:"aria-disabled"})],si.prototype,"ariaDisabled",void 0),X([q({attribute:"aria-errormessage"})],si.prototype,"ariaErrormessage",void 0),X([q({attribute:"aria-flowto"})],si.prototype,"ariaFlowto",void 0),X([q({attribute:"aria-haspopup"})],si.prototype,"ariaHaspopup",void 0),X([q({attribute:"aria-hidden"})],si.prototype,"ariaHidden",void 0),X([q({attribute:"aria-invalid"})],si.prototype,"ariaInvalid",void 0),X([q({attribute:"aria-keyshortcuts"})],si.prototype,"ariaKeyshortcuts",void 0),X([q({attribute:"aria-label"})],si.prototype,"ariaLabel",void 0),X([q({attribute:"aria-labelledby"})],si.prototype,"ariaLabelledby",void 0),X([q({attribute:"aria-live"})],si.prototype,"ariaLive",void 0),X([q({attribute:"aria-owns"})],si.prototype,"ariaOwns",void 0),X([q({attribute:"aria-relevant"})],si.prototype,"ariaRelevant",void 0),X([q({attribute:"aria-roledescription"})],si.prototype,"ariaRoledescription",void 0);class ai{constructor(e,t){this.target=e,this.propertyName=t}bind(e){e[this.propertyName]=this.target}unbind(){}}function li(e){return new nt("fast-ref",ai,e)}class ci{handleStartContentChange(){this.startContainer.classList.toggle("start",this.start.assignedNodes().length>0)}handleEndContentChange(){this.endContainer.classList.toggle("end",this.end.assignedNodes().length>0)}}const ui=(e,t)=>Et`
    <span
        part="end"
        ${li("endContainer")}
        class=${e=>t.end?"end":void 0}
    >
        <slot name="end" ${li("end")} @slotchange="${e=>e.handleEndContentChange()}">
            ${t.end||""}
        </slot>
    </span>
`,di=(e,t)=>Et`
    <span
        part="start"
        ${li("startContainer")}
        class="${e=>t.start?"start":void 0}"
    >
        <slot
            name="start"
            ${li("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        >
            ${t.start||""}
        </slot>
    </span>
`;Et`
    <span part="end" ${li("endContainer")}>
        <slot
            name="end"
            ${li("end")}
            @slotchange="${e=>e.handleEndContentChange()}"
        ></slot>
    </span>
`,Et`
    <span part="start" ${li("startContainer")}>
        <slot
            name="start"
            ${li("start")}
            @slotchange="${e=>e.handleStartContentChange()}"
        ></slot>
    </span>
`;function hi(e){const t=$.locate(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.forEach((n=>{Object.getOwnPropertyNames(n.prototype).forEach((t=>{"constructor"!==t&&Object.defineProperty(e.prototype,t,Object.getOwnPropertyDescriptor(n.prototype,t))}));$.locate(n).forEach((e=>t.push(e)))}))}var pi;!function(e){e[e.alt=18]="alt",e[e.arrowDown=40]="arrowDown",e[e.arrowLeft=37]="arrowLeft",e[e.arrowRight=39]="arrowRight",e[e.arrowUp=38]="arrowUp",e[e.back=8]="back",e[e.backSlash=220]="backSlash",e[e.break=19]="break",e[e.capsLock=20]="capsLock",e[e.closeBracket=221]="closeBracket",e[e.colon=186]="colon",e[e.colon2=59]="colon2",e[e.comma=188]="comma",e[e.ctrl=17]="ctrl",e[e.delete=46]="delete",e[e.end=35]="end",e[e.enter=13]="enter",e[e.equals=187]="equals",e[e.equals2=61]="equals2",e[e.equals3=107]="equals3",e[e.escape=27]="escape",e[e.forwardSlash=191]="forwardSlash",e[e.function1=112]="function1",e[e.function10=121]="function10",e[e.function11=122]="function11",e[e.function12=123]="function12",e[e.function2=113]="function2",e[e.function3=114]="function3",e[e.function4=115]="function4",e[e.function5=116]="function5",e[e.function6=117]="function6",e[e.function7=118]="function7",e[e.function8=119]="function8",e[e.function9=120]="function9",e[e.home=36]="home",e[e.insert=45]="insert",e[e.menu=93]="menu",e[e.minus=189]="minus",e[e.minus2=109]="minus2",e[e.numLock=144]="numLock",e[e.numPad0=96]="numPad0",e[e.numPad1=97]="numPad1",e[e.numPad2=98]="numPad2",e[e.numPad3=99]="numPad3",e[e.numPad4=100]="numPad4",e[e.numPad5=101]="numPad5",e[e.numPad6=102]="numPad6",e[e.numPad7=103]="numPad7",e[e.numPad8=104]="numPad8",e[e.numPad9=105]="numPad9",e[e.numPadDivide=111]="numPadDivide",e[e.numPadDot=110]="numPadDot",e[e.numPadMinus=109]="numPadMinus",e[e.numPadMultiply=106]="numPadMultiply",e[e.numPadPlus=107]="numPadPlus",e[e.openBracket=219]="openBracket",e[e.pageDown=34]="pageDown",e[e.pageUp=33]="pageUp",e[e.period=190]="period",e[e.print=44]="print",e[e.quote=222]="quote",e[e.scrollLock=145]="scrollLock",e[e.shift=16]="shift",e[e.space=32]="space",e[e.tab=9]="tab",e[e.tilde=192]="tilde",e[e.windowsLeft=91]="windowsLeft",e[e.windowsOpera=219]="windowsOpera",e[e.windowsRight=92]="windowsRight"}(pi||(pi={}));const fi="ArrowDown",mi="ArrowLeft",gi="ArrowRight",vi="ArrowUp",bi="Enter",yi="Escape",xi="Home",ki="End",wi=" ",Si="Tab",Ci={ArrowDown:fi,ArrowLeft:mi,ArrowRight:gi,ArrowUp:vi},Ti="form-associated-proxy",Ei="ElementInternals",_i=Ei in window&&"setFormValue"in window[Ei].prototype,Ii=new WeakMap;function Ri(e){const t=class extends e{constructor(){super(...arguments),this.dirtyValue=!1,this.disabled=!1,this.proxyEventsToBlock=["change","click"],this.proxyInitialized=!1,this.required=!1,this.initialValue=this.initialValue||"",this.elementInternals||(this.formResetCallback=this.formResetCallback.bind(this))}static get formAssociated(){return _i}get validity(){return this.elementInternals?this.elementInternals.validity:this.proxy.validity}get form(){return this.elementInternals?this.elementInternals.form:this.proxy.form}get validationMessage(){return this.elementInternals?this.elementInternals.validationMessage:this.proxy.validationMessage}get willValidate(){return this.elementInternals?this.elementInternals.willValidate:this.proxy.willValidate}get labels(){if(this.elementInternals)return Object.freeze(Array.from(this.elementInternals.labels));if(this.proxy instanceof HTMLElement&&this.proxy.ownerDocument&&this.id){const e=this.proxy.labels,t=Array.from(this.proxy.getRootNode().querySelectorAll(`[for='${this.id}']`)),n=e?t.concat(Array.from(e)):t;return Object.freeze(n)}return m}valueChanged(e,t){this.dirtyValue=!0,this.proxy instanceof HTMLElement&&(this.proxy.value=this.value),this.currentValue=this.value,this.setFormValue(this.value),this.validate()}currentValueChanged(){this.value=this.currentValue}initialValueChanged(e,t){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}disabledChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.disabled=this.disabled),S.queueUpdate((()=>this.classList.toggle("disabled",this.disabled)))}nameChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.name=this.name)}requiredChanged(e,t){this.proxy instanceof HTMLElement&&(this.proxy.required=this.required),S.queueUpdate((()=>this.classList.toggle("required",this.required))),this.validate()}get elementInternals(){if(!_i)return null;let e=Ii.get(this);return e||(e=this.attachInternals(),Ii.set(this,e)),e}connectedCallback(){super.connectedCallback(),this.addEventListener("keypress",this._keypressHandler),this.value||(this.value=this.initialValue,this.dirtyValue=!1),this.elementInternals||(this.attachProxy(),this.form&&this.form.addEventListener("reset",this.formResetCallback))}disconnectedCallback(){super.disconnectedCallback(),this.proxyEventsToBlock.forEach((e=>this.proxy.removeEventListener(e,this.stopPropagation))),!this.elementInternals&&this.form&&this.form.removeEventListener("reset",this.formResetCallback)}checkValidity(){return this.elementInternals?this.elementInternals.checkValidity():this.proxy.checkValidity()}reportValidity(){return this.elementInternals?this.elementInternals.reportValidity():this.proxy.reportValidity()}setValidity(e,t,n){this.elementInternals?this.elementInternals.setValidity(e,t,n):"string"===typeof t&&this.proxy.setCustomValidity(t)}formDisabledCallback(e){this.disabled=e}formResetCallback(){this.value=this.initialValue,this.dirtyValue=!1}attachProxy(){var e;this.proxyInitialized||(this.proxyInitialized=!0,this.proxy.style.display="none",this.proxyEventsToBlock.forEach((e=>this.proxy.addEventListener(e,this.stopPropagation))),this.proxy.disabled=this.disabled,this.proxy.required=this.required,"string"===typeof this.name&&(this.proxy.name=this.name),"string"===typeof this.value&&(this.proxy.value=this.value),this.proxy.setAttribute("slot",Ti),this.proxySlot=document.createElement("slot"),this.proxySlot.setAttribute("name",Ti)),null===(e=this.shadowRoot)||void 0===e||e.appendChild(this.proxySlot),this.appendChild(this.proxy)}detachProxy(){var e;this.removeChild(this.proxy),null===(e=this.shadowRoot)||void 0===e||e.removeChild(this.proxySlot)}validate(e){this.proxy instanceof HTMLElement&&this.setValidity(this.proxy.validity,this.proxy.validationMessage,e)}setFormValue(e,t){this.elementInternals&&this.elementInternals.setFormValue(e,t||e)}_keypressHandler(e){if(e.key===bi)if(this.form instanceof HTMLFormElement){const e=this.form.querySelector("[type=submit]");null===e||void 0===e||e.click()}}stopPropagation(e){e.stopPropagation()}};return q({mode:"boolean"})(t.prototype,"disabled"),q({mode:"fromView",attribute:"value"})(t.prototype,"initialValue"),q({attribute:"current-value"})(t.prototype,"currentValue"),q(t.prototype,"name"),q({mode:"boolean"})(t.prototype,"required"),_(t.prototype,"value"),t}function Pi(e){class t extends(Ri(e)){}class n extends t{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];super(t),this.dirtyChecked=!1,this.checkedAttribute=!1,this.checked=!1,this.dirtyChecked=!1}checkedAttributeChanged(){this.defaultChecked=this.checkedAttribute}defaultCheckedChanged(){this.dirtyChecked||(this.checked=this.defaultChecked,this.dirtyChecked=!1)}checkedChanged(e,t){this.dirtyChecked||(this.dirtyChecked=!0),this.currentChecked=this.checked,this.updateForm(),this.proxy instanceof HTMLInputElement&&(this.proxy.checked=this.checked),void 0!==e&&this.$emit("change"),this.validate()}currentCheckedChanged(e,t){this.checked=this.currentChecked}updateForm(){const e=this.checked?this.value:null;this.setFormValue(e,e)}connectedCallback(){super.connectedCallback(),this.updateForm()}formResetCallback(){super.formResetCallback(),this.checked=!!this.checkedAttribute,this.dirtyChecked=!1}}return q({attribute:"checked",mode:"boolean"})(n.prototype,"checkedAttribute"),q({attribute:"current-checked",converter:z})(n.prototype,"currentChecked"),_(n.prototype,"defaultChecked"),_(n.prototype,"checked"),n}class Ai extends Ve{}class Oi extends(Ri(Ai)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class Mi extends Oi{constructor(){super(...arguments),this.handleClick=e=>{var t;this.disabled&&(null===(t=this.defaultSlottedContent)||void 0===t?void 0:t.length)<=1&&e.stopPropagation()},this.handleSubmission=()=>{if(!this.form)return;const e=this.proxy.isConnected;e||this.attachProxy(),"function"===typeof this.form.requestSubmit?this.form.requestSubmit(this.proxy):this.proxy.click(),e||this.detachProxy()},this.handleFormReset=()=>{var e;null===(e=this.form)||void 0===e||e.reset()},this.handleUnsupportedDelegatesFocus=()=>{var e;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(e=this.$fastController.definition.shadowOptions)||void 0===e?void 0:e.delegatesFocus)&&(this.focus=()=>{this.control.focus()})}}formactionChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formAction=this.formaction)}formenctypeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formEnctype=this.formenctype)}formmethodChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formMethod=this.formmethod)}formnovalidateChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formNoValidate=this.formnovalidate)}formtargetChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.formTarget=this.formtarget)}typeChanged(e,t){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type),"submit"===t&&this.addEventListener("click",this.handleSubmission),"submit"===e&&this.removeEventListener("click",this.handleSubmission),"reset"===t&&this.addEventListener("click",this.handleFormReset),"reset"===e&&this.removeEventListener("click",this.handleFormReset)}validate(){super.validate(this.control)}connectedCallback(){var e;super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.handleUnsupportedDelegatesFocus();const t=Array.from(null===(e=this.control)||void 0===e?void 0:e.children);t&&t.forEach((e=>{e.addEventListener("click",this.handleClick)}))}disconnectedCallback(){var e;super.disconnectedCallback();const t=Array.from(null===(e=this.control)||void 0===e?void 0:e.children);t&&t.forEach((e=>{e.removeEventListener("click",this.handleClick)}))}}X([q({mode:"boolean"})],Mi.prototype,"autofocus",void 0),X([q({attribute:"form"})],Mi.prototype,"formId",void 0),X([q],Mi.prototype,"formaction",void 0),X([q],Mi.prototype,"formenctype",void 0),X([q],Mi.prototype,"formmethod",void 0),X([q({mode:"boolean"})],Mi.prototype,"formnovalidate",void 0),X([q],Mi.prototype,"formtarget",void 0),X([q],Mi.prototype,"type",void 0),X([_],Mi.prototype,"defaultSlottedContent",void 0);class Ni{}function Di(e){return e?function(t,n,i){return 1===t.nodeType&&t.matches(e)}:function(e,t,n){return 1===e.nodeType}}X([q({attribute:"aria-expanded"})],Ni.prototype,"ariaExpanded",void 0),X([q({attribute:"aria-pressed"})],Ni.prototype,"ariaPressed",void 0),hi(Ni,si),hi(Mi,ci,Ni);class ji{constructor(e,t){this.target=e,this.options=t,this.source=null}bind(e){const t=this.options.property;this.shouldUpdate=E.getAccessors(e).some((e=>e.name===t)),this.source=e,this.updateTarget(this.computeNodes()),this.shouldUpdate&&this.observe()}unbind(){this.updateTarget(m),this.source=null,this.shouldUpdate&&this.disconnect()}handleEvent(){this.updateTarget(this.computeNodes())}computeNodes(){let e=this.getNodes();return void 0!==this.options.filter&&(e=e.filter(this.options.filter)),e}updateTarget(e){this.source[this.options.property]=e}}class Li extends ji{constructor(e,t){super(e,t)}observe(){this.target.addEventListener("slotchange",this)}disconnect(){this.target.removeEventListener("slotchange",this)}getNodes(){return this.target.assignedNodes(this.options)}}function Fi(e){return"string"===typeof e&&(e={property:e}),new nt("fast-slotted",Li,e)}function Bi(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.every((e=>e instanceof HTMLElement))}let Ui;const $i=function(){if("boolean"===typeof Ui)return Ui;if("undefined"===typeof window||!window.document||!window.document.createElement)return Ui=!1,Ui;const e=document.createElement("style"),t=function(){const e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}();null!==t&&e.setAttribute("nonce",t),document.head.appendChild(e);try{e.sheet.insertRule("foo:focus-visible {color:inherit}",0),Ui=!0}catch(WU){Ui=!1}finally{document.head.removeChild(e)}return Ui}()?"focus-visible":"focus",zi="not-allowed",Vi=Pt`
	${At("inline-flex")} :host {
		outline: none;
		font-family: ${cn};
		font-size: ${pn};
		line-height: ${fn};
		color: ${An};
		background: ${Pn};
		border-radius: calc(${on} * 1px);
		fill: currentColor;
		cursor: pointer;
	}
	.control {
		background: transparent;
		height: inherit;
		flex-grow: 1;
		box-sizing: border-box;
		display: inline-flex;
		justify-content: center;
		align-items: center;
		padding: ${Ln} ${jn};
		white-space: wrap;
		outline: none;
		text-decoration: none;
		border: calc(${tn} * 1px) solid ${Cn};
		color: inherit;
		border-radius: inherit;
		fill: inherit;
		cursor: inherit;
		font-family: inherit;
	}
	:host(:hover) {
		background: ${On};
	}
	:host(:active) {
		background: ${Pn};
	}
	.control:${$i} {
		outline: calc(${tn} * 1px) solid ${ln};
		outline-offset: calc(${tn} * 2px);
	}
	.control::-moz-focus-inner {
		border: 0;
	}
	:host([disabled]) {
		opacity: ${an};
		background: ${Pn};
		cursor: ${zi};
	}
	.content {
		display: flex;
	}
	.start {
		display: flex;
	}
	::slotted(svg),
	::slotted(span) {
		width: calc(${sn} * 4px);
		height: calc(${sn} * 4px);
	}
	.start {
		margin-inline-end: 8px;
	}
`,Hi=Pt`
	:host([appearance='primary']) {
		background: ${Pn};
		color: ${An};
	}
	:host([appearance='primary']:hover) {
		background: ${On};
	}
	:host([appearance='primary']:active) .control:active {
		background: ${Pn};
	}
	:host([appearance='primary']) .control:${$i} {
		outline: calc(${tn} * 1px) solid ${ln};
		outline-offset: calc(${tn} * 2px);
	}
	:host([appearance='primary'][disabled]) {
		background: ${Pn};
	}
`,qi=Pt`
	:host([appearance='secondary']) {
		background: ${Mn};
		color: ${Nn};
	}
	:host([appearance='secondary']:hover) {
		background: ${Dn};
	}
	:host([appearance='secondary']:active) .control:active {
		background: ${Mn};
	}
	:host([appearance='secondary']) .control:${$i} {
		outline: calc(${tn} * 1px) solid ${ln};
		outline-offset: calc(${tn} * 2px);
	}
	:host([appearance='secondary'][disabled]) {
		background: ${Mn};
	}
`,Wi=Pt`
	:host([appearance='icon']) {
		background: ${Tn};
		border-radius: ${En};
		color: ${un};
	}
	:host([appearance='icon']:hover) {
		background: ${In};
		outline: 1px dotted ${nn};
		outline-offset: -1px;
	}
	:host([appearance='icon']) .control {
		padding: ${Rn};
		border: none;
	}
	:host([appearance='icon']:active) .control:active {
		background: ${In};
	}
	:host([appearance='icon']) .control:${$i} {
		outline: calc(${tn} * 1px) solid ${ln};
		outline-offset: ${_n};
	}
	:host([appearance='icon'][disabled]) {
		background: ${Tn};
	}
`;class Gi extends Mi{connectedCallback(){if(super.connectedCallback(),!this.appearance){const e=this.getAttribute("appearance");this.appearance=e}}attributeChangedCallback(e,t,n){if("appearance"===e&&"icon"===n){this.getAttribute("aria-label")||(this.ariaLabel="Icon Button")}"aria-label"===e&&(this.ariaLabel=n),"disabled"===e&&(this.disabled=null!==n)}}ri([q],Gi.prototype,"appearance",void 0);const Ki=Gi.compose({baseName:"button",template:(e,t)=>Et`
    <button
        class="control"
        part="control"
        ?autofocus="${e=>e.autofocus}"
        ?disabled="${e=>e.disabled}"
        form="${e=>e.formId}"
        formaction="${e=>e.formaction}"
        formenctype="${e=>e.formenctype}"
        formmethod="${e=>e.formmethod}"
        formnovalidate="${e=>e.formnovalidate}"
        formtarget="${e=>e.formtarget}"
        name="${e=>e.name}"
        type="${e=>e.type}"
        value="${e=>e.value}"
        aria-atomic="${e=>e.ariaAtomic}"
        aria-busy="${e=>e.ariaBusy}"
        aria-controls="${e=>e.ariaControls}"
        aria-current="${e=>e.ariaCurrent}"
        aria-describedby="${e=>e.ariaDescribedby}"
        aria-details="${e=>e.ariaDetails}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-errormessage="${e=>e.ariaErrormessage}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-flowto="${e=>e.ariaFlowto}"
        aria-haspopup="${e=>e.ariaHaspopup}"
        aria-hidden="${e=>e.ariaHidden}"
        aria-invalid="${e=>e.ariaInvalid}"
        aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
        aria-label="${e=>e.ariaLabel}"
        aria-labelledby="${e=>e.ariaLabelledby}"
        aria-live="${e=>e.ariaLive}"
        aria-owns="${e=>e.ariaOwns}"
        aria-pressed="${e=>e.ariaPressed}"
        aria-relevant="${e=>e.ariaRelevant}"
        aria-roledescription="${e=>e.ariaRoledescription}"
        ${li("control")}
    >
        ${di(0,t)}
        <span class="content" part="content">
            <slot ${Fi("defaultSlottedContent")}></slot>
        </span>
        ${ui(0,t)}
    </button>
`,styles:(e,t)=>Pt`
	${Vi}
	${Hi}
	${qi}
	${Wi}
`,shadowOptions:{delegatesFocus:!0}});class Qi extends Ve{}class Xi extends(Pi(Qi)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class Yi extends Xi{constructor(){super(),this.initialValue="on",this.indeterminate=!1,this.keypressHandler=e=>{if(!this.readOnly&&e.key===wi)this.indeterminate&&(this.indeterminate=!1),this.checked=!this.checked},this.clickHandler=e=>{this.disabled||this.readOnly||(this.indeterminate&&(this.indeterminate=!1),this.checked=!this.checked)},this.proxy.setAttribute("type","checkbox")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}}X([q({attribute:"readonly",mode:"boolean"})],Yi.prototype,"readOnly",void 0),X([_],Yi.prototype,"defaultSlottedNodes",void 0),X([_],Yi.prototype,"indeterminate",void 0);const Ji=class extends Yi{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Checkbox")}}.compose({baseName:"checkbox",template:(e,t)=>Et`
    <template
        role="checkbox"
        aria-checked="${e=>e.checked}"
        aria-required="${e=>e.required}"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        tabindex="${e=>e.disabled?null:0}"
        @keypress="${(e,t)=>e.keypressHandler(t.event)}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
        class="${e=>e.readOnly?"readonly":""} ${e=>e.checked?"checked":""} ${e=>e.indeterminate?"indeterminate":""}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${t.checkedIndicator||""}
            </slot>
            <slot name="indeterminate-indicator">
                ${t.indeterminateIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Fi("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(e,t)=>Pt`
	${At("inline-flex")} :host {
		align-items: center;
		outline: none;
		margin: calc(${sn} * 1px) 0;
		user-select: none;
		font-size: ${pn};
		line-height: ${fn};
	}
	.control {
		position: relative;
		width: calc(${sn} * 4px + 2px);
		height: calc(${sn} * 4px + 2px);
		box-sizing: border-box;
		border-radius: calc(${Un} * 1px);
		border: calc(${tn} * 1px) solid ${Bn};
		background: ${Fn};
		outline: none;
		cursor: pointer;
	}
	.label {
		font-family: ${cn};
		color: ${un};
		padding-inline-start: calc(${sn} * 2px + 2px);
		margin-inline-end: calc(${sn} * 2px + 2px);
		cursor: pointer;
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	.checked-indicator {
		width: 100%;
		height: 100%;
		display: block;
		fill: ${un};
		opacity: 0;
		pointer-events: none;
	}
	.indeterminate-indicator {
		border-radius: 2px;
		background: ${un};
		position: absolute;
		top: 50%;
		left: 50%;
		width: 50%;
		height: 50%;
		transform: translate(-50%, -50%);
		opacity: 0;
	}
	:host(:enabled) .control:hover {
		background: ${Fn};
		border-color: ${Bn};
	}
	:host(:enabled) .control:active {
		background: ${Fn};
		border-color: ${ln};
	}
	:host(:${$i}) .control {
		border: calc(${tn} * 1px) solid ${ln};
	}
	:host(.disabled) .label,
	:host(.readonly) .label,
	:host(.readonly) .control,
	:host(.disabled) .control {
		cursor: ${zi};
	}
	:host(.checked:not(.indeterminate)) .checked-indicator,
	:host(.indeterminate) .indeterminate-indicator {
		opacity: 1;
	}
	:host(.disabled) {
		opacity: ${an};
	}
`,checkedIndicator:'\n\t\t<svg \n\t\t\tpart="checked-indicator"\n\t\t\tclass="checked-indicator"\n\t\t\twidth="16" \n\t\t\theight="16" \n\t\t\tviewBox="0 0 16 16" \n\t\t\txmlns="http://www.w3.org/2000/svg" \n\t\t\tfill="currentColor"\n\t\t>\n\t\t\t<path \n\t\t\t\tfill-rule="evenodd" \n\t\t\t\tclip-rule="evenodd" \n\t\t\t\td="M14.431 3.323l-8.47 10-.79-.036-3.35-4.77.818-.574 2.978 4.24 8.051-9.506.764.646z"\n\t\t\t/>\n\t\t</svg>\n\t',indeterminateIndicator:'\n\t\t<div part="indeterminate-indicator" class="indeterminate-indicator"></div>\n\t'});function Zi(e,t,n){return{index:e,removed:t,addedCount:n}}const er=0,tr=1,nr=2,ir=3;function rr(e,t,n,i,r,o){let s=0,a=0;const l=Math.min(n-t,o-r);if(0===t&&0===r&&(s=function(e,t,n){for(let i=0;i<n;++i)if(e[i]!==t[i])return i;return n}(e,i,l)),n===e.length&&o===i.length&&(a=function(e,t,n){let i=e.length,r=t.length,o=0;for(;o<n&&e[--i]===t[--r];)o++;return o}(e,i,l-s)),r+=s,o-=a,(n-=a)-(t+=s)===0&&o-r===0)return m;if(t===n){const e=Zi(t,[],0);for(;r<o;)e.removed.push(i[r++]);return[e]}if(r===o)return[Zi(t,[],n-t)];const c=function(e){let t=e.length-1,n=e[0].length-1,i=e[t][n];const r=[];for(;t>0||n>0;){if(0===t){r.push(nr),n--;continue}if(0===n){r.push(ir),t--;continue}const o=e[t-1][n-1],s=e[t-1][n],a=e[t][n-1];let l;l=s<a?s<o?s:o:a<o?a:o,l===o?(o===i?r.push(er):(r.push(tr),i=o),t--,n--):l===s?(r.push(ir),t--,i=s):(r.push(nr),n--,i=a)}return r.reverse(),r}(function(e,t,n,i,r,o){const s=o-r+1,a=n-t+1,l=new Array(s);let c,u;for(let d=0;d<s;++d)l[d]=new Array(a),l[d][0]=d;for(let d=0;d<a;++d)l[0][d]=d;for(let d=1;d<s;++d)for(let n=1;n<a;++n)e[t+n-1]===i[r+d-1]?l[d][n]=l[d-1][n-1]:(c=l[d-1][n]+1,u=l[d][n-1]+1,l[d][n]=c<u?c:u);return l}(e,t,n,i,r,o)),u=[];let d,h=t,p=r;for(let f=0;f<c.length;++f)switch(c[f]){case er:void 0!==d&&(u.push(d),d=void 0),h++,p++;break;case tr:void 0===d&&(d=Zi(h,[],0)),d.addedCount++,h++,d.removed.push(i[p]),p++;break;case nr:void 0===d&&(d=Zi(h,[],0)),d.addedCount++,h++;break;case ir:void 0===d&&(d=Zi(h,[],0)),d.removed.push(i[p]),p++}return void 0!==d&&u.push(d),u}const or=Array.prototype.push;function sr(e,t,n,i){const r=Zi(t,n,i);let o=!1,s=0;for(let d=0;d<e.length;d++){const t=e[d];if(t.index+=s,o)continue;const n=(a=r.index,l=r.index+r.removed.length,c=t.index,u=t.index+t.addedCount,l<c||u<a?-1:l===c||u===a?0:a<c?l<u?l-c:u-c:u<l?u-a:l-a);if(n>=0){e.splice(d,1),d--,s-=t.addedCount-t.removed.length,r.addedCount+=t.addedCount-n;const i=r.removed.length+t.removed.length-n;if(r.addedCount||i){let e=t.removed;if(r.index<t.index){const n=r.removed.slice(0,t.index-r.index);or.apply(n,e),e=n}if(r.index+r.removed.length>t.index+t.addedCount){const n=r.removed.slice(t.index+t.addedCount-r.index);or.apply(e,n)}r.removed=e,t.index<r.index&&(r.index=t.index)}else o=!0}else if(r.index<t.index){o=!0,e.splice(d,0,r),d++;const n=r.addedCount-r.removed.length;t.index+=n,s+=n}}var a,l,c,u;o||e.push(r)}function ar(e,t){let n=[];const i=function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];sr(t,i.index,i.removed,i.addedCount)}return t}(t);for(let r=0,o=i.length;r<o;++r){const t=i[r];1!==t.addedCount||1!==t.removed.length?n=n.concat(rr(e,t.index,t.index+t.addedCount,t.removed,0,t.removed.length)):t.removed[0]!==e[t.index]&&n.push(t)}return n}let lr=!1;function cr(e,t){let n=e.index;const i=t.length;return n>i?n=i-e.addedCount:n<0&&(n=i+e.removed.length+n-e.addedCount),n<0&&(n=0),e.index=n,e}class ur extends C{constructor(e){super(e),this.oldCollection=void 0,this.splices=void 0,this.needsQueue=!0,this.call=this.flush,Reflect.defineProperty(e,"$fastController",{value:this,enumerable:!1})}subscribe(e){this.flush(),super.subscribe(e)}addSplice(e){void 0===this.splices?this.splices=[e]:this.splices.push(e),this.needsQueue&&(this.needsQueue=!1,S.queueUpdate(this))}reset(e){this.oldCollection=e,this.needsQueue&&(this.needsQueue=!1,S.queueUpdate(this))}flush(){const e=this.splices,t=this.oldCollection;if(void 0===e&&void 0===t)return;this.needsQueue=!0,this.splices=void 0,this.oldCollection=void 0;const n=void 0===t?ar(this.source,e):rr(this.source,0,this.source.length,t,0,t.length);this.notify(n)}}Object.freeze({positioning:!1,recycle:!0});function dr(e,t,n,i){e.bind(t[n],i)}function hr(e,t,n,i){const r=Object.create(i);r.index=n,r.length=t.length,e.bind(t[n],r)}class pr{constructor(e,t,n,i,r,o){this.location=e,this.itemsBinding=t,this.templateBinding=i,this.options=o,this.source=null,this.views=[],this.items=null,this.itemsObserver=null,this.originalContext=void 0,this.childContext=void 0,this.bindView=dr,this.itemsBindingObserver=E.binding(t,this,n),this.templateBindingObserver=E.binding(i,this,r),o.positioning&&(this.bindView=hr)}bind(e,t){this.source=e,this.originalContext=t,this.childContext=Object.create(t),this.childContext.parent=e,this.childContext.parentContext=this.originalContext,this.items=this.itemsBindingObserver.observe(e,this.originalContext),this.template=this.templateBindingObserver.observe(e,this.originalContext),this.observeItems(!0),this.refreshAllViews()}unbind(){this.source=null,this.items=null,null!==this.itemsObserver&&this.itemsObserver.unsubscribe(this),this.unbindAllViews(),this.itemsBindingObserver.disconnect(),this.templateBindingObserver.disconnect()}handleChange(e,t){e===this.itemsBinding?(this.items=this.itemsBindingObserver.observe(this.source,this.originalContext),this.observeItems(),this.refreshAllViews()):e===this.templateBinding?(this.template=this.templateBindingObserver.observe(this.source,this.originalContext),this.refreshAllViews(!0)):this.updateViews(t)}observeItems(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.items)return void(this.items=m);const t=this.itemsObserver,n=this.itemsObserver=E.getNotifier(this.items),i=t!==n;i&&null!==t&&t.unsubscribe(this),(i||e)&&n.subscribe(this)}updateViews(e){const t=this.childContext,n=this.views,i=this.bindView,r=this.items,o=this.template,s=this.options.recycle,a=[];let l=0,c=0;for(let u=0,d=e.length;u<d;++u){const d=e[u],h=d.removed;let p=0,f=d.index;const m=f+d.addedCount,g=n.splice(d.index,h.length),v=c=a.length+g.length;for(;f<m;++f){const e=n[f],u=e?e.firstChild:this.location;let d;s&&c>0?(p<=v&&g.length>0?(d=g[p],p++):(d=a[l],l++),c--):d=o.create(),n.splice(f,0,d),i(d,r,f,t),d.insertBefore(u)}g[p]&&a.push(...g.slice(p))}for(let u=l,d=a.length;u<d;++u)a[u].dispose();if(this.options.positioning)for(let u=0,d=n.length;u<d;++u){const e=n[u].context;e.length=d,e.index=u}}refreshAllViews(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.items,n=this.childContext,i=this.template,r=this.location,o=this.bindView;let s=t.length,a=this.views,l=a.length;if(0!==s&&!e&&this.options.recycle||(St.disposeContiguousBatch(a),l=0),0===l){this.views=a=new Array(s);for(let e=0;e<s;++e){const s=i.create();o(s,t,e,n),a[e]=s,s.insertBefore(r)}}else{let e=0;for(;e<s;++e)if(e<l){o(a[e],t,e,n)}else{const s=i.create();o(s,t,e,n),a.push(s),s.insertBefore(r)}const c=a.splice(e,l-e);for(e=0,s=c.length;e<s;++e)c[e].dispose()}}unbindAllViews(){const e=this.views;for(let t=0,n=e.length;t<n;++t)e[t].unbind()}}class fr extends et{constructor(e,t,n){super(),this.itemsBinding=e,this.templateBinding=t,this.options=n,this.createPlaceholder=S.createBlockPlaceholder,function(){if(lr)return;lr=!0,E.setArrayObserverFactory((e=>new ur(e)));const e=Array.prototype;if(e.$fastPatch)return;Reflect.defineProperty(e,"$fastPatch",{value:1,enumerable:!1});const t=e.pop,n=e.push,i=e.reverse,r=e.shift,o=e.sort,s=e.splice,a=e.unshift;e.pop=function(){const e=this.length>0,n=t.apply(this,arguments),i=this.$fastController;return void 0!==i&&e&&i.addSplice(Zi(this.length,[n],0)),n},e.push=function(){const e=n.apply(this,arguments),t=this.$fastController;return void 0!==t&&t.addSplice(cr(Zi(this.length-arguments.length,[],arguments.length),this)),e},e.reverse=function(){let e;const t=this.$fastController;void 0!==t&&(t.flush(),e=this.slice());const n=i.apply(this,arguments);return void 0!==t&&t.reset(e),n},e.shift=function(){const e=this.length>0,t=r.apply(this,arguments),n=this.$fastController;return void 0!==n&&e&&n.addSplice(Zi(0,[t],0)),t},e.sort=function(){let e;const t=this.$fastController;void 0!==t&&(t.flush(),e=this.slice());const n=o.apply(this,arguments);return void 0!==t&&t.reset(e),n},e.splice=function(){const e=s.apply(this,arguments),t=this.$fastController;return void 0!==t&&t.addSplice(cr(Zi(+arguments[0],e,arguments.length>2?arguments.length-2:0),this)),e},e.unshift=function(){const e=a.apply(this,arguments),t=this.$fastController;return void 0!==t&&t.addSplice(cr(Zi(0,[],arguments.length),this)),e}}(),this.isItemsBindingVolatile=E.isVolatileBinding(e),this.isTemplateBindingVolatile=E.isVolatileBinding(t)}createBehavior(e){return new pr(e,this.itemsBinding,this.isItemsBindingVolatile,this.templateBinding,this.isTemplateBindingVolatile,this.options)}}const mr="focus",gr="focusin",vr="focusout",br="keydown",yr="none",xr="default",kr="sticky",wr="default",Sr="columnheader",Cr="rowheader",Tr="default",Er="header",_r="sticky-header";class Ir extends Ve{constructor(){super(),this.noTabbing=!1,this.generateHeader=xr,this.rowsData=[],this.columnDefinitions=null,this.focusRowIndex=0,this.focusColumnIndex=0,this.rowsPlaceholder=null,this.generatedHeader=null,this.isUpdatingFocus=!1,this.pendingFocusUpdate=!1,this.rowindexUpdateQueued=!1,this.columnDefinitionsStale=!0,this.generatedGridTemplateColumns="",this.focusOnCell=(e,t,n)=>{if(0===this.rowElements.length)return this.focusRowIndex=0,void(this.focusColumnIndex=0);const i=Math.max(0,Math.min(this.rowElements.length-1,e)),r=this.rowElements[i].querySelectorAll('[role="cell"], [role="gridcell"], [role="columnheader"], [role="rowheader"]'),o=r[Math.max(0,Math.min(r.length-1,t))];n&&this.scrollHeight!==this.clientHeight&&(i<this.focusRowIndex&&this.scrollTop>0||i>this.focusRowIndex&&this.scrollTop<this.scrollHeight-this.clientHeight)&&o.scrollIntoView({block:"center",inline:"center"}),o.focus()},this.onChildListChange=(e,t)=>{e&&e.length&&(e.forEach((e=>{e.addedNodes.forEach((e=>{1===e.nodeType&&"row"===e.getAttribute("role")&&(e.columnDefinitions=this.columnDefinitions)}))})),this.queueRowIndexUpdate())},this.queueRowIndexUpdate=()=>{this.rowindexUpdateQueued||(this.rowindexUpdateQueued=!0,S.queueUpdate(this.updateRowIndexes))},this.updateRowIndexes=()=>{let e=this.gridTemplateColumns;if(void 0===e){if(""===this.generatedGridTemplateColumns&&this.rowElements.length>0){const e=this.rowElements[0];this.generatedGridTemplateColumns=new Array(e.cellElements.length).fill("1fr").join(" ")}e=this.generatedGridTemplateColumns}this.rowElements.forEach(((t,n)=>{const i=t;i.rowIndex=n,i.gridTemplateColumns=e,this.columnDefinitionsStale&&(i.columnDefinitions=this.columnDefinitions)})),this.rowindexUpdateQueued=!1,this.columnDefinitionsStale=!1}}static generateTemplateColumns(e){let t="";return e.forEach((e=>{t=`${t}${""===t?"":" "}1fr`})),t}noTabbingChanged(){this.$fastController.isConnected&&(this.noTabbing?this.setAttribute("tabIndex","-1"):this.setAttribute("tabIndex",this.contains(document.activeElement)||this===document.activeElement?"-1":"0"))}generateHeaderChanged(){this.$fastController.isConnected&&this.toggleGeneratedHeader()}gridTemplateColumnsChanged(){this.$fastController.isConnected&&this.updateRowIndexes()}rowsDataChanged(){null===this.columnDefinitions&&this.rowsData.length>0&&(this.columnDefinitions=Ir.generateColumns(this.rowsData[0])),this.$fastController.isConnected&&this.toggleGeneratedHeader()}columnDefinitionsChanged(){null!==this.columnDefinitions?(this.generatedGridTemplateColumns=Ir.generateTemplateColumns(this.columnDefinitions),this.$fastController.isConnected&&(this.columnDefinitionsStale=!0,this.queueRowIndexUpdate())):this.generatedGridTemplateColumns=""}headerCellItemTemplateChanged(){this.$fastController.isConnected&&null!==this.generatedHeader&&(this.generatedHeader.headerCellItemTemplate=this.headerCellItemTemplate)}focusRowIndexChanged(){this.$fastController.isConnected&&this.queueFocusUpdate()}focusColumnIndexChanged(){this.$fastController.isConnected&&this.queueFocusUpdate()}connectedCallback(){super.connectedCallback(),void 0===this.rowItemTemplate&&(this.rowItemTemplate=this.defaultRowItemTemplate),this.rowsPlaceholder=document.createComment(""),this.appendChild(this.rowsPlaceholder),this.toggleGeneratedHeader(),this.rowsRepeatBehavior=new fr((e=>e.rowsData),(e=>e.rowItemTemplate),{positioning:!0}).createBehavior(this.rowsPlaceholder),this.$fastController.addBehaviors([this.rowsRepeatBehavior]),this.addEventListener("row-focused",this.handleRowFocus),this.addEventListener(mr,this.handleFocus),this.addEventListener(br,this.handleKeydown),this.addEventListener(vr,this.handleFocusOut),this.observer=new MutationObserver(this.onChildListChange),this.observer.observe(this,{childList:!0}),this.noTabbing&&this.setAttribute("tabindex","-1"),S.queueUpdate(this.queueRowIndexUpdate)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("row-focused",this.handleRowFocus),this.removeEventListener(mr,this.handleFocus),this.removeEventListener(br,this.handleKeydown),this.removeEventListener(vr,this.handleFocusOut),this.observer.disconnect(),this.rowsPlaceholder=null,this.generatedHeader=null}handleRowFocus(e){this.isUpdatingFocus=!0;const t=e.target;this.focusRowIndex=this.rowElements.indexOf(t),this.focusColumnIndex=t.focusColumnIndex,this.setAttribute("tabIndex","-1"),this.isUpdatingFocus=!1}handleFocus(e){this.focusOnCell(this.focusRowIndex,this.focusColumnIndex,!0)}handleFocusOut(e){null!==e.relatedTarget&&this.contains(e.relatedTarget)||this.setAttribute("tabIndex",this.noTabbing?"-1":"0")}handleKeydown(e){if(e.defaultPrevented)return;let t;const n=this.rowElements.length-1,i=this.offsetHeight+this.scrollTop,r=this.rowElements[n];switch(e.key){case vi:e.preventDefault(),this.focusOnCell(this.focusRowIndex-1,this.focusColumnIndex,!0);break;case fi:e.preventDefault(),this.focusOnCell(this.focusRowIndex+1,this.focusColumnIndex,!0);break;case"PageUp":if(e.preventDefault(),0===this.rowElements.length){this.focusOnCell(0,0,!1);break}if(0===this.focusRowIndex)return void this.focusOnCell(0,this.focusColumnIndex,!1);for(t=this.focusRowIndex-1;t>=0;t--){const e=this.rowElements[t];if(e.offsetTop<this.scrollTop){this.scrollTop=e.offsetTop+e.clientHeight-this.clientHeight;break}}this.focusOnCell(t,this.focusColumnIndex,!1);break;case"PageDown":if(e.preventDefault(),0===this.rowElements.length){this.focusOnCell(0,0,!1);break}if(this.focusRowIndex>=n||r.offsetTop+r.offsetHeight<=i)return void this.focusOnCell(n,this.focusColumnIndex,!1);for(t=this.focusRowIndex+1;t<=n;t++){const e=this.rowElements[t];if(e.offsetTop+e.offsetHeight>i){let t=0;this.generateHeader===kr&&null!==this.generatedHeader&&(t=this.generatedHeader.clientHeight),this.scrollTop=e.offsetTop-t;break}}this.focusOnCell(t,this.focusColumnIndex,!1);break;case xi:e.ctrlKey&&(e.preventDefault(),this.focusOnCell(0,0,!0));break;case ki:e.ctrlKey&&null!==this.columnDefinitions&&(e.preventDefault(),this.focusOnCell(this.rowElements.length-1,this.columnDefinitions.length-1,!0))}}queueFocusUpdate(){this.isUpdatingFocus&&(this.contains(document.activeElement)||this===document.activeElement)||!1===this.pendingFocusUpdate&&(this.pendingFocusUpdate=!0,S.queueUpdate((()=>this.updateFocus())))}updateFocus(){this.pendingFocusUpdate=!1,this.focusOnCell(this.focusRowIndex,this.focusColumnIndex,!0)}toggleGeneratedHeader(){if(null!==this.generatedHeader&&(this.removeChild(this.generatedHeader),this.generatedHeader=null),this.generateHeader!==yr&&this.rowsData.length>0){const e=document.createElement(this.rowElementTag);return this.generatedHeader=e,this.generatedHeader.columnDefinitions=this.columnDefinitions,this.generatedHeader.gridTemplateColumns=this.gridTemplateColumns,this.generatedHeader.rowType=this.generateHeader===kr?_r:Er,void(null===this.firstChild&&null===this.rowsPlaceholder||this.insertBefore(e,null!==this.firstChild?this.firstChild:this.rowsPlaceholder))}}}Ir.generateColumns=e=>Object.getOwnPropertyNames(e).map(((e,t)=>({columnDataKey:e,gridColumn:`${t}`}))),X([q({attribute:"no-tabbing",mode:"boolean"})],Ir.prototype,"noTabbing",void 0),X([q({attribute:"generate-header"})],Ir.prototype,"generateHeader",void 0),X([q({attribute:"grid-template-columns"})],Ir.prototype,"gridTemplateColumns",void 0),X([_],Ir.prototype,"rowsData",void 0),X([_],Ir.prototype,"columnDefinitions",void 0),X([_],Ir.prototype,"rowItemTemplate",void 0),X([_],Ir.prototype,"cellItemTemplate",void 0),X([_],Ir.prototype,"headerCellItemTemplate",void 0),X([_],Ir.prototype,"focusRowIndex",void 0),X([_],Ir.prototype,"focusColumnIndex",void 0),X([_],Ir.prototype,"defaultRowItemTemplate",void 0),X([_],Ir.prototype,"rowElementTag",void 0),X([_],Ir.prototype,"rowElements",void 0);class Rr extends ji{constructor(e,t){super(e,t),this.observer=null,t.childList=!0}observe(){null===this.observer&&(this.observer=new MutationObserver(this.handleEvent.bind(this))),this.observer.observe(this.target,this.options)}disconnect(){this.observer.disconnect()}getNodes(){return"subtree"in this.options?Array.from(this.target.querySelectorAll(this.options.selector)):Array.from(this.target.childNodes)}}function Pr(e){return"string"===typeof e&&(e={property:e}),new nt("fast-children",Rr,e)}class Ar extends Ve{constructor(){super(...arguments),this.rowType=Tr,this.rowData=null,this.columnDefinitions=null,this.isActiveRow=!1,this.cellsRepeatBehavior=null,this.cellsPlaceholder=null,this.focusColumnIndex=0,this.refocusOnLoad=!1,this.updateRowStyle=()=>{this.style.gridTemplateColumns=this.gridTemplateColumns}}gridTemplateColumnsChanged(){this.$fastController.isConnected&&this.updateRowStyle()}rowTypeChanged(){this.$fastController.isConnected&&this.updateItemTemplate()}rowDataChanged(){null!==this.rowData&&this.isActiveRow&&(this.refocusOnLoad=!0)}cellItemTemplateChanged(){this.updateItemTemplate()}headerCellItemTemplateChanged(){this.updateItemTemplate()}connectedCallback(){super.connectedCallback(),null===this.cellsRepeatBehavior&&(this.cellsPlaceholder=document.createComment(""),this.appendChild(this.cellsPlaceholder),this.updateItemTemplate(),this.cellsRepeatBehavior=new fr((e=>e.columnDefinitions),(e=>e.activeCellItemTemplate),{positioning:!0}).createBehavior(this.cellsPlaceholder),this.$fastController.addBehaviors([this.cellsRepeatBehavior])),this.addEventListener("cell-focused",this.handleCellFocus),this.addEventListener(vr,this.handleFocusout),this.addEventListener(br,this.handleKeydown),this.updateRowStyle(),this.refocusOnLoad&&(this.refocusOnLoad=!1,this.cellElements.length>this.focusColumnIndex&&this.cellElements[this.focusColumnIndex].focus())}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("cell-focused",this.handleCellFocus),this.removeEventListener(vr,this.handleFocusout),this.removeEventListener(br,this.handleKeydown)}handleFocusout(e){this.contains(e.target)||(this.isActiveRow=!1,this.focusColumnIndex=0)}handleCellFocus(e){this.isActiveRow=!0,this.focusColumnIndex=this.cellElements.indexOf(e.target),this.$emit("row-focused",this)}handleKeydown(e){if(e.defaultPrevented)return;let t=0;switch(e.key){case mi:t=Math.max(0,this.focusColumnIndex-1),this.cellElements[t].focus(),e.preventDefault();break;case gi:t=Math.min(this.cellElements.length-1,this.focusColumnIndex+1),this.cellElements[t].focus(),e.preventDefault();break;case xi:e.ctrlKey||(this.cellElements[0].focus(),e.preventDefault());break;case ki:e.ctrlKey||(this.cellElements[this.cellElements.length-1].focus(),e.preventDefault())}}updateItemTemplate(){this.activeCellItemTemplate=this.rowType===Tr&&void 0!==this.cellItemTemplate?this.cellItemTemplate:this.rowType===Tr&&void 0===this.cellItemTemplate?this.defaultCellItemTemplate:void 0!==this.headerCellItemTemplate?this.headerCellItemTemplate:this.defaultHeaderCellItemTemplate}}X([q({attribute:"grid-template-columns"})],Ar.prototype,"gridTemplateColumns",void 0),X([q({attribute:"row-type"})],Ar.prototype,"rowType",void 0),X([_],Ar.prototype,"rowData",void 0),X([_],Ar.prototype,"columnDefinitions",void 0),X([_],Ar.prototype,"cellItemTemplate",void 0),X([_],Ar.prototype,"headerCellItemTemplate",void 0),X([_],Ar.prototype,"rowIndex",void 0),X([_],Ar.prototype,"isActiveRow",void 0),X([_],Ar.prototype,"activeCellItemTemplate",void 0),X([_],Ar.prototype,"defaultCellItemTemplate",void 0),X([_],Ar.prototype,"defaultHeaderCellItemTemplate",void 0),X([_],Ar.prototype,"cellElements",void 0);const Or=Et`
    <template>
        ${e=>null===e.rowData||null===e.columnDefinition||null===e.columnDefinition.columnDataKey?null:e.rowData[e.columnDefinition.columnDataKey]}
    </template>
`,Mr=Et`
    <template>
        ${e=>null===e.columnDefinition?null:void 0===e.columnDefinition.title?e.columnDefinition.columnDataKey:e.columnDefinition.title}
    </template>
`;class Nr extends Ve{constructor(){super(...arguments),this.cellType=wr,this.rowData=null,this.columnDefinition=null,this.isActiveCell=!1,this.customCellView=null,this.updateCellStyle=()=>{this.style.gridColumn=this.gridColumn}}cellTypeChanged(){this.$fastController.isConnected&&this.updateCellView()}gridColumnChanged(){this.$fastController.isConnected&&this.updateCellStyle()}columnDefinitionChanged(e,t){this.$fastController.isConnected&&this.updateCellView()}connectedCallback(){var e;super.connectedCallback(),this.addEventListener(gr,this.handleFocusin),this.addEventListener(vr,this.handleFocusout),this.addEventListener(br,this.handleKeydown),this.style.gridColumn=`${void 0===(null===(e=this.columnDefinition)||void 0===e?void 0:e.gridColumn)?0:this.columnDefinition.gridColumn}`,this.updateCellView(),this.updateCellStyle()}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener(gr,this.handleFocusin),this.removeEventListener(vr,this.handleFocusout),this.removeEventListener(br,this.handleKeydown),this.disconnectCellView()}handleFocusin(e){if(!this.isActiveCell){if(this.isActiveCell=!0,this.cellType===Sr){if(null!==this.columnDefinition&&!0!==this.columnDefinition.headerCellInternalFocusQueue&&"function"===typeof this.columnDefinition.headerCellFocusTargetCallback){const e=this.columnDefinition.headerCellFocusTargetCallback(this);null!==e&&e.focus()}}else if(null!==this.columnDefinition&&!0!==this.columnDefinition.cellInternalFocusQueue&&"function"===typeof this.columnDefinition.cellFocusTargetCallback){const e=this.columnDefinition.cellFocusTargetCallback(this);null!==e&&e.focus()}this.$emit("cell-focused",this)}}handleFocusout(e){this===document.activeElement||this.contains(document.activeElement)||(this.isActiveCell=!1)}handleKeydown(e){if(!(e.defaultPrevented||null===this.columnDefinition||this.cellType===wr&&!0!==this.columnDefinition.cellInternalFocusQueue||this.cellType===Sr&&!0!==this.columnDefinition.headerCellInternalFocusQueue))switch(e.key){case bi:case"F2":if(this.contains(document.activeElement)&&document.activeElement!==this)return;if(this.cellType===Sr){if(void 0!==this.columnDefinition.headerCellFocusTargetCallback){const t=this.columnDefinition.headerCellFocusTargetCallback(this);null!==t&&t.focus(),e.preventDefault()}}else if(void 0!==this.columnDefinition.cellFocusTargetCallback){const t=this.columnDefinition.cellFocusTargetCallback(this);null!==t&&t.focus(),e.preventDefault()}break;case yi:this.contains(document.activeElement)&&document.activeElement!==this&&(this.focus(),e.preventDefault())}}updateCellView(){if(this.disconnectCellView(),null!==this.columnDefinition)switch(this.cellType){case Sr:void 0!==this.columnDefinition.headerCellTemplate?this.customCellView=this.columnDefinition.headerCellTemplate.render(this,this):this.customCellView=Mr.render(this,this);break;case void 0:case Cr:case wr:void 0!==this.columnDefinition.cellTemplate?this.customCellView=this.columnDefinition.cellTemplate.render(this,this):this.customCellView=Or.render(this,this)}}disconnectCellView(){null!==this.customCellView&&(this.customCellView.dispose(),this.customCellView=null)}}X([q({attribute:"cell-type"})],Nr.prototype,"cellType",void 0),X([q({attribute:"grid-column"})],Nr.prototype,"gridColumn",void 0),X([_],Nr.prototype,"rowData",void 0),X([_],Nr.prototype,"columnDefinition",void 0);const Dr=class extends Ir{connectedCallback(){super.connectedCallback();this.getAttribute("aria-label")||this.setAttribute("aria-label","Data Grid")}}.compose({baseName:"data-grid",baseClass:Ir,template:(e,t)=>{const n=function(e){const t=e.tagFor(Ar);return Et`
    <${t}
        :rowData="${e=>e}"
        :cellItemTemplate="${(e,t)=>t.parent.cellItemTemplate}"
        :headerCellItemTemplate="${(e,t)=>t.parent.headerCellItemTemplate}"
    ></${t}>
`}(e),i=e.tagFor(Ar);return Et`
        <template
            role="grid"
            tabindex="0"
            :rowElementTag="${()=>i}"
            :defaultRowItemTemplate="${n}"
            ${Pr({property:"rowElements",filter:Di("[role=row]")})}
        >
            <slot></slot>
        </template>
    `},styles:(e,t)=>Pt`
	:host {
		display: flex;
		position: relative;
		flex-direction: column;
		width: 100%;
	}
`});const jr=class extends Ar{}.compose({baseName:"data-grid-row",baseClass:Ar,template:(e,t)=>{const n=function(e){const t=e.tagFor(Nr);return Et`
    <${t}
        cell-type="${e=>e.isRowHeader?"rowheader":void 0}"
        grid-column="${(e,t)=>t.index+1}"
        :rowData="${(e,t)=>t.parent.rowData}"
        :columnDefinition="${e=>e}"
    ></${t}>
`}(e),i=function(e){const t=e.tagFor(Nr);return Et`
    <${t}
        cell-type="columnheader"
        grid-column="${(e,t)=>t.index+1}"
        :columnDefinition="${e=>e}"
    ></${t}>
`}(e);return Et`
        <template
            role="row"
            class="${e=>"default"!==e.rowType?e.rowType:""}"
            :defaultCellItemTemplate="${n}"
            :defaultHeaderCellItemTemplate="${i}"
            ${Pr({property:"cellElements",filter:Di('[role="cell"],[role="gridcell"],[role="columnheader"],[role="rowheader"]')})}
        >
            <slot ${Fi("slottedCellElements")}></slot>
        </template>
    `},styles:(e,t)=>Pt`
	:host {
		display: grid;
		padding: calc((${sn} / 4) * 1px) 0;
		box-sizing: border-box;
		width: 100%;
		background: transparent;
	}
	:host(.header) {
	}
	:host(.sticky-header) {
		background: ${en};
		position: sticky;
		top: 0;
	}
	:host(:hover) {
		background: ${Vn};
		outline: 1px dotted ${nn};
		outline-offset: -1px;
	}
`});const Lr=class extends Nr{}.compose({baseName:"data-grid-cell",baseClass:Nr,template:(e,t)=>Et`
        <template
            tabindex="-1"
            role="${e=>e.cellType&&"default"!==e.cellType?e.cellType:"gridcell"}"
            class="
            ${e=>"columnheader"===e.cellType?"column-header":"rowheader"===e.cellType?"row-header":""}
            "
        >
            <slot></slot>
        </template>
    `,styles:(e,t)=>Pt`
	:host {
		padding: calc(${sn} * 1px) calc(${sn} * 3px);
		color: ${un};
		opacity: 1;
		box-sizing: border-box;
		font-family: ${cn};
		font-size: ${pn};
		line-height: ${fn};
		font-weight: 400;
		border: solid calc(${tn} * 1px) transparent;
		border-radius: calc(${rn} * 1px);
		white-space: wrap;
		overflow-wrap: anywhere;
	}
	:host(.column-header) {
		font-weight: 600;
	}
	:host(:${$i}),
	:host(:focus),
	:host(:active) {
		background: ${$n};
		border: solid calc(${tn} * 1px) ${ln};
		color: ${zn};
		outline: none;
	}
	:host(:${$i}) ::slotted(*),
	:host(:focus) ::slotted(*),
	:host(:active) ::slotted(*) {
		color: ${zn} !important;
	}
`}),Fr="horizontal",Br="separator";class Ur extends Ve{constructor(){super(...arguments),this.role=Br,this.orientation=Fr}}X([q],Ur.prototype,"role",void 0),X([q],Ur.prototype,"orientation",void 0);const $r=class extends Ur{}.compose({baseName:"divider",template:(e,t)=>Et`
    <template role="${e=>e.role}" aria-orientation="${e=>e.orientation}"></template>
`,styles:(e,t)=>Pt`
	${At("block")} :host {
		border: none;
		border-top: calc(${tn} * 1px) solid ${Hn};
		box-sizing: content-box;
		height: 0;
		margin: calc(${sn} * 1px) 0;
		width: 100%;
	}
`});let zr=0;function Vr(){return`${arguments.length>0&&void 0!==arguments[0]?arguments[0]:""}${zr++}`}function Hr(e){return Bi(e)&&("option"===e.getAttribute("role")||e instanceof HTMLOptionElement)}class qr extends Ve{constructor(e,t,n,i){super(),this.defaultSelected=!1,this.dirtySelected=!1,this.selected=this.defaultSelected,this.dirtyValue=!1,e&&(this.textContent=e),t&&(this.initialValue=t),n&&(this.defaultSelected=n),i&&(this.selected=i),this.proxy=new Option(`${this.textContent}`,this.initialValue,this.defaultSelected,this.selected),this.proxy.disabled=this.disabled}checkedChanged(e,t){this.ariaChecked="boolean"!==typeof t?null:t?"true":"false"}contentChanged(e,t){this.proxy instanceof HTMLOptionElement&&(this.proxy.textContent=this.textContent),this.$emit("contentchange",null,{bubbles:!0})}defaultSelectedChanged(){this.dirtySelected||(this.selected=this.defaultSelected,this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.defaultSelected))}disabledChanged(e,t){this.ariaDisabled=this.disabled?"true":"false",this.proxy instanceof HTMLOptionElement&&(this.proxy.disabled=this.disabled)}selectedAttributeChanged(){this.defaultSelected=this.selectedAttribute,this.proxy instanceof HTMLOptionElement&&(this.proxy.defaultSelected=this.defaultSelected)}selectedChanged(){this.ariaSelected=this.selected?"true":"false",this.dirtySelected||(this.dirtySelected=!0),this.proxy instanceof HTMLOptionElement&&(this.proxy.selected=this.selected)}initialValueChanged(e,t){this.dirtyValue||(this.value=this.initialValue,this.dirtyValue=!1)}get label(){var e;return null!==(e=this.value)&&void 0!==e?e:this.text}get text(){var e,t;return null!==(t=null===(e=this.textContent)||void 0===e?void 0:e.replace(/\s+/g," ").trim())&&void 0!==t?t:""}set value(e){const t=`${null!==e&&void 0!==e?e:""}`;this._value=t,this.dirtyValue=!0,this.proxy instanceof HTMLOptionElement&&(this.proxy.value=t),E.notify(this,"value")}get value(){var e;return E.track(this,"value"),null!==(e=this._value)&&void 0!==e?e:this.text}get form(){return this.proxy?this.proxy.form:null}}X([_],qr.prototype,"checked",void 0),X([_],qr.prototype,"content",void 0),X([_],qr.prototype,"defaultSelected",void 0),X([q({mode:"boolean"})],qr.prototype,"disabled",void 0),X([q({attribute:"selected",mode:"boolean"})],qr.prototype,"selectedAttribute",void 0),X([_],qr.prototype,"selected",void 0),X([q({attribute:"value",mode:"fromView"})],qr.prototype,"initialValue",void 0);class Wr{}X([_],Wr.prototype,"ariaChecked",void 0),X([_],Wr.prototype,"ariaPosInSet",void 0),X([_],Wr.prototype,"ariaSelected",void 0),X([_],Wr.prototype,"ariaSetSize",void 0),hi(Wr,si),hi(qr,ci,Wr);class Gr extends Ve{constructor(){super(...arguments),this._options=[],this.selectedIndex=-1,this.selectedOptions=[],this.shouldSkipFocus=!1,this.typeaheadBuffer="",this.typeaheadExpired=!0,this.typeaheadTimeout=-1}get firstSelectedOption(){var e;return null!==(e=this.selectedOptions[0])&&void 0!==e?e:null}get hasSelectableOptions(){return this.options.length>0&&!this.options.every((e=>e.disabled))}get length(){var e,t;return null!==(t=null===(e=this.options)||void 0===e?void 0:e.length)&&void 0!==t?t:0}get options(){return E.track(this,"options"),this._options}set options(e){this._options=e,E.notify(this,"options")}get typeAheadExpired(){return this.typeaheadExpired}set typeAheadExpired(e){this.typeaheadExpired=e}clickHandler(e){const t=e.target.closest("option,[role=option]");if(t&&!t.disabled)return this.selectedIndex=this.options.indexOf(t),!0}focusAndScrollOptionIntoView(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.firstSelectedOption;this.contains(document.activeElement)&&null!==e&&(e.focus(),requestAnimationFrame((()=>{e.scrollIntoView({block:"nearest"})})))}focusinHandler(e){this.shouldSkipFocus||e.target!==e.currentTarget||(this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}getTypeaheadMatches(){const e=this.typeaheadBuffer.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&"),t=new RegExp(`^${e}`,"gi");return this.options.filter((e=>e.text.trim().match(t)))}getSelectableIndex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.selectedIndex,t=arguments.length>1?arguments[1]:void 0;const n=e>t?-1:e<t?1:0,i=e+n;let r=null;switch(n){case-1:r=this.options.reduceRight(((e,t,n)=>!e&&!t.disabled&&n<i?t:e),r);break;case 1:r=this.options.reduce(((e,t,n)=>!e&&!t.disabled&&n>i?t:e),r)}return this.options.indexOf(r)}handleChange(e,t){if("selected"===t)Gr.slottedOptionFilter(e)&&(this.selectedIndex=this.options.indexOf(e)),this.setSelectedOptions()}handleTypeAhead(e){this.typeaheadTimeout&&window.clearTimeout(this.typeaheadTimeout),this.typeaheadTimeout=window.setTimeout((()=>this.typeaheadExpired=!0),Gr.TYPE_AHEAD_TIMEOUT_MS),e.length>1||(this.typeaheadBuffer=`${this.typeaheadExpired?"":this.typeaheadBuffer}${e}`)}keydownHandler(e){if(this.disabled)return!0;this.shouldSkipFocus=!1;const t=e.key;switch(t){case xi:e.shiftKey||(e.preventDefault(),this.selectFirstOption());break;case fi:e.shiftKey||(e.preventDefault(),this.selectNextOption());break;case vi:e.shiftKey||(e.preventDefault(),this.selectPreviousOption());break;case ki:e.preventDefault(),this.selectLastOption();break;case Si:return this.focusAndScrollOptionIntoView(),!0;case bi:case yi:return!0;case wi:if(this.typeaheadExpired)return!0;default:return 1===t.length&&this.handleTypeAhead(`${t}`),!0}}mousedownHandler(e){return this.shouldSkipFocus=!this.contains(document.activeElement),!0}multipleChanged(e,t){this.ariaMultiSelectable=t?"true":null}selectedIndexChanged(e,t){var n;if(this.hasSelectableOptions){if((null===(n=this.options[this.selectedIndex])||void 0===n?void 0:n.disabled)&&"number"===typeof e){const n=this.getSelectableIndex(e,t),i=n>-1?n:e;return this.selectedIndex=i,void(t===i&&this.selectedIndexChanged(t,i))}this.setSelectedOptions()}else this.selectedIndex=-1}selectedOptionsChanged(e,t){var n;const i=t.filter(Gr.slottedOptionFilter);null===(n=this.options)||void 0===n||n.forEach((e=>{const t=E.getNotifier(e);t.unsubscribe(this,"selected"),e.selected=i.includes(e),t.subscribe(this,"selected")}))}selectFirstOption(){var e,t;this.disabled||(this.selectedIndex=null!==(t=null===(e=this.options)||void 0===e?void 0:e.findIndex((e=>!e.disabled)))&&void 0!==t?t:-1)}selectLastOption(){this.disabled||(this.selectedIndex=function(e,t){let n=e.length;for(;n--;)if(t(e[n],n,e))return n;return-1}(this.options,(e=>!e.disabled)))}selectNextOption(){!this.disabled&&this.selectedIndex<this.options.length-1&&(this.selectedIndex+=1)}selectPreviousOption(){!this.disabled&&this.selectedIndex>0&&(this.selectedIndex=this.selectedIndex-1)}setDefaultSelectedOption(){var e,t;this.selectedIndex=null!==(t=null===(e=this.options)||void 0===e?void 0:e.findIndex((e=>e.defaultSelected)))&&void 0!==t?t:-1}setSelectedOptions(){var e,t,n;(null===(e=this.options)||void 0===e?void 0:e.length)&&(this.selectedOptions=[this.options[this.selectedIndex]],this.ariaActiveDescendant=null!==(n=null===(t=this.firstSelectedOption)||void 0===t?void 0:t.id)&&void 0!==n?n:"",this.focusAndScrollOptionIntoView())}slottedOptionsChanged(e,t){this.options=t.reduce(((e,t)=>(Hr(t)&&e.push(t),e)),[]);const n=`${this.options.length}`;this.options.forEach(((e,t)=>{e.id||(e.id=Vr("option-")),e.ariaPosInSet=`${t+1}`,e.ariaSetSize=n})),this.$fastController.isConnected&&(this.setSelectedOptions(),this.setDefaultSelectedOption())}typeaheadBufferChanged(e,t){if(this.$fastController.isConnected){const e=this.getTypeaheadMatches();if(e.length){const t=this.options.indexOf(e[0]);t>-1&&(this.selectedIndex=t)}this.typeaheadExpired=!1}}}Gr.slottedOptionFilter=e=>Hr(e)&&!e.hidden,Gr.TYPE_AHEAD_TIMEOUT_MS=1e3,X([q({mode:"boolean"})],Gr.prototype,"disabled",void 0),X([_],Gr.prototype,"selectedIndex",void 0),X([_],Gr.prototype,"selectedOptions",void 0),X([_],Gr.prototype,"slottedOptions",void 0),X([_],Gr.prototype,"typeaheadBuffer",void 0);class Kr{}function Qr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return[t,n]=[t,n].sort(((e,t)=>e-t)),t<=e&&e<n}X([_],Kr.prototype,"ariaActiveDescendant",void 0),X([_],Kr.prototype,"ariaDisabled",void 0),X([_],Kr.prototype,"ariaExpanded",void 0),X([_],Kr.prototype,"ariaMultiSelectable",void 0),hi(Kr,si),hi(Gr,Kr);class Xr extends Gr{constructor(){super(...arguments),this.activeIndex=-1,this.rangeStartIndex=-1}get activeOption(){return this.options[this.activeIndex]}get checkedOptions(){var e;return null===(e=this.options)||void 0===e?void 0:e.filter((e=>e.checked))}get firstSelectedOptionIndex(){return this.options.indexOf(this.firstSelectedOption)}activeIndexChanged(e,t){var n,i;this.ariaActiveDescendant=null!==(i=null===(n=this.options[t])||void 0===n?void 0:n.id)&&void 0!==i?i:"",this.focusAndScrollOptionIntoView()}checkActiveIndex(){if(!this.multiple)return;const e=this.activeOption;e&&(e.checked=!0)}checkFirstOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex+1),this.options.forEach(((e,t)=>{e.checked=Qr(t,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex=0,this.checkActiveIndex()}checkLastOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((e,t)=>{e.checked=Qr(t,this.rangeStartIndex,this.options.length)}))):this.uncheckAllOptions(),this.activeIndex=this.options.length-1,this.checkActiveIndex()}connectedCallback(){super.connectedCallback(),this.addEventListener("focusout",this.focusoutHandler)}disconnectedCallback(){this.removeEventListener("focusout",this.focusoutHandler),super.disconnectedCallback()}checkNextOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),this.options.forEach(((e,t)=>{e.checked=Qr(t,this.rangeStartIndex,this.activeIndex+1)}))):this.uncheckAllOptions(),this.activeIndex+=this.activeIndex<this.options.length-1?1:0,this.checkActiveIndex()}checkPreviousOption(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]?(-1===this.rangeStartIndex&&(this.rangeStartIndex=this.activeIndex),1===this.checkedOptions.length&&(this.rangeStartIndex+=1),this.options.forEach(((e,t)=>{e.checked=Qr(t,this.activeIndex,this.rangeStartIndex)}))):this.uncheckAllOptions(),this.activeIndex-=this.activeIndex>0?1:0,this.checkActiveIndex()}clickHandler(e){var t;if(!this.multiple)return super.clickHandler(e);const n=null===(t=e.target)||void 0===t?void 0:t.closest("[role=option]");return n&&!n.disabled?(this.uncheckAllOptions(),this.activeIndex=this.options.indexOf(n),this.checkActiveIndex(),this.toggleSelectedForAllCheckedOptions(),!0):void 0}focusAndScrollOptionIntoView(){super.focusAndScrollOptionIntoView(this.activeOption)}focusinHandler(e){if(!this.multiple)return super.focusinHandler(e);this.shouldSkipFocus||e.target!==e.currentTarget||(this.uncheckAllOptions(),-1===this.activeIndex&&(this.activeIndex=-1!==this.firstSelectedOptionIndex?this.firstSelectedOptionIndex:0),this.checkActiveIndex(),this.setSelectedOptions(),this.focusAndScrollOptionIntoView()),this.shouldSkipFocus=!1}focusoutHandler(e){this.multiple&&this.uncheckAllOptions()}keydownHandler(e){if(!this.multiple)return super.keydownHandler(e);if(this.disabled)return!0;const{key:t,shiftKey:n}=e;switch(this.shouldSkipFocus=!1,t){case xi:return void this.checkFirstOption(n);case fi:return void this.checkNextOption(n);case vi:return void this.checkPreviousOption(n);case ki:return void this.checkLastOption(n);case Si:return this.focusAndScrollOptionIntoView(),!0;case yi:return this.uncheckAllOptions(),this.checkActiveIndex(),!0;case wi:if(e.preventDefault(),this.typeAheadExpired)return void this.toggleSelectedForAllCheckedOptions();default:return 1===t.length&&this.handleTypeAhead(`${t}`),!0}}mousedownHandler(e){if(e.offsetX>=0&&e.offsetX<=this.scrollWidth)return super.mousedownHandler(e)}multipleChanged(e,t){var n;this.ariaMultiSelectable=t?"true":null,null===(n=this.options)||void 0===n||n.forEach((e=>{e.checked=!t&&void 0})),this.setSelectedOptions()}setSelectedOptions(){this.multiple?this.$fastController.isConnected&&this.options&&(this.selectedOptions=this.options.filter((e=>e.selected)),this.focusAndScrollOptionIntoView()):super.setSelectedOptions()}sizeChanged(e,t){var n;const i=Math.max(0,parseInt(null!==(n=null===t||void 0===t?void 0:t.toFixed())&&void 0!==n?n:"",10));i!==t&&S.queueUpdate((()=>{this.size=i}))}toggleSelectedForAllCheckedOptions(){const e=this.checkedOptions.filter((e=>!e.disabled)),t=!e.every((e=>e.selected));e.forEach((e=>e.selected=t)),this.selectedIndex=this.options.indexOf(e[e.length-1]),this.setSelectedOptions()}typeaheadBufferChanged(e,t){if(this.multiple){if(this.$fastController.isConnected){const e=this.getTypeaheadMatches(),t=this.options.indexOf(e[0]);t>-1&&(this.activeIndex=t,this.uncheckAllOptions(),this.checkActiveIndex()),this.typeAheadExpired=!1}}else super.typeaheadBufferChanged(e,t)}uncheckAllOptions(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.options.forEach((e=>e.checked=!this.multiple&&void 0)),e||(this.rangeStartIndex=-1)}}X([_],Xr.prototype,"activeIndex",void 0),X([q({mode:"boolean"})],Xr.prototype,"multiple",void 0),X([q({converter:V})],Xr.prototype,"size",void 0);class Yr extends Xr{}class Jr extends(Ri(Yr)){constructor(){super(...arguments),this.proxy=document.createElement("select")}}const Zr="above",eo="below";class to extends Jr{constructor(){super(...arguments),this.open=!1,this.forcedPosition=!1,this.listboxId=Vr("listbox-"),this.maxHeight=0}openChanged(e,t){if(this.collapsible){if(this.open)return this.ariaControls=this.listboxId,this.ariaExpanded="true",this.setPositioning(),this.focusAndScrollOptionIntoView(),this.indexWhenOpened=this.selectedIndex,void S.queueUpdate((()=>this.focus()));this.ariaControls="",this.ariaExpanded="false"}}get collapsible(){return!(this.multiple||"number"===typeof this.size)}get value(){return E.track(this,"value"),this._value}set value(e){var t,n,i,r,o,s,a;const l=`${this._value}`;if(null===(t=this._options)||void 0===t?void 0:t.length){const t=this._options.findIndex((t=>t.value===e)),l=null!==(i=null===(n=this._options[this.selectedIndex])||void 0===n?void 0:n.value)&&void 0!==i?i:null,c=null!==(o=null===(r=this._options[t])||void 0===r?void 0:r.value)&&void 0!==o?o:null;-1!==t&&l===c||(e="",this.selectedIndex=t),e=null!==(a=null===(s=this.firstSelectedOption)||void 0===s?void 0:s.value)&&void 0!==a?a:e}l!==e&&(this._value=e,super.valueChanged(l,e),E.notify(this,"value"),this.updateDisplayValue())}updateValue(e){var t,n;this.$fastController.isConnected&&(this.value=null!==(n=null===(t=this.firstSelectedOption)||void 0===t?void 0:t.value)&&void 0!==n?n:""),e&&(this.$emit("input"),this.$emit("change",this,{bubbles:!0,composed:void 0}))}selectedIndexChanged(e,t){super.selectedIndexChanged(e,t),this.updateValue()}positionChanged(e,t){this.positionAttribute=t,this.setPositioning()}setPositioning(){const e=this.getBoundingClientRect(),t=window.innerHeight-e.bottom;this.position=this.forcedPosition?this.positionAttribute:e.top>t?Zr:eo,this.positionAttribute=this.forcedPosition?this.positionAttribute:this.position,this.maxHeight=this.position===Zr?~~e.top:~~t}get displayValue(){var e,t;return E.track(this,"displayValue"),null!==(t=null===(e=this.firstSelectedOption)||void 0===e?void 0:e.text)&&void 0!==t?t:""}disabledChanged(e,t){super.disabledChanged&&super.disabledChanged(e,t),this.ariaDisabled=this.disabled?"true":"false"}formResetCallback(){this.setProxyOptions(),super.setDefaultSelectedOption(),-1===this.selectedIndex&&(this.selectedIndex=0)}clickHandler(e){if(!this.disabled){if(this.open){const t=e.target.closest("option,[role=option]");if(t&&t.disabled)return}return super.clickHandler(e),this.open=this.collapsible&&!this.open,this.open||this.indexWhenOpened===this.selectedIndex||this.updateValue(!0),!0}}focusoutHandler(e){var t;if(super.focusoutHandler(e),!this.open)return!0;const n=e.relatedTarget;this.isSameNode(n)?this.focus():(null===(t=this.options)||void 0===t?void 0:t.includes(n))||(this.open=!1,this.indexWhenOpened!==this.selectedIndex&&this.updateValue(!0))}handleChange(e,t){super.handleChange(e,t),"value"===t&&this.updateValue()}slottedOptionsChanged(e,t){this.options.forEach((e=>{E.getNotifier(e).unsubscribe(this,"value")})),super.slottedOptionsChanged(e,t),this.options.forEach((e=>{E.getNotifier(e).subscribe(this,"value")})),this.setProxyOptions(),this.updateValue()}mousedownHandler(e){var t;return e.offsetX>=0&&e.offsetX<=(null===(t=this.listbox)||void 0===t?void 0:t.scrollWidth)?super.mousedownHandler(e):this.collapsible}multipleChanged(e,t){super.multipleChanged(e,t),this.proxy&&(this.proxy.multiple=t)}selectedOptionsChanged(e,t){var n;super.selectedOptionsChanged(e,t),null===(n=this.options)||void 0===n||n.forEach(((e,t)=>{var n;const i=null===(n=this.proxy)||void 0===n?void 0:n.options.item(t);i&&(i.selected=e.selected)}))}setDefaultSelectedOption(){var e;const t=null!==(e=this.options)&&void 0!==e?e:Array.from(this.children).filter(Gr.slottedOptionFilter),n=null===t||void 0===t?void 0:t.findIndex((e=>e.hasAttribute("selected")||e.selected||e.value===this.value));this.selectedIndex=-1===n?0:n}setProxyOptions(){this.proxy instanceof HTMLSelectElement&&this.options&&(this.proxy.options.length=0,this.options.forEach((e=>{const t=e.proxy||(e instanceof HTMLOptionElement?e.cloneNode():null);t&&this.proxy.options.add(t)})))}keydownHandler(e){super.keydownHandler(e);const t=e.key||e.key.charCodeAt(0);switch(t){case wi:e.preventDefault(),this.collapsible&&this.typeAheadExpired&&(this.open=!this.open);break;case xi:case ki:e.preventDefault();break;case bi:e.preventDefault(),this.open=!this.open;break;case yi:this.collapsible&&this.open&&(e.preventDefault(),this.open=!1);break;case Si:return this.collapsible&&this.open&&(e.preventDefault(),this.open=!1),!0}return this.open||this.indexWhenOpened===this.selectedIndex||(this.updateValue(!0),this.indexWhenOpened=this.selectedIndex),!(t===fi||t===vi)}connectedCallback(){super.connectedCallback(),this.forcedPosition=!!this.positionAttribute,this.addEventListener("contentchange",this.updateDisplayValue)}disconnectedCallback(){this.removeEventListener("contentchange",this.updateDisplayValue),super.disconnectedCallback()}sizeChanged(e,t){super.sizeChanged(e,t),this.proxy&&(this.proxy.size=t)}updateDisplayValue(){this.collapsible&&E.notify(this,"displayValue")}}X([q({attribute:"open",mode:"boolean"})],to.prototype,"open",void 0),X([function(e,t,n){return Object.assign({},n,{get:function(){return E.trackVolatile(),n.get.apply(this)}})}],to.prototype,"collapsible",null),X([_],to.prototype,"control",void 0),X([q({attribute:"position"})],to.prototype,"positionAttribute",void 0),X([_],to.prototype,"position",void 0),X([_],to.prototype,"maxHeight",void 0);class no{}X([_],no.prototype,"ariaControls",void 0),hi(no,Kr),hi(to,ci,no);const io=e=>"function"===typeof e,ro=()=>null;function oo(e){return void 0===e?ro:io(e)?e:()=>e}function so(e,t,n){const i=io(e)?e:()=>e,r=oo(t),o=oo(n);return(e,t)=>i(e,t)?r(e,t):o(e,t)}const ao=class extends to{}.compose({baseName:"dropdown",template:(e,t)=>Et`
    <template
        class="${e=>[e.collapsible&&"collapsible",e.collapsible&&e.open&&"open",e.disabled&&"disabled",e.collapsible&&e.position].filter(Boolean).join(" ")}"
        aria-activedescendant="${e=>e.ariaActiveDescendant}"
        aria-controls="${e=>e.ariaControls}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-haspopup="${e=>e.collapsible?"listbox":null}"
        aria-multiselectable="${e=>e.ariaMultiSelectable}"
        ?open="${e=>e.open}"
        role="combobox"
        tabindex="${e=>e.disabled?null:"0"}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
        @focusin="${(e,t)=>e.focusinHandler(t.event)}"
        @focusout="${(e,t)=>e.focusoutHandler(t.event)}"
        @keydown="${(e,t)=>e.keydownHandler(t.event)}"
        @mousedown="${(e,t)=>e.mousedownHandler(t.event)}"
    >
        ${so((e=>e.collapsible),Et`
                <div
                    class="control"
                    part="control"
                    ?disabled="${e=>e.disabled}"
                    ${li("control")}
                >
                    ${di(0,t)}
                    <slot name="button-container">
                        <div class="selected-value" part="selected-value">
                            <slot name="selected-value">${e=>e.displayValue}</slot>
                        </div>
                        <div aria-hidden="true" class="indicator" part="indicator">
                            <slot name="indicator">
                                ${t.indicator||""}
                            </slot>
                        </div>
                    </slot>
                    ${ui(0,t)}
                </div>
            `)}
        <div
            class="listbox"
            id="${e=>e.listboxId}"
            part="listbox"
            role="listbox"
            ?disabled="${e=>e.disabled}"
            ?hidden="${e=>!!e.collapsible&&!e.open}"
            ${li("listbox")}
        >
            <slot
                ${Fi({filter:Gr.slottedOptionFilter,flatten:!0,property:"slottedOptions"})}
            ></slot>
        </div>
    </template>
`,styles:(e,t)=>Pt`
	${At("inline-flex")} :host {
		background: ${qn};
		border-radius: calc(${on} * 1px);
		box-sizing: border-box;
		color: ${un};
		contain: contents;
		font-family: ${cn};
		height: calc(${dn} * 1px);
		position: relative;
		user-select: none;
		min-width: ${hn};
		outline: none;
		vertical-align: top;
	}
	.control {
		align-items: center;
		box-sizing: border-box;
		border: calc(${tn} * 1px) solid ${Wn};
		border-radius: calc(${on} * 1px);
		cursor: pointer;
		display: flex;
		font-family: inherit;
		font-size: ${pn};
		line-height: ${fn};
		min-height: 100%;
		padding: 2px 6px 2px 8px;
		width: 100%;
	}
	.listbox {
		background: ${qn};
		border: calc(${tn} * 1px) solid ${ln};
		border-radius: calc(${on} * 1px);
		box-sizing: border-box;
		display: inline-flex;
		flex-direction: column;
		left: 0;
		max-height: ${Gn};
		padding: 0;
		overflow-y: auto;
		position: absolute;
		width: 100%;
		z-index: 1;
	}
	.listbox[hidden] {
		display: none;
	}
	:host(:${$i}) .control {
		border-color: ${ln};
	}
	:host(:not([disabled]):hover) {
		background: ${qn};
		border-color: ${Wn};
	}
	:host(:${$i}) ::slotted([aria-selected="true"][role="option"]:not([disabled])) {
		background: ${$n};
		border: calc(${tn} * 1px) solid transparent;
		color: ${zn};
	}
	:host([disabled]) {
		cursor: ${zi};
		opacity: ${an};
	}
	:host([disabled]) .control {
		cursor: ${zi};
		user-select: none;
	}
	:host([disabled]:hover) {
		background: ${qn};
		color: ${un};
		fill: currentcolor;
	}
	:host(:not([disabled])) .control:active {
		border-color: ${ln};
	}
	:host(:empty) .listbox {
		display: none;
	}
	:host([open]) .control {
		border-color: ${ln};
	}
	:host([open][position='above']) .listbox {
		border-bottom-left-radius: 0;
		border-bottom-right-radius: 0;
	}
	:host([open][position='below']) .listbox {
		border-top-left-radius: 0;
		border-top-right-radius: 0;
	}
	:host([open][position='above']) .listbox {
		bottom: calc(${dn} * 1px);
	}
	:host([open][position='below']) .listbox {
		top: calc(${dn} * 1px);
	}
	.selected-value {
		flex: 1 1 auto;
		font-family: inherit;
		overflow: hidden;
		text-align: start;
		text-overflow: ellipsis;
		white-space: nowrap;
	}
	.indicator {
		flex: 0 0 auto;
		margin-inline-start: 1em;
	}
	slot[name='listbox'] {
		display: none;
		width: 100%;
	}
	:host([open]) slot[name='listbox'] {
		display: flex;
		position: absolute;
	}
	.end {
		margin-inline-start: auto;
	}
	.start,
	.end,
	.indicator,
	.select-indicator,
	::slotted(svg),
	::slotted(span) {
		fill: currentcolor;
		height: 1em;
		min-height: calc(${sn} * 4px);
		min-width: calc(${sn} * 4px);
		width: 1em;
	}
	::slotted([role='option']),
	::slotted(option) {
		flex: 0 0 auto;
	}
`,indicator:'\n\t\t<svg \n\t\t\tclass="select-indicator"\n\t\t\tpart="select-indicator"\n\t\t\twidth="16" \n\t\t\theight="16" \n\t\t\tviewBox="0 0 16 16" \n\t\t\txmlns="http://www.w3.org/2000/svg" \n\t\t\tfill="currentColor"\n\t\t>\n\t\t\t<path \n\t\t\t\tfill-rule="evenodd" \n\t\t\t\tclip-rule="evenodd" \n\t\t\t\td="M7.976 10.072l4.357-4.357.62.618L8.284 11h-.618L3 6.333l.619-.618 4.357 4.357z"\n\t\t\t/>\n\t\t</svg>\n\t'});class lo extends Ve{constructor(){super(...arguments),this.handleUnsupportedDelegatesFocus=()=>{var e;window.ShadowRoot&&!window.ShadowRoot.prototype.hasOwnProperty("delegatesFocus")&&(null===(e=this.$fastController.definition.shadowOptions)||void 0===e?void 0:e.delegatesFocus)&&(this.focus=()=>{var e;null===(e=this.control)||void 0===e||e.focus()})}}connectedCallback(){super.connectedCallback(),this.handleUnsupportedDelegatesFocus()}}X([q],lo.prototype,"download",void 0),X([q],lo.prototype,"href",void 0),X([q],lo.prototype,"hreflang",void 0),X([q],lo.prototype,"ping",void 0),X([q],lo.prototype,"referrerpolicy",void 0),X([q],lo.prototype,"rel",void 0),X([q],lo.prototype,"target",void 0),X([q],lo.prototype,"type",void 0),X([_],lo.prototype,"defaultSlottedContent",void 0);class co{}X([q({attribute:"aria-expanded"})],co.prototype,"ariaExpanded",void 0),hi(co,si),hi(lo,ci,co);const uo=class extends lo{}.compose({baseName:"link",template:(e,t)=>Et`
    <a
        class="control"
        part="control"
        download="${e=>e.download}"
        href="${e=>e.href}"
        hreflang="${e=>e.hreflang}"
        ping="${e=>e.ping}"
        referrerpolicy="${e=>e.referrerpolicy}"
        rel="${e=>e.rel}"
        target="${e=>e.target}"
        type="${e=>e.type}"
        aria-atomic="${e=>e.ariaAtomic}"
        aria-busy="${e=>e.ariaBusy}"
        aria-controls="${e=>e.ariaControls}"
        aria-current="${e=>e.ariaCurrent}"
        aria-describedby="${e=>e.ariaDescribedby}"
        aria-details="${e=>e.ariaDetails}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-errormessage="${e=>e.ariaErrormessage}"
        aria-expanded="${e=>e.ariaExpanded}"
        aria-flowto="${e=>e.ariaFlowto}"
        aria-haspopup="${e=>e.ariaHaspopup}"
        aria-hidden="${e=>e.ariaHidden}"
        aria-invalid="${e=>e.ariaInvalid}"
        aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
        aria-label="${e=>e.ariaLabel}"
        aria-labelledby="${e=>e.ariaLabelledby}"
        aria-live="${e=>e.ariaLive}"
        aria-owns="${e=>e.ariaOwns}"
        aria-relevant="${e=>e.ariaRelevant}"
        aria-roledescription="${e=>e.ariaRoledescription}"
        ${li("control")}
    >
        ${di(0,t)}
        <span class="content" part="content">
            <slot ${Fi("defaultSlottedContent")}></slot>
        </span>
        ${ui(0,t)}
    </a>
`,styles:(e,t)=>Pt`
	${At("inline-flex")} :host {
		background: transparent;
		box-sizing: border-box;
		color: ${Yn};
		cursor: pointer;
		fill: currentcolor;
		font-family: ${cn};
		font-size: ${pn};
		line-height: ${fn};
		outline: none;
	}
	.control {
		background: transparent;
		border: calc(${tn} * 1px) solid transparent;
		border-radius: calc(${rn} * 1px);
		box-sizing: border-box;
		color: inherit;
		cursor: inherit;
		fill: inherit;
		font-family: inherit;
		height: inherit;
		padding: 0;
		outline: none;
		text-decoration: none;
		word-break: break-word;
	}
	.control::-moz-focus-inner {
		border: 0;
	}
	:host(:hover) {
		color: ${Xn};
	}
	:host(:hover) .content {
		text-decoration: underline;
	}
	:host(:active) {
		background: transparent;
		color: ${Xn};
	}
	:host(:${$i}) .control,
	:host(:focus) .control {
		border: calc(${tn} * 1px) solid ${ln};
	}
`,shadowOptions:{delegatesFocus:!0}});const ho=class extends qr{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Option")}}.compose({baseName:"option",template:(e,t)=>Et`
    <template
        aria-checked="${e=>e.ariaChecked}"
        aria-disabled="${e=>e.ariaDisabled}"
        aria-posinset="${e=>e.ariaPosInSet}"
        aria-selected="${e=>e.ariaSelected}"
        aria-setsize="${e=>e.ariaSetSize}"
        class="${e=>[e.checked&&"checked",e.selected&&"selected",e.disabled&&"disabled"].filter(Boolean).join(" ")}"
        role="option"
    >
        ${di(0,t)}
        <span class="content" part="content">
            <slot ${Fi("content")}></slot>
        </span>
        ${ui(0,t)}
    </template>
`,styles:(e,t)=>Pt`
	${At("inline-flex")} :host {
		font-family: var(--body-font);
		border-radius: ${rn};
		border: calc(${tn} * 1px) solid transparent;
		box-sizing: border-box;
		color: ${un};
		cursor: pointer;
		fill: currentcolor;
		font-size: ${pn};
		line-height: ${fn};
		margin: 0;
		outline: none;
		overflow: hidden;
		padding: 0 calc((${sn} / 2) * 1px)
			calc((${sn} / 4) * 1px);
		user-select: none;
		white-space: nowrap;
	}
	:host(:${$i}) {
		border-color: ${ln};
		background: ${$n};
		color: ${un};
	}
	:host([aria-selected='true']) {
		background: ${$n};
		border: calc(${tn} * 1px) solid transparent;
		color: ${zn};
	}
	:host(:active) {
		background: ${$n};
		color: ${zn};
	}
	:host(:not([aria-selected='true']):hover) {
		background: ${$n};
		border: calc(${tn} * 1px) solid transparent;
		color: ${zn};
	}
	:host(:not([aria-selected='true']):active) {
		background: ${$n};
		color: ${un};
	}
	:host([disabled]) {
		cursor: ${zi};
		opacity: ${an};
	}
	:host([disabled]:hover) {
		background-color: inherit;
	}
	.content {
		grid-column-start: 2;
		justify-self: start;
		overflow: hidden;
		text-overflow: ellipsis;
	}
`}),po="horizontal";class fo extends Ve{constructor(){super(...arguments),this.orientation=po,this.activeindicator=!0,this.showActiveIndicator=!0,this.prevActiveTabIndex=0,this.activeTabIndex=0,this.ticking=!1,this.change=()=>{this.$emit("change",this.activetab)},this.isDisabledElement=e=>"true"===e.getAttribute("aria-disabled"),this.isHiddenElement=e=>e.hasAttribute("hidden"),this.isFocusableElement=e=>!this.isDisabledElement(e)&&!this.isHiddenElement(e),this.setTabs=()=>{const e="gridColumn",t="gridRow",n=this.isHorizontal()?e:t;this.activeTabIndex=this.getActiveIndex(),this.showActiveIndicator=!1,this.tabs.forEach(((i,r)=>{if("tab"===i.slot){const e=this.activeTabIndex===r&&this.isFocusableElement(i);this.activeindicator&&this.isFocusableElement(i)&&(this.showActiveIndicator=!0);const t=this.tabIds[r],n=this.tabpanelIds[r];i.setAttribute("id",t),i.setAttribute("aria-selected",e?"true":"false"),i.setAttribute("aria-controls",n),i.addEventListener("click",this.handleTabClick),i.addEventListener("keydown",this.handleTabKeyDown),i.setAttribute("tabindex",e?"0":"-1"),e&&(this.activetab=i,this.activeid=t)}i.style[e]="",i.style[t]="",i.style[n]=`${r+1}`,this.isHorizontal()?i.classList.remove("vertical"):i.classList.add("vertical")}))},this.setTabPanels=()=>{this.tabpanels.forEach(((e,t)=>{const n=this.tabIds[t],i=this.tabpanelIds[t];e.setAttribute("id",i),e.setAttribute("aria-labelledby",n),this.activeTabIndex!==t?e.setAttribute("hidden",""):e.removeAttribute("hidden")}))},this.handleTabClick=e=>{const t=e.currentTarget;1===t.nodeType&&this.isFocusableElement(t)&&(this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=this.tabs.indexOf(t),this.setComponent())},this.handleTabKeyDown=e=>{if(this.isHorizontal())switch(e.key){case mi:e.preventDefault(),this.adjustBackward(e);break;case gi:e.preventDefault(),this.adjustForward(e)}else switch(e.key){case vi:e.preventDefault(),this.adjustBackward(e);break;case fi:e.preventDefault(),this.adjustForward(e)}switch(e.key){case xi:e.preventDefault(),this.adjust(-this.activeTabIndex);break;case ki:e.preventDefault(),this.adjust(this.tabs.length-this.activeTabIndex-1)}},this.adjustForward=e=>{const t=this.tabs;let n=0;for(n=this.activetab?t.indexOf(this.activetab)+1:1,n===t.length&&(n=0);n<t.length&&t.length>1;){if(this.isFocusableElement(t[n])){this.moveToTabByIndex(t,n);break}if(this.activetab&&n===t.indexOf(this.activetab))break;n+1>=t.length?n=0:n+=1}},this.adjustBackward=e=>{const t=this.tabs;let n=0;for(n=this.activetab?t.indexOf(this.activetab)-1:0,n=n<0?t.length-1:n;n>=0&&t.length>1;){if(this.isFocusableElement(t[n])){this.moveToTabByIndex(t,n);break}n-1<0?n=t.length-1:n-=1}},this.moveToTabByIndex=(e,t)=>{const n=e[t];this.activetab=n,this.prevActiveTabIndex=this.activeTabIndex,this.activeTabIndex=t,n.focus(),this.setComponent()}}orientationChanged(){this.$fastController.isConnected&&(this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}activeidChanged(e,t){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.prevActiveTabIndex=this.tabs.findIndex((t=>t.id===e)),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabsChanged(){this.$fastController.isConnected&&this.tabs.length<=this.tabpanels.length&&(this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}tabpanelsChanged(){this.$fastController.isConnected&&this.tabpanels.length<=this.tabs.length&&(this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.setTabs(),this.setTabPanels(),this.handleActiveIndicatorPosition())}getActiveIndex(){return void 0!==this.activeid?-1===this.tabIds.indexOf(this.activeid)?0:this.tabIds.indexOf(this.activeid):0}getTabIds(){return this.tabs.map((e=>{var t;return null!==(t=e.getAttribute("id"))&&void 0!==t?t:`tab-${Vr()}`}))}getTabPanelIds(){return this.tabpanels.map((e=>{var t;return null!==(t=e.getAttribute("id"))&&void 0!==t?t:`panel-${Vr()}`}))}setComponent(){this.activeTabIndex!==this.prevActiveTabIndex&&(this.activeid=this.tabIds[this.activeTabIndex],this.focusTab(),this.change())}isHorizontal(){return this.orientation===po}handleActiveIndicatorPosition(){this.showActiveIndicator&&this.activeindicator&&this.activeTabIndex!==this.prevActiveTabIndex&&(this.ticking?this.ticking=!1:(this.ticking=!0,this.animateActiveIndicator()))}animateActiveIndicator(){this.ticking=!0;const e=this.isHorizontal()?"gridColumn":"gridRow",t=this.isHorizontal()?"translateX":"translateY",n=this.isHorizontal()?"offsetLeft":"offsetTop",i=this.activeIndicatorRef[n];this.activeIndicatorRef.style[e]=`${this.activeTabIndex+1}`;const r=this.activeIndicatorRef[n];this.activeIndicatorRef.style[e]=`${this.prevActiveTabIndex+1}`;const o=r-i;this.activeIndicatorRef.style.transform=`${t}(${o}px)`,this.activeIndicatorRef.classList.add("activeIndicatorTransition"),this.activeIndicatorRef.addEventListener("transitionend",(()=>{this.ticking=!1,this.activeIndicatorRef.style[e]=`${this.activeTabIndex+1}`,this.activeIndicatorRef.style.transform=`${t}(0px)`,this.activeIndicatorRef.classList.remove("activeIndicatorTransition")}))}adjust(e){const t=this.tabs.filter((e=>this.isFocusableElement(e))),n=t.indexOf(this.activetab),i=function(e,t,n){return Math.min(Math.max(n,e),t)}(0,t.length-1,n+e),r=this.tabs.indexOf(t[i]);r>-1&&this.moveToTabByIndex(this.tabs,r)}focusTab(){this.tabs[this.activeTabIndex].focus()}connectedCallback(){super.connectedCallback(),this.tabIds=this.getTabIds(),this.tabpanelIds=this.getTabPanelIds(),this.activeTabIndex=this.getActiveIndex()}}X([q],fo.prototype,"orientation",void 0),X([q],fo.prototype,"activeid",void 0),X([_],fo.prototype,"tabs",void 0),X([_],fo.prototype,"tabpanels",void 0),X([q({mode:"boolean"})],fo.prototype,"activeindicator",void 0),X([_],fo.prototype,"activeIndicatorRef",void 0),X([_],fo.prototype,"showActiveIndicator",void 0),hi(fo,ci);class mo extends Ve{}X([q({mode:"boolean"})],mo.prototype,"disabled",void 0);class go extends Ve{}const vo=class extends fo{connectedCallback(){super.connectedCallback(),this.orientation&&(this.orientation=po);this.getAttribute("aria-label")||this.setAttribute("aria-label","Panels")}}.compose({baseName:"panels",template:(e,t)=>Et`
    <template class="${e=>e.orientation}">
        ${di(0,t)}
        <div class="tablist" part="tablist" role="tablist">
            <slot class="tab" name="tab" part="tab" ${Fi("tabs")}></slot>

            ${so((e=>e.showActiveIndicator),Et`
                    <div
                        ${li("activeIndicatorRef")}
                        class="activeIndicator"
                        part="activeIndicator"
                    ></div>
                `)}
        </div>
        ${ui(0,t)}
        <div class="tabpanel" part="tabpanel">
            <slot name="tabpanel" ${Fi("tabpanels")}></slot>
        </div>
    </template>
`,styles:(e,t)=>Pt`
	${At("grid")} :host {
		box-sizing: border-box;
		font-family: ${cn};
		font-size: ${pn};
		line-height: ${fn};
		color: ${un};
		grid-template-columns: auto 1fr auto;
		grid-template-rows: auto 1fr;
		overflow-x: auto;
	}
	.tablist {
		display: grid;
		grid-template-rows: auto auto;
		grid-template-columns: auto;
		column-gap: calc(${sn} * 8px);
		position: relative;
		width: max-content;
		align-self: end;
		padding: calc(${sn} * 1px) calc(${sn} * 1px) 0;
		box-sizing: border-box;
	}
	.start,
	.end {
		align-self: center;
	}
	.activeIndicator {
		grid-row: 2;
		grid-column: 1;
		width: 100%;
		height: calc((${sn} / 4) * 1px);
		justify-self: center;
		background: ${ei};
		margin: 0;
		border-radius: calc(${rn} * 1px);
	}
	.activeIndicatorTransition {
		transition: transform 0.01s linear;
	}
	.tabpanel {
		grid-row: 2;
		grid-column-start: 1;
		grid-column-end: 4;
		position: relative;
	}
`});const bo=class extends mo{connectedCallback(){super.connectedCallback(),this.disabled&&(this.disabled=!1),this.textContent&&this.setAttribute("aria-label",this.textContent)}}.compose({baseName:"panel-tab",template:(e,t)=>Et`
    <template slot="tab" role="tab" aria-disabled="${e=>e.disabled}">
        <slot></slot>
    </template>
`,styles:(e,t)=>Pt`
	${At("inline-flex")} :host {
		box-sizing: border-box;
		font-family: ${cn};
		font-size: ${pn};
		line-height: ${fn};
		height: calc(${sn} * 7px);
		padding: calc(${sn} * 1px) 0;
		color: ${ti};
		fill: currentcolor;
		border-radius: calc(${rn} * 1px);
		border: solid calc(${tn} * 1px) transparent;
		align-items: center;
		justify-content: center;
		grid-row: 1;
		cursor: pointer;
	}
	:host(:hover) {
		color: ${ei};
		fill: currentcolor;
	}
	:host(:active) {
		color: ${ei};
		fill: currentcolor;
	}
	:host([aria-selected='true']) {
		background: transparent;
		color: ${ei};
		fill: currentcolor;
	}
	:host([aria-selected='true']:hover) {
		background: transparent;
		color: ${ei};
		fill: currentcolor;
	}
	:host([aria-selected='true']:active) {
		background: transparent;
		color: ${ei};
		fill: currentcolor;
	}
	:host(:${$i}) {
		outline: none;
		border: solid calc(${tn} * 1px) ${Zn};
	}
	:host(:focus) {
		outline: none;
	}
	::slotted(vscode-badge) {
		margin-inline-start: calc(${sn} * 2px);
	}
`});const yo=class extends go{}.compose({baseName:"panel-view",template:(e,t)=>Et`
    <template slot="tabpanel" role="tabpanel">
        <slot></slot>
    </template>
`,styles:(e,t)=>Pt`
	${At("flex")} :host {
		color: inherit;
		background-color: transparent;
		border: solid calc(${tn} * 1px) transparent;
		box-sizing: border-box;
		font-size: ${pn};
		line-height: ${fn};
		padding: 10px calc((${sn} + 2) * 1px);
	}
`});class xo extends Ve{constructor(){super(...arguments),this.percentComplete=0}valueChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}minChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}maxChanged(){this.$fastController.isConnected&&this.updatePercentComplete()}connectedCallback(){super.connectedCallback(),this.updatePercentComplete()}updatePercentComplete(){const e="number"===typeof this.min?this.min:0,t="number"===typeof this.max?this.max:100,n="number"===typeof this.value?this.value:0,i=t-e;this.percentComplete=0===i?0:Math.fround((n-e)/i*100)}}X([q({converter:V})],xo.prototype,"value",void 0),X([q({converter:V})],xo.prototype,"min",void 0),X([q({converter:V})],xo.prototype,"max",void 0),X([q({mode:"boolean"})],xo.prototype,"paused",void 0),X([_],xo.prototype,"percentComplete",void 0);const ko=class extends xo{connectedCallback(){super.connectedCallback(),this.paused&&(this.paused=!1),this.setAttribute("aria-label","Loading"),this.setAttribute("aria-live","assertive"),this.setAttribute("role","alert")}attributeChangedCallback(e,t,n){"value"===e&&this.removeAttribute("value")}}.compose({baseName:"progress-ring",template:(e,t)=>Et`
    <template
        role="progressbar"
        aria-valuenow="${e=>e.value}"
        aria-valuemin="${e=>e.min}"
        aria-valuemax="${e=>e.max}"
        class="${e=>e.paused?"paused":""}"
    >
        ${so((e=>"number"===typeof e.value),Et`
                <svg
                    class="progress"
                    part="progress"
                    viewBox="0 0 16 16"
                    slot="determinate"
                >
                    <circle
                        class="background"
                        part="background"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                    <circle
                        class="determinate"
                        part="determinate"
                        style="stroke-dasharray: ${e=>44*e.percentComplete/100}px ${44}px"
                        cx="8px"
                        cy="8px"
                        r="7px"
                    ></circle>
                </svg>
            `,Et`
                <slot name="indeterminate" slot="indeterminate">
                    ${t.indeterminateIndicator||""}
                </slot>
            `)}
    </template>
`,styles:(e,t)=>Pt`
	${At("flex")} :host {
		align-items: center;
		outline: none;
		height: calc(${sn} * 7px);
		width: calc(${sn} * 7px);
		margin: 0;
	}
	.progress {
		height: 100%;
		width: 100%;
	}
	.background {
		fill: none;
		stroke: transparent;
		stroke-width: calc(${sn} / 2 * 1px);
	}
	.indeterminate-indicator-1 {
		fill: none;
		stroke: ${Jn};
		stroke-width: calc(${sn} / 2 * 1px);
		stroke-linecap: square;
		transform-origin: 50% 50%;
		transform: rotate(-90deg);
		transition: all 0.2s ease-in-out;
		animation: spin-infinite 2s linear infinite;
	}
	@keyframes spin-infinite {
		0% {
			stroke-dasharray: 0.01px 43.97px;
			transform: rotate(0deg);
		}
		50% {
			stroke-dasharray: 21.99px 21.99px;
			transform: rotate(450deg);
		}
		100% {
			stroke-dasharray: 0.01px 43.97px;
			transform: rotate(1080deg);
		}
	}
`,indeterminateIndicator:'\n\t\t<svg class="progress" part="progress" viewBox="0 0 16 16">\n\t\t\t<circle\n\t\t\t\tclass="background"\n\t\t\t\tpart="background"\n\t\t\t\tcx="8px"\n\t\t\t\tcy="8px"\n\t\t\t\tr="7px"\n\t\t\t></circle>\n\t\t\t<circle\n\t\t\t\tclass="indeterminate-indicator-1"\n\t\t\t\tpart="indeterminate-indicator-1"\n\t\t\t\tcx="8px"\n\t\t\t\tcy="8px"\n\t\t\t\tr="7px"\n\t\t\t></circle>\n\t\t</svg>\n\t'});class wo extends Ve{}class So extends(Pi(wo)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}class Co extends So{constructor(){super(),this.initialValue="on",this.keypressHandler=e=>{if(e.key!==wi)return!0;this.checked||this.readOnly||(this.checked=!0)},this.proxy.setAttribute("type","radio")}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly)}defaultCheckedChanged(){var e;this.$fastController.isConnected&&!this.dirtyChecked&&(this.isInsideRadioGroup()||(this.checked=null!==(e=this.defaultChecked)&&void 0!==e&&e,this.dirtyChecked=!1))}connectedCallback(){var e,t;super.connectedCallback(),this.validate(),"radiogroup"!==(null===(e=this.parentElement)||void 0===e?void 0:e.getAttribute("role"))&&null===this.getAttribute("tabindex")&&(this.disabled||this.setAttribute("tabindex","0")),this.checkedAttribute&&(this.dirtyChecked||this.isInsideRadioGroup()||(this.checked=null!==(t=this.defaultChecked)&&void 0!==t&&t,this.dirtyChecked=!1))}isInsideRadioGroup(){return null!==this.closest("[role=radiogroup]")}clickHandler(e){this.disabled||this.readOnly||this.checked||(this.checked=!0)}}X([q({attribute:"readonly",mode:"boolean"})],Co.prototype,"readOnly",void 0),X([_],Co.prototype,"name",void 0),X([_],Co.prototype,"defaultSlottedNodes",void 0);const To=class extends Co{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Radio")}}.compose({baseName:"radio",template:(e,t)=>Et`
    <template
        role="radio"
        class="${e=>e.checked?"checked":""} ${e=>e.readOnly?"readonly":""}"
        aria-checked="${e=>e.checked}"
        aria-required="${e=>e.required}"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        @keypress="${(e,t)=>e.keypressHandler(t.event)}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
    >
        <div part="control" class="control">
            <slot name="checked-indicator">
                ${t.checkedIndicator||""}
            </slot>
        </div>
        <label
            part="label"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Fi("defaultSlottedNodes")}></slot>
        </label>
    </template>
`,styles:(e,t)=>Pt`
	${At("inline-flex")} :host {
		align-items: center;
		flex-direction: row;
		font-size: ${pn};
		line-height: ${fn};
		margin: calc(${sn} * 1px) 0;
		outline: none;
		position: relative;
		transition: all 0.2s ease-in-out;
		user-select: none;
	}
	.control {
		background: ${Fn};
		border-radius: 999px;
		border: calc(${tn} * 1px) solid ${Bn};
		box-sizing: border-box;
		cursor: pointer;
		height: calc(${sn} * 4px);
		position: relative;
		outline: none;
		width: calc(${sn} * 4px);
	}
	.label {
		color: ${un};
		cursor: pointer;
		font-family: ${cn};
		margin-inline-end: calc(${sn} * 2px + 2px);
		padding-inline-start: calc(${sn} * 2px + 2px);
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	.control,
	.checked-indicator {
		flex-shrink: 0;
	}
	.checked-indicator {
		background: ${un};
		border-radius: 999px;
		display: inline-block;
		inset: calc(${sn} * 1px);
		opacity: 0;
		pointer-events: none;
		position: absolute;
	}
	:host(:not([disabled])) .control:hover {
		background: ${Fn};
		border-color: ${Bn};
	}
	:host(:not([disabled])) .control:active {
		background: ${Fn};
		border-color: ${ln};
	}
	:host(:${$i}) .control {
		border: calc(${tn} * 1px) solid ${ln};
	}
	:host([aria-checked='true']) .control {
		background: ${Fn};
		border: calc(${tn} * 1px) solid ${Bn};
	}
	:host([aria-checked='true']:not([disabled])) .control:hover {
		background: ${Fn};
		border: calc(${tn} * 1px) solid ${Bn};
	}
	:host([aria-checked='true']:not([disabled])) .control:active {
		background: ${Fn};
		border: calc(${tn} * 1px) solid ${ln};
	}
	:host([aria-checked="true"]:${$i}:not([disabled])) .control {
		border: calc(${tn} * 1px) solid ${ln};
	}
	:host([disabled]) .label,
	:host([readonly]) .label,
	:host([readonly]) .control,
	:host([disabled]) .control {
		cursor: ${zi};
	}
	:host([aria-checked='true']) .checked-indicator {
		opacity: 1;
	}
	:host([disabled]) {
		opacity: ${an};
	}
`,checkedIndicator:'\n\t\t<div part="checked-indicator" class="checked-indicator"></div>\n\t'});var Eo;!function(e){e.ltr="ltr",e.rtl="rtl"}(Eo||(Eo={}));class _o extends Ve{constructor(){super(...arguments),this.orientation=Fr,this.radioChangeHandler=e=>{const t=e.target;t.checked&&(this.slottedRadioButtons.forEach((e=>{e!==t&&(e.checked=!1,this.isInsideFoundationToolbar||e.setAttribute("tabindex","-1"))})),this.selectedRadio=t,this.value=t.value,t.setAttribute("tabindex","0"),this.focusedRadio=t),e.stopPropagation()},this.moveToRadioByIndex=(e,t)=>{const n=e[t];this.isInsideToolbar||(n.setAttribute("tabindex","0"),n.readOnly?this.slottedRadioButtons.forEach((e=>{e!==n&&e.setAttribute("tabindex","-1")})):(n.checked=!0,this.selectedRadio=n)),this.focusedRadio=n,n.focus()},this.moveRightOffGroup=()=>{var e;null===(e=this.nextElementSibling)||void 0===e||e.focus()},this.moveLeftOffGroup=()=>{var e;null===(e=this.previousElementSibling)||void 0===e||e.focus()},this.focusOutHandler=e=>{const t=this.slottedRadioButtons,n=e.target,i=null!==n?t.indexOf(n):0,r=this.focusedRadio?t.indexOf(this.focusedRadio):-1;return(0===r&&i===r||r===t.length-1&&r===i)&&(this.selectedRadio?(this.focusedRadio=this.selectedRadio,this.isInsideFoundationToolbar||(this.selectedRadio.setAttribute("tabindex","0"),t.forEach((e=>{e!==this.selectedRadio&&e.setAttribute("tabindex","-1")})))):(this.focusedRadio=t[0],this.focusedRadio.setAttribute("tabindex","0"),t.forEach((e=>{e!==this.focusedRadio&&e.setAttribute("tabindex","-1")})))),!0},this.clickHandler=e=>{const t=e.target;if(t){const e=this.slottedRadioButtons;t.checked||0===e.indexOf(t)?(t.setAttribute("tabindex","0"),this.selectedRadio=t):(t.setAttribute("tabindex","-1"),this.selectedRadio=null),this.focusedRadio=t}e.preventDefault()},this.shouldMoveOffGroupToTheRight=(e,t,n)=>e===t.length&&this.isInsideToolbar&&n===gi,this.shouldMoveOffGroupToTheLeft=(e,t)=>(this.focusedRadio?e.indexOf(this.focusedRadio)-1:0)<0&&this.isInsideToolbar&&t===mi,this.checkFocusedRadio=()=>{null===this.focusedRadio||this.focusedRadio.readOnly||this.focusedRadio.checked||(this.focusedRadio.checked=!0,this.focusedRadio.setAttribute("tabindex","0"),this.focusedRadio.focus(),this.selectedRadio=this.focusedRadio)},this.moveRight=e=>{const t=this.slottedRadioButtons;let n=0;if(n=this.focusedRadio?t.indexOf(this.focusedRadio)+1:1,this.shouldMoveOffGroupToTheRight(n,t,e.key))this.moveRightOffGroup();else for(n===t.length&&(n=0);n<t.length&&t.length>1;){if(!t[n].disabled){this.moveToRadioByIndex(t,n);break}if(this.focusedRadio&&n===t.indexOf(this.focusedRadio))break;if(n+1>=t.length){if(this.isInsideToolbar)break;n=0}else n+=1}},this.moveLeft=e=>{const t=this.slottedRadioButtons;let n=0;if(n=this.focusedRadio?t.indexOf(this.focusedRadio)-1:0,n=n<0?t.length-1:n,this.shouldMoveOffGroupToTheLeft(t,e.key))this.moveLeftOffGroup();else for(;n>=0&&t.length>1;){if(!t[n].disabled){this.moveToRadioByIndex(t,n);break}if(this.focusedRadio&&n===t.indexOf(this.focusedRadio))break;n-1<0?n=t.length-1:n-=1}},this.keydownHandler=e=>{const t=e.key;if(t in Ci&&this.isInsideFoundationToolbar)return!0;switch(t){case bi:this.checkFocusedRadio();break;case gi:case fi:this.direction===Eo.ltr?this.moveRight(e):this.moveLeft(e);break;case mi:case vi:this.direction===Eo.ltr?this.moveLeft(e):this.moveRight(e);break;default:return!0}}}readOnlyChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{this.readOnly?e.readOnly=!0:e.readOnly=!1}))}disabledChanged(){void 0!==this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{this.disabled?e.disabled=!0:e.disabled=!1}))}nameChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{e.setAttribute("name",this.name)}))}valueChanged(){this.slottedRadioButtons&&this.slottedRadioButtons.forEach((e=>{e.value===this.value&&(e.checked=!0,this.selectedRadio=e)})),this.$emit("change")}slottedRadioButtonsChanged(e,t){this.slottedRadioButtons&&this.slottedRadioButtons.length>0&&this.setupRadioButtons()}get parentToolbar(){return this.closest('[role="toolbar"]')}get isInsideToolbar(){var e;return null!==(e=this.parentToolbar)&&void 0!==e&&e}get isInsideFoundationToolbar(){var e;return!!(null===(e=this.parentToolbar)||void 0===e?void 0:e.$fastController)}connectedCallback(){super.connectedCallback(),this.direction=(e=>{const t=e.closest("[dir]");return null!==t&&"rtl"===t.dir?Eo.rtl:Eo.ltr})(this),this.setupRadioButtons()}disconnectedCallback(){this.slottedRadioButtons.forEach((e=>{e.removeEventListener("change",this.radioChangeHandler)}))}setupRadioButtons(){const e=this.slottedRadioButtons.filter((e=>e.hasAttribute("checked"))),t=e?e.length:0;if(t>1){e[t-1].checked=!0}let n=!1;if(this.slottedRadioButtons.forEach((e=>{void 0!==this.name&&e.setAttribute("name",this.name),this.disabled&&(e.disabled=!0),this.readOnly&&(e.readOnly=!0),this.value&&this.value===e.value?(this.selectedRadio=e,this.focusedRadio=e,e.checked=!0,e.setAttribute("tabindex","0"),n=!0):(this.isInsideFoundationToolbar||e.setAttribute("tabindex","-1"),e.checked=!1),e.addEventListener("change",this.radioChangeHandler)})),void 0===this.value&&this.slottedRadioButtons.length>0){const e=this.slottedRadioButtons.filter((e=>e.hasAttribute("checked"))),t=null!==e?e.length:0;if(t>0&&!n){const n=e[t-1];n.checked=!0,this.focusedRadio=n,n.setAttribute("tabindex","0")}else this.slottedRadioButtons[0].setAttribute("tabindex","0"),this.focusedRadio=this.slottedRadioButtons[0]}}}X([q({attribute:"readonly",mode:"boolean"})],_o.prototype,"readOnly",void 0),X([q({attribute:"disabled",mode:"boolean"})],_o.prototype,"disabled",void 0),X([q],_o.prototype,"name",void 0),X([q],_o.prototype,"value",void 0),X([q],_o.prototype,"orientation",void 0),X([_],_o.prototype,"childItems",void 0),X([_],_o.prototype,"slottedRadioButtons",void 0);const Io=class extends _o{connectedCallback(){super.connectedCallback();const e=this.querySelector("label");if(e){const t="radio-group-"+Math.random().toString(16).slice(2);e.setAttribute("id",t),this.setAttribute("aria-labelledby",t)}}}.compose({baseName:"radio-group",template:(e,t)=>Et`
    <template
        role="radiogroup"
        aria-disabled="${e=>e.disabled}"
        aria-readonly="${e=>e.readOnly}"
        @click="${(e,t)=>e.clickHandler(t.event)}"
        @keydown="${(e,t)=>e.keydownHandler(t.event)}"
        @focusout="${(e,t)=>e.focusOutHandler(t.event)}"
    >
        <slot name="label"></slot>
        <div
            class="positioning-region ${e=>e.orientation===Fr?"horizontal":"vertical"}"
            part="positioning-region"
        >
            <slot
                ${Fi({property:"slottedRadioButtons",filter:Di("[role=radio]")})}
            ></slot>
        </div>
    </template>
`,styles:(e,t)=>Pt`
	${At("flex")} :host {
		align-items: flex-start;
		margin: calc(${sn} * 1px) 0;
		flex-direction: column;
	}
	.positioning-region {
		display: flex;
		flex-wrap: wrap;
	}
	:host([orientation='vertical']) .positioning-region {
		flex-direction: column;
	}
	:host([orientation='horizontal']) .positioning-region {
		flex-direction: row;
	}
	::slotted([slot='label']) {
		color: ${un};
		font-size: ${pn};
		margin: calc(${sn} * 1px) 0;
	}
`});const Ro=class extends Ze{connectedCallback(){super.connectedCallback(),this.circular&&(this.circular=!1)}}.compose({baseName:"tag",template:_t,styles:(e,t)=>Pt`
	${At("inline-block")} :host {
		box-sizing: border-box;
		font-family: ${cn};
		font-size: ${mn};
		line-height: ${gn};
	}
	.control {
		background-color: ${wn};
		border: calc(${tn} * 1px) solid ${Cn};
		border-radius: ${ni};
		color: ${Sn};
		padding: calc(${sn} * 0.5px) calc(${sn} * 1px);
		text-transform: uppercase;
	}
`});class Po extends Ve{}class Ao extends(Ri(Po)){constructor(){super(...arguments),this.proxy=document.createElement("input")}}const Oo="text";class Mo extends Ao{constructor(){super(...arguments),this.type=Oo}readOnlyChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.readOnly=this.readOnly,this.validate())}autofocusChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.autofocus=this.autofocus,this.validate())}placeholderChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.placeholder=this.placeholder)}typeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.type=this.type,this.validate())}listChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.setAttribute("list",this.list),this.validate())}maxlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.maxLength=this.maxlength,this.validate())}minlengthChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.minLength=this.minlength,this.validate())}patternChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.pattern=this.pattern,this.validate())}sizeChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.size=this.size)}spellcheckChanged(){this.proxy instanceof HTMLInputElement&&(this.proxy.spellcheck=this.spellcheck)}connectedCallback(){super.connectedCallback(),this.proxy.setAttribute("type",this.type),this.validate(),this.autofocus&&S.queueUpdate((()=>{this.focus()}))}select(){this.control.select(),this.$emit("select")}handleTextInput(){this.value=this.control.value}handleChange(){this.$emit("change")}validate(){super.validate(this.control)}}X([q({attribute:"readonly",mode:"boolean"})],Mo.prototype,"readOnly",void 0),X([q({mode:"boolean"})],Mo.prototype,"autofocus",void 0),X([q],Mo.prototype,"placeholder",void 0),X([q],Mo.prototype,"type",void 0),X([q],Mo.prototype,"list",void 0),X([q({converter:V})],Mo.prototype,"maxlength",void 0),X([q({converter:V})],Mo.prototype,"minlength",void 0),X([q],Mo.prototype,"pattern",void 0),X([q({converter:V})],Mo.prototype,"size",void 0),X([q({mode:"boolean"})],Mo.prototype,"spellcheck",void 0),X([_],Mo.prototype,"defaultSlottedNodes",void 0);class No{}hi(No,si),hi(Mo,ci,No);class Do extends Ve{}class jo extends(Ri(Do)){constructor(){super(...arguments),this.proxy=document.createElement("textarea")}}const Lo="none";class Fo extends jo{constructor(){super(...arguments),this.resize=Lo,this.cols=20,this.handleTextInput=()=>{this.value=this.control.value}}readOnlyChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.readOnly=this.readOnly)}autofocusChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.autofocus=this.autofocus)}listChanged(){this.proxy instanceof HTMLTextAreaElement&&this.proxy.setAttribute("list",this.list)}maxlengthChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.maxLength=this.maxlength)}minlengthChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.minLength=this.minlength)}spellcheckChanged(){this.proxy instanceof HTMLTextAreaElement&&(this.proxy.spellcheck=this.spellcheck)}select(){this.control.select(),this.$emit("select")}handleChange(){this.$emit("change")}validate(){super.validate(this.control)}}X([q({mode:"boolean"})],Fo.prototype,"readOnly",void 0),X([q],Fo.prototype,"resize",void 0),X([q({mode:"boolean"})],Fo.prototype,"autofocus",void 0),X([q({attribute:"form"})],Fo.prototype,"formId",void 0),X([q],Fo.prototype,"list",void 0),X([q({converter:V})],Fo.prototype,"maxlength",void 0),X([q({converter:V})],Fo.prototype,"minlength",void 0),X([q],Fo.prototype,"name",void 0),X([q],Fo.prototype,"placeholder",void 0),X([q({converter:V,mode:"fromView"})],Fo.prototype,"cols",void 0),X([q({converter:V,mode:"fromView"})],Fo.prototype,"rows",void 0),X([q({mode:"boolean"})],Fo.prototype,"spellcheck",void 0),X([_],Fo.prototype,"defaultSlottedNodes",void 0),hi(Fo,No);const Bo=class extends Fo{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Text area")}}.compose({baseName:"text-area",template:(e,t)=>Et`
    <template
        class="
            ${e=>e.readOnly?"readonly":""}
            ${e=>e.resize!==Lo?`resize-${e.resize}`:""}"
    >
        <label
            part="label"
            for="control"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot ${Fi("defaultSlottedNodes")}></slot>
        </label>
        <textarea
            part="control"
            class="control"
            id="control"
            ?autofocus="${e=>e.autofocus}"
            cols="${e=>e.cols}"
            ?disabled="${e=>e.disabled}"
            form="${e=>e.form}"
            list="${e=>e.list}"
            maxlength="${e=>e.maxlength}"
            minlength="${e=>e.minlength}"
            name="${e=>e.name}"
            placeholder="${e=>e.placeholder}"
            ?readonly="${e=>e.readOnly}"
            ?required="${e=>e.required}"
            rows="${e=>e.rows}"
            ?spellcheck="${e=>e.spellcheck}"
            :value="${e=>e.value}"
            aria-atomic="${e=>e.ariaAtomic}"
            aria-busy="${e=>e.ariaBusy}"
            aria-controls="${e=>e.ariaControls}"
            aria-current="${e=>e.ariaCurrent}"
            aria-describedby="${e=>e.ariaDescribedby}"
            aria-details="${e=>e.ariaDetails}"
            aria-disabled="${e=>e.ariaDisabled}"
            aria-errormessage="${e=>e.ariaErrormessage}"
            aria-flowto="${e=>e.ariaFlowto}"
            aria-haspopup="${e=>e.ariaHaspopup}"
            aria-hidden="${e=>e.ariaHidden}"
            aria-invalid="${e=>e.ariaInvalid}"
            aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
            aria-label="${e=>e.ariaLabel}"
            aria-labelledby="${e=>e.ariaLabelledby}"
            aria-live="${e=>e.ariaLive}"
            aria-owns="${e=>e.ariaOwns}"
            aria-relevant="${e=>e.ariaRelevant}"
            aria-roledescription="${e=>e.ariaRoledescription}"
            @input="${(e,t)=>e.handleTextInput()}"
            @change="${e=>e.handleChange()}"
            ${li("control")}
        ></textarea>
    </template>
`,styles:(e,t)=>Pt`
	${At("inline-block")} :host {
		font-family: ${cn};
		outline: none;
		user-select: none;
	}
	.control {
		box-sizing: border-box;
		position: relative;
		color: ${Qn};
		background: ${Kn};
		border-radius: calc(${on} * 1px);
		border: calc(${tn} * 1px) solid ${Wn};
		font: inherit;
		font-size: ${pn};
		line-height: ${fn};
		padding: calc(${sn} * 2px + 1px);
		width: 100%;
		min-width: ${hn};
		resize: none;
	}
	.control:hover:enabled {
		background: ${Kn};
		border-color: ${Wn};
	}
	.control:active:enabled {
		background: ${Kn};
		border-color: ${ln};
	}
	.control:hover,
	.control:${$i},
	.control:disabled,
	.control:active {
		outline: none;
	}
	.control::-webkit-scrollbar {
		width: ${vn};
		height: ${bn};
	}
	.control::-webkit-scrollbar-corner {
		background: ${Kn};
	}
	.control::-webkit-scrollbar-thumb {
		background: ${yn};
	}
	.control::-webkit-scrollbar-thumb:hover {
		background: ${xn};
	}
	.control::-webkit-scrollbar-thumb:active {
		background: ${kn};
	}
	:host(:focus-within:not([disabled])) .control {
		border-color: ${ln};
	}
	:host([resize='both']) .control {
		resize: both;
	}
	:host([resize='horizontal']) .control {
		resize: horizontal;
	}
	:host([resize='vertical']) .control {
		resize: vertical;
	}
	.label {
		display: block;
		color: ${un};
		cursor: pointer;
		font-size: ${pn};
		line-height: ${fn};
		margin-bottom: 2px;
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	:host([disabled]) .label,
	:host([readonly]) .label,
	:host([readonly]) .control,
	:host([disabled]) .control {
		cursor: ${zi};
	}
	:host([disabled]) {
		opacity: ${an};
	}
	:host([disabled]) .control {
		border-color: ${Wn};
	}
`,shadowOptions:{delegatesFocus:!0}});function Uo(e,t,n){return e.nodeType!==Node.TEXT_NODE||"string"===typeof e.nodeValue&&!!e.nodeValue.trim().length}const $o=class extends Mo{connectedCallback(){super.connectedCallback(),this.textContent?this.setAttribute("aria-label",this.textContent):this.setAttribute("aria-label","Text field")}}.compose({baseName:"text-field",template:(e,t)=>Et`
    <template
        class="
            ${e=>e.readOnly?"readonly":""}
        "
    >
        <label
            part="label"
            for="control"
            class="${e=>e.defaultSlottedNodes&&e.defaultSlottedNodes.length?"label":"label label__hidden"}"
        >
            <slot
                ${Fi({property:"defaultSlottedNodes",filter:Uo})}
            ></slot>
        </label>
        <div class="root" part="root">
            ${di(0,t)}
            <input
                class="control"
                part="control"
                id="control"
                @input="${e=>e.handleTextInput()}"
                @change="${e=>e.handleChange()}"
                ?autofocus="${e=>e.autofocus}"
                ?disabled="${e=>e.disabled}"
                list="${e=>e.list}"
                maxlength="${e=>e.maxlength}"
                minlength="${e=>e.minlength}"
                pattern="${e=>e.pattern}"
                placeholder="${e=>e.placeholder}"
                ?readonly="${e=>e.readOnly}"
                ?required="${e=>e.required}"
                size="${e=>e.size}"
                ?spellcheck="${e=>e.spellcheck}"
                :value="${e=>e.value}"
                type="${e=>e.type}"
                aria-atomic="${e=>e.ariaAtomic}"
                aria-busy="${e=>e.ariaBusy}"
                aria-controls="${e=>e.ariaControls}"
                aria-current="${e=>e.ariaCurrent}"
                aria-describedby="${e=>e.ariaDescribedby}"
                aria-details="${e=>e.ariaDetails}"
                aria-disabled="${e=>e.ariaDisabled}"
                aria-errormessage="${e=>e.ariaErrormessage}"
                aria-flowto="${e=>e.ariaFlowto}"
                aria-haspopup="${e=>e.ariaHaspopup}"
                aria-hidden="${e=>e.ariaHidden}"
                aria-invalid="${e=>e.ariaInvalid}"
                aria-keyshortcuts="${e=>e.ariaKeyshortcuts}"
                aria-label="${e=>e.ariaLabel}"
                aria-labelledby="${e=>e.ariaLabelledby}"
                aria-live="${e=>e.ariaLive}"
                aria-owns="${e=>e.ariaOwns}"
                aria-relevant="${e=>e.ariaRelevant}"
                aria-roledescription="${e=>e.ariaRoledescription}"
                ${li("control")}
            />
            ${ui(0,t)}
        </div>
    </template>
`,styles:(e,t)=>Pt`
	${At("inline-block")} :host {
		font-family: ${cn};
		outline: none;
		user-select: none;
	}
	.root {
		box-sizing: border-box;
		position: relative;
		display: flex;
		flex-direction: row;
		color: ${Qn};
		background: ${Kn};
		border-radius: calc(${on} * 1px);
		border: calc(${tn} * 1px) solid ${Wn};
		height: calc(${dn} * 1px);
		min-width: ${hn};
	}
	.control {
		-webkit-appearance: none;
		font: inherit;
		background: transparent;
		border: 0;
		color: inherit;
		height: calc(100% - (${sn} * 1px));
		width: 100%;
		margin-top: auto;
		margin-bottom: auto;
		border: none;
		padding: 0 calc(${sn} * 2px + 1px);
		font-size: ${pn};
		line-height: ${fn};
	}
	.control:hover,
	.control:${$i},
	.control:disabled,
	.control:active {
		outline: none;
	}
	.label {
		display: block;
		color: ${un};
		cursor: pointer;
		font-size: ${pn};
		line-height: ${fn};
		margin-bottom: 2px;
	}
	.label__hidden {
		display: none;
		visibility: hidden;
	}
	.start,
	.end {
		display: flex;
		margin: auto;
		fill: currentcolor;
	}
	::slotted(svg),
	::slotted(span) {
		width: calc(${sn} * 4px);
		height: calc(${sn} * 4px);
	}
	.start {
		margin-inline-start: calc(${sn} * 2px);
	}
	.end {
		margin-inline-end: calc(${sn} * 2px);
	}
	:host(:hover:not([disabled])) .root {
		background: ${Kn};
		border-color: ${Wn};
	}
	:host(:active:not([disabled])) .root {
		background: ${Kn};
		border-color: ${ln};
	}
	:host(:focus-within:not([disabled])) .root {
		border-color: ${ln};
	}
	:host([disabled]) .label,
	:host([readonly]) .label,
	:host([readonly]) .control,
	:host([disabled]) .control {
		cursor: ${zi};
	}
	:host([disabled]) {
		opacity: ${an};
	}
	:host([disabled]) .control {
		border-color: ${Wn};
	}
`,shadowOptions:{delegatesFocus:!0}}),zo=Object.freeze({definitionCallbackOnly:null,ignoreDuplicate:Symbol()}),Vo=new Map,Ho=new Map;let qo=null;const Wo=de.createInterface((e=>e.cachedCallback((e=>(null===qo&&(qo=new Ko(null,e)),qo))))),Go=Object.freeze({tagFor:e=>Ho.get(e),responsibleFor(e){const t=e.$$designSystem$$;if(t)return t;return de.findResponsibleContainer(e).get(Wo)},getOrCreate(e){if(!e)return null===qo&&(qo=de.getOrCreateDOMContainer().get(Wo)),qo;const t=e.$$designSystem$$;if(t)return t;const n=de.getOrCreateDOMContainer(e);if(n.has(Wo,!1))return n.get(Wo);{const t=new Ko(e,n);return n.register(Ae.instance(Wo,t)),t}}});class Ko{constructor(e,t){this.owner=e,this.container=t,this.designTokensInitialized=!1,this.prefix="fast",this.shadowRootMode=void 0,this.disambiguate=()=>zo.definitionCallbackOnly,null!==e&&(e.$$designSystem$$=this)}withPrefix(e){return this.prefix=e,this}withShadowRootMode(e){return this.shadowRootMode=e,this}withElementDisambiguation(e){return this.disambiguate=e,this}withDesignTokenRoot(e){return this.designTokenRoot=e,this}register(){const e=this.container,t=[],n=this.disambiguate,i=this.shadowRootMode,r={elementPrefix:this.prefix,tryDefineElement(r,o,s){const a=function(e,t,n){return"string"===typeof e?{name:e,type:t,callback:n}:e}(r,o,s),{name:l,callback:c,baseClass:u}=a;let{type:d}=a,h=l,p=Vo.get(h),f=!0;for(;p;){const e=n(h,d,p);switch(e){case zo.ignoreDuplicate:return;case zo.definitionCallbackOnly:f=!1,p=void 0;break;default:h=e,p=Vo.get(h)}}f&&((Ho.has(d)||d===Ve)&&(d=class extends d{}),Vo.set(h,d),Ho.set(d,h),u&&Ho.set(u,h)),t.push(new Qo(e,h,d,i,c,f))}};this.designTokensInitialized||(this.designTokensInitialized=!0,null!==this.designTokenRoot&&Qt.registerRoot(this.designTokenRoot));for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];e.registerWithContext(r,...s);for(const l of t)l.callback(l),l.willDefine&&null!==l.definition&&l.definition.define();return this}}class Qo{constructor(e,t,n,i,r,o){this.container=e,this.name=t,this.type=n,this.shadowRootMode=i,this.callback=r,this.willDefine=o,this.definition=null}definePresentation(e){$e.define(this.name,e,this.container)}defineElement(e){this.definition=new Q(this.type,Object.assign(Object.assign({},e),{name:this.name}))}tagFor(e){return Go.tagFor(e)}}const{wrap:Xo}=function(e,t){let n=[];return{wrap:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var o,s;i instanceof qe&&(t?t.register(i):n.push(i),i=i.type);const a=Qe.get(i);if(a){const e=a.get(null!==(o=r.name)&&void 0!==o?o:Ke);if(e)return e}class l extends e.Component{constructor(){super(...arguments),this._element=null}_updateElement(e){const t=this._element;if(null===t)return;const n=this.props,i=e||Ge,o=Ye(r);for(const r in this._elementProps){const e=n[r],s=o[r];if(void 0===s)t[r]=e;else{const n=i[r];if(e===n)continue;void 0!==n&&t.removeEventListener(s,n),void 0!==e&&t.addEventListener(s,e)}}}componentDidMount(){this._updateElement()}componentDidUpdate(e){this._updateElement(e)}render(){const t=this.props.__forwardedRef;void 0!==this._ref&&this._userRef===t||(this._ref=e=>{null===this._element&&(this._element=e),null!==t&&function(e,t){"function"===typeof e?e(t):e.current=t}(t,e),this._userRef=t});const n={ref:this._ref},o=this._elementProps={},s=function(e,t){if(!t.keys)if(t.properties)t.keys=new Set(t.properties.concat(Object.keys(Ye(t))));else{const n=new Set(Object.keys(Ye(t))),i=E.getAccessors(e.prototype);if(i.length>0)for(const r of i)Je(e,t,r.name)&&n.add(r.name);else for(const r in e.prototype)!(r in HTMLElement.prototype)&&Je(e,t,r)&&n.add(r);t.keys=n}return t.keys}(i,r),a=this.props;for(const e in a){const t=a[e];s.has(e)?o[e]=t:n["className"===e?"class":e]=t}return e.createElement(Xe(i,r),n)}}const c=e.forwardRef(((t,n)=>e.createElement(l,Object.assign(Object.assign({},t),{__forwardedRef:n}),null===t||void 0===t?void 0:t.children)));return Qe.has(i)||Qe.set(i,new Map),Qe.get(i).set(null!==(s=r.name)&&void 0!==s?s:Ke,c),c},registry:{register(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];n.forEach((t=>t.register(e,...i))),n=[]}}}}(t,Go.getOrCreate(Yo).withPrefix("vscode"));var Yo;Xo(ii(),{name:"vscode-badge"});const Jo=Xo(Ki(),{name:"vscode-button"}),Zo=Xo(Ji(),{name:"vscode-checkbox",events:{onChange:"change"}}),es=(Xo(Dr(),{name:"vscode-data-grid"}),Xo(Lr(),{name:"vscode-data-grid-cell"}),Xo(jr(),{name:"vscode-data-grid-row"}),Xo($r(),{name:"vscode-divider"}),Xo(ao(),{name:"vscode-dropdown",events:{onChange:"change"}})),ts=Xo(uo(),{name:"vscode-link"}),ns=Xo(ho(),{name:"vscode-option"}),is=Xo(vo(),{name:"vscode-panels",events:{onChange:"change"}}),rs=Xo(bo(),{name:"vscode-panel-tab"}),os=Xo(yo(),{name:"vscode-panel-view"}),ss=Xo(ko(),{name:"vscode-progress-ring"}),as=Xo(To(),{name:"vscode-radio",events:{onChange:"change"}}),ls=Xo(Io(),{name:"vscode-radio-group",events:{onChange:"change"}}),cs=(Xo(Ro(),{name:"vscode-tag"}),Xo(Bo(),{name:"vscode-text-area",events:{onChange:"change",onInput:"input"}}),Xo($o(),{name:"vscode-text-field",events:{onChange:"change",onInput:"input"}}));var us=n(579);const ds=t.memo((e=>{let{isPro:t,onToggle:n}=e;return(0,us.jsxs)("div",{style:{marginRight:"10px"},children:[!t&&(0,us.jsx)(us.Fragment,{children:(0,us.jsx)(Jo,{onClick:n,style:{width:"100%",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-foreground)"},children:(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",display:"inline-block"},children:"Get Started"})})}),t&&(0,us.jsx)(us.Fragment,{children:(0,us.jsx)(Jo,{style:{cursor:"default",width:"100%"},children:(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",display:"inline-block"},children:"PRO"})})})]})}));const hs=new class{constructor(){this.vsCodeApi=void 0,"function"===typeof acquireVsCodeApi&&(this.vsCodeApi=acquireVsCodeApi())}postMessage(e){this.vsCodeApi?this.vsCodeApi.postMessage(e):console.log(e)}getState(){if(this.vsCodeApi)return this.vsCodeApi.getState();{const e=localStorage.getItem("vscodeState");return e?JSON.parse(e):void 0}}setState(e){return this.vsCodeApi?this.vsCodeApi.setState(e):(localStorage.setItem("vscodeState",JSON.stringify(e)),e)}},ps=t.memo((e=>{let{chatModeEnableDisable:t,setChatModeEnableDisable:n}=e;return(0,us.jsxs)("div",{className:"mode-switch",role:"switch","aria-checked":t,onClick:async()=>{await hs.postMessage({type:"toggleChatMode",chatModeEnabled:t})},children:[(0,us.jsx)("div",{className:"mode-label "+(t?"inactive":"active"),children:"Agent"}),(0,us.jsx)("div",{className:"mode-label "+(t?"active":"inactive"),children:"Chat"})]})}));var fs=n(4695),ms=n.n(fs);const gs=function(e,n,i){var r=(0,t.useRef)(void 0);r.current&&i(n,r.current)||(r.current=n),(0,t.useEffect)(e,r.current)};var vs=n(809);const bs=n.n(vs)();const ys=function(e,t){gs(e,t,bs)};const xs=function(e){(0,t.useEffect)(e,[])};const ks=function(e){xs((function(){e()}))};var ws=n(7950);const Ss=0,Cs=1,Ts=2,Es=4;function _s(e,t){return n=>e(t(n))}function Is(e,t){return t(e)}function Rs(e,t){return n=>e(t,n)}function Ps(e,t){return()=>e(t)}function As(e,t){return t(e),e}function Os(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t}function Ms(e){e()}function Ns(e){return()=>e}function Ds(e){return void 0!==e}function js(){}function Ls(e,t){return e(Cs,t)}function Fs(e,t){e(Ss,t)}function Bs(e){e(Ts)}function Us(e){return e(Es)}function $s(e,t){return Ls(e,Rs(t,Ss))}function zs(e,t){const n=e(Cs,(e=>{n(),t(e)}));return n}function Vs(){const e=[];return(t,n)=>{switch(t){case Ts:return void e.splice(0,e.length);case Cs:return e.push(n),()=>{const t=e.indexOf(n);t>-1&&e.splice(t,1)};case Ss:return void e.slice().forEach((e=>{e(n)}));default:throw new Error(`unrecognized action ${t}`)}}}function Hs(e){let t=e;const n=Vs();return(e,i)=>{switch(e){case Cs:i(t);break;case Ss:t=i;break;case Es:return t}return n(e,i)}}function qs(e){return As(Vs(),(t=>$s(e,t)))}function Ws(e,t){return As(Hs(t),(t=>$s(e,t)))}function Gs(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>t.reduceRight(Is,e)}(...n);return(t,n)=>{switch(t){case Cs:return Ls(e,r(n));case Ts:return void Bs(e)}}}function Ks(e,t){return e===t}function Qs(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ks;return n=>i=>{t(e,i)||(e=i,n(i))}}function Xs(e){return t=>n=>{e(n)&&t(n)}}function Ys(e){return t=>_s(t,e)}function Js(e){return t=>()=>t(e)}function Zs(e,t){return n=>i=>n(t=e(t,i))}function ea(e){return t=>n=>{e>0?e--:t(n)}}function ta(e){let t,n=null;return i=>r=>{n=r,t||(t=setTimeout((()=>{t=void 0,i(n)}),e))}}function na(e){let t,n;return i=>r=>{t=r,n&&clearTimeout(n),n=setTimeout((()=>{i(t)}),e)}}function ia(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=new Array(t.length);let r=0,o=null;const s=Math.pow(2,t.length)-1;return t.forEach(((e,t)=>{const n=Math.pow(2,t);Ls(e,(e=>{const a=r;r|=n,i[t]=e,a!==s&&r===s&&o&&(o(),o=null)}))})),e=>t=>{const n=()=>e([t].concat(i));r===s?n():o=n}}function ra(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e,n){switch(e){case Cs:return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return()=>{t.map(Ms)}}(...t.map((e=>Ls(e,n))));case Ts:return;default:throw new Error(`unrecognized action ${e}`)}}}function oa(e){return Gs(e,Qs(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ks))}function sa(){const e=Vs();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];const r=new Array(n.length);let o=0;const s=Math.pow(2,n.length)-1;return n.forEach(((t,n)=>{const i=Math.pow(2,n);Ls(t,(t=>{r[n]=t,o|=i,o===s&&Fs(e,r)}))})),function(t,n){switch(t){case Cs:return o===s&&n(r),Ls(e,n);case Ts:return Bs(e);default:throw new Error(`unrecognized action ${t}`)}}}function aa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{singleton:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{singleton:!0};return{id:la(),constructor:e,dependencies:t,singleton:n}}const la=()=>Symbol();const ca="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;function ua(e,n,i){const r=Object.keys(n.required||{}),o=Object.keys(n.optional||{}),s=Object.keys(n.methods||{}),a=Object.keys(n.events||{}),l=t.createContext({});function c(e,t){e.propsReady&&Fs(e.propsReady,!1);for(const i of r){Fs(e[n.required[i]],t[i])}for(const i of o)if(i in t){Fs(e[n.optional[i]],t[i])}e.propsReady&&Fs(e.propsReady,!0)}function u(e){return a.reduce(((t,i)=>(t[i]=function(e){let t,n;const i=()=>t&&t();return function(r,o){switch(r){case Cs:if(o){if(n===o)return;return i(),n=o,t=Ls(e,o),t}return i(),js;case Ts:return i(),void(n=null);default:throw new Error(`unrecognized action ${r}`)}}}(e[n.events[i]]),t)),{})}const d=t.forwardRef(((d,h)=>{const{children:p,...f}=d,[m]=t.useState((()=>As(function(e){const t=new Map,n=e=>{let{id:i,constructor:r,dependencies:o,singleton:s}=e;if(s&&t.has(i))return t.get(i);const a=r(o.map((e=>n(e))));return s&&t.set(i,a),a};return n(e)}(e),(e=>c(e,f))))),[g]=t.useState(Ps(u,m));return ca((()=>{for(const e of a)e in f&&Ls(g[e],f[e]);return()=>{Object.values(g).map(Bs)}}),[f,g,m]),ca((()=>{c(m,f)})),t.useImperativeHandle(h,Ns(function(e){return s.reduce(((t,i)=>(t[i]=t=>{Fs(e[n.methods[i]],t)},t)),{})}(m))),t.createElement(l.Provider,{value:m},i?t.createElement(i,function(e,t){const n={},i={};let r=0;const o=e.length;for(;r<o;)i[e[r]]=1,r+=1;for(const s in t)i.hasOwnProperty(s)||(n[s]=t[s]);return n}([...r,...o,...a],f),p):p)})),h=t.version.startsWith("18")?e=>{const n=t.useContext(l)[e],i=t.useCallback((e=>Ls(n,e)),[n]);return t.useSyncExternalStore(i,(()=>Us(n)),(()=>Us(n)))}:e=>{const n=t.useContext(l)[e],[i,r]=t.useState(Ps(Us,n));return ca((()=>Ls(n,(e=>{e!==i&&r(Ns(e))}))),[n,i]),i};return{Component:d,usePublisher:e=>t.useCallback(Rs(Fs,t.useContext(l)[e]),[e]),useEmitterValue:h,useEmitter:(e,n)=>{const i=t.useContext(l)[e];ca((()=>Ls(i,n)),[n,i])}}}const da="undefined"!==typeof document?t.useLayoutEffect:t.useEffect;var ha=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(ha||{});const pa={0:"debug",1:"log",2:"warn",3:"error"},fa=aa((()=>{const e=Hs(3);return{log:Hs((function(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;var r;i>=(null!=(r=("undefined"===typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?r:Us(e))&&console[pa[i]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)})),logLevel:e}}),[],{singleton:!0});function ma(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=t.useRef(null);let r=e=>{};if("undefined"!==typeof ResizeObserver){const o=t.useMemo((()=>new ResizeObserver((t=>{requestAnimationFrame((()=>{const n=t[0].target;null!==n.offsetParent&&e(n)}))}))),[e]);r=e=>{e&&n?(o.observe(e),i.current=e):(i.current&&o.unobserve(i.current),i.current=null)}}return{ref:i,callbackRef:r}}function ga(e){return ma(e,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]).callbackRef}function va(e,n,i,r,o,s,a){const l=t.useCallback((t=>{const i=function(e,t,n,i){const r=e.length;if(0===r)return null;const o=[];for(let s=0;s<r;s++){const r=e.item(s);if(!r||void 0===r.dataset.index)continue;const a=parseInt(r.dataset.index),l=parseFloat(r.dataset.knownSize),c=t(r,n);if(0===c&&i("Zero-sized element, this should not happen",{child:r},ha.ERROR),c===l)continue;const u=o[o.length-1];0===o.length||u.size!==c||u.endIndex!==a-1?o.push({startIndex:a,endIndex:a,size:c}):o[o.length-1].endIndex++}return o}(t.children,n,"offsetHeight",o);let l=t.parentElement;for(;!l.dataset.virtuosoScroller;)l=l.parentElement;const c="window"===l.lastElementChild.dataset.viewportType,u=a?a.scrollTop:c?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop,d=a?a.scrollHeight:c?document.documentElement.scrollHeight:l.scrollHeight,h=a?a.offsetHeight:c?window.innerHeight:l.offsetHeight;r({scrollTop:Math.max(u,0),scrollHeight:d,viewportHeight:h}),null==s||s(function(e,t,n){"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,ha.WARN);if("normal"===t)return 0;return parseInt(null!=t?t:"0",10)}("row-gap",getComputedStyle(t).rowGap,o)),null!==i&&e(i)}),[e,n,o,s,a,r]);return ma(l,i)}function ba(e,t){return Math.round(e.getBoundingClientRect()[t])}function ya(e,t){return Math.abs(e-t)<1.01}function xa(e,n,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:js,o=arguments.length>4?arguments[4]:void 0;const s=t.useRef(null),a=t.useRef(null),l=t.useRef(null),c=t.useCallback((t=>{const i=t.target,r=i===window||i===document,o=r?window.pageYOffset||document.documentElement.scrollTop:i.scrollTop,s=r?document.documentElement.scrollHeight:i.scrollHeight,c=r?window.innerHeight:i.offsetHeight,u=()=>{e({scrollTop:Math.max(o,0),scrollHeight:s,viewportHeight:c})};t.suppressFlushSync?u():ws.flushSync(u),null!==a.current&&(o===a.current||o<=0||o===s-c)&&(a.current=null,n(!0),l.current&&(clearTimeout(l.current),l.current=null))}),[e,n]);return t.useEffect((()=>{const e=o||s.current;return r(o||s.current),c({target:e,suppressFlushSync:!0}),e.addEventListener("scroll",c,{passive:!0}),()=>{r(null),e.removeEventListener("scroll",c)}}),[s,c,i,r,o]),{scrollerRef:s,scrollByCallback:function(e){s.current.scrollBy(e)},scrollToCallback:function(t){const i=s.current;if(!i||"offsetHeight"in i&&0===i.offsetHeight)return;const r="smooth"===t.behavior;let o,c,u;i===window?(c=Math.max(ba(document.documentElement,"height"),document.documentElement.scrollHeight),o=window.innerHeight,u=document.documentElement.scrollTop):(c=i.scrollHeight,o=ba(i,"height"),u=i.scrollTop);const d=c-o;if(t.top=Math.ceil(Math.max(Math.min(d,t.top),0)),ya(o,c)||t.top===u)return e({scrollTop:u,scrollHeight:c,viewportHeight:o}),void(r&&n(!0));r?(a.current=t.top,l.current&&clearTimeout(l.current),l.current=setTimeout((()=>{l.current=null,a.current=null,n(!0)}),1e3)):a.current=null,i.scrollTo(t)}}}const ka=aa((()=>{const e=Vs(),t=Vs(),n=Hs(0),i=Vs(),r=Hs(0),o=Vs(),s=Vs(),a=Hs(0),l=Hs(0),c=Hs(0),u=Hs(0),d=Vs(),h=Vs(),p=Hs(!1);return $s(Gs(e,Ys((e=>{let{scrollTop:t}=e;return t}))),t),$s(Gs(e,Ys((e=>{let{scrollHeight:t}=e;return t}))),s),$s(t,r),{scrollContainerState:e,scrollTop:t,viewportHeight:o,headerHeight:a,fixedHeaderHeight:l,fixedFooterHeight:c,footerHeight:u,scrollHeight:s,smoothScrollTargetReached:i,scrollTo:d,scrollBy:h,statefulScrollTop:r,deviation:n,scrollingInProgress:p}}),[],{singleton:!0}),wa={lvl:0};function Sa(e,t,n){return{k:e,v:t,lvl:n,l:arguments.length>3&&void 0!==arguments[3]?arguments[3]:wa,r:arguments.length>4&&void 0!==arguments[4]?arguments[4]:wa}}function Ca(e){return e===wa}function Ta(){return wa}function Ea(e,t){if(Ca(e))return wa;const{k:n,l:i,r:r}=e;if(t===n){if(Ca(i))return r;if(Ca(r))return i;{const[t,n]=Oa(i);return La(Na(e,{k:t,v:n,l:Ma(i)}))}}return La(Na(e,t<n?{l:Ea(i,t)}:{r:Ea(r,t)}))}function _a(e,t){if(!Ca(e))return t===e.k?e.v:t<e.k?_a(e.l,t):_a(e.r,t)}function Ia(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"k";if(Ca(e))return[-1/0,void 0];if(Number(e[n])===t)return[e.k,e.v];if(Number(e[n])<t){const i=Ia(e.r,t,n);return i[0]===-1/0?[e.k,e.v]:i}return Ia(e.l,t,n)}function Ra(e,t,n){return Ca(e)?Sa(t,n,1):t===e.k?Na(e,{k:t,v:n}):t<e.k?ja(Na(e,{l:Ra(e.l,t,n)})):ja(Na(e,{r:Ra(e.r,t,n)}))}function Pa(e,t,n){if(Ca(e))return[];const{k:i,v:r,l:o,r:s}=e;let a=[];return i>t&&(a=a.concat(Pa(o,t,n))),i>=t&&i<=n&&a.push({k:i,v:r}),i<=n&&(a=a.concat(Pa(s,t,n))),a}function Aa(e){return Ca(e)?[]:[...Aa(e.l),{k:e.k,v:e.v},...Aa(e.r)]}function Oa(e){return Ca(e.r)?[e.k,e.v]:Oa(e.r)}function Ma(e){return Ca(e.r)?e.l:La(Na(e,{r:Ma(e.r)}))}function Na(e,t){return Sa(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function Da(e){return Ca(e)||e.lvl>e.r.lvl}function ja(e){return Ua($a(e))}function La(e){const{l:t,r:n,lvl:i}=e;if(n.lvl>=i-1&&t.lvl>=i-1)return e;if(i>n.lvl+1){if(Da(t))return $a(Na(e,{lvl:i-1}));if(Ca(t)||Ca(t.r))throw new Error("Unexpected empty nodes");return Na(t.r,{l:Na(t,{r:t.r.l}),r:Na(e,{l:t.r.r,lvl:i-1}),lvl:i})}if(Da(e))return Ua(Na(e,{lvl:i-1}));if(Ca(n)||Ca(n.l))throw new Error("Unexpected empty nodes");{const t=n.l,r=Da(t)?n.lvl-1:n.lvl;return Na(t,{l:Na(e,{r:t.l,lvl:i-1}),r:Ua(Na(n,{l:t.r,lvl:r})),lvl:t.lvl+1})}}function Fa(e,t,n){if(Ca(e))return[];const i=Ia(e,t)[0];return Ba(Pa(e,i,n),(e=>{let{k:t,v:n}=e;return{index:t,value:n}}))}function Ba(e,t){const n=e.length;if(0===n)return[];let{index:i,value:r}=t(e[0]);const o=[];for(let s=1;s<n;s++){const{index:n,value:a}=t(e[s]);o.push({start:i,end:n-1,value:r}),i=n,r=a}return o.push({start:i,end:1/0,value:r}),o}function Ua(e){const{r:t,lvl:n}=e;return Ca(t)||Ca(t.r)||t.lvl!==n||t.r.lvl!==n?e:Na(t,{l:Na(e,{r:t.l}),lvl:n+1})}function $a(e){const{l:t}=e;return Ca(t)||t.lvl!==e.lvl?e:Na(t,{r:Na(e,{l:t.r})})}function za(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e.length-1;for(;i<=r;){const o=Math.floor((i+r)/2),s=n(e[o],t);if(0===s)return o;if(-1===s){if(r-i<2)return o-1;r=o-1}else{if(r===i)return o;i=o+1}}throw new Error(`Failed binary finding record in array - ${e.join(",")}, searched for ${t}`)}function Va(e,t,n){return e[za(e,t,n)]}const Ha=aa((()=>({recalcInProgress:Hs(!1)})),[],{singleton:!0});function qa(e){const{size:t,startIndex:n,endIndex:i}=e;return e=>e.start===n&&(e.end===i||e.end===1/0)&&e.value===t}function Wa(e,t){let n=0,i=0;for(;n<e;)n+=t[i+1]-t[i]-1,i++;return i-(n===e?0:1)}function Ga(e,t){let{index:n}=e;return t===n?0:t<n?-1:1}function Ka(e,t){let{offset:n}=e;return t===n?0:t<n?-1:1}function Qa(e){return{index:e.index,value:e}}function Xa(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return i>0&&(t=Math.max(t,Va(e,i,Ga).offset)),Ba(function(e,t,n,i){const r=za(e,t,i),o=za(e,n,i,r);return e.slice(r,o+1)}(e,t,n,Ka),Qa)}function Ya(e,t,n,i){let r=e,o=0,s=0,a=0,l=0;if(0!==t){l=za(r,t-1,Ga);a=r[l].offset;const e=Ia(n,t-1);o=e[0],s=e[1],r.length&&r[l].size===Ia(n,t)[1]&&(l-=1),r=r.slice(0,l+1)}else r=[];for(const{start:c,value:u}of Fa(n,t,1/0)){const e=c-o,t=e*s+a+e*i;r.push({offset:t,size:u,index:c}),o=c,a=t,s=u}return{offsetTree:r,lastIndex:o,lastOffset:a,lastSize:s}}function Ja(e,t){let[n,i,r,o]=t;n.length>0&&r("received item sizes",n,ha.DEBUG);const s=e.sizeTree;let a=s,l=0;if(i.length>0&&Ca(s)&&2===n.length){const e=n[0].size,t=n[1].size;a=i.reduce(((n,i)=>Ra(Ra(n,i,e),i+1,t)),a)}else[a,l]=function(e,t){let n=Ca(e)?0:1/0;for(const i of t){const{size:t,startIndex:r,endIndex:o}=i;if(n=Math.min(n,r),Ca(e)){e=Ra(e,0,t);continue}const s=Fa(e,r-1,o+1);if(s.some(qa(i)))continue;let a=!1,l=!1;for(const{start:n,end:i,value:c}of s)a?(o>=n||t===c)&&(e=Ea(e,n)):(l=c!==t,a=!0),i>o&&o>=n&&c!==t&&(e=Ra(e,o+1,c));l&&(e=Ra(e,r,t))}return[e,n]}(a,n);if(a===s)return e;const{offsetTree:c,lastIndex:u,lastSize:d,lastOffset:h}=Ya(e.offsetTree,l,a,o);return{sizeTree:a,offsetTree:c,lastIndex:u,lastOffset:h,lastSize:d,groupOffsetTree:i.reduce(((e,t)=>Ra(e,t,Za(t,c,o))),Ta()),groupIndices:i}}function Za(e,t,n){if(0===t.length)return 0;const{offset:i,index:r,size:o}=Va(t,e,Ga),s=e-r,a=o*s+(s-1)*n+i;return a>0?a+n:a}function el(e,t,n){if(function(e){return"undefined"!==typeof e.groupIndex}(e))return t.groupIndices[e.groupIndex]+1;{let i=tl("LAST"===e.index?n:e.index,t);return i=Math.max(0,i,Math.min(n,i)),i}}function tl(e,t){if(!nl(t))return e;let n=0;for(;t.groupIndices[n]<=e+n;)n++;return e+n}function nl(e){return!Ca(e.groupOffsetTree)}const il={offsetHeight:"height",offsetWidth:"width"},rl=aa((e=>{let[{log:t},{recalcInProgress:n}]=e;const i=Vs(),r=Vs(),o=Ws(r,0),s=Vs(),a=Vs(),l=Hs(0),c=Hs([]),u=Hs(void 0),d=Hs(void 0),h=Hs(((e,t)=>ba(e,il[t]))),p=Hs(void 0),f=Hs(0),m={offsetTree:[],sizeTree:Ta(),groupOffsetTree:Ta(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},g=Ws(Gs(i,ia(c,t,f),Zs(Ja,m),Qs()),m),v=Ws(Gs(c,Qs(),Zs(((e,t)=>({prev:e.current,current:t})),{prev:[],current:[]}),Ys((e=>{let{prev:t}=e;return t}))),[]);$s(Gs(c,Xs((e=>e.length>0)),ia(g,f),Ys((e=>{let[t,n,i]=e;const r=t.reduce(((e,t,r)=>Ra(e,t,Za(t,n.offsetTree,i)||r)),Ta());return{...n,groupIndices:t,groupOffsetTree:r}}))),g),$s(Gs(r,ia(g),Xs((e=>{let[t,{lastIndex:n}]=e;return t<n})),Ys((e=>{let[t,{lastIndex:n,lastSize:i}]=e;return[{startIndex:t,endIndex:n,size:i}]}))),i),$s(u,d);const b=Ws(Gs(u,Ys((e=>void 0===e))),!0);$s(Gs(d,Xs((e=>void 0!==e&&Ca(Us(g).sizeTree))),Ys((e=>[{startIndex:0,endIndex:0,size:e}]))),i);const y=qs(Gs(i,ia(g),Zs(((e,t)=>{let{sizes:n}=e,[i,r]=t;return{changed:r!==n,sizes:r}}),{changed:!1,sizes:m}),Ys((e=>e.changed))));Ls(Gs(l,Zs(((e,t)=>({diff:e.prev-t,prev:t})),{diff:0,prev:0}),Ys((e=>e.diff))),(e=>{const{groupIndices:t}=Us(g);if(e>0)Fs(n,!0),Fs(s,e+Wa(e,t));else if(e<0){const t=Us(v);t.length>0&&(e-=Wa(-e,t)),Fs(a,e)}})),Ls(Gs(l,ia(t)),(e=>{let[t,n]=e;t<0&&n("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:l},ha.ERROR)}));const x=qs(s);$s(Gs(s,ia(g),Ys((e=>{let[t,n]=e;const i=n.groupIndices.length>0,r=[],o=n.lastSize;if(i){const e=_a(n.sizeTree,0);let i=0,s=0;for(;i<t;){const t=n.groupIndices[s],a=n.groupIndices.length===s+1?1/0:n.groupIndices[s+1]-t-1;r.push({startIndex:t,endIndex:t,size:e}),r.push({startIndex:t+1,endIndex:t+1+a-1,size:o}),s++,i+=a+1}const a=Aa(n.sizeTree);return i!==t&&a.shift(),a.reduce(((e,n)=>{let{k:i,v:r}=n,o=e.ranges;return 0!==e.prevSize&&(o=[...e.ranges,{startIndex:e.prevIndex,endIndex:i+t-1,size:e.prevSize}]),{ranges:o,prevIndex:i+t,prevSize:r}}),{ranges:r,prevIndex:t,prevSize:0}).ranges}return Aa(n.sizeTree).reduce(((e,n)=>{let{k:i,v:r}=n;return{ranges:[...e.ranges,{startIndex:e.prevIndex,endIndex:i+t-1,size:e.prevSize}],prevIndex:i+t,prevSize:r}}),{ranges:[],prevIndex:0,prevSize:o}).ranges}))),i);const k=qs(Gs(a,ia(g,f),Ys((e=>{let[t,{offsetTree:n},i]=e;return Za(-t,n,i)}))));return $s(Gs(a,ia(g,f),Ys((e=>{let[t,n,i]=e;if(n.groupIndices.length>0){if(Ca(n.sizeTree))return n;let e=Ta();const r=Us(v);let o=0,s=0,a=0;for(;o<-t;){a=r[s];const e=r[s+1]-a-1;s++,o+=e+1}e=Aa(n.sizeTree).reduce(((e,n)=>{let{k:i,v:r}=n;return Ra(e,Math.max(0,i+t),r)}),e);if(o!==-t){e=Ra(e,0,_a(n.sizeTree,a));e=Ra(e,1,Ia(n.sizeTree,1-t)[1])}return{...n,sizeTree:e,...Ya(n.offsetTree,0,e,i)}}{const e=Aa(n.sizeTree).reduce(((e,n)=>{let{k:i,v:r}=n;return Ra(e,Math.max(0,i+t),r)}),Ta());return{...n,sizeTree:e,...Ya(n.offsetTree,0,e,i)}}}))),g),{data:p,totalCount:r,sizeRanges:i,groupIndices:c,defaultItemSize:d,fixedItemSize:u,unshiftWith:s,shiftWith:a,shiftWithOffset:k,beforeUnshiftWith:x,firstItemIndex:l,gap:f,sizes:g,listRefresh:y,statefulTotalCount:o,trackItemSizes:b,itemSize:h}}),Os(fa,Ha),{singleton:!0}),ol="undefined"!==typeof document&&"scrollBehavior"in document.documentElement.style;function sl(e){const t="number"===typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&ol||(t.behavior="auto"),t.offset||(t.offset=0),t}const al=aa((e=>{let[{sizes:t,totalCount:n,listRefresh:i,gap:r},{scrollingInProgress:o,viewportHeight:s,scrollTo:a,smoothScrollTargetReached:l,headerHeight:c,footerHeight:u,fixedHeaderHeight:d,fixedFooterHeight:h},{log:p}]=e;const f=Vs(),m=Vs(),g=Hs(0);let v=null,b=null,y=null;function x(){v&&(v(),v=null),y&&(y(),y=null),b&&(clearTimeout(b),b=null),Fs(o,!1)}return $s(Gs(f,ia(t,s,n,g,c,u,p),ia(r,d,h),Ys((e=>{let[[t,n,r,s,a,c,u,d],h,p,g]=e;const k=sl(t),{align:w,behavior:S,offset:C}=k,T=s-1,E=el(k,n,T);let _=Za(E,n.offsetTree,h)+c;"end"===w?(_+=p+Ia(n.sizeTree,E)[1]-r+g,E===T&&(_+=u)):"center"===w?_+=(p+Ia(n.sizeTree,E)[1]-r+g)/2:_-=a,C&&(_+=C);const I=e=>{x(),e?(d("retrying to scroll to",{location:t},ha.DEBUG),Fs(f,t)):(Fs(m,!0),d("list did not change, scroll successful",{},ha.DEBUG))};if(x(),"smooth"===S){let e=!1;y=Ls(i,(t=>{e=e||t})),v=zs(l,(()=>{I(e)}))}else v=zs(Gs(i,function(e){return t=>{const n=setTimeout((()=>{t(!1)}),e);return e=>{e&&(t(!0),clearTimeout(n))}}}(150)),I);return b=setTimeout((()=>{x()}),1200),Fs(o,!0),d("scrolling from index to",{index:E,top:_,behavior:S},ha.DEBUG),{top:_,behavior:S}}))),a),{scrollToIndex:f,scrollTargetReached:m,topListHeight:g}}),Os(rl,ka,fa),{singleton:!0});const ll="up",cl="down",ul={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},dl=aa((e=>{let[{scrollContainerState:t,scrollTop:n,viewportHeight:i,headerHeight:r,footerHeight:o,scrollBy:s}]=e;const a=Hs(!1),l=Hs(!0),c=Vs(),u=Vs(),d=Hs(4),h=Hs(0),p=Ws(Gs(ra(Gs(oa(n),ea(1),Js(!0)),Gs(oa(n),ea(1),Js(!1),na(100))),Qs()),!1),f=Ws(Gs(ra(Gs(s,Js(!0)),Gs(s,Js(!1),na(200))),Qs()),!1);$s(Gs(sa(oa(n),oa(h)),Ys((e=>{let[t,n]=e;return t<=n})),Qs()),l),$s(Gs(l,ta(50)),u);const m=qs(Gs(sa(t,oa(i),oa(r),oa(o),oa(d)),Zs(((e,t)=>{let[{scrollTop:n,scrollHeight:i},r,o,s,a]=t;const l={viewportHeight:r,scrollTop:n,scrollHeight:i};if(n+r-i>-a){let t,i;return n>e.state.scrollTop?(t="SCROLLED_DOWN",i=e.state.scrollTop-n):(t="SIZE_DECREASED",i=e.state.scrollTop-n||e.scrollTopDelta),{atBottom:!0,state:l,atBottomBecause:t,scrollTopDelta:i}}let c;return c=l.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":r<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":n<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",{atBottom:!1,notAtBottomBecause:c,state:l}}),ul),Qs(((e,t)=>e&&e.atBottom===t.atBottom)))),g=Ws(Gs(t,Zs(((e,t)=>{let{scrollTop:n,scrollHeight:i,viewportHeight:r}=t;if(ya(e.scrollHeight,i))return{scrollTop:n,scrollHeight:i,jump:0,changed:!1};{const t=i-(n+r)<1;return e.scrollTop!==n&&t?{scrollHeight:i,scrollTop:n,jump:e.scrollTop-n,changed:!0}:{scrollHeight:i,scrollTop:n,jump:0,changed:!0}}}),{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),Xs((e=>e.changed)),Ys((e=>e.jump))),0);$s(Gs(m,Ys((e=>e.atBottom))),a),$s(Gs(a,ta(50)),c);const v=Hs(cl);$s(Gs(t,Ys((e=>{let{scrollTop:t}=e;return t})),Qs(),Zs(((e,t)=>Us(f)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?ll:cl,prevScrollTop:t}),{direction:cl,prevScrollTop:0}),Ys((e=>e.direction))),v),$s(Gs(t,ta(50),Js("none")),v);const b=Hs(0);return $s(Gs(p,Xs((e=>!e)),Js(0)),b),$s(Gs(n,ta(100),ia(p),Xs((e=>{let[t,n]=e;return!!n})),Zs(((e,t)=>{let[n,i]=e,[r]=t;return[i,r]}),[0,0]),Ys((e=>{let[t,n]=e;return n-t}))),b),{isScrolling:p,isAtTop:l,isAtBottom:a,atBottomState:m,atTopStateChange:u,atBottomStateChange:c,scrollDirection:v,atBottomThreshold:d,atTopThreshold:h,scrollVelocity:b,lastJumpDueToItemResize:g}}),Os(ka)),hl=aa((e=>{let[{log:t}]=e;const n=Hs(!1),i=qs(Gs(n,Xs((e=>e)),Qs()));return Ls(n,(e=>{e&&Us(t)("props updated",{},ha.DEBUG)})),{propsReady:n,didMount:i}}),Os(fa),{singleton:!0});function pl(e,t){0==e?t():requestAnimationFrame((()=>pl(e-1,t)))}function fl(e,t){const n=t-1;return"number"===typeof e?e:"LAST"===e.index?n:e.index}const ml=aa((e=>{let[{sizes:t,listRefresh:n,defaultItemSize:i},{scrollTop:r},{scrollToIndex:o,scrollTargetReached:s},{didMount:a}]=e;const l=Hs(!0),c=Hs(0),u=Hs(!0);return $s(Gs(a,ia(c),Xs((e=>{let[t,n]=e;return!!n})),Js(!1)),l),$s(Gs(a,ia(c),Xs((e=>{let[t,n]=e;return!!n})),Js(!1)),u),Ls(Gs(sa(n,a),ia(l,t,i,u),Xs((e=>{let[[,t],n,{sizeTree:i},r,o]=e;return t&&(!Ca(i)||Ds(r))&&!n&&!o})),ia(c)),(e=>{let[,t]=e;zs(s,(()=>{Fs(u,!0)})),pl(4,(()=>{zs(r,(()=>{Fs(l,!0)})),Fs(o,t)}))})),{scrolledToInitialItem:l,initialTopMostItemIndex:c,initialItemFinalLocationReached:u}}),Os(rl,ka,al,hl),{singleton:!0});function gl(e){return!!e&&("smooth"===e?"smooth":"auto")}const vl=aa((e=>{let[{totalCount:t,listRefresh:n},{isAtBottom:i,atBottomState:r},{scrollToIndex:o},{scrolledToInitialItem:s},{propsReady:a,didMount:l},{log:c},{scrollingInProgress:u}]=e;const d=Hs(!1),h=Vs();let p=null;function f(e){Fs(o,{index:"LAST",align:"end",behavior:e})}function m(e){const t=zs(r,(t=>{!e||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||p||(Us(c)("scrolling to bottom due to increased size",{},ha.DEBUG),f("auto"))}));setTimeout(t,100)}return Ls(Gs(sa(Gs(oa(t),ea(1)),l),ia(oa(d),i,s,u),Ys((e=>{let[[t,n],i,r,o,s]=e,a=n&&o,l="auto";return a&&(l=((e,t)=>"function"===typeof e?gl(e(t)):t&&gl(e))(i,r||s),a=a&&!!l),{totalCount:t,shouldFollow:a,followOutputBehavior:l}})),Xs((e=>{let{shouldFollow:t}=e;return t}))),(e=>{let{totalCount:t,followOutputBehavior:i}=e;p&&(p(),p=null),p=zs(n,(()=>{Us(c)("following output to ",{totalCount:t},ha.DEBUG),f(i),p=null}))})),Ls(Gs(sa(oa(d),t,a),Xs((e=>{let[t,,n]=e;return t&&n})),Zs(((e,t)=>{let{value:n}=e,[,i]=t;return{refreshed:n===i,value:i}}),{refreshed:!1,value:0}),Xs((e=>{let{refreshed:t}=e;return t})),ia(d,t)),(e=>{let[,t]=e;Us(s)&&m(!1!==t)})),Ls(h,(()=>{m(!1!==Us(d))})),Ls(sa(oa(d),r),(e=>{let[t,n]=e;t&&!n.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===n.notAtBottomBecause&&f("auto")})),{followOutput:d,autoscrollToBottom:h}}),Os(rl,dl,al,ml,hl,fa,ka));function bl(e){return e.reduce(((e,t)=>(e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e)),{totalCount:0,groupIndices:[]})}const yl=aa((e=>{let[{totalCount:t,groupIndices:n,sizes:i},{scrollTop:r,headerHeight:o}]=e;const s=Vs(),a=Vs(),l=qs(Gs(s,Ys(bl)));return $s(Gs(l,Ys((e=>e.totalCount))),t),$s(Gs(l,Ys((e=>e.groupIndices))),n),$s(Gs(sa(r,i,o),Xs((e=>{let[t,n]=e;return nl(n)})),Ys((e=>{let[t,n,i]=e;return Ia(n.groupOffsetTree,Math.max(t-i,0),"v")[0]})),Qs(),Ys((e=>[e]))),a),{groupCounts:s,topItemsIndexes:a}}),Os(rl,ka));function xl(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function kl(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}const wl="top",Sl="bottom",Cl="none";function Tl(e,t,n){return"number"===typeof e?n===ll&&t===wl||n===cl&&t===Sl?e:0:n===ll?t===wl?e.main:e.reverse:t===Sl?e.main:e.reverse}function El(e,t){return"number"===typeof e?e:e[t]||0}const _l=aa((e=>{let[{scrollTop:t,viewportHeight:n,deviation:i,headerHeight:r,fixedHeaderHeight:o}]=e;const s=Vs(),a=Hs(0),l=Hs(0),c=Hs(0),u=Ws(Gs(sa(oa(t),oa(n),oa(r),oa(s,xl),oa(c),oa(a),oa(o),oa(i),oa(l)),Ys((e=>{let[t,n,i,[r,o],s,a,l,c,u]=e;const d=t-c,h=a+l,p=Math.max(i-d,0);let f=Cl;const m=El(u,wl),g=El(u,Sl);return r-=c,r+=i+l,o+=i+l,o-=c,r>t+h-m&&(f=ll),o<t-p+n+g&&(f=cl),f!==Cl?[Math.max(d-i-Tl(s,wl,f)-m,0),d-p-l+n+Tl(s,Sl,f)+g]:null})),Xs((e=>null!=e)),Qs(xl)),[0,0]);return{listBoundary:s,overscan:c,topListHeight:a,increaseViewportBy:l,visibleRange:u}}),Os(ka),{singleton:!0});const Il={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0,firstItemIndex:0};function Rl(e,t,n){if(0===e.length)return[];if(!nl(t))return e.map((e=>({...e,index:e.index+n,originalIndex:e.index})));const i=e[0].index,r=e[e.length-1].index,o=[],s=Fa(t.groupOffsetTree,i,r);let a,l=0;for(const c of e){let e;(!a||a.end<c.index)&&(a=s.shift(),l=t.groupIndices.indexOf(a.start)),e=c.index===a.start?{type:"group",index:l}:{index:c.index-(l+1)+n,groupIndex:l},o.push({...e,size:c.size,offset:c.offset,originalIndex:c.index,data:c.data})}return o}function Pl(e,t,n,i,r,o){const{lastSize:s,lastOffset:a,lastIndex:l}=r;let c=0,u=0;if(e.length>0){c=e[0].offset;const t=e[e.length-1];u=t.offset+t.size}const d=n-l,h=c,p=a+d*s+(d-1)*i-u;return{items:Rl(e,r,o),topItems:Rl(t,r,o),topListHeight:t.reduce(((e,t)=>t.size+e),0),offsetTop:c,offsetBottom:p,top:h,bottom:u,totalCount:n,firstItemIndex:o}}function Al(e,t,n,i,r,o){let s=0;if(n.groupIndices.length>0)for(const u of n.groupIndices){if(u-s>=e)break;s++}const a=e+s,l=fl(t,a),c=Array.from({length:a}).map(((e,t)=>({index:t+l,size:0,offset:0,data:o[t+l]})));return Pl(c,[],a,r,n,i)}const Ol=aa((e=>{let[{sizes:t,totalCount:n,data:i,firstItemIndex:r,gap:o},s,{visibleRange:a,listBoundary:l,topListHeight:c},{scrolledToInitialItem:u,initialTopMostItemIndex:d},{topListHeight:h},p,{didMount:f},{recalcInProgress:m}]=e;const g=Hs([]),v=Hs(0),b=Vs();$s(s.topItemsIndexes,g);const y=Ws(Gs(sa(f,m,oa(a,xl),oa(n),oa(t),oa(d),u,oa(g),oa(r),oa(o),i),Xs((e=>{let[t,n,,i,,,,,,,r]=e;const o=r&&r.length!==i;return t&&!n&&!o})),Ys((e=>{let[,,[t,n],i,r,o,s,a,l,c,u]=e;const d=r,{sizeTree:h,offsetTree:p}=d,f=Us(v);if(0===i)return{...Il,totalCount:i};if(0===t&&0===n)return 0===f?{...Il,totalCount:i}:Al(f,o,r,l,c,u||[]);if(Ca(h)){if(f>0)return null;const e=Pl(function(e,t,n){if(nl(t)){const i=tl(e,t);return[{index:Ia(t.groupOffsetTree,i)[0],size:0,offset:0},{index:i,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(fl(o,i),d,u),[],i,c,d,l);return e}const m=[];if(a.length>0){const e=a[0],t=a[a.length-1];let n=0;for(const i of Fa(h,e,t)){const r=i.value,o=Math.max(i.start,e),s=Math.min(i.end,t);for(let e=o;e<=s;e++)m.push({index:e,size:r,offset:n,data:u&&u[e]}),n+=r}}if(!s)return Pl([],m,i,c,d,l);const g=a.length>0?a[a.length-1]+1:0,b=Xa(p,t,n,g);if(0===b.length)return null;const y=i-1,x=As([],(e=>{for(const i of b){const r=i.value;let o=r.offset,s=i.start;const a=r.size;if(r.offset<t){s+=Math.floor((t-r.offset+c)/(a+c));const e=s-i.start;o+=e*a+e*c}s<g&&(o+=(g-s)*a,s=g);const l=Math.min(i.end,y);for(let t=s;t<=l&&!(o>=n);t++)e.push({index:t,size:a,offset:o,data:u&&u[t]}),o+=a+c}}));return Pl(x,m,i,c,d,l)})),Xs((e=>null!==e)),Qs()),Il);$s(Gs(i,Xs(Ds),Ys((e=>null==e?void 0:e.length))),n),$s(Gs(y,Ys((e=>e.topListHeight))),h),$s(h,c),$s(Gs(y,Ys((e=>[e.top,e.bottom]))),l),$s(Gs(y,Ys((e=>e.items))),b);return{listState:y,topItemsIndexes:g,endReached:qs(Gs(y,Xs((e=>{let{items:t}=e;return t.length>0})),ia(n,i),Xs((e=>{let[{items:t},n]=e;return t[t.length-1].originalIndex===n-1})),Ys((e=>{let[,t,n]=e;return[t-1,n]})),Qs(xl),Ys((e=>{let[t]=e;return t})))),startReached:qs(Gs(y,ta(200),Xs((e=>{let{items:t,topItems:n}=e;return t.length>0&&t[0].originalIndex===n.length})),Ys((e=>{let{items:t}=e;return t[0].index})),Qs())),rangeChanged:qs(Gs(y,Xs((e=>{let{items:t}=e;return t.length>0})),Ys((e=>{let{items:t}=e,n=0,i=t.length-1;for(;"group"===t[n].type&&n<i;)n++;for(;"group"===t[i].type&&i>n;)i--;return{startIndex:t[n].index,endIndex:t[i].index}})),Qs(kl))),itemsRendered:b,initialItemCount:v,...p}}),Os(rl,yl,_l,ml,al,dl,hl,Ha),{singleton:!0}),Ml=aa((e=>{let[{sizes:t,firstItemIndex:n,data:i,gap:r},{initialTopMostItemIndex:o},{initialItemCount:s,listState:a},{didMount:l}]=e;return $s(Gs(l,ia(s),Xs((e=>{let[,t]=e;return 0!==t})),ia(o,t,n,r,i),Ys((e=>{let[[,t],n,i,r,o,s=[]]=e;return Al(t,n,i,r,o,s)}))),a),{}}),Os(rl,ml,Ol,hl),{singleton:!0}),Nl=aa((e=>{let[{scrollVelocity:t}]=e;const n=Hs(!1),i=Vs(),r=Hs(!1);return $s(Gs(t,ia(r,n,i),Xs((e=>{let[t,n]=e;return!!n})),Ys((e=>{let[t,n,i,r]=e;const{exit:o,enter:s}=n;if(i){if(o(t,r))return!1}else if(s(t,r))return!0;return i})),Qs()),n),Ls(Gs(sa(n,t,i),ia(r)),(e=>{let[[t,n,i],r]=e;return t&&r&&r.change&&r.change(n,i)})),{isSeeking:n,scrollSeekConfiguration:r,scrollVelocity:t,scrollSeekRangeChanged:i}}),Os(dl),{singleton:!0}),Dl=aa((e=>{let[{topItemsIndexes:t}]=e;const n=Hs(0);return $s(Gs(n,Xs((e=>e>0)),Ys((e=>Array.from({length:e}).map(((e,t)=>t))))),t),{topItemCount:n}}),Os(Ol)),jl=aa((e=>{let[{footerHeight:t,headerHeight:n,fixedHeaderHeight:i,fixedFooterHeight:r},{listState:o}]=e;const s=Vs(),a=Ws(Gs(sa(t,r,n,i,o),Ys((e=>{let[t,n,i,r,o]=e;return t+n+i+r+o.offsetBottom+o.bottom}))),0);return $s(oa(a),s),{totalListHeight:a,totalListHeightChanged:s}}),Os(ka,Ol),{singleton:!0});function Ll(e){let t,n=!1;return()=>(n||(n=!0,t=e()),t)}const Fl=Ll((()=>/iP(ad|od|hone)/i.test(navigator.userAgent)&&/WebKit/i.test(navigator.userAgent))),Bl=aa((e=>{let[{scrollBy:t,scrollTop:n,deviation:i,scrollingInProgress:r},{isScrolling:o,isAtBottom:s,scrollDirection:a,lastJumpDueToItemResize:l},{listState:c},{beforeUnshiftWith:u,shiftWithOffset:d,sizes:h,gap:p},{log:f},{recalcInProgress:m}]=e;const g=qs(Gs(c,ia(l),Zs(((e,t)=>{let[,n,i,r]=e,[{items:o,totalCount:s,bottom:a,offsetBottom:l},c]=t;const u=a+l;let d=0;if(i===s&&n.length>0&&o.length>0){0===o[0].originalIndex&&0===n[0].originalIndex||(d=u-r,0!==d&&(d+=c))}return[d,o,s,u]}),[0,[],0,0]),Xs((e=>{let[t]=e;return 0!==t})),ia(n,a,r,s,f,m),Xs((e=>{let[,t,n,i,,,r]=e;return!r&&!i&&0!==t&&n===ll})),Ys((e=>{let[[t],,,,,n]=e;return n("Upward scrolling compensation",{amount:t},ha.DEBUG),t}))));function v(e){e>0?(Fs(t,{top:-e,behavior:"auto"}),Fs(i,0)):(Fs(i,0),Fs(t,{top:-e,behavior:"auto"}))}return Ls(Gs(g,ia(i,o)),(e=>{let[t,n,r]=e;r&&Fl()?Fs(i,n-t):v(-t)})),Ls(Gs(sa(Ws(o,!1),i,m),Xs((e=>{let[t,n,i]=e;return!t&&!i&&0!==n})),Ys((e=>{let[t,n]=e;return n})),ta(1)),v),$s(Gs(d,Ys((e=>({top:-e})))),t),Ls(Gs(u,ia(h,p),Ys((e=>{let[t,{lastSize:n,groupIndices:i,sizeTree:r},o]=e;function s(e){return e*(n+o)}if(0===i.length)return s(t);{let e=0;const n=_a(r,0);let o=0,a=0;for(;o<t;){o++,e+=n;let r=i.length===a+1?1/0:i[a+1]-i[a]-1;o+r>t&&(e-=n,r=t-o+1),o+=r,e+=s(r),a++}return e}}))),(e=>{Fs(i,e),requestAnimationFrame((()=>{Fs(t,{top:e}),requestAnimationFrame((()=>{Fs(i,0),Fs(m,!1)}))}))})),{deviation:i}}),Os(ka,dl,Ol,rl,fa,Ha)),Ul=aa((e=>{let[{didMount:t},{scrollTo:n},{listState:i}]=e;const r=Hs(0);return Ls(Gs(t,ia(r),Xs((e=>{let[,t]=e;return 0!==t})),Ys((e=>{let[,t]=e;return{top:t}}))),(e=>{zs(Gs(i,ea(1),Xs((e=>e.items.length>1))),(()=>{requestAnimationFrame((()=>{Fs(n,e)}))}))})),{initialScrollTop:r}}),Os(hl,ka,Ol),{singleton:!0}),$l=aa((e=>{let[{viewportHeight:t},{totalListHeight:n}]=e;const i=Hs(!1);return{alignToBottom:i,paddingTopAddition:Ws(Gs(sa(i,t,n),Xs((e=>{let[t]=e;return t})),Ys((e=>{let[,t,n]=e;return Math.max(0,t-n)})),ta(0),Qs()),0)}}),Os(ka,jl),{singleton:!0}),zl=aa((e=>{let[{scrollTo:t,scrollContainerState:n}]=e;const i=Vs(),r=Vs(),o=Vs(),s=Hs(!1),a=Hs(void 0);return $s(Gs(sa(i,r),Ys((e=>{let[{viewportHeight:t,scrollTop:n,scrollHeight:i},{offsetTop:r}]=e;return{scrollTop:Math.max(0,n-r),scrollHeight:i,viewportHeight:t}}))),n),$s(Gs(t,ia(r),Ys((e=>{let[t,{offsetTop:n}]=e;return{...t,top:t.top+n}}))),o),{useWindowScroll:s,customScrollParent:a,windowScrollContainerState:i,windowViewportRect:r,windowScrollTo:o}}),Os(ka)),Vl=e=>{let{itemTop:t,itemBottom:n,viewportTop:i,viewportBottom:r,locationParams:{behavior:o,align:s,...a}}=e;return t<i?{...a,behavior:o,align:null!=s?s:"start"}:n>r?{...a,behavior:o,align:null!=s?s:"end"}:null},Hl=aa((e=>{let[{sizes:t,totalCount:n,gap:i},{scrollTop:r,viewportHeight:o,headerHeight:s,fixedHeaderHeight:a,fixedFooterHeight:l,scrollingInProgress:c},{scrollToIndex:u}]=e;const d=Vs();return $s(Gs(d,ia(t,o,n,s,a,l,r),ia(i),Ys((e=>{let[[t,n,i,r,o,s,a,l],u]=e;const{done:d,behavior:h,align:p,calculateViewLocation:f=Vl,...m}=t,g=el(t,n,r-1),v=Za(g,n.offsetTree,u)+o+s,b=f({itemTop:v,itemBottom:v+Ia(n.sizeTree,g)[1],viewportTop:l+s,viewportBottom:l+i-a,locationParams:{behavior:h,align:p,...m}});return b?d&&zs(Gs(c,Xs((e=>!1===e)),ea(Us(c)?1:2)),d):d&&d(),b})),Xs((e=>null!==e))),u),{scrollIntoView:d}}),Os(rl,ka,al,Ol,fa),{singleton:!0}),ql=aa((e=>{let[{sizes:t,sizeRanges:n},{scrollTop:i,headerHeight:r},{initialTopMostItemIndex:o},{didMount:s},{useWindowScroll:a,windowScrollContainerState:l,windowViewportRect:c}]=e;const u=Vs(),d=Hs(void 0),h=Hs(null),p=Hs(null);return $s(l,h),$s(c,p),Ls(Gs(u,ia(t,i,a,h,p,r)),(e=>{let[t,n,i,r,o,s,a]=e;const l=Aa(n.sizeTree).map(((e,t,n)=>{let{k:i,v:r}=e;const o=n[t+1];return{startIndex:i,endIndex:o?o.k-1:1/0,size:r}}));r&&null!==o&&null!==s&&(i=o.scrollTop-s.offsetTop),i-=a,t({ranges:l,scrollTop:i})})),$s(Gs(d,Xs(Ds),Ys(Wl)),o),$s(Gs(s,ia(d),Xs((e=>{let[,t]=e;return void 0!==t})),Qs(),Ys((e=>{let[,t]=e;return t.ranges}))),n),{getState:u,restoreStateFrom:d}}),Os(rl,ka,ml,hl,zl));function Wl(e){return{offset:e.scrollTop,index:0,align:"start"}}const Gl=aa((e=>{let[t,n,i,r,o,s,a,l,c,u]=e;return{...t,...n,...i,...r,...o,...s,...a,...l,...c,...u}}),Os(_l,Ml,hl,Nl,jl,Ul,$l,zl,Hl,fa)),Kl=aa((e=>{let[{totalCount:t,sizeRanges:n,fixedItemSize:i,defaultItemSize:r,trackItemSizes:o,itemSize:s,data:a,firstItemIndex:l,groupIndices:c,statefulTotalCount:u,gap:d,sizes:h},{initialTopMostItemIndex:p,scrolledToInitialItem:f,initialItemFinalLocationReached:m},g,v,b,{listState:y,topItemsIndexes:x,...k},{scrollToIndex:w},S,{topItemCount:C},{groupCounts:T},E]=e;return $s(k.rangeChanged,E.scrollSeekRangeChanged),$s(Gs(E.windowViewportRect,Ys((e=>e.visibleHeight))),g.viewportHeight),{totalCount:t,data:a,firstItemIndex:l,sizeRanges:n,initialTopMostItemIndex:p,scrolledToInitialItem:f,initialItemFinalLocationReached:m,topItemsIndexes:x,topItemCount:C,groupCounts:T,fixedItemHeight:i,defaultItemHeight:r,gap:d,...b,statefulTotalCount:u,listState:y,scrollToIndex:w,trackItemSizes:o,itemSize:s,groupIndices:c,...k,...E,...g,sizes:h,...v}}),Os(rl,ml,ka,ql,vl,Ol,al,Bl,Dl,yl,Gl)),Ql="-webkit-sticky",Xl="sticky",Yl=Ll((()=>{if("undefined"===typeof document)return Xl;const e=document.createElement("div");return e.style.position=Ql,e.style.position===Ql?Ql:Xl}));function Jl(e,n){const i=t.useRef(null),r=t.useCallback((t=>{if(null===t||!t.offsetParent)return;const r=t.getBoundingClientRect(),o=r.width;let s,a;if(n){const e=n.getBoundingClientRect(),t=r.top-e.top;s=e.height-Math.max(0,t),a=t+n.scrollTop}else s=window.innerHeight-Math.max(0,r.top),a=r.top+window.pageYOffset;i.current={offsetTop:a,visibleHeight:s,visibleWidth:o},e(i.current)}),[e,n]),{callbackRef:o,ref:s}=ma(r),a=t.useCallback((()=>{r(s.current)}),[r,s]);return t.useEffect((()=>{if(n){n.addEventListener("scroll",a);const e=new ResizeObserver((()=>{requestAnimationFrame(a)}));return e.observe(n),()=>{n.removeEventListener("scroll",a),e.unobserve(n)}}return window.addEventListener("scroll",a),window.addEventListener("resize",a),()=>{window.removeEventListener("scroll",a),window.removeEventListener("resize",a)}}),[a,n]),o}const Zl=t.createContext(void 0),ec=t.createContext(void 0);function tc(e){return e}const nc=aa((()=>{const e=Hs((e=>`Item ${e}`)),t=Hs(null),n=Hs((e=>`Group ${e}`)),i=Hs({}),r=Hs(tc),o=Hs("div"),s=Hs(js),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ws(Gs(i,Ys((t=>t[e])),Qs()),t)};return{context:t,itemContent:e,groupContent:n,components:i,computeItemKey:r,headerFooterTag:o,scrollerRef:s,FooterComponent:a("Footer"),HeaderComponent:a("Header"),TopItemListComponent:a("TopItemList"),ListComponent:a("List","div"),ItemComponent:a("Item","div"),GroupComponent:a("Group","div"),ScrollerComponent:a("Scroller","div"),EmptyPlaceholder:a("EmptyPlaceholder"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder")}})),ic=aa((e=>{let[t,n]=e;return{...t,...n}}),Os(Kl,nc)),rc=e=>{let{height:n}=e;return t.createElement("div",{style:{height:n}})},oc={position:Yl(),zIndex:1,overflowAnchor:"none"},sc={overflowAnchor:"none"},ac=t.memo((function(e){let{showTopList:n=!1}=e;const i=Sc("listState"),r=wc("sizeRanges"),o=Sc("useWindowScroll"),s=Sc("customScrollParent"),a=wc("windowScrollContainerState"),l=wc("scrollContainerState"),c=s||o?a:l,u=Sc("itemContent"),d=Sc("context"),h=Sc("groupContent"),p=Sc("trackItemSizes"),f=Sc("itemSize"),m=Sc("log"),g=wc("gap"),{callbackRef:v}=va(r,f,p,n?js:c,m,g,s),[b,y]=t.useState(0);Cc("deviation",(e=>{b!==e&&y(e)}));const x=Sc("EmptyPlaceholder"),k=Sc("ScrollSeekPlaceholder")||rc,w=Sc("ListComponent"),S=Sc("ItemComponent"),C=Sc("GroupComponent"),T=Sc("computeItemKey"),E=Sc("isSeeking"),_=Sc("groupIndices").length>0,I=Sc("alignToBottom"),R=Sc("initialItemFinalLocationReached"),P=n?{}:{boxSizing:"border-box",paddingTop:i.offsetTop,paddingBottom:i.offsetBottom,marginTop:0!==b?b:I?"auto":0,...R?{}:{visibility:"hidden"}};return!n&&0===i.totalCount&&x?t.createElement(x,dc(x,d)):t.createElement(w,{...dc(w,d),ref:v,style:P,"data-testid":n?"virtuoso-top-item-list":"virtuoso-item-list"},(n?i.topItems:i.items).map((e=>{const n=e.originalIndex,r=T(n+i.firstItemIndex,e.data,d);return E?t.createElement(k,{...dc(k,d),key:r,index:e.index,height:e.size,type:e.type||"item",..."group"===e.type?{}:{groupIndex:e.groupIndex}}):"group"===e.type?t.createElement(C,{...dc(C,d),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:oc},h(e.index,d)):t.createElement(S,{...dc(S,d),...hc(S,e.data),key:r,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:sc},_?u(e.index,e.groupIndex,e.data,d):u(e.index,e.data,d))})))})),lc={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},cc=e=>({width:"100%",height:"100%",position:"absolute",top:0,...e?{display:"flex",flexDirection:"column"}:{}}),uc={width:"100%",position:Yl(),top:0,zIndex:1};function dc(e,t){if("string"!==typeof e)return{context:t}}function hc(e,t){return{item:"string"===typeof e?void 0:t}}const pc=t.memo((function(){const e=Sc("HeaderComponent"),n=wc("headerHeight"),i=Sc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Sc("context");return e?t.createElement(i,{ref:r},t.createElement(e,dc(e,o))):null})),fc=t.memo((function(){const e=Sc("FooterComponent"),n=wc("footerHeight"),i=Sc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Sc("context");return e?t.createElement(i,{ref:r},t.createElement(e,dc(e,o))):null}));function mc(e){let{usePublisher:n,useEmitter:i,useEmitterValue:r}=e;const o=t.memo((function(e){let{style:o,children:s,...a}=e;const l=n("scrollContainerState"),c=r("ScrollerComponent"),u=n("smoothScrollTargetReached"),d=r("scrollerRef"),h=r("context"),{scrollerRef:p,scrollByCallback:f,scrollToCallback:m}=xa(l,u,c,d);return i("scrollTo",m),i("scrollBy",f),t.createElement(c,{ref:p,style:{...lc,...o},"data-testid":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0,...a,...dc(c,h)},s)}));return o}function gc(e){let{usePublisher:n,useEmitter:i,useEmitterValue:r}=e;const o=t.memo((function(e){let{style:o,children:s,...a}=e;const l=n("windowScrollContainerState"),c=r("ScrollerComponent"),u=n("smoothScrollTargetReached"),d=r("totalListHeight"),h=r("deviation"),p=r("customScrollParent"),f=r("context"),{scrollerRef:m,scrollByCallback:g,scrollToCallback:v}=xa(l,u,c,js,p);return da((()=>(m.current=p||window,()=>{m.current=null})),[m,p]),i("windowScrollTo",v),i("scrollBy",g),t.createElement(c,{style:{position:"relative",...o,...0!==d?{height:d+h}:{}},"data-virtuoso-scroller":!0,...a,...dc(c,f)},s)}));return o}const vc=e=>{let{children:n}=e;const i=t.useContext(Zl),r=wc("viewportHeight"),o=wc("fixedItemHeight"),s=Sc("alignToBottom"),a=ga(t.useMemo((()=>_s(r,(e=>ba(e,"height")))),[r]));return t.useEffect((()=>{i&&(r(i.viewportHeight),o(i.itemHeight))}),[i,r,o]),t.createElement("div",{style:cc(s),ref:a,"data-viewport-type":"element"},n)},bc=e=>{let{children:n}=e;const i=t.useContext(Zl),r=wc("windowViewportRect"),o=wc("fixedItemHeight"),s=Sc("customScrollParent"),a=Jl(r,s),l=Sc("alignToBottom");return t.useEffect((()=>{i&&(o(i.itemHeight),r({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,r,o]),t.createElement("div",{ref:a,style:cc(l),"data-viewport-type":"window"},n)},yc=e=>{let{children:n}=e;const i=Sc("TopItemListComponent")||"div",r=Sc("headerHeight"),o={...uc,marginTop:`${r}px`},s=Sc("context");return t.createElement(i,{style:o,...dc(i,s)},n)},xc=t.memo((function(e){const n=Sc("useWindowScroll"),i=Sc("topItemsIndexes").length>0,r=Sc("customScrollParent"),o=r||n?Ec:Tc,s=r||n?bc:vc;return t.createElement(o,{...e},i&&t.createElement(yc,null,t.createElement(ac,{showTopList:!0})),t.createElement(s,null,t.createElement(pc,null),t.createElement(ac,null),t.createElement(fc,null)))})),{Component:kc,usePublisher:wc,useEmitterValue:Sc,useEmitter:Cc}=ua(ic,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",groupCounts:"groupCounts",topItemCount:"topItemCount",firstItemIndex:"firstItemIndex",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",autoscrollToBottom:"autoscrollToBottom",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},xc),Tc=mc({usePublisher:wc,useEmitterValue:Sc,useEmitter:Cc}),Ec=gc({usePublisher:wc,useEmitterValue:Sc,useEmitter:Cc}),_c=kc,Ic={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Rc={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},{round:Pc,ceil:Ac,floor:Oc,min:Mc,max:Nc}=Math;function Dc(e,t,n){return Array.from({length:t-e+1}).map(((t,i)=>{const r=null===n?null:n[i+e];return{index:i+e,data:r}}))}function jc(e,t){return e&&e.column===t.column&&e.row===t.row}function Lc(e,t){return e&&e.width===t.width&&e.height===t.height}const Fc=aa((e=>{let[{overscan:t,visibleRange:n,listBoundary:i},{scrollTop:r,viewportHeight:o,scrollBy:s,scrollTo:a,smoothScrollTargetReached:l,scrollContainerState:c,footerHeight:u,headerHeight:d},h,p,{propsReady:f,didMount:m},{windowViewportRect:g,useWindowScroll:v,customScrollParent:b,windowScrollContainerState:y,windowScrollTo:x},k]=e;const w=Hs(0),S=Hs(0),C=Hs(Ic),T=Hs({height:0,width:0}),E=Hs({height:0,width:0}),_=Vs(),I=Vs(),R=Hs(0),P=Hs(null),A=Hs({row:0,column:0}),O=Vs(),M=Vs(),N=Hs(!1),D=Hs(0),j=Hs(!0),L=Hs(!1);Ls(Gs(m,ia(D),Xs((e=>{let[t,n]=e;return!!n}))),(()=>{Fs(j,!1),Fs(S,0)})),Ls(Gs(sa(m,j,E,T,D,L),Xs((e=>{let[t,n,i,r,,o]=e;return t&&!n&&0!==i.height&&0!==r.height&&!o}))),(e=>{let[,,,,t]=e;Fs(L,!0),pl(1,(()=>{Fs(_,t)})),zs(Gs(r),(()=>{Fs(i,[0,0]),Fs(j,!0)}))})),$s(Gs(M,Xs((e=>void 0!==e&&null!==e&&e.scrollTop>0)),Js(0)),S),Ls(Gs(m,ia(M),Xs((e=>{let[,t]=e;return void 0!==t&&null!==t}))),(e=>{let[,t]=e;t&&(Fs(T,t.viewport),Fs(E,null==t?void 0:t.item),Fs(A,t.gap),t.scrollTop>0&&(Fs(N,!0),zs(Gs(r,ea(1)),(e=>{Fs(N,!1)})),Fs(a,{top:t.scrollTop})))})),$s(Gs(T,Ys((e=>{let{height:t}=e;return t}))),o),$s(Gs(sa(oa(T,Lc),oa(E,Lc),oa(A,((e,t)=>e&&e.column===t.column&&e.row===t.row)),oa(r)),Ys((e=>{let[t,n,i,r]=e;return{viewport:t,item:n,gap:i,scrollTop:r}}))),O),$s(Gs(sa(oa(w),n,oa(A,jc),oa(E,Lc),oa(T,Lc),oa(P),oa(S),oa(N),oa(j),oa(D)),Xs((e=>{let[,,,,,,,t]=e;return!t})),Ys((e=>{let[t,[n,i],r,o,s,a,l,,c,u]=e;const{row:d,column:h}=r,{height:p,width:f}=o,{width:m}=s;if(0===l&&(0===t||0===m))return Ic;if(0===f){const e=fl(u,t);return function(e){return{...Rc,items:e}}(Dc(e,0===e?Math.max(l-1,0):e,a))}const g=$c(m,f,h);let v,b;c?0===n&&0===i&&l>0?(v=0,b=l-1):(v=g*Oc((n+d)/(p+d)),b=g*Ac((i+d)/(p+d))-1,b=Mc(t-1,Nc(b,g-1)),v=Mc(b,Nc(0,v))):(v=0,b=-1);const y=Dc(v,b,a),{top:x,bottom:k}=Bc(s,r,o,y),w=Ac(t/g);return{items:y,offsetTop:x,offsetBottom:w*p+(w-1)*d-k,top:x,bottom:k,itemHeight:p,itemWidth:f}}))),C),$s(Gs(P,Xs((e=>null!==e)),Ys((e=>e.length))),w),$s(Gs(sa(T,E,C,A),Xs((e=>{let[t,n,{items:i}]=e;return i.length>0&&0!==n.height&&0!==t.height})),Ys((e=>{let[t,n,{items:i},r]=e;const{top:o,bottom:s}=Bc(t,r,n,i);return[o,s]})),Qs(xl)),i);const F=Hs(!1);$s(Gs(r,ia(F),Ys((e=>{let[t,n]=e;return n||0!==t}))),F);const B=qs(Gs(oa(C),Xs((e=>{let{items:t}=e;return t.length>0})),ia(w,F),Xs((e=>{let[{items:t},n,i]=e;return i&&t[t.length-1].index===n-1})),Ys((e=>{let[,t]=e;return t-1})),Qs())),U=qs(Gs(oa(C),Xs((e=>{let{items:t}=e;return t.length>0&&0===t[0].index})),Js(0),Qs())),$=qs(Gs(oa(C),ia(N),Xs((e=>{let[{items:t},n]=e;return t.length>0&&!n})),Ys((e=>{let[{items:t}]=e;return{startIndex:t[0].index,endIndex:t[t.length-1].index}})),Qs(kl),ta(0)));$s($,p.scrollSeekRangeChanged),$s(Gs(_,ia(T,E,w,A),Ys((e=>{let[t,n,i,r,o]=e;const s=sl(t),{align:a,behavior:l,offset:c}=s;let u=s.index;"LAST"===u&&(u=r-1),u=Nc(0,u,Mc(r-1,u));let d=Uc(n,o,i,u);return"end"===a?d=Pc(d-n.height+i.height):"center"===a&&(d=Pc(d-n.height/2+i.height/2)),c&&(d+=c),{top:d,behavior:l}}))),a);const z=Ws(Gs(C,Ys((e=>e.offsetBottom+e.bottom))),0);return $s(Gs(g,Ys((e=>({width:e.visibleWidth,height:e.visibleHeight})))),T),{data:P,totalCount:w,viewportDimensions:T,itemDimensions:E,scrollTop:r,scrollHeight:I,overscan:t,scrollBy:s,scrollTo:a,scrollToIndex:_,smoothScrollTargetReached:l,windowViewportRect:g,windowScrollTo:x,useWindowScroll:v,customScrollParent:b,windowScrollContainerState:y,deviation:R,scrollContainerState:c,footerHeight:u,headerHeight:d,initialItemCount:S,gap:A,restoreStateFrom:M,...p,initialTopMostItemIndex:D,gridState:C,totalListHeight:z,...h,startReached:U,endReached:B,rangeChanged:$,stateChanged:O,propsReady:f,stateRestoreInProgress:N,...k}}),Os(_l,ka,dl,Nl,hl,zl,fa));function Bc(e,t,n,i){const{height:r}=n;if(void 0===r||0===i.length)return{top:0,bottom:0};return{top:Uc(e,t,n,i[0].index),bottom:Uc(e,t,n,i[i.length-1].index)+r}}function Uc(e,t,n,i){const r=$c(e.width,n.width,t.column),o=Oc(i/r),s=o*n.height+Nc(0,o-1)*t.row;return s>0?s+t.row:s}function $c(e,t,n){return Nc(1,Oc((e+n)/(Oc(t)+n)))}const zc=aa((()=>{const e=Hs((e=>`Item ${e}`)),t=Hs({}),n=Hs(null),i=Hs("virtuoso-grid-item"),r=Hs("virtuoso-grid-list"),o=Hs(tc),s=Hs("div"),a=Hs(js),l=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ws(Gs(t,Ys((t=>t[e])),Qs()),n)};return{context:n,itemContent:e,components:t,computeItemKey:o,itemClassName:i,listClassName:r,headerFooterTag:s,scrollerRef:a,FooterComponent:l("Footer"),HeaderComponent:l("Header"),ListComponent:l("List","div"),ItemComponent:l("Item","div"),ScrollerComponent:l("Scroller","div"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder","div")}})),Vc=aa((e=>{let[t,n]=e;return{...t,...n}}),Os(Fc,zc)),Hc=t.memo((function(){const e=Jc("gridState"),n=Jc("listClassName"),i=Jc("itemClassName"),r=Jc("itemContent"),o=Jc("computeItemKey"),s=Jc("isSeeking"),a=Yc("scrollHeight"),l=Jc("ItemComponent"),c=Jc("ListComponent"),u=Jc("ScrollSeekPlaceholder"),d=Jc("context"),h=Yc("itemDimensions"),p=Yc("gap"),f=Jc("log"),m=Jc("stateRestoreInProgress"),g=ga(t.useMemo((()=>e=>{const t=e.parentElement.parentElement.scrollHeight;a(t);const n=e.firstChild;if(n){const{width:e,height:t}=n.getBoundingClientRect();h({width:e,height:t})}p({row:nu("row-gap",getComputedStyle(e).rowGap,f),column:nu("column-gap",getComputedStyle(e).columnGap,f)})}),[a,h,p,f]));return m?null:t.createElement(c,{ref:g,className:n,...dc(c,d),style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom},"data-testid":"virtuoso-item-list"},e.items.map((n=>{const a=o(n.index,n.data,d);return s?t.createElement(u,{key:a,...dc(u,d),index:n.index,height:e.itemHeight,width:e.itemWidth}):t.createElement(l,{...dc(l,d),className:i,"data-index":n.index,key:a},r(n.index,n.data,d))})))})),qc=t.memo((function(){const e=Jc("HeaderComponent"),n=Yc("headerHeight"),i=Jc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Jc("context");return e?t.createElement(i,{ref:r},t.createElement(e,dc(e,o))):null})),Wc=t.memo((function(){const e=Jc("FooterComponent"),n=Yc("footerHeight"),i=Jc("headerFooterTag"),r=ga(t.useMemo((()=>e=>n(ba(e,"height"))),[n])),o=Jc("context");return e?t.createElement(i,{ref:r},t.createElement(e,dc(e,o))):null})),Gc=e=>{let{children:n}=e;const i=t.useContext(ec),r=Yc("itemDimensions"),o=Yc("viewportDimensions"),s=ga(t.useMemo((()=>e=>{o(e.getBoundingClientRect())}),[o]));return t.useEffect((()=>{i&&(o({height:i.viewportHeight,width:i.viewportWidth}),r({height:i.itemHeight,width:i.itemWidth}))}),[i,o,r]),t.createElement("div",{style:cc(!1),ref:s},n)},Kc=e=>{let{children:n}=e;const i=t.useContext(ec),r=Yc("windowViewportRect"),o=Yc("itemDimensions"),s=Jc("customScrollParent"),a=Jl(r,s);return t.useEffect((()=>{i&&(o({height:i.itemHeight,width:i.itemWidth}),r({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:i.viewportWidth}))}),[i,r,o]),t.createElement("div",{ref:a,style:cc(!1)},n)},Qc=t.memo((function(e){let{...n}=e;const i=Jc("useWindowScroll"),r=Jc("customScrollParent"),o=r||i?tu:eu,s=r||i?Kc:Gc;return t.createElement(o,{...n},t.createElement(s,null,t.createElement(qc,null),t.createElement(Hc,null),t.createElement(Wc,null)))})),{Component:Xc,usePublisher:Yc,useEmitterValue:Jc,useEmitter:Zc}=ua(Vc,{optional:{context:"context",totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",data:"data",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",restoreStateFrom:"restoreStateFrom",initialTopMostItemIndex:"initialTopMostItemIndex"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",stateChanged:"stateChanged"}},Qc),eu=mc({usePublisher:Yc,useEmitterValue:Jc,useEmitter:Zc}),tu=gc({usePublisher:Yc,useEmitterValue:Jc,useEmitter:Zc});function nu(e,t,n){return"normal"===t||(null==t?void 0:t.endsWith("px"))||n(`${e} was not resolved to pixel value correctly`,t,ha.WARN),"normal"===t?0:parseInt(null!=t?t:"0",10)}const iu=aa((()=>{const e=Hs((e=>t.createElement("td",null,"Item $",e))),n=Hs(null),i=Hs(null),r=Hs(null),o=Hs({}),s=Hs(tc),a=Hs(js),l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ws(Gs(o,Ys((t=>t[e])),Qs()),t)};return{context:n,itemContent:e,fixedHeaderContent:i,fixedFooterContent:r,components:o,computeItemKey:s,scrollerRef:a,TableComponent:l("Table","table"),TableHeadComponent:l("TableHead","thead"),TableFooterComponent:l("TableFoot","tfoot"),TableBodyComponent:l("TableBody","tbody"),TableRowComponent:l("TableRow","tr"),ScrollerComponent:l("Scroller","div"),EmptyPlaceholder:l("EmptyPlaceholder"),ScrollSeekPlaceholder:l("ScrollSeekPlaceholder"),FillerRow:l("FillerRow")}})),ru=aa((e=>{let[t,n]=e;return{...t,...n}}),Os(Kl,iu)),ou=e=>{let{height:n}=e;return t.createElement("tr",null,t.createElement("td",{style:{height:n}}))},su=e=>{let{height:n}=e;return t.createElement("tr",null,t.createElement("td",{style:{height:n,padding:0,border:0}}))},au={overflowAnchor:"none"},lu=t.memo((function(){const e=fu("listState"),n=pu("sizeRanges"),i=fu("useWindowScroll"),r=fu("customScrollParent"),o=pu("windowScrollContainerState"),s=pu("scrollContainerState"),a=r||i?o:s,l=fu("itemContent"),c=fu("trackItemSizes"),u=fu("itemSize"),d=fu("log"),{callbackRef:h,ref:p}=va(n,u,c,a,d,void 0,r),[f,m]=t.useState(0);mu("deviation",(e=>{f!==e&&(p.current.style.marginTop=`${e}px`,m(e))}));const g=fu("EmptyPlaceholder"),v=fu("ScrollSeekPlaceholder")||ou,b=fu("FillerRow")||su,y=fu("TableBodyComponent"),x=fu("TableRowComponent"),k=fu("computeItemKey"),w=fu("isSeeking"),S=fu("paddingTopAddition"),C=fu("firstItemIndex"),T=fu("statefulTotalCount"),E=fu("context");if(0===T&&g)return t.createElement(g,dc(g,E));const _=e.offsetTop+S+f,I=e.offsetBottom,R=_>0?t.createElement(b,{height:_,key:"padding-top",context:E}):null,P=I>0?t.createElement(b,{height:I,key:"padding-bottom",context:E}):null,A=e.items.map((e=>{const n=e.originalIndex,i=k(n+C,e.data,E);return w?t.createElement(v,{...dc(v,E),key:i,index:e.index,height:e.size,type:e.type||"item"}):t.createElement(x,{...dc(x,E),...hc(x,e.data),key:i,"data-index":n,"data-known-size":e.size,"data-item-index":e.index,style:au},l(e.index,e.data,E))}));return t.createElement(y,{ref:h,"data-testid":"virtuoso-item-list",...dc(y,E)},[R,...A,P])})),cu=e=>{let{children:n}=e;const i=t.useContext(Zl),r=pu("viewportHeight"),o=pu("fixedItemHeight"),s=ga(t.useMemo((()=>_s(r,(e=>ba(e,"height")))),[r]));return t.useEffect((()=>{i&&(r(i.viewportHeight),o(i.itemHeight))}),[i,r,o]),t.createElement("div",{style:cc(!1),ref:s,"data-viewport-type":"element"},n)},uu=e=>{let{children:n}=e;const i=t.useContext(Zl),r=pu("windowViewportRect"),o=pu("fixedItemHeight"),s=fu("customScrollParent"),a=Jl(r,s);return t.useEffect((()=>{i&&(o(i.itemHeight),r({offsetTop:0,visibleHeight:i.viewportHeight,visibleWidth:100}))}),[i,r,o]),t.createElement("div",{ref:a,style:cc(!1),"data-viewport-type":"window"},n)},du=t.memo((function(e){const n=fu("useWindowScroll"),i=fu("customScrollParent"),r=pu("fixedHeaderHeight"),o=pu("fixedFooterHeight"),s=fu("fixedHeaderContent"),a=fu("fixedFooterContent"),l=fu("context"),c=ga(t.useMemo((()=>_s(r,(e=>ba(e,"height")))),[r])),u=ga(t.useMemo((()=>_s(o,(e=>ba(e,"height")))),[o])),d=i||n?vu:gu,h=i||n?uu:cu,p=fu("TableComponent"),f=fu("TableHeadComponent"),m=fu("TableFooterComponent"),g=s?t.createElement(f,{key:"TableHead",style:{zIndex:2,position:"sticky",top:0},ref:c,...dc(f,l)},s()):null,v=a?t.createElement(m,{key:"TableFoot",style:{zIndex:1,position:"sticky",bottom:0},ref:u,...dc(m,l)},a()):null;return t.createElement(d,{...e},t.createElement(h,null,t.createElement(p,{style:{borderSpacing:0,overflowAnchor:"none"},...dc(p,l)},[g,t.createElement(lu,{key:"TableBody"}),v])))})),{Component:hu,usePublisher:pu,useEmitterValue:fu,useEmitter:mu}=ua(ru,{required:{},optional:{restoreStateFrom:"restoreStateFrom",context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",fixedFooterContent:"fixedFooterContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",atTopThreshold:"atTopThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",getState:"getState"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},du),gu=mc({usePublisher:pu,useEmitterValue:fu,useEmitter:mu}),vu=gc({usePublisher:pu,useEmitterValue:fu,useEmitter:mu});var bu=function(){return bu=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},bu.apply(this,arguments)};Object.create;function yu(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}Object.create;"function"===typeof SuppressedError&&SuppressedError;var xu=n(7324),ku=n.n(xu),wu="-ms-",Su="-moz-",Cu="-webkit-",Tu="comm",Eu="rule",_u="decl",Iu="@import",Ru="@keyframes",Pu="@layer",Au=Math.abs,Ou=String.fromCharCode,Mu=Object.assign;function Nu(e){return e.trim()}function Du(e,t){return(e=t.exec(e))?e[0]:e}function ju(e,t,n){return e.replace(t,n)}function Lu(e,t,n){return e.indexOf(t,n)}function Fu(e,t){return 0|e.charCodeAt(t)}function Bu(e,t,n){return e.slice(t,n)}function Uu(e){return e.length}function $u(e){return e.length}function zu(e,t){return t.push(e),e}function Vu(e,t){return e.filter((function(e){return!Du(e,t)}))}var Hu=1,qu=1,Wu=0,Gu=0,Ku=0,Qu="";function Xu(e,t,n,i,r,o,s,a){return{value:e,root:t,parent:n,type:i,props:r,children:o,line:Hu,column:qu,length:s,return:"",siblings:a}}function Yu(e,t){return Mu(Xu("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function Ju(e){for(;e.root;)e=Yu(e.root,{children:[e]});zu(e,e.siblings)}function Zu(){return Ku=Gu>0?Fu(Qu,--Gu):0,qu--,10===Ku&&(qu=1,Hu--),Ku}function ed(){return Ku=Gu<Wu?Fu(Qu,Gu++):0,qu++,10===Ku&&(qu=1,Hu++),Ku}function td(){return Fu(Qu,Gu)}function nd(){return Gu}function id(e,t){return Bu(Qu,e,t)}function rd(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function od(e){return Hu=qu=1,Wu=Uu(Qu=e),Gu=0,[]}function sd(e){return Qu="",e}function ad(e){return Nu(id(Gu-1,ud(91===e?e+2:40===e?e+1:e)))}function ld(e){for(;(Ku=td())&&Ku<33;)ed();return rd(e)>2||rd(Ku)>3?"":" "}function cd(e,t){for(;--t&&ed()&&!(Ku<48||Ku>102||Ku>57&&Ku<65||Ku>70&&Ku<97););return id(e,nd()+(t<6&&32==td()&&32==ed()))}function ud(e){for(;ed();)switch(Ku){case e:return Gu;case 34:case 39:34!==e&&39!==e&&ud(Ku);break;case 40:41===e&&ud(e);break;case 92:ed()}return Gu}function dd(e,t){for(;ed()&&e+Ku!==57&&(e+Ku!==84||47!==td()););return"/*"+id(t,Gu-1)+"*"+Ou(47===e?e:ed())}function hd(e){for(;!rd(td());)ed();return id(e,Gu)}function pd(e,t){for(var n="",i=0;i<e.length;i++)n+=t(e[i],i,e,t)||"";return n}function fd(e,t,n,i){switch(e.type){case Pu:if(e.children.length)break;case Iu:case _u:return e.return=e.return||e.value;case Tu:return"";case Ru:return e.return=e.value+"{"+pd(e.children,i)+"}";case Eu:if(!Uu(e.value=e.props.join(",")))return""}return Uu(n=pd(e.children,i))?e.return=e.value+"{"+n+"}":""}function md(e,t,n){switch(function(e,t){return 45^Fu(e,0)?(((t<<2^Fu(e,0))<<2^Fu(e,1))<<2^Fu(e,2))<<2^Fu(e,3):0}(e,t)){case 5103:return Cu+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Cu+e+e;case 4789:return Su+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Cu+e+Su+e+wu+e+e;case 5936:switch(Fu(e,t+11)){case 114:return Cu+e+wu+ju(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Cu+e+wu+ju(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Cu+e+wu+ju(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return Cu+e+wu+e+e;case 6165:return Cu+e+wu+"flex-"+e+e;case 5187:return Cu+e+ju(e,/(\w+).+(:[^]+)/,Cu+"box-$1$2"+wu+"flex-$1$2")+e;case 5443:return Cu+e+wu+"flex-item-"+ju(e,/flex-|-self/g,"")+(Du(e,/flex-|baseline/)?"":wu+"grid-row-"+ju(e,/flex-|-self/g,""))+e;case 4675:return Cu+e+wu+"flex-line-pack"+ju(e,/align-content|flex-|-self/g,"")+e;case 5548:return Cu+e+wu+ju(e,"shrink","negative")+e;case 5292:return Cu+e+wu+ju(e,"basis","preferred-size")+e;case 6060:return Cu+"box-"+ju(e,"-grow","")+Cu+e+wu+ju(e,"grow","positive")+e;case 4554:return Cu+ju(e,/([^-])(transform)/g,"$1"+Cu+"$2")+e;case 6187:return ju(ju(ju(e,/(zoom-|grab)/,Cu+"$1"),/(image-set)/,Cu+"$1"),e,"")+e;case 5495:case 3959:return ju(e,/(image-set\([^]*)/,Cu+"$1$`$1");case 4968:return ju(ju(e,/(.+:)(flex-)?(.*)/,Cu+"box-pack:$3"+wu+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Cu+e+e;case 4200:if(!Du(e,/flex-|baseline/))return wu+"grid-column-align"+Bu(e,t)+e;break;case 2592:case 3360:return wu+ju(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,Du(e.props,/grid-\w+-end/)}))?~Lu(e+(n=n[t].value),"span",0)?e:wu+ju(e,"-start","")+e+wu+"grid-row-span:"+(~Lu(n,"span",0)?Du(n,/\d+/):+Du(n,/\d+/)-+Du(e,/\d+/))+";":wu+ju(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return Du(e.props,/grid-\w+-start/)}))?e:wu+ju(ju(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return ju(e,/(.+)-inline(.+)/,Cu+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Uu(e)-1-t>6)switch(Fu(e,t+1)){case 109:if(45!==Fu(e,t+4))break;case 102:return ju(e,/(.+:)(.+)-([^]+)/,"$1"+Cu+"$2-$3$1"+Su+(108==Fu(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Lu(e,"stretch",0)?md(ju(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return ju(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,i,r,o,s,a){return wu+n+":"+i+a+(r?wu+n+"-span:"+(o?s:+s-+i)+a:"")+e}));case 4949:if(121===Fu(e,t+6))return ju(e,":",":"+Cu)+e;break;case 6444:switch(Fu(e,45===Fu(e,14)?18:11)){case 120:return ju(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+Cu+(45===Fu(e,14)?"inline-":"")+"box$3$1"+Cu+"$2$3$1"+wu+"$2box$3")+e;case 100:return ju(e,":",":"+wu)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return ju(e,"scroll-","scroll-snap-")+e}return e}function gd(e,t,n,i){if(e.length>-1&&!e.return)switch(e.type){case _u:return void(e.return=md(e.value,e.length,n));case Ru:return pd([Yu(e,{value:ju(e.value,"@","@"+Cu)})],i);case Eu:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(Du(t,i=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":Ju(Yu(e,{props:[ju(t,/:(read-\w+)/,":"+Su+"$1")]})),Ju(Yu(e,{props:[t]})),Mu(e,{props:Vu(n,i)});break;case"::placeholder":Ju(Yu(e,{props:[ju(t,/:(plac\w+)/,":"+Cu+"input-$1")]})),Ju(Yu(e,{props:[ju(t,/:(plac\w+)/,":"+Su+"$1")]})),Ju(Yu(e,{props:[ju(t,/:(plac\w+)/,wu+"input-$1")]})),Ju(Yu(e,{props:[t]})),Mu(e,{props:Vu(n,i)})}return""}))}}function vd(e){return sd(bd("",null,null,null,[""],e=od(e),0,[0],e))}function bd(e,t,n,i,r,o,s,a,l){for(var c=0,u=0,d=s,h=0,p=0,f=0,m=1,g=1,v=1,b=0,y="",x=r,k=o,w=i,S=y;g;)switch(f=b,b=ed()){case 40:if(108!=f&&58==Fu(S,d-1)){-1!=Lu(S+=ju(ad(b),"&","&\f"),"&\f",Au(c?a[c-1]:0))&&(v=-1);break}case 34:case 39:case 91:S+=ad(b);break;case 9:case 10:case 13:case 32:S+=ld(f);break;case 92:S+=cd(nd()-1,7);continue;case 47:switch(td()){case 42:case 47:zu(xd(dd(ed(),nd()),t,n,l),l);break;default:S+="/"}break;case 123*m:a[c++]=Uu(S)*v;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+u:-1==v&&(S=ju(S,/\f/g,"")),p>0&&Uu(S)-d&&zu(p>32?kd(S+";",i,n,d-1,l):kd(ju(S," ","")+";",i,n,d-2,l),l);break;case 59:S+=";";default:if(zu(w=yd(S,t,n,c,u,r,a,y,x=[],k=[],d,o),o),123===b)if(0===u)bd(S,t,w,w,x,o,d,a,k);else switch(99===h&&110===Fu(S,3)?100:h){case 100:case 108:case 109:case 115:bd(e,w,w,i&&zu(yd(e,w,w,0,0,r,a,y,r,x=[],d,k),k),r,k,d,a,i?x:k);break;default:bd(S,w,w,w,[""],k,0,a,k)}}c=u=p=0,m=v=1,y=S="",d=s;break;case 58:d=1+Uu(S),p=f;default:if(m<1)if(123==b)--m;else if(125==b&&0==m++&&125==Zu())continue;switch(S+=Ou(b),b*m){case 38:v=u>0?1:(S+="\f",-1);break;case 44:a[c++]=(Uu(S)-1)*v,v=1;break;case 64:45===td()&&(S+=ad(ed())),h=td(),u=d=Uu(y=S+=hd(nd())),b++;break;case 45:45===f&&2==Uu(S)&&(m=0)}}return o}function yd(e,t,n,i,r,o,s,a,l,c,u,d){for(var h=r-1,p=0===r?o:[""],f=$u(p),m=0,g=0,v=0;m<i;++m)for(var b=0,y=Bu(e,h+1,h=Au(g=s[m])),x=e;b<f;++b)(x=Nu(g>0?p[b]+" "+y:ju(y,/&\f/g,p[b])))&&(l[v++]=x);return Xu(e,t,n,0===r?Eu:a,l,c,u,d)}function xd(e,t,n,i){return Xu(e,t,n,Tu,Ou(Ku),Bu(e,2,-2),0,i)}function kd(e,t,n,i,r){return Xu(e,t,n,_u,Bu(e,0,i),Bu(e,i+1,-1),i,r)}var wd={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Sd="undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_ATTR||{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_ATTR)||"data-styled",Cd="active",Td="data-styled-version",Ed="6.1.13",_d="/*!sc*/\n",Id="undefined"!=typeof window&&"HTMLElement"in window,Rd=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY?"false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}&&void 0!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&""!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&("false"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.SC_DISABLE_SPEEDY)),Pd=(new Set,Object.freeze([])),Ad=Object.freeze({});function Od(e,t,n){return void 0===n&&(n=Ad),e.theme!==n.theme&&e.theme||t||n.theme}var Md=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Nd=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Dd=/(^-|-$)/g;function jd(e){return e.replace(Nd,"-").replace(Dd,"")}var Ld=/(a)(d)/gi,Fd=52,Bd=function(e){return String.fromCharCode(e+(e>25?39:97))};function Ud(e){var t,n="";for(t=Math.abs(e);t>Fd;t=t/Fd|0)n=Bd(t%Fd)+n;return(Bd(t%Fd)+n).replace(Ld,"$1-$2")}var $d,zd=5381,Vd=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},Hd=function(e){return Vd(zd,e)};function qd(e){return Ud(Hd(e)>>>0)}function Wd(e){return e.displayName||e.name||"Component"}function Gd(e){return"string"==typeof e&&!0}var Kd="function"==typeof Symbol&&Symbol.for,Qd=Kd?Symbol.for("react.memo"):60115,Xd=Kd?Symbol.for("react.forward_ref"):60112,Yd={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Jd={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Zd={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},eh=(($d={})[Xd]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},$d[Qd]=Zd,$d);function th(e){return("type"in(t=e)&&t.type.$$typeof)===Qd?Zd:"$$typeof"in e?eh[e.$$typeof]:Yd;var t}var nh=Object.defineProperty,ih=Object.getOwnPropertyNames,rh=Object.getOwnPropertySymbols,oh=Object.getOwnPropertyDescriptor,sh=Object.getPrototypeOf,ah=Object.prototype;function lh(e,t,n){if("string"!=typeof t){if(ah){var i=sh(t);i&&i!==ah&&lh(e,i,n)}var r=ih(t);rh&&(r=r.concat(rh(t)));for(var o=th(e),s=th(t),a=0;a<r.length;++a){var l=r[a];if(!(l in Jd||n&&n[l]||s&&l in s||o&&l in o)){var c=oh(t,l);try{nh(e,l,c)}catch(e){}}}}return e}function ch(e){return"function"==typeof e}function uh(e){return"object"==typeof e&&"styledComponentId"in e}function dh(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function hh(e,t){if(0===e.length)return"";for(var n=e[0],i=1;i<e.length;i++)n+=t?t+e[i]:e[i];return n}function ph(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function fh(e,t,n){if(void 0===n&&(n=!1),!n&&!ph(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var i=0;i<t.length;i++)e[i]=fh(e[i],t[i]);else if(ph(t))for(var i in t)e[i]=fh(e[i],t[i]);return e}function mh(e,t){Object.defineProperty(e,"toString",{value:t})}function gh(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var vh=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,i=n.length,r=i;e>=r;)if((r<<=1)<0)throw gh(16,"".concat(e));this.groupSizes=new Uint32Array(r),this.groupSizes.set(n),this.length=r;for(var o=i;o<r;o++)this.groupSizes[o]=0}for(var s=this.indexOfGroup(e+1),a=(o=0,t.length);o<a;o++)this.tag.insertRule(s,t[o])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),i=n+t;this.groupSizes[e]=0;for(var r=n;r<i;r++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],i=this.indexOfGroup(e),r=i+n,o=i;o<r;o++)t+="".concat(this.tag.getRule(o)).concat(_d);return t},e}(),bh=new Map,yh=new Map,xh=1,kh=function(e){if(bh.has(e))return bh.get(e);for(;yh.has(xh);)xh++;var t=xh++;return bh.set(e,t),yh.set(t,e),t},wh=function(e,t){xh=t+1,bh.set(e,t),yh.set(t,e)},Sh="style[".concat(Sd,"][").concat(Td,'="').concat(Ed,'"]'),Ch=new RegExp("^".concat(Sd,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Th=function(e,t,n){for(var i,r=n.split(","),o=0,s=r.length;o<s;o++)(i=r[o])&&e.registerName(t,i)},Eh=function(e,t){for(var n,i=(null!==(n=t.textContent)&&void 0!==n?n:"").split(_d),r=[],o=0,s=i.length;o<s;o++){var a=i[o].trim();if(a){var l=a.match(Ch);if(l){var c=0|parseInt(l[1],10),u=l[2];0!==c&&(wh(u,c),Th(e,u,l[3]),e.getTag().insertRules(c,r)),r.length=0}else r.push(a)}}},_h=function(e){for(var t=document.querySelectorAll(Sh),n=0,i=t.length;n<i;n++){var r=t[n];r&&r.getAttribute(Sd)!==Cd&&(Eh(e,r),r.parentNode&&r.parentNode.removeChild(r))}};function Ih(){return n.nc}var Rh=function(e){var t=document.head,n=e||t,i=document.createElement("style"),r=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Sd,"]")));return t[t.length-1]}(n),o=void 0!==r?r.nextSibling:null;i.setAttribute(Sd,Cd),i.setAttribute(Td,Ed);var s=Ih();return s&&i.setAttribute("nonce",s),n.insertBefore(i,o),i},Ph=function(){function e(e){this.element=Rh(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,i=t.length;n<i;n++){var r=t[n];if(r.ownerNode===e)return r}throw gh(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Ah=function(){function e(e){this.element=Rh(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Oh=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Mh=Id,Nh={isServer:!Id,useCSSOMInjection:!Rd},Dh=function(){function e(e,t,n){void 0===e&&(e=Ad),void 0===t&&(t={});var i=this;this.options=bu(bu({},Nh),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&Id&&Mh&&(Mh=!1,_h(this)),mh(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,i="",r=function(n){var r=function(e){return yh.get(e)}(n);if(void 0===r)return"continue";var o=e.names.get(r),s=t.getGroup(n);if(void 0===o||!o.size||0===s.length)return"continue";var a="".concat(Sd,".g").concat(n,'[id="').concat(r,'"]'),l="";void 0!==o&&o.forEach((function(e){e.length>0&&(l+="".concat(e,","))})),i+="".concat(s).concat(a,'{content:"').concat(l,'"}').concat(_d)},o=0;o<n;o++)r(o);return i}(i)}))}return e.registerId=function(e){return kh(e)},e.prototype.rehydrate=function(){!this.server&&Id&&_h(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(bu(bu({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Oh(n):t?new Ph(n):new Ah(n)}(this.options),new vh(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(kh(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(kh(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(kh(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),jh=/&/g,Lh=/^\s*\/\/.*$/gm;function Fh(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Fh(e.children,t)),e}))}function Bh(e){var t,n,i,r=void 0===e?Ad:e,o=r.options,s=void 0===o?Ad:o,a=r.plugins,l=void 0===a?Pd:a,c=function(e,i,r){return r.startsWith(n)&&r.endsWith(n)&&r.replaceAll(n,"").length>0?".".concat(t):e},u=l.slice();u.push((function(e){e.type===Eu&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(jh,n).replace(i,c))})),s.prefix&&u.push(gd),u.push(fd);var d=function(e,r,o,a){void 0===r&&(r=""),void 0===o&&(o=""),void 0===a&&(a="&"),t=a,n=r,i=new RegExp("\\".concat(n,"\\b"),"g");var l=e.replace(Lh,""),c=vd(o||r?"".concat(o," ").concat(r," { ").concat(l," }"):l);s.namespace&&(c=Fh(c,s.namespace));var d,h=[];return pd(c,function(e){var t=$u(e);return function(n,i,r,o){for(var s="",a=0;a<t;a++)s+=e[a](n,i,r,o)||"";return s}}(u.concat((d=function(e){return h.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),h};return d.hash=l.length?l.reduce((function(e,t){return t.name||gh(15),Vd(e,t.name)}),zd).toString():"",d}var Uh=new Dh,$h=Bh(),zh=t.createContext({shouldForwardProp:void 0,styleSheet:Uh,stylis:$h}),Vh=(zh.Consumer,t.createContext(void 0));function Hh(){return(0,t.useContext)(zh)}function qh(e){var n=(0,t.useState)(e.stylisPlugins),i=n[0],r=n[1],o=Hh().styleSheet,s=(0,t.useMemo)((function(){var t=o;return e.sheet?t=e.sheet:e.target&&(t=t.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(t=t.reconstructWithOptions({useCSSOMInjection:!1})),t}),[e.disableCSSOMInjection,e.sheet,e.target,o]),a=(0,t.useMemo)((function(){return Bh({options:{namespace:e.namespace,prefix:e.enableVendorPrefixes},plugins:i})}),[e.enableVendorPrefixes,e.namespace,i]);(0,t.useEffect)((function(){ku()(i,e.stylisPlugins)||r(e.stylisPlugins)}),[e.stylisPlugins]);var l=(0,t.useMemo)((function(){return{shouldForwardProp:e.shouldForwardProp,styleSheet:s,stylis:a}}),[e.shouldForwardProp,s,a]);return t.createElement(zh.Provider,{value:l},t.createElement(Vh.Provider,{value:a},e.children))}var Wh=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=$h);var i=n.name+t.hash;e.hasNameForId(n.id,i)||e.insertRules(n.id,i,t(n.rules,i,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,mh(this,(function(){throw gh(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=$h),this.name+e.hash},e}(),Gh=function(e){return e>="A"&&e<="Z"};function Kh(e){for(var t="",n=0;n<e.length;n++){var i=e[n];if(1===n&&"-"===i&&"-"===e[0])return e;Gh(i)?t+="-"+i.toLowerCase():t+=i}return t.startsWith("ms-")?"-"+t:t}var Qh=function(e){return null==e||!1===e||""===e},Xh=function(e){var t,n,i=[];for(var r in e){var o=e[r];e.hasOwnProperty(r)&&!Qh(o)&&(Array.isArray(o)&&o.isCss||ch(o)?i.push("".concat(Kh(r),":"),o,";"):ph(o)?i.push.apply(i,yu(yu(["".concat(r," {")],Xh(o),!1),["}"],!1)):i.push("".concat(Kh(r),": ").concat((t=r,null==(n=o)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in wd||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return i};function Yh(e,t,n,i){return Qh(e)?[]:uh(e)?[".".concat(e.styledComponentId)]:ch(e)?!ch(r=e)||r.prototype&&r.prototype.isReactComponent||!t?[e]:Yh(e(t),t,n,i):e instanceof Wh?n?(e.inject(n,i),[e.getName(i)]):[e]:ph(e)?Xh(e):Array.isArray(e)?Array.prototype.concat.apply(Pd,e.map((function(e){return Yh(e,t,n,i)}))):[e.toString()];var r}function Jh(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(ch(n)&&!uh(n))return!1}return!0}var Zh=Hd(Ed),ep=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic=(void 0===n||n.isStatic)&&Jh(e),this.componentId=t,this.baseHash=Vd(Zh,t),this.baseStyle=n,Dh.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var i=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))i=dh(i,this.staticRulesId);else{var r=hh(Yh(this.rules,e,t,n)),o=Ud(Vd(this.baseHash,r)>>>0);if(!t.hasNameForId(this.componentId,o)){var s=n(r,".".concat(o),void 0,this.componentId);t.insertRules(this.componentId,o,s)}i=dh(i,o),this.staticRulesId=o}else{for(var a=Vd(this.baseHash,n.hash),l="",c=0;c<this.rules.length;c++){var u=this.rules[c];if("string"==typeof u)l+=u;else if(u){var d=hh(Yh(u,e,t,n));a=Vd(a,d+c),l+=d}}if(l){var h=Ud(a>>>0);t.hasNameForId(this.componentId,h)||t.insertRules(this.componentId,h,n(l,".".concat(h),void 0,this.componentId)),i=dh(i,h)}}return i},e}(),tp=t.createContext(void 0);tp.Consumer;var np={};new Set;function ip(e,n,i){var r=uh(e),o=e,s=!Gd(e),a=n.attrs,l=void 0===a?Pd:a,c=n.componentId,u=void 0===c?function(e,t){var n="string"!=typeof e?"sc":jd(e);np[n]=(np[n]||0)+1;var i="".concat(n,"-").concat(qd(Ed+n+np[n]));return t?"".concat(t,"-").concat(i):i}(n.displayName,n.parentComponentId):c,d=n.displayName,h=void 0===d?function(e){return Gd(e)?"styled.".concat(e):"Styled(".concat(Wd(e),")")}(e):d,p=n.displayName&&n.componentId?"".concat(jd(n.displayName),"-").concat(n.componentId):n.componentId||u,f=r&&o.attrs?o.attrs.concat(l).filter(Boolean):l,m=n.shouldForwardProp;if(r&&o.shouldForwardProp){var g=o.shouldForwardProp;if(n.shouldForwardProp){var v=n.shouldForwardProp;m=function(e,t){return g(e,t)&&v(e,t)}}else m=g}var b=new ep(i,p,r?o.componentStyle:void 0);function y(e,n){return function(e,n,i){var r=e.attrs,o=e.componentStyle,s=e.defaultProps,a=e.foldedComponentIds,l=e.styledComponentId,c=e.target,u=t.useContext(tp),d=Hh(),h=e.shouldForwardProp||d.shouldForwardProp,p=Od(n,u,s)||Ad,f=function(e,t,n){for(var i,r=bu(bu({},t),{className:void 0,theme:n}),o=0;o<e.length;o+=1){var s=ch(i=e[o])?i(r):i;for(var a in s)r[a]="className"===a?dh(r[a],s[a]):"style"===a?bu(bu({},r[a]),s[a]):s[a]}return t.className&&(r.className=dh(r.className,t.className)),r}(r,n,p),m=f.as||c,g={};for(var v in f)void 0===f[v]||"$"===v[0]||"as"===v||"theme"===v&&f.theme===p||("forwardedAs"===v?g.as=f.forwardedAs:h&&!h(v,m)||(g[v]=f[v]));var b=function(e,t){var n=Hh();return e.generateAndInjectStyles(t,n.styleSheet,n.stylis)}(o,f),y=dh(a,l);return b&&(y+=" "+b),f.className&&(y+=" "+f.className),g[Gd(m)&&!Md.has(m)?"class":"className"]=y,g.ref=i,(0,t.createElement)(m,g)}(x,e,n)}y.displayName=h;var x=t.forwardRef(y);return x.attrs=f,x.componentStyle=b,x.displayName=h,x.shouldForwardProp=m,x.foldedComponentIds=r?dh(o.foldedComponentIds,o.styledComponentId):"",x.styledComponentId=p,x.target=r?o.target:e,Object.defineProperty(x,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=r?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=0,r=t;i<r.length;i++)fh(e,r[i],!0);return e}({},o.defaultProps,e):e}}),mh(x,(function(){return".".concat(x.styledComponentId)})),s&&lh(x,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),x}function rp(e,t){for(var n=[e[0]],i=0,r=t.length;i<r;i+=1)n.push(t[i],e[i+1]);return n}var op=function(e){return Object.assign(e,{isCss:!0})};function sp(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(ch(e)||ph(e))return op(Yh(rp(Pd,yu([e],t,!0))));var i=e;return 0===t.length&&1===i.length&&"string"==typeof i[0]?Yh(i):op(Yh(rp(i,t)))}function ap(e,t,n){if(void 0===n&&(n=Ad),!t)throw gh(1,t);var i=function(i){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];return e(t,n,sp.apply(void 0,yu([i],r,!1)))};return i.attrs=function(i){return ap(e,t,bu(bu({},n),{attrs:Array.prototype.concat(n.attrs,i).filter(Boolean)}))},i.withConfig=function(i){return ap(e,t,bu(bu({},n),i))},i}var lp=function(e){return ap(ip,e)},cp=lp;Md.forEach((function(e){cp[e]=lp(e)}));!function(){function e(e,t){this.rules=e,this.componentId=t,this.isStatic=Jh(e),Dh.registerId(this.componentId+1)}e.prototype.createStyles=function(e,t,n,i){var r=i(hh(Yh(this.rules,t,n,i)),""),o=this.componentId+e;n.insertRules(o,o,r)},e.prototype.removeStyles=function(e,t){t.clearRules(this.componentId+e)},e.prototype.renderStyles=function(e,t,n,i){e>2&&Dh.registerId(this.componentId+e),this.removeStyles(e,n),this.createStyles(e,t,n,i)}}();(function(){function e(){var e=this;this._emitSheetCSS=function(){var t=e.instance.toString();if(!t)return"";var n=Ih(),i=hh([n&&'nonce="'.concat(n,'"'),"".concat(Sd,'="true"'),"".concat(Td,'="').concat(Ed,'"')].filter(Boolean)," ");return"<style ".concat(i,">").concat(t,"</style>")},this.getStyleTags=function(){if(e.sealed)throw gh(2);return e._emitSheetCSS()},this.getStyleElement=function(){var n;if(e.sealed)throw gh(2);var i=e.instance.toString();if(!i)return[];var r=((n={})[Sd]="",n[Td]=Ed,n.dangerouslySetInnerHTML={__html:i},n),o=Ih();return o&&(r.nonce=o),[t.createElement("style",bu({},r,{key:"sc-0-0"}))]},this.seal=function(){e.sealed=!0},this.instance=new Dh({isServer:!0}),this.sealed=!1}e.prototype.collectStyles=function(e){if(this.sealed)throw gh(2);return t.createElement(qh,{sheet:this.instance},e)},e.prototype.interleaveWithNodeStream=function(e){throw gh(3)}})(),"__sc-".concat(Sd,"__");function up(e,t){let n=e.length;for(;n--;)if(t(e[n],n,e))return n;return-1}const dp="Output:";const hp="custom/blackbox-base",pp={"custom/blackbox-base":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:1500,outputPrice:7500,cacheWritesPrice:1875,cacheReadsPrice:150,maxNumImages:100,isProModel:!1,supportsAnthropicPromptCache:!1},"custom/blackbox-pro":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:1,outputPrice:5,cacheWritesPrice:1.25,cacheReadsPrice:.1,requestPrice:.08,maxNumImages:20,isProModel:!0,supportsAnthropicPromptCache:!0},"claude-3-5-sonnet-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:1500,outputPrice:7500,cacheWritesPrice:1875,cacheReadsPrice:150,requestPrice:.08,maxNumImages:20,isProModel:!0,supportsAnthropicPromptCache:!0},"blackbox-pro-plus":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:1500,outputPrice:7500,cacheWritesPrice:1875,cacheReadsPrice:150,requestPrice:.08,maxNumImages:20,isProModel:!0,supportsAnthropicPromptCache:!0},"claude-3-7-sonnet-20250219":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:1500,outputPrice:7500,cacheWritesPrice:1875,cacheReadsPrice:150,requestPrice:.08,maxNumImages:20,isProModel:!0,supportsAnthropicPromptCache:!0},"claude-3-5-haiku-20241022":{maxTokens:8192,contextWindow:2e5,supportsImages:!1,supportsPromptCache:!0,inputPrice:1,outputPrice:5,cacheWritesPrice:1.25,cacheReadsPrice:.1,isProModel:!0,supportsAnthropicPromptCache:!1},"claude-3-opus-20240229":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:15,outputPrice:75,cacheWritesPrice:18.75,cacheReadsPrice:1.5,isProModel:!0,supportsAnthropicPromptCache:!1},"claude-3-haiku-20240307":{maxTokens:4096,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:.25,outputPrice:1.25,cacheWritesPrice:.3,cacheReadsPrice:.03,isProModel:!1,supportsAnthropicPromptCache:!1},"gpt-4o-mini":{maxTokens:16384,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:.15,outputPrice:.6,maxNumImages:100,isProModel:!1,supportsAnthropicPromptCache:!1},"Qwen/Qwen2.5-72B-Instruct-Turbo":{maxTokens:4096,contextWindow:32768,supportsImages:!1,supportsPromptCache:!1,inputPrice:1.2,outputPrice:1.2,isProModel:!1,supportsAnthropicPromptCache:!1},"deepseek-v3":{maxTokens:8192,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.14,outputPrice:.28,isProModel:!1,supportsAnthropicPromptCache:!1},"deepseek-r1":{maxTokens:8192,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.14,outputPrice:.28,requestPrice:.08,isProModel:!1,supportsAnthropicPromptCache:!1},"deepseek/deepseek-chat":{maxTokens:8192,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.14,outputPrice:.28,isProModel:!1,supportsAnthropicPromptCache:!1},"o3-mini":{maxTokens:8192,contextWindow:64e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.14,outputPrice:.28,requestPrice:.08,isProModel:!1,supportsAnthropicPromptCache:!1},o1:{maxTokens:32768,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:15,outputPrice:60,requestPrice:.08,isProModel:!1,supportsAnthropicPromptCache:!1},"anthropic/claude-sonnet-4":{maxTokens:8192,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:.14,outputPrice:.28,requestPrice:.08,isProModel:!0,supportsAnthropicPromptCache:!0},"google/gemini-2.5-pro-preview":{maxTokens:8192,contextWindow:2097152,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,requestPrice:.08,maxNumImages:100,isProModel:!0,supportsAnthropicPromptCache:!1},"llama-4-maverick-17b-128e-instruct-fp8":{maxTokens:8192,contextWindow:128e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.14,outputPrice:.28,requestPrice:.08,isProModel:!1,supportsAnthropicPromptCache:!1},"grok-3-beta":{maxTokens:8192,contextWindow:128e3,supportsImages:!1,supportsPromptCache:!1,inputPrice:.14,outputPrice:.28,requestPrice:.08,isProModel:!1,supportsAnthropicPromptCache:!1},"gemini-2.5-pro-preview-03-25":{maxTokens:8192,contextWindow:2097152,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,requestPrice:.08,maxNumImages:100,isProModel:!0,supportsAnthropicPromptCache:!1},"blackbox-voice":{maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsPromptCache:!0,inputPrice:1,outputPrice:5,cacheWritesPrice:1.25,cacheReadsPrice:.1,requestPrice:.1,maxNumImages:20,supportsAnthropicPromptCache:!1}},fp="anthropic/claude-3.5-sonnet:beta",mp={maxTokens:8192,contextWindow:2e5,supportsImages:!0,supportsComputerUse:!0,supportsPromptCache:!0,inputPrice:3,outputPrice:15,cacheWritesPrice:3.75,cacheReadsPrice:.3,supportsAnthropicPromptCache:!1,description:"The new Claude 3.5 Sonnet delivers better-than-Opus capabilities, faster-than-Sonnet speeds, at the same Sonnet prices. Sonnet is particularly good at:\n\n- Coding: New Sonnet scores ~49% on SWE-Bench Verified, higher than the last best score, and without any fancy prompt scaffolding\n- Data science: Augments human data science expertise; navigates unstructured data while using multiple tools for insights\n- Visual processing: excelling at interpreting charts, graphs, and images, accurately transcribing text to derive insights beyond just the text alone\n- Agentic tasks: exceptional tool use, making it great at agentic tasks (i.e. complex, multi-step problem solving tasks that require engaging with other systems)\n\n#multimodal\n\n_This is a faster endpoint, made available in collaboration with Anthropic, that is self-moderated: response moderation happens on the provider's side instead of OpenRouter's. For requests that pass moderation, it's identical to the [Standard](/anthropic/claude-3.5-sonnet) variant._"},gp={maxTokens:-1,contextWindow:128e3,supportsImages:!0,supportsPromptCache:!1,inputPrice:0,outputPrice:0,supportsAnthropicPromptCache:!1},vp={".hljs-comment":["comment"],".hljs-tag":["tag"],".hljs-doctag":["keyword"],".hljs-keyword":["keyword"],".hljs-meta .hljs-keyword":["keyword"],".hljs-template-tag":["keyword"],".hljs-template-variable":["keyword"],".hljs-type":["keyword"],".hljs-variable.language_":["keyword"],".hljs-title":["title","function","class"],".hljs-title.class_":["title","function","class","variable"],".hljs-title.class_.inherited__":["title","function","class","variable"],".hljs-title.function_":["support.function","entity.name.function","title","function","class"],".hljs-built_in":["support.function","entity.name.function","title","function","class"],".hljs-name":["constant"],".hljs-attr":["variable","operator","number"],".hljs-attribute":["attribute","variable","operator","number"],".hljs-literal":["variable","operator","number"],".hljs-meta":["variable","operator","number"],".hljs-number":["constant.numeric","number","variable","operator"],".hljs-operator":["variable","operator","number"],".hljs-variable":["variable","operator","number"],".hljs-selector-attr":["variable","operator","number"],".hljs-selector-class":["variable","operator","number"],".hljs-selector-id":["variable","operator","number"],".hljs-regexp":["string"],".hljs-string":["string"],".hljs-meta .hljs-string":["string"],".hljs-params":["variable","operator","number"]};function bp(e){const t=e.rules||[],n={};t.forEach((e=>{let{token:t,foreground:i}=e;i&&t&&(n[t]=i)}));const i={};return Object.keys(vp).forEach((e=>{const t=vp[e];for(const r of t)if(n[r]){i[e]=n[r];break}})),0===Object.keys(i).length?function(){const e=getComputedStyle(document.body).getPropertyValue("--vscode-editor-background"),{r:t,g:n,b:i}=function(e){e.startsWith("#")&&(e=e.slice(1));e.length>6&&(e=e.slice(0,6));const t=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),i=parseInt(e.substring(4,6),16);return{r:t,g:n,b:i}}(e),r=(t+n+i)/3;return r>=128?{".hljs-comment":"#008000",".hljs-doctag":"#0000ff",".hljs-keyword":"#0000ff",".hljs-meta .hljs-keyword":"#0000ff",".hljs-template-tag":"#0000ff",".hljs-template-variable":"#0000ff",".hljs-type":"#0000ff",".hljs-variable.language_":"#0000ff",".hljs-title.class_":"#001080",".hljs-title.class_.inherited__":"#001080",".hljs-title.function_":"#795E26",".hljs-built_in":"#795E26",".hljs-attr":"#001080",".hljs-attribute":"#001080",".hljs-literal":"#001080",".hljs-meta":"#001080",".hljs-number":"#098658",".hljs-operator":"#001080",".hljs-variable":"#001080",".hljs-selector-attr":"#001080",".hljs-selector-class":"#001080",".hljs-selector-id":"#001080",".hljs-regexp":"#a31515",".hljs-string":"#a31515",".hljs-meta .hljs-string":"#a31515",".hljs-params":"#001080"}:{".hljs-comment":"#6A9955",".hljs-doctag":"#569cd6",".hljs-keyword":"#569cd6",".hljs-meta .hljs-keyword":"#569cd6",".hljs-template-tag":"#569cd6",".hljs-template-variable":"#569cd6",".hljs-type":"#569cd6",".hljs-variable.language_":"#569cd6",".hljs-title.class_":"#9CDCFE",".hljs-title.class_.inherited__":"#9CDCFE",".hljs-title.function_":"#DCDCAA",".hljs-built_in":"#DCDCAA",".hljs-attr":"#9CDCFE",".hljs-attribute":"#9CDCFE",".hljs-literal":"#9CDCFE",".hljs-meta":"#9CDCFE",".hljs-number":"#b5cea8",".hljs-operator":"#9CDCFE",".hljs-variable":"#9CDCFE",".hljs-selector-attr":"#9CDCFE",".hljs-selector-class":"#9CDCFE",".hljs-selector-id":"#9CDCFE",".hljs-regexp":"#ce9178",".hljs-string":"#ce9178",".hljs-meta .hljs-string":"#ce9178",".hljs-params":"#9CDCFE"}}():i}const yp={mode:"act",autoMode:!1},xp=(0,t.createContext)(void 0),kp=e=>{let{children:n}=e;const[i,r]=(0,t.useState)({version:"",blackboxMessages:[],taskHistory:[],shouldShowAnnouncement:!1,alwaysAllowReadOnly:!0,chatModeEnabled:!1,chatSettings:yp}),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[h,p]=(0,t.useState)(void 0),[f,m]=(0,t.useState)([]),[g,v]=(0,t.useState)({[fp]:mp}),[b,y]=(0,t.useState)([]),[x,k]=(0,t.useState)({items:[]}),w=(0,t.useCallback)((e=>{const t=e.data;switch(t.type){case"actionToDisableEnableChat":"chatModeEnabled"===t.value?r((e=>({...e,chatModeEnabled:!0}))):"chatModeDisabled"===t.value&&r((e=>({...e,chatModeEnabled:!1})));break;case"state":{var n;r(t.state);const e=null===(n=t.state)||void 0===n?void 0:n.apiConfiguration,i=!!e&&[e.apiKey,e.openRouterApiKey,e.awsRegion,e.vertexProjectId,e.openAiApiKey,e.ollamaModelId,e.lmStudioModelId,e.geminiApiKey,e.openAiNativeApiKey].some((e=>void 0!==e));l(!i),s(!0);break}case"theme":if(t.text){const e=JSON.parse(t.text);u(e.isDark),p(bp(e||{}))}break;case"workspaceUpdated":var i;m(null!==(i=t.filePaths)&&void 0!==i?i:[]);break;case"partialMessage":{const e=t.partialMessage;r((t=>{const n=up(t.blackboxMessages,(t=>t.ts===e.ts));if(-1!==n){const i=[...t.blackboxMessages];return i[n]=e,{...t,blackboxMessages:i}}return t}));break}case"openRouterModels":{var o;const e=null!==(o=t.openRouterModels)&&void 0!==o?o:{};v({[fp]:mp,...e});break}case"mcpServers":var a;y(null!==(a=t.mcpServers)&&void 0!==a?a:[]);break;case"mcpMarketplaceCatalog":t.mcpMarketplaceCatalog&&k(t.mcpMarketplaceCatalog)}}),[]);d("message",w),(0,t.useEffect)((()=>{hs.postMessage({type:"webviewDidLaunch"})}),[]);const S={...i,didHydrateState:o,showWelcome:a,theme:h,isDarkTheme:c,openRouterModels:g,mcpServers:b,mcpMarketplaceCatalog:x,filePaths:f,setApiConfiguration:e=>r((t=>({...t,apiConfiguration:e}))),setCustomInstructions:e=>r((t=>({...t,customInstructions:e}))),setAlwaysAllowReadOnly:e=>r((t=>({...t,alwaysAllowReadOnly:e}))),setShowAnnouncement:e=>r((t=>({...t,shouldShowAnnouncement:e})))};return(0,us.jsx)(xp.Provider,{value:S,children:n})},wp=()=>{const e=(0,t.useContext)(xp);if(void 0===e)throw new Error("useExtensionState must be used within an ExtensionStateContextProvider");return e},Sp=e=>{let{showHistoryView:t}=e;const{taskHistory:n}=wp(),i=e=>{const t=new Date(e);return null===t||void 0===t?void 0:t.toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(", "," ").replace(" at",",").toUpperCase()};return(0,us.jsxs)("div",{style:{flexShrink:0},children:[(0,us.jsx)("style",{children:'\n\t\t\t\t\t.history-preview-item {\n\t\t\t\t\t\tbackground-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 65%, transparent);\n\t\t\t\t\t\tborder-radius: 4px;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\tborder: "1px solid var(--vscode-input-border)";\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tmargin-bottom: 12px;\n\t\t\t\t\t}\n\t\t\t\t\t.history-preview-item:hover {\n\t\t\t\t\t\tbackground-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 100%, transparent);\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\tpointer-events: auto;\n\t\t\t\t\t}\n\t\t\t\t'}),(0,us.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",margin:"10px 20px 10px 20px",display:"flex",alignItems:"center"},children:[(0,us.jsx)("span",{className:"codicon codicon-comment-discussion",style:{marginRight:"4px",transform:"scale(0.9)"}}),(0,us.jsx)("span",{style:{fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:"Recent Tasks"})]}),(0,us.jsxs)("div",{style:{padding:"0px 20px 0 20px"},children:[n.filter((e=>e.ts&&e.task)).slice(0,1).map((e=>(0,us.jsx)("div",{className:"history-preview-item",onClick:()=>(e=>{hs.postMessage({type:"showTaskWithId",text:e})})(e.id),children:(0,us.jsxs)("div",{style:{padding:"12px",border:"var(--vscode-input-border)"},children:[(0,us.jsx)("div",{style:{marginBottom:"8px"},children:(0,us.jsx)("span",{style:{color:"var(--vscode-descriptionForeground)",fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:i(e.ts)})}),(0,us.jsx)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-descriptionForeground)",marginBottom:"8px",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},children:e.task}),(0,us.jsx)("div",{style:{fontSize:"0.85em",color:"var(--vscode-descriptionForeground)"},children:!!e.totalCost&&(0,us.jsx)(us.Fragment,{children:" \u2022 "})})]})},e.id))),(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,us.jsx)(Jo,{appearance:"icon",onClick:()=>t(),style:{opacity:.9},children:(0,us.jsx)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-descriptionForeground)",border:"1px solid var(--vscode-input-border)",padding:"3px 5px",borderRadius:"4px"},children:"View all history"})})})]})]})},Cp=(0,t.memo)(Sp);function Tp(e){return Array.isArray?Array.isArray(e):"[object Array]"===Np(e)}const Ep=1/0;function _p(e){return null==e?"":function(e){if("string"==typeof e)return e;let t=e+"";return"0"==t&&1/e==-Ep?"-0":t}(e)}function Ip(e){return"string"===typeof e}function Rp(e){return"number"===typeof e}function Pp(e){return!0===e||!1===e||function(e){return Ap(e)&&null!==e}(e)&&"[object Boolean]"==Np(e)}function Ap(e){return"object"===typeof e}function Op(e){return void 0!==e&&null!==e}function Mp(e){return!e.trim().length}function Np(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const Dp=e=>`Missing ${e} property in key`,jp=e=>`Property 'weight' in key '${e}' must be a positive integer`,Lp=Object.prototype.hasOwnProperty;class Fp{constructor(e){this._keys=[],this._keyMap={};let t=0;e.forEach((e=>{let n=Bp(e);this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight})),this._keys.forEach((e=>{e.weight/=t}))}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Bp(e){let t=null,n=null,i=null,r=1,o=null;if(Ip(e)||Tp(e))i=e,t=Up(e),n=$p(e);else{if(!Lp.call(e,"name"))throw new Error(Dp("name"));const s=e.name;if(i=s,Lp.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(jp(s));t=Up(s),n=$p(s),o=e.getFn}return{path:t,id:n,weight:r,src:i,getFn:o}}function Up(e){return Tp(e)?e:e.split(".")}function $p(e){return Tp(e)?e.join("."):e}const zp={useExtendedSearch:!1,getFn:function(e,t){let n=[],i=!1;const r=(e,t,o)=>{if(Op(e))if(t[o]){const s=e[t[o]];if(!Op(s))return;if(o===t.length-1&&(Ip(s)||Rp(s)||Pp(s)))n.push(_p(s));else if(Tp(s)){i=!0;for(let e=0,n=s.length;e<n;e+=1)r(s[e],t,o+1)}else t.length&&r(s,t,o+1)}else n.push(e)};return r(e,Ip(t)?t.split("."):t,0),i?n:n[0]},ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Vp={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1,includeMatches:!1,findAllMatches:!1,minMatchCharLength:1,location:0,threshold:.6,distance:100,...zp};const Hp=/[^ ]+/g;class qp{constructor(){let{getFn:e=Vp.getFn,fieldNormWeight:t=Vp.fieldNormWeight}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.norm=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=new Map,i=Math.pow(10,t);return{get(t){const r=t.match(Hp).length;if(n.has(r))return n.get(r);const o=1/Math.pow(r,.5*e),s=parseFloat(Math.round(o*i)/i);return n.set(r,s),s},clear(){n.clear()}}}(t,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.docs=e}setIndexRecords(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.records=e}setKeys(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.keys=e,this._keysMap={},e.forEach(((e,t)=>{this._keysMap[e.id]=t}))}create(){!this.isCreated&&this.docs.length&&(this.isCreated=!0,Ip(this.docs[0])?this.docs.forEach(((e,t)=>{this._addString(e,t)})):this.docs.forEach(((e,t)=>{this._addObject(e,t)})),this.norm.clear())}add(e){const t=this.size();Ip(e)?this._addString(e,t):this._addObject(e,t)}removeAt(e){this.records.splice(e,1);for(let t=e,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(e,t){return e[this._keysMap[t]]}size(){return this.records.length}_addString(e,t){if(!Op(e)||Mp(e))return;let n={v:e,i:t,n:this.norm.get(e)};this.records.push(n)}_addObject(e,t){let n={i:t,$:{}};this.keys.forEach(((t,i)=>{let r=t.getFn?t.getFn(e):this.getFn(e,t.path);if(Op(r))if(Tp(r)){let e=[];const t=[{nestedArrIndex:-1,value:r}];for(;t.length;){const{nestedArrIndex:n,value:i}=t.pop();if(Op(i))if(Ip(i)&&!Mp(i)){let t={v:i,i:n,n:this.norm.get(i)};e.push(t)}else Tp(i)&&i.forEach(((e,n)=>{t.push({nestedArrIndex:n,value:e})}))}n.$[i]=e}else if(Ip(r)&&!Mp(r)){let e={v:r,n:this.norm.get(r)};n.$[i]=e}})),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function Wp(e,t){let{getFn:n=Vp.getFn,fieldNormWeight:i=Vp.fieldNormWeight}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new qp({getFn:n,fieldNormWeight:i});return r.setKeys(e.map(Bp)),r.setSources(t),r.create(),r}function Gp(e){let{errors:t=0,currentLocation:n=0,expectedLocation:i=0,distance:r=Vp.distance,ignoreLocation:o=Vp.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t/e.length;if(o)return s;const a=Math.abs(i-n);return r?s+a/r:a?1:s}const Kp=32;function Qp(e,t,n){let{location:i=Vp.location,distance:r=Vp.distance,threshold:o=Vp.threshold,findAllMatches:s=Vp.findAllMatches,minMatchCharLength:a=Vp.minMatchCharLength,includeMatches:l=Vp.includeMatches,ignoreLocation:c=Vp.ignoreLocation}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(t.length>Kp)throw new Error((e=>`Pattern length exceeds max of ${e}.`)(Kp));const u=t.length,d=e.length,h=Math.max(0,Math.min(i,d));let p=o,f=h;const m=a>1||l,g=m?Array(d):[];let v;for(;(v=e.indexOf(t,f))>-1;){let e=Gp(t,{currentLocation:v,expectedLocation:h,distance:r,ignoreLocation:c});if(p=Math.min(e,p),f=v+u,m){let e=0;for(;e<u;)g[v+e]=1,e+=1}}f=-1;let b=[],y=1,x=u+d;const k=1<<u-1;for(let S=0;S<u;S+=1){let i=0,o=x;for(;i<o;){Gp(t,{errors:S,currentLocation:h+o,expectedLocation:h,distance:r,ignoreLocation:c})<=p?i=o:x=o,o=Math.floor((x-i)/2+i)}x=o;let a=Math.max(1,h-o+1),l=s?d:Math.min(h+o,d)+u,v=Array(l+2);v[l+1]=(1<<S)-1;for(let s=l;s>=a;s-=1){let i=s-1,o=n[e.charAt(i)];if(m&&(g[i]=+!!o),v[s]=(v[s+1]<<1|1)&o,S&&(v[s]|=(b[s+1]|b[s])<<1|1|b[s+1]),v[s]&k&&(y=Gp(t,{errors:S,currentLocation:i,expectedLocation:h,distance:r,ignoreLocation:c}),y<=p)){if(p=y,f=i,f<=h)break;a=Math.max(1,2*h-f)}}if(Gp(t,{errors:S+1,currentLocation:h,expectedLocation:h,distance:r,ignoreLocation:c})>p)break;b=v}const w={isMatch:f>=0,score:Math.max(.001,y)};if(m){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Vp.minMatchCharLength,n=[],i=-1,r=-1,o=0;for(let s=e.length;o<s;o+=1){let s=e[o];s&&-1===i?i=o:s||-1===i||(r=o-1,r-i+1>=t&&n.push([i,r]),i=-1)}return e[o-1]&&o-i>=t&&n.push([i,o-1]),n}(g,a);e.length?l&&(w.indices=e):w.isMatch=!1}return w}function Xp(e){let t={};for(let n=0,i=e.length;n<i;n+=1){const r=e.charAt(n);t[r]=(t[r]||0)|1<<i-n-1}return t}class Yp{constructor(e){let{location:t=Vp.location,threshold:n=Vp.threshold,distance:i=Vp.distance,includeMatches:r=Vp.includeMatches,findAllMatches:o=Vp.findAllMatches,minMatchCharLength:s=Vp.minMatchCharLength,isCaseSensitive:a=Vp.isCaseSensitive,ignoreLocation:l=Vp.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options={location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(e,t)=>{this.chunks.push({pattern:e,alphabet:Xp(e),startIndex:t})},u=this.pattern.length;if(u>Kp){let e=0;const t=u%Kp,n=u-t;for(;e<n;)c(this.pattern.substr(e,Kp),e),e+=Kp;if(t){const e=u-Kp;c(this.pattern.substr(e),e)}}else c(this.pattern,0)}searchIn(e){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(e=e.toLowerCase()),this.pattern===e){let t={isMatch:!0,score:0};return n&&(t.indices=[[0,e.length-1]]),t}const{location:i,distance:r,threshold:o,findAllMatches:s,minMatchCharLength:a,ignoreLocation:l}=this.options;let c=[],u=0,d=!1;this.chunks.forEach((t=>{let{pattern:h,alphabet:p,startIndex:f}=t;const{isMatch:m,score:g,indices:v}=Qp(e,h,p,{location:i+f,distance:r,threshold:o,findAllMatches:s,minMatchCharLength:a,includeMatches:n,ignoreLocation:l});m&&(d=!0),u+=g,m&&v&&(c=[...c,...v])}));let h={isMatch:d,score:d?u/this.chunks.length:1};return d&&n&&(h.indices=c),h}}class Jp{constructor(e){this.pattern=e}static isMultiMatch(e){return Zp(e,this.multiRegex)}static isSingleMatch(e){return Zp(e,this.singleRegex)}search(){}}function Zp(e,t){const n=e.match(t);return n?n[1]:null}class ef extends Jp{constructor(e){let{location:t=Vp.location,threshold:n=Vp.threshold,distance:i=Vp.distance,includeMatches:r=Vp.includeMatches,findAllMatches:o=Vp.findAllMatches,minMatchCharLength:s=Vp.minMatchCharLength,isCaseSensitive:a=Vp.isCaseSensitive,ignoreLocation:l=Vp.ignoreLocation}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e),this._bitapSearch=new Yp(e,{location:t,threshold:n,distance:i,includeMatches:r,findAllMatches:o,minMatchCharLength:s,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class tf extends Jp{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let t,n=0;const i=[],r=this.pattern.length;for(;(t=e.indexOf(this.pattern,n))>-1;)n=t+r,i.push([t,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const nf=[class extends Jp{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const t=e===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},tf,class extends Jp{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const t=e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}},class extends Jp{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const t=!e.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Jp{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const t=!e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},class extends Jp{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const t=e.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[e.length-this.pattern.length,e.length-1]}}},class extends Jp{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const t=-1===e.indexOf(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,e.length-1]}}},ef],rf=nf.length,of=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/;const sf=new Set([ef.type,tf.type]);class af{constructor(e){let{isCaseSensitive:t=Vp.isCaseSensitive,includeMatches:n=Vp.includeMatches,minMatchCharLength:i=Vp.minMatchCharLength,ignoreLocation:r=Vp.ignoreLocation,findAllMatches:o=Vp.findAllMatches,location:s=Vp.location,threshold:a=Vp.threshold,distance:l=Vp.distance}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:i,findAllMatches:o,ignoreLocation:r,location:s,threshold:a,distance:l},this.pattern=t?e:e.toLowerCase(),this.query=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.split("|").map((e=>{let n=e.trim().split(of).filter((e=>e&&!!e.trim())),i=[];for(let r=0,o=n.length;r<o;r+=1){const e=n[r];let o=!1,s=-1;for(;!o&&++s<rf;){const n=nf[s];let r=n.isMultiMatch(e);r&&(i.push(new n(r,t)),o=!0)}if(!o)for(s=-1;++s<rf;){const n=nf[s];let r=n.isSingleMatch(e);if(r){i.push(new n(r,t));break}}}return i}))}(this.pattern,this.options)}static condition(e,t){return t.useExtendedSearch}searchIn(e){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let r=0,o=[],s=0;for(let a=0,l=t.length;a<l;a+=1){const i=t[a];o.length=0,r=0;for(let t=0,a=i.length;t<a;t+=1){const a=i[t],{isMatch:l,indices:c,score:u}=a.search(e);if(!l){s=0,r=0,o.length=0;break}if(r+=1,s+=u,n){const e=a.constructor.type;sf.has(e)?o=[...o,...c]:o.push(c)}}if(r){let e={isMatch:!0,score:s/r};return n&&(e.indices=o),e}}return{isMatch:!1,score:1}}}const lf=[];function cf(e,t){for(let n=0,i=lf.length;n<i;n+=1){let i=lf[n];if(i.condition(e,t))return new i(e,t)}return new Yp(e,t)}const uf="$and",df="$or",hf="$path",pf="$val",ff=e=>!(!e[uf]&&!e[df]),mf=e=>({[uf]:Object.keys(e).map((t=>({[t]:e[t]})))});function gf(e,t){let{auto:n=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e=>{let r=Object.keys(e);const o=(e=>!!e[hf])(e);if(!o&&r.length>1&&!ff(e))return i(mf(e));if((e=>!Tp(e)&&Ap(e)&&!ff(e))(e)){const i=o?e[hf]:r[0],s=o?e[pf]:e[i];if(!Ip(s))throw new Error((e=>`Invalid value for key ${e}`)(i));const a={keyId:$p(i),pattern:s};return n&&(a.searcher=cf(s,t)),a}let s={children:[],operator:r[0]};return r.forEach((t=>{const n=e[t];Tp(n)&&n.forEach((e=>{s.children.push(i(e))}))})),s};return ff(e)||(e=mf(e)),i(e)}function vf(e,t){const n=e.matches;t.matches=[],Op(n)&&n.forEach((e=>{if(!Op(e.indices)||!e.indices.length)return;const{indices:n,value:i}=e;let r={indices:n,value:i};e.key&&(r.key=e.key.src),e.idx>-1&&(r.refIndex=e.idx),t.matches.push(r)}))}function bf(e,t){t.score=e.score}class yf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;this.options={...Vp,...t},this.options.useExtendedSearch,this._keyStore=new Fp(this.options.keys),this.setCollection(e,n)}setCollection(e,t){if(this._docs=e,t&&!(t instanceof qp))throw new Error("Incorrect 'index' type");this._myIndex=t||Wp(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){Op(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!1;const t=[];for(let n=0,i=this._docs.length;n<i;n+=1){const r=this._docs[n];e(r,n)&&(this.removeAt(n),n-=1,i-=1,t.push(r))}return t}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e){let{limit:t=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{includeMatches:n,includeScore:i,shouldSort:r,sortFn:o,ignoreFieldNorm:s}=this.options;let a=Ip(e)?Ip(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return function(e,t){let{ignoreFieldNorm:n=Vp.ignoreFieldNorm}=t;e.forEach((e=>{let t=1;e.matches.forEach((e=>{let{key:i,norm:r,score:o}=e;const s=i?i.weight:null;t*=Math.pow(0===o&&s?Number.EPSILON:o,(s||1)*(n?1:r))})),e.score=t}))}(a,{ignoreFieldNorm:s}),r&&a.sort(o),Rp(t)&&t>-1&&(a=a.slice(0,t)),function(e,t){let{includeMatches:n=Vp.includeMatches,includeScore:i=Vp.includeScore}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=[];return n&&r.push(vf),i&&r.push(bf),e.map((e=>{const{idx:n}=e,i={item:t[n],refIndex:n};return r.length&&r.forEach((t=>{t(e,i)})),i}))}(a,this._docs,{includeMatches:n,includeScore:i})}_searchStringList(e){const t=cf(e,this.options),{records:n}=this._myIndex,i=[];return n.forEach((e=>{let{v:n,i:r,n:o}=e;if(!Op(n))return;const{isMatch:s,score:a,indices:l}=t.searchIn(n);s&&i.push({item:n,idx:r,matches:[{score:a,value:n,norm:o,indices:l}]})})),i}_searchLogical(e){const t=gf(e,this.options),n=(e,t,i)=>{if(!e.children){const{keyId:n,searcher:r}=e,o=this._findMatches({key:this._keyStore.get(n),value:this._myIndex.getValueForItemAtKeyId(t,n),searcher:r});return o&&o.length?[{idx:i,item:t,matches:o}]:[]}const r=[];for(let o=0,s=e.children.length;o<s;o+=1){const s=e.children[o],a=n(s,t,i);if(a.length)r.push(...a);else if(e.operator===uf)return[]}return r},i=this._myIndex.records,r={},o=[];return i.forEach((e=>{let{$:i,i:s}=e;if(Op(i)){let e=n(t,i,s);e.length&&(r[s]||(r[s]={idx:s,item:i,matches:[]},o.push(r[s])),e.forEach((e=>{let{matches:t}=e;r[s].matches.push(...t)})))}})),o}_searchObjectList(e){const t=cf(e,this.options),{keys:n,records:i}=this._myIndex,r=[];return i.forEach((e=>{let{$:i,i:o}=e;if(!Op(i))return;let s=[];n.forEach(((e,n)=>{s.push(...this._findMatches({key:e,value:i[n],searcher:t}))})),s.length&&r.push({idx:o,item:i,matches:s})})),r}_findMatches(e){let{key:t,value:n,searcher:i}=e;if(!Op(n))return[];let r=[];if(Tp(n))n.forEach((e=>{let{v:n,i:o,n:s}=e;if(!Op(n))return;const{isMatch:a,score:l,indices:c}=i.searchIn(n);a&&r.push({score:l,key:t,value:n,idx:o,norm:s,indices:c})}));else{const{v:e,n:o}=n,{isMatch:s,score:a,indices:l}=i.searchIn(e);s&&r.push({score:a,key:t,value:e,norm:o,indices:l})}return r}}yf.version="7.0.0",yf.createIndex=Wp,yf.parseIndex=function(e){let{getFn:t=Vp.getFn,fieldNormWeight:n=Vp.fieldNormWeight}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{keys:i,records:r}=e,o=new qp({getFn:t,fieldNormWeight:n});return o.setKeys(i),o.setIndexRecords(r),o},yf.config=Vp,yf.parseQuery=gf,function(){lf.push(...arguments)}(af);const xf=e=>{let{onDone:n}=e;const{taskHistory:i}=wp(),[r,o]=(0,t.useState)(""),[s,a]=(0,t.useState)("newest"),[l,c]=(0,t.useState)("newest");(0,t.useEffect)((()=>{r&&"mostRelevant"!==s&&!l?(c(s),a("mostRelevant")):!r&&"mostRelevant"===s&&l&&(a(l),c(null))}),[r,s,l]);const u=e=>{const t=new Date(e);return null===t||void 0===t?void 0:t.toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(", "," ").replace(" at",",").toUpperCase()},d=(0,t.useMemo)((()=>i.filter((e=>e.ts&&e.task))),[i]),h=(0,t.useMemo)((()=>new yf(d,{keys:["task"],threshold:.6,shouldSort:!0,isCaseSensitive:!1,ignoreLocation:!1,includeMatches:!0,minMatchCharLength:1})),[d]),p=(0,t.useMemo)((()=>{let e=r?wf(h.search(r)):d;return e.sort(((e,t)=>{switch(s){case"oldest":return e.ts-t.ts;case"mostExpensive":return(t.totalCost||0)-(e.totalCost||0);case"mostTokens":return(t.tokensIn||0)+(t.tokensOut||0)+(t.cacheWrites||0)+(t.cacheReads||0)-((e.tokensIn||0)+(e.tokensOut||0)+(e.cacheWrites||0)+(e.cacheReads||0));case"mostRelevant":return r?0:t.ts-e.ts;default:return t.ts-e.ts}})),e}),[d,r,h,s]);return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("style",{children:"\n\t\t\t\t\t.history-item:hover {\n\t\t\t\t\t\tbackground-color: var(--vscode-list-hoverBackground);\n\t\t\t\t\t}\n\t\t\t\t\t.delete-button, .export-button {\n\t\t\t\t\t\topacity: 0;\n\t\t\t\t\t\tpointer-events: none;\n\t\t\t\t\t}\n\t\t\t\t\t.history-item:hover .delete-button,\n\t\t\t\t\t.history-item:hover .export-button {\n\t\t\t\t\t\topacity: 1;\n\t\t\t\t\t\tpointer-events: auto;\n\t\t\t\t\t}\n\t\t\t\t\t.history-item-highlight {\n\t\t\t\t\t\tbackground-color: var(--vscode-editor-findMatchHighlightBackground);\n\t\t\t\t\t\tcolor: inherit;\n\t\t\t\t\t}\n\t\t\t\t"}),(0,us.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 17px 10px 20px"},children:[(0,us.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"History"}),(0,us.jsx)(Jo,{onClick:n,children:"Done"})]}),(0,us.jsx)("div",{style:{padding:"5px 17px 6px 17px"},children:(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[(0,us.jsxs)(cs,{style:{width:"100%"},placeholder:"Fuzzy search history...",value:r,onInput:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;o(n),n&&!r&&"mostRelevant"!==s&&(c(s),a("mostRelevant"))},children:[(0,us.jsx)("div",{slot:"start",className:"codicon codicon-search",style:{fontSize:13,marginTop:2.5,opacity:.8}}),r&&(0,us.jsx)("div",{className:"input-icon-button codicon codicon-close","aria-label":"Clear search",onClick:()=>o(""),slot:"end",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}})]}),(0,us.jsxs)(ls,{style:{display:"flex",flexWrap:"wrap"},value:s,onChange:e=>a(e.target.value),children:[(0,us.jsx)(as,{value:"newest",children:"Newest"}),(0,us.jsx)(as,{value:"oldest",children:"Oldest"}),(0,us.jsx)(as,{value:"mostExpensive",children:"Most Expensive"}),(0,us.jsx)(as,{value:"mostTokens",children:"Most Tokens"}),(0,us.jsx)(as,{value:"mostRelevant",disabled:!r,style:{opacity:r?1:.5},children:"Most Relevant"})]})]})}),(0,us.jsx)("div",{style:{flexGrow:1,overflowY:"auto",margin:0},children:(0,us.jsx)(_c,{style:{flexGrow:1,overflowY:"scroll"},data:p,itemContent:(e,t)=>(0,us.jsx)("div",{className:"history-item",style:{cursor:"pointer",borderBottom:e<i.length-1?"1px solid var(--vscode-panel-border)":"none"},onClick:()=>(e=>{hs.postMessage({type:"showTaskWithId",text:e})})(t.id),children:(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",padding:"12px 20px",position:"relative"},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,us.jsx)("span",{style:{color:"var(--vscode-descriptionForeground)",fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:u(t.ts)}),(0,us.jsx)(Jo,{appearance:"icon",onClick:e=>{e.stopPropagation(),(e=>{hs.postMessage({type:"deleteTaskWithId",text:e})})(t.id)},className:"delete-button",children:(0,us.jsx)("span",{className:"codicon codicon-trash"})})]}),(0,us.jsx)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-foreground)",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},dangerouslySetInnerHTML:{__html:t.task}}),(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"}}),!t.totalCost&&(0,us.jsx)(kf,{itemId:t.id})]}),!!t.cacheWrites&&(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"4px",flexWrap:"wrap"}}),!!t.totalCost&&(0,us.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:-2},children:(0,us.jsx)(kf,{itemId:t.id})})]})]})},t.id)})})]})]})},kf=e=>{let{itemId:t}=e;return(0,us.jsx)(us.Fragment,{})},wf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"history-item-highlight";const n=e=>{if(0===e.length)return e;e.sort(((e,t)=>e[0]-t[0]));const t=[e[0]];for(let n=1;n<e.length;n++){const i=t[t.length-1],r=e[n];r[0]<=i[1]+1?i[1]=Math.max(i[1],r[1]):t.push(r)}return t};return e.filter((e=>{let{matches:t}=e;return t&&t.length})).map((e=>{let{item:i,matches:r}=e;const o={...i};return null===r||void 0===r||r.forEach((e=>{if(e.key&&"string"===typeof e.value&&e.indices){const i=n([...e.indices]);((e,t,n)=>{const i=t.split(".");let r;for(r=0;r<i.length-1;r++)e=e[i[r]];e[i[r]]=n})(o,e.key,function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===i.length)return e;const r=n(i);let o="",s=0;return r.forEach((n=>{const i=n[0],r=n[1]+1;o+=[e.substring(s,i),`<span class="${t}">`,e.substring(i,r),"</span>"].join(""),s=r})),o+=e.substring(s),o}(e.value,i))}})),o}))},Sf=(0,t.memo)(xf),Cf=(cp.div`
	position: relative;
	width: 100%;
`,1e3),Tf=(cp.div`
	position: absolute;
	top: calc(100% - 3px);
	left: 0;
	width: calc(100% - 2px);
	max-height: 200px;
	overflow-y: auto;
	background-color: var(--vscode-dropdown-background);
	border: 1px solid var(--vscode-list-activeSelectionBackground);
	z-index: ${Cf-1};
	border-bottom-left-radius: 3px;
	border-bottom-right-radius: 3px;
`,cp.div`
	padding: 5px 10px;
	cursor: pointer;
	word-break: break-all;
	white-space: normal;

	background-color: ${e=>{let{isSelected:t}=e;return t?"var(--vscode-list-activeSelectionBackground)":"inherit"}};

	&:hover {
		background-color: var(--vscode-list-activeSelectionBackground);
	}
`,cp.div`
	font-family: var(--vscode-font-family), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
		Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
	font-size: 12px;
	color: var(--vscode-descriptionForeground);

	p,
	li,
	ol,
	ul {
		line-height: 1.25;
		margin: 0;
	}

	ol,
	ul {
		padding-left: 1.5em;
		margin-left: 0;
	}

	p {
		white-space: pre-wrap;
	}

	a {
		text-decoration: none;
	}
	a {
		&:hover {
			text-decoration: underline;
		}
	}
`,e=>{let{modelIdErrorMessage:n}=e;const{apiConfiguration:i,setApiConfiguration:r}=wp(),{selectedProvider:o}=(0,t.useMemo)((()=>_f(i)),[i]);return(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:5},children:[(0,us.jsxs)("div",{className:"dropdown-container",children:[(0,us.jsx)("label",{htmlFor:"api-provider",children:(0,us.jsx)("span",{style:{fontWeight:500},children:"API Provider"})}),(0,us.jsxs)(es,{id:"api-provider",value:o,onChange:(s="apiProvider",e=>{r({...i,[s]:e.target.value})}),style:{minWidth:130,position:"relative",zIndex:Cf+1},children:[(0,us.jsx)(ns,{value:"haiku",children:"Anthropic Claude-3.5-Haiku"}),(0,us.jsx)(ns,{value:"sonnet",children:"Anthropic Claude-3.5-Sonnet"}),(0,us.jsx)(ns,{value:"gpt4omini",children:"OpenAI GPT-4o-mini"})]})]}),n&&(0,us.jsx)("p",{style:{margin:"-10px 0 4px 0",fontSize:12,color:"var(--vscode-errorForeground)"},children:n})]});var s});const Ef=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(e);function _f(e){const t=(null===e||void 0===e?void 0:e.apiProvider)||"haiku",n=null===e||void 0===e?void 0:e.apiModelId,i=(e,i)=>{let r,o;return n&&n in e?(r=n,o=e[n]):(r=i,o=e[i]),{selectedProvider:t,selectedModelId:r,selectedModelInfo:o}};switch(t){case"haiku":case"sonnet":default:return i(pp,hp);case"qwen":case"gpt4omini":return{selectedProvider:t,selectedModelId:(null===e||void 0===e?void 0:e.openAiModelId)||"",selectedModelInfo:gp}}}const If=(0,t.memo)(Tf);var Rf=n(122),Pf=n.n(Rf),Af=t.useState,Of=t.useEffect,Mf=t.useRef;const Nf=function(e,n){var r=void 0===n?{}:n,l=r.width,c=void 0===l?1/0:l,u=r.height,d=void 0===u?1/0:u;if(!a)return["function"===typeof e?e({width:c,height:d}):e,{width:c,height:d}];var h=Af({width:c,height:d}),p=h[0],f=h[1];"function"===typeof e&&(e=e(p));var m=e.props.style||{},g=Mf(null),v=null,b=function(){var e=g.current,t=e?{width:e.offsetWidth,height:e.offsetHeight}:{width:c,height:d};f(t)},y=function(e){o(e,"resize",b),setTimeout(b,35)};return Of((function(){var e=g.current;if(e){if(e.contentWindow)v=e.contentWindow,y(v);else{var t=function(){o(e,"load",t),v=e.contentWindow,y(v)};s(e,"load",t)}return function(){v&&v.removeEventListener&&s(v,"resize",b)}}}),[]),m.position="relative",[t.cloneElement.apply(i,oi([e,{style:m}],oi([t.createElement("iframe",{ref:g,style:{background:"transparent",border:"none",height:"100%",left:0,position:"absolute",top:0,width:"100%",zIndex:-1}})],t.Children.toArray(e.props.children)))),p]};var Df=n(9212),jf=n.n(Df),Lf=n(6928),Ff=n.n(Lf),Bf=n(6248),Uf=n.n(Bf),$f=n(3251),zf=n.n($f);function Vf(){return Vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Vf.apply(this,arguments)}var Hf=function(e){var n=void 0===e?{}:e,i=n.remarkParseOptions,r=n.remarkToRehypeOptions,o=n.rehypeReactOptions,s=n.remarkPlugins,a=void 0===s?[]:s,l=n.rehypePlugins,c=void 0===l?[]:l,u=n.onError,d=void 0===u?function(){}:u,h=(0,t.useState)(null),p=h[0],f=h[1],m=(0,t.useCallback)((function(e){jf()().use(Ff(),i).use(a).use(Uf(),r).use(c).use(zf(),Vf({createElement:t.createElement,Fragment:t.Fragment},o)).process(e).then((function(e){return f(e.result)})).catch(d)}),[]);return[p,m]};const qf=function(e){if(null===e||void 0===e)return Gf;if("function"===typeof e)return Wf(e);if("object"===typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=qf(e[n]);return Wf(i);function i(){let e=-1;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,i))return!0;return!1}}(e):function(e){const t=e;return Wf(n);function n(n){const i=n;let r;for(r in e)if(i[r]!==t[r])return!1;return!0}}(e);if("string"===typeof e)return function(e){return Wf(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Wf(e){return function(t,n,i){return Boolean(Kf(t)&&e.call(this,t,"number"===typeof n?n:void 0,i||void 0))}}function Gf(){return!0}function Kf(e){return null!==e&&"object"===typeof e&&"type"in e}const Qf=function(e,t,n){const i=qf(n);if(!e||!e.type||!e.children)throw new Error("Expected parent node");if("number"===typeof t){if(t<0||t===Number.POSITIVE_INFINITY)throw new Error("Expected positive finite number as index")}else if((t=e.children.indexOf(t))<0)throw new Error("Expected child node or index");for(;++t<e.children.length;)if(i(e.children[t],t,e))return e.children[t]},Xf=function(e){if(null===e||void 0===e)return Jf;if("string"===typeof e)return function(e){return Yf(t);function t(t){return t.tagName===e}}(e);if("object"===typeof e)return function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Xf(e[n]);return Yf(i);function i(){let e=-1;for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];for(;++e<t.length;)if(t[e].apply(this,i))return!0;return!1}}(e);if("function"===typeof e)return Yf(e);throw new Error("Expected function, string, or array as `test`")};function Yf(e){return function(t,n,i){return Boolean(Zf(t)&&e.call(this,t,"number"===typeof n?n:void 0,i||void 0))}}function Jf(e){return Boolean(e&&"object"===typeof e&&"type"in e&&"element"===e.type&&"tagName"in e&&"string"===typeof e.tagName)}function Zf(e){return null!==e&&"object"===typeof e&&"type"in e&&"tagName"in e}const em=/\n/g,tm=/[\t ]+/g,nm=Xf("br"),im=Xf((function(e){return"td"===e.tagName||"th"===e.tagName})),rm=Xf("p"),om=Xf("tr"),sm=Xf(["datalist","head","noembed","noframes","noscript","rp","script","style","template","title",function(e){return Boolean((e.properties||{}).hidden)},function(e){return"dialog"===e.tagName&&!(e.properties||{}).open}]),am=Xf(["address","article","aside","blockquote","body","caption","center","dd","dialog","dir","dl","dt","div","figure","figcaption","footer","form,","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","legend","li","listing","main","menu","nav","ol","p","plaintext","pre","section","ul","xmp"]);function lm(e,t){const n=t||{},i="children"in e?e.children:[],r=am(e),o=hm(e,{whitespace:n.whitespace||"normal",breakBefore:!1,breakAfter:!1}),s=[];"text"!==e.type&&"comment"!==e.type||s.push(...um(e,{whitespace:o,breakBefore:!0,breakAfter:!0}));let a=-1;for(;++a<i.length;)s.push(...cm(i[a],e,{whitespace:o,breakBefore:a?void 0:r,breakAfter:a<i.length-1?nm(i[a+1]):r}));const l=[];let c;for(a=-1;++a<s.length;){const e=s[a];"number"===typeof e?void 0!==c&&e>c&&(c=e):e&&(void 0!==c&&c>-1&&l.push("\n".repeat(c)||" "),c=-1,l.push(e))}return l.join("")}function cm(e,t,n){return"element"===e.type?function(e,t,n){const i=hm(e,n),r=e.children||[];let o,s,a=-1,l=[];if(sm(e))return l;nm(e)||om(e)&&Qf(t,e,om)?s="\n":rm(e)?(o=2,s=2):am(e)&&(o=1,s=1);for(;++a<r.length;)l=l.concat(cm(r[a],e,{whitespace:i,breakBefore:a?void 0:o,breakAfter:a<r.length-1?nm(r[a+1]):s}));im(e)&&Qf(t,e,im)&&l.push("\t");o&&l.unshift(o);s&&l.push(s);return l}(e,t,n):"text"===e.type?"normal"===n.whitespace?um(e,n):function(e){return[String(e.value)]}(e):[]}function um(e,t){const n=String(e.value),i=[],r=[];let o=0;for(;o<=n.length;){em.lastIndex=o;const e=em.exec(n),r=e&&"index"in e?e.index:n.length;i.push(dm(n.slice(o,r).replace(/[\u061C\u200E\u200F\u202A-\u202E\u2066-\u2069]/g,""),0!==o||t.breakBefore,r!==n.length||t.breakAfter)),o=r+1}let s,a=-1;for(;++a<i.length;)8203===i[a].charCodeAt(i[a].length-1)||a<i.length-1&&8203===i[a+1].charCodeAt(0)?(r.push(i[a]),s=void 0):i[a]?("number"===typeof s&&r.push(s),r.push(i[a]),s=0):0!==a&&a!==i.length-1||r.push(0);return r}function dm(e,t,n){const i=[];let r,o=0;for(;o<e.length;){tm.lastIndex=o;const n=tm.exec(e);r=n?n.index:e.length,o||r||!n||t||i.push(""),o!==r&&i.push(e.slice(o,r)),o=n?r+n[0].length:r}return o===r||n||i.push(""),i.join(" ")}function hm(e,t){if("element"===e.type){const n=e.properties||{};switch(e.tagName){case"listing":case"plaintext":case"xmp":return"pre";case"nobr":return"nowrap";case"pre":return n.wrap?"pre-wrap":"pre";case"td":case"th":return n.noWrap?"nowrap":t.whitespace;case"textarea":return"pre-wrap"}}return t.whitespace}const pm=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],fm=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],mm=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],gm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],vm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();var bm="[0-9](_*[0-9])*",ym=`\\.(${bm})`,xm="[0-9a-fA-F](_*[0-9a-fA-F])*",km={className:"number",variants:[{begin:`(\\b(${bm})((${ym})|\\.)?|(${ym}))[eE][+-]?(${bm})[fFdD]?\\b`},{begin:`\\b(${bm})((${ym})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${ym})[fFdD]?\\b`},{begin:`\\b(${bm})[fFdD]\\b`},{begin:`\\b0[xX]((${xm})\\.?|(${xm})?\\.(${xm}))[pP][+-]?(${bm})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${xm})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};function wm(e,t,n){return-1===n?"":e.replace(t,(i=>wm(e,t,n-1)))}const Sm="[A-Za-z$_][0-9A-Za-z$_]*",Cm=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],Tm=["true","false","null","undefined","NaN","Infinity"],Em=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],_m=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],Im=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],Rm=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],Pm=[].concat(Im,Em,_m);var Am="[0-9](_*[0-9])*",Om=`\\.(${Am})`,Mm="[0-9a-fA-F](_*[0-9a-fA-F])*",Nm={className:"number",variants:[{begin:`(\\b(${Am})((${Om})|\\.)?|(${Om}))[eE][+-]?(${Am})[fFdD]?\\b`},{begin:`\\b(${Am})((${Om})[fFdD]?\\b|\\.([fFdD]\\b)?)`},{begin:`(${Om})[fFdD]?\\b`},{begin:`\\b(${Am})[fFdD]\\b`},{begin:`\\b0[xX]((${Mm})\\.?|(${Mm})?\\.(${Mm}))[pP][+-]?(${Am})[fFdD]?\\b`},{begin:"\\b(0|[1-9](_*[0-9])*)[lL]?\\b"},{begin:`\\b0[xX](${Mm})[lL]?\\b`},{begin:"\\b0(_*[0-7])*[lL]?\\b"},{begin:"\\b0[bB][01](_*[01])*[lL]?\\b"}],relevance:0};const Dm=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],jm=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Lm=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Fm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],Bm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse(),Um=Lm.concat(Fm);const $m=["a","abbr","address","article","aside","audio","b","blockquote","body","button","canvas","caption","cite","code","dd","del","details","dfn","div","dl","dt","em","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","html","i","iframe","img","input","ins","kbd","label","legend","li","main","mark","menu","nav","object","ol","p","q","quote","samp","section","span","strong","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","ul","var","video"],zm=["any-hover","any-pointer","aspect-ratio","color","color-gamut","color-index","device-aspect-ratio","device-height","device-width","display-mode","forced-colors","grid","height","hover","inverted-colors","monochrome","orientation","overflow-block","overflow-inline","pointer","prefers-color-scheme","prefers-contrast","prefers-reduced-motion","prefers-reduced-transparency","resolution","scan","scripting","update","width","min-width","max-width","min-height","max-height"],Vm=["active","any-link","blank","checked","current","default","defined","dir","disabled","drop","empty","enabled","first","first-child","first-of-type","fullscreen","future","focus","focus-visible","focus-within","has","host","host-context","hover","indeterminate","in-range","invalid","is","lang","last-child","last-of-type","left","link","local-link","not","nth-child","nth-col","nth-last-child","nth-last-col","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","past","placeholder-shown","read-only","read-write","required","right","root","scope","target","target-within","user-invalid","valid","visited","where"],Hm=["after","backdrop","before","cue","cue-region","first-letter","first-line","grammar-error","marker","part","placeholder","selection","slotted","spelling-error"],qm=["align-content","align-items","align-self","all","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","block-size","border","border-block","border-block-color","border-block-end","border-block-end-color","border-block-end-style","border-block-end-width","border-block-start","border-block-start-color","border-block-start-style","border-block-start-width","border-block-style","border-block-width","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-inline","border-inline-color","border-inline-end","border-inline-end-color","border-inline-end-style","border-inline-end-width","border-inline-start","border-inline-start-color","border-inline-start-style","border-inline-start-width","border-inline-style","border-inline-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","clip-path","clip-rule","color","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","contain","content","content-visibility","counter-increment","counter-reset","cue","cue-after","cue-before","cursor","direction","display","empty-cells","filter","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","flow","font","font-display","font-family","font-feature-settings","font-kerning","font-language-override","font-size","font-size-adjust","font-smoothing","font-stretch","font-style","font-synthesis","font-variant","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-variation-settings","font-weight","gap","glyph-orientation-vertical","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","ime-mode","inline-size","isolation","justify-content","left","letter-spacing","line-break","line-height","list-style","list-style-image","list-style-position","list-style-type","margin","margin-block","margin-block-end","margin-block-start","margin-bottom","margin-inline","margin-inline-end","margin-inline-start","margin-left","margin-right","margin-top","marks","mask","mask-border","mask-border-mode","mask-border-outset","mask-border-repeat","mask-border-slice","mask-border-source","mask-border-width","mask-clip","mask-composite","mask-image","mask-mode","mask-origin","mask-position","mask-repeat","mask-size","mask-type","max-block-size","max-height","max-inline-size","max-width","min-block-size","min-height","min-inline-size","min-width","mix-blend-mode","nav-down","nav-index","nav-left","nav-right","nav-up","none","normal","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-wrap","overflow-x","overflow-y","padding","padding-block","padding-block-end","padding-block-start","padding-bottom","padding-inline","padding-inline-end","padding-inline-start","padding-left","padding-right","padding-top","page-break-after","page-break-before","page-break-inside","pause","pause-after","pause-before","perspective","perspective-origin","pointer-events","position","quotes","resize","rest","rest-after","rest-before","right","row-gap","scroll-margin","scroll-margin-block","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-bottom","scroll-margin-inline","scroll-margin-inline-end","scroll-margin-inline-start","scroll-margin-left","scroll-margin-right","scroll-margin-top","scroll-padding","scroll-padding-block","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-bottom","scroll-padding-inline","scroll-padding-inline-end","scroll-padding-inline-start","scroll-padding-left","scroll-padding-right","scroll-padding-top","scroll-snap-align","scroll-snap-stop","scroll-snap-type","scrollbar-color","scrollbar-gutter","scrollbar-width","shape-image-threshold","shape-margin","shape-outside","speak","speak-as","src","tab-size","table-layout","text-align","text-align-all","text-align-last","text-combine-upright","text-decoration","text-decoration-color","text-decoration-line","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-indent","text-justify","text-orientation","text-overflow","text-rendering","text-shadow","text-transform","text-underline-position","top","transform","transform-box","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","writing-mode","z-index"].reverse();function Wm(e){return e?"string"===typeof e?e:e.source:null}function Gm(e){return Km("(?=",e,")")}function Km(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((e=>Wm(e))).join("")}function Qm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=function(e){const t=e[e.length-1];return"object"===typeof t&&t.constructor===Object?(e.splice(e.length-1,1),t):{}}(t);return"("+(i.capture?"":"?:")+t.map((e=>Wm(e))).join("|")+")"}const Xm=e=>Km(/\b/,e,/\w$/.test(e)?/\b/:/\B/),Ym=["Protocol","Type"].map(Xm),Jm=["init","self"].map(Xm),Zm=["Any","Self"],eg=["actor","any","associatedtype","async","await",/as\?/,/as!/,"as","borrowing","break","case","catch","class","consume","consuming","continue","convenience","copy","default","defer","deinit","didSet","distributed","do","dynamic","each","else","enum","extension","fallthrough",/fileprivate\(set\)/,"fileprivate","final","for","func","get","guard","if","import","indirect","infix",/init\?/,/init!/,"inout",/internal\(set\)/,"internal","in","is","isolated","nonisolated","lazy","let","macro","mutating","nonmutating",/open\(set\)/,"open","operator","optional","override","postfix","precedencegroup","prefix",/private\(set\)/,"private","protocol",/public\(set\)/,"public","repeat","required","rethrows","return","set","some","static","struct","subscript","super","switch","throws","throw",/try\?/,/try!/,"try","typealias",/unowned\(safe\)/,/unowned\(unsafe\)/,"unowned","var","weak","where","while","willSet"],tg=["false","nil","true"],ng=["assignment","associativity","higherThan","left","lowerThan","none","right"],ig=["#colorLiteral","#column","#dsohandle","#else","#elseif","#endif","#error","#file","#fileID","#fileLiteral","#filePath","#function","#if","#imageLiteral","#keyPath","#line","#selector","#sourceLocation","#warning"],rg=["abs","all","any","assert","assertionFailure","debugPrint","dump","fatalError","getVaList","isKnownUniquelyReferenced","max","min","numericCast","pointwiseMax","pointwiseMin","precondition","preconditionFailure","print","readLine","repeatElement","sequence","stride","swap","swift_unboxFromSwiftValueWithType","transcode","type","unsafeBitCast","unsafeDowncast","withExtendedLifetime","withUnsafeMutablePointer","withUnsafePointer","withVaList","withoutActuallyEscaping","zip"],og=Qm(/[/=\-+!*%<>&|^~?]/,/[\u00A1-\u00A7]/,/[\u00A9\u00AB]/,/[\u00AC\u00AE]/,/[\u00B0\u00B1]/,/[\u00B6\u00BB\u00BF\u00D7\u00F7]/,/[\u2016-\u2017]/,/[\u2020-\u2027]/,/[\u2030-\u203E]/,/[\u2041-\u2053]/,/[\u2055-\u205E]/,/[\u2190-\u23FF]/,/[\u2500-\u2775]/,/[\u2794-\u2BFF]/,/[\u2E00-\u2E7F]/,/[\u3001-\u3003]/,/[\u3008-\u3020]/,/[\u3030]/),sg=Qm(og,/[\u0300-\u036F]/,/[\u1DC0-\u1DFF]/,/[\u20D0-\u20FF]/,/[\uFE00-\uFE0F]/,/[\uFE20-\uFE2F]/),ag=Km(og,sg,"*"),lg=Qm(/[a-zA-Z_]/,/[\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-\u00BA]/,/[\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]/,/[\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]/,/[\u1E00-\u1FFF]/,/[\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]/,/[\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]/,/[\u2C00-\u2DFF\u2E80-\u2FFF]/,/[\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]/,/[\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-\uFE44]/,/[\uFE47-\uFEFE\uFF00-\uFFFD]/),cg=Qm(lg,/\d/,/[\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]/),ug=Km(lg,cg,"*"),dg=Km(/[A-Z]/,cg,"*"),hg=["attached","autoclosure",Km(/convention\(/,Qm("swift","block","c"),/\)/),"discardableResult","dynamicCallable","dynamicMemberLookup","escaping","freestanding","frozen","GKInspectable","IBAction","IBDesignable","IBInspectable","IBOutlet","IBSegueAction","inlinable","main","nonobjc","NSApplicationMain","NSCopying","NSManaged",Km(/objc\(/,ug,/\)/),"objc","objcMembers","propertyWrapper","requires_stored_property_inits","resultBuilder","Sendable","testable","UIApplicationMain","unchecked","unknown","usableFromInline","warn_unqualified_access"],pg=["iOS","iOSApplicationExtension","macOS","macOSApplicationExtension","macCatalyst","macCatalystApplicationExtension","watchOS","watchOSApplicationExtension","tvOS","tvOSApplicationExtension","swift"];const fg="[A-Za-z$_][0-9A-Za-z$_]*",mg=["as","in","of","if","for","while","finally","var","new","function","do","return","void","else","break","catch","instanceof","with","throw","case","default","try","switch","continue","typeof","delete","let","yield","const","class","debugger","async","await","static","import","from","export","extends"],gg=["true","false","null","undefined","NaN","Infinity"],vg=["Object","Function","Boolean","Symbol","Math","Date","Number","BigInt","String","RegExp","Array","Float32Array","Float64Array","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Int32Array","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array","Set","Map","WeakSet","WeakMap","ArrayBuffer","SharedArrayBuffer","Atomics","DataView","JSON","Promise","Generator","GeneratorFunction","AsyncFunction","Reflect","Proxy","Intl","WebAssembly"],bg=["Error","EvalError","InternalError","RangeError","ReferenceError","SyntaxError","TypeError","URIError"],yg=["setInterval","setTimeout","clearInterval","clearTimeout","require","exports","eval","isFinite","isNaN","parseFloat","parseInt","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","unescape"],xg=["arguments","this","super","console","window","document","localStorage","sessionStorage","module","global"],kg=[].concat(yg,vg,bg);const wg={arduino:function(e){const t={type:["boolean","byte","word","String"],built_in:["KeyboardController","MouseController","SoftwareSerial","EthernetServer","EthernetClient","LiquidCrystal","RobotControl","GSMVoiceCall","EthernetUDP","EsploraTFT","HttpClient","RobotMotor","WiFiClient","GSMScanner","FileSystem","Scheduler","GSMServer","YunClient","YunServer","IPAddress","GSMClient","GSMModem","Keyboard","Ethernet","Console","GSMBand","Esplora","Stepper","Process","WiFiUDP","GSM_SMS","Mailbox","USBHost","Firmata","PImage","Client","Server","GSMPIN","FileIO","Bridge","Serial","EEPROM","Stream","Mouse","Audio","Servo","File","Task","GPRS","WiFi","Wire","TFT","GSM","SPI","SD"],_hints:["setup","loop","runShellCommandAsynchronously","analogWriteResolution","retrieveCallingNumber","printFirmwareVersion","analogReadResolution","sendDigitalPortPair","noListenOnLocalhost","readJoystickButton","setFirmwareVersion","readJoystickSwitch","scrollDisplayRight","getVoiceCallStatus","scrollDisplayLeft","writeMicroseconds","delayMicroseconds","beginTransmission","getSignalStrength","runAsynchronously","getAsynchronously","listenOnLocalhost","getCurrentCarrier","readAccelerometer","messageAvailable","sendDigitalPorts","lineFollowConfig","countryNameWrite","runShellCommand","readStringUntil","rewindDirectory","readTemperature","setClockDivider","readLightSensor","endTransmission","analogReference","detachInterrupt","countryNameRead","attachInterrupt","encryptionType","readBytesUntil","robotNameWrite","readMicrophone","robotNameRead","cityNameWrite","userNameWrite","readJoystickY","readJoystickX","mouseReleased","openNextFile","scanNetworks","noInterrupts","digitalWrite","beginSpeaker","mousePressed","isActionDone","mouseDragged","displayLogos","noAutoscroll","addParameter","remoteNumber","getModifiers","keyboardRead","userNameRead","waitContinue","processInput","parseCommand","printVersion","readNetworks","writeMessage","blinkVersion","cityNameRead","readMessage","setDataMode","parsePacket","isListening","setBitOrder","beginPacket","isDirectory","motorsWrite","drawCompass","digitalRead","clearScreen","serialEvent","rightToLeft","setTextSize","leftToRight","requestFrom","keyReleased","compassRead","analogWrite","interrupts","WiFiServer","disconnect","playMelody","parseFloat","autoscroll","getPINUsed","setPINUsed","setTimeout","sendAnalog","readSlider","analogRead","beginWrite","createChar","motorsStop","keyPressed","tempoWrite","readButton","subnetMask","debugPrint","macAddress","writeGreen","randomSeed","attachGPRS","readString","sendString","remotePort","releaseAll","mouseMoved","background","getXChange","getYChange","answerCall","getResult","voiceCall","endPacket","constrain","getSocket","writeJSON","getButton","available","connected","findUntil","readBytes","exitValue","readGreen","writeBlue","startLoop","IPAddress","isPressed","sendSysex","pauseMode","gatewayIP","setCursor","getOemKey","tuneWrite","noDisplay","loadImage","switchPIN","onRequest","onReceive","changePIN","playFile","noBuffer","parseInt","overflow","checkPIN","knobRead","beginTFT","bitClear","updateIR","bitWrite","position","writeRGB","highByte","writeRed","setSpeed","readBlue","noStroke","remoteIP","transfer","shutdown","hangCall","beginSMS","endWrite","attached","maintain","noCursor","checkReg","checkPUK","shiftOut","isValid","shiftIn","pulseIn","connect","println","localIP","pinMode","getIMEI","display","noBlink","process","getBand","running","beginSD","drawBMP","lowByte","setBand","release","bitRead","prepare","pointTo","readRed","setMode","noFill","remove","listen","stroke","detach","attach","noTone","exists","buffer","height","bitSet","circle","config","cursor","random","IRread","setDNS","endSMS","getKey","micros","millis","begin","print","write","ready","flush","width","isPIN","blink","clear","press","mkdir","rmdir","close","point","yield","image","BSSID","click","delay","read","text","move","peek","beep","rect","line","open","seek","fill","size","turn","stop","home","find","step","tone","sqrt","RSSI","SSID","end","bit","tan","cos","sin","pow","map","abs","max","min","get","run","put"],literal:["DIGITAL_MESSAGE","FIRMATA_STRING","ANALOG_MESSAGE","REPORT_DIGITAL","REPORT_ANALOG","INPUT_PULLUP","SET_PIN_MODE","INTERNAL2V56","SYSTEM_RESET","LED_BUILTIN","INTERNAL1V1","SYSEX_START","INTERNAL","EXTERNAL","DEFAULT","OUTPUT","INPUT","HIGH","LOW"]},n=function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="(?!struct)("+i+"|"+t.optional(r)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",s={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},a={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(a,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},u={className:"title",begin:t.optional(r)+e.IDENT_RE,relevance:0},d=t.optional(r)+e.IDENT_RE+"\\s*\\(",h={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},p={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},f=[p,c,s,n,e.C_BLOCK_COMMENT_MODE,l,a],m={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:f.concat([{begin:/\(/,end:/\)/,keywords:h,contains:f.concat(["self"]),relevance:0}]),relevance:0},g={className:"function",begin:"("+o+"[\\*&\\s]+)+"+d,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:h,relevance:0},{begin:d,returnBegin:!0,contains:[u],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[a,l]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,a,l,s,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,a,l,s]}]},s,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:h,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(m,g,p,f,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:h,contains:["self",s]},{begin:e.IDENT_RE+"::",keywords:h},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}}(e),i=n.keywords;return i.type=[...i.type,...t.type],i.literal=[...i.literal,...t.literal],i.built_in=[...i.built_in,...t.built_in],i._hints=t._hints,n.name="Arduino",n.aliases=["ino"],n.supersetOf="cpp",n},bash:function(e){const t=e.regex,n={},i={begin:/\$\{/,end:/\}/,contains:["self",{begin:/:-/,contains:[n]}]};Object.assign(n,{className:"variable",variants:[{begin:t.concat(/\$[\w\d#@][\w\d_]*/,"(?![\\w\\d])(?![$])")},i]});const r={className:"subst",begin:/\$\(/,end:/\)/,contains:[e.BACKSLASH_ESCAPE]},o={begin:/<<-?\s*(?=\w+)/,starts:{contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,className:"string"})]}},s={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,n,r]};r.contains.push(s);const a={begin:/\$?\(\(/,end:/\)\)/,contains:[{begin:/\d+#[0-9a-f]+/,className:"number"},e.NUMBER_MODE,n]},l=e.SHEBANG({binary:`(${["fish","bash","zsh","sh","csh","ksh","tcsh","dash","scsh"].join("|")})`,relevance:10}),c={className:"function",begin:/\w[\w\d_]*\s*\(\s*\)\s*\{/,returnBegin:!0,contains:[e.inherit(e.TITLE_MODE,{begin:/\w[\w\d_]*/})],relevance:0};return{name:"Bash",aliases:["sh"],keywords:{$pattern:/\b[a-z][a-z0-9._-]+\b/,keyword:["if","then","else","elif","fi","for","while","until","in","do","done","case","esac","function","select"],literal:["true","false"],built_in:["break","cd","continue","eval","exec","exit","export","getopts","hash","pwd","readonly","return","shift","test","times","trap","umask","unset","alias","bind","builtin","caller","command","declare","echo","enable","help","let","local","logout","mapfile","printf","read","readarray","source","type","typeset","ulimit","unalias","set","shopt","autoload","bg","bindkey","bye","cap","chdir","clone","comparguments","compcall","compctl","compdescribe","compfiles","compgroups","compquote","comptags","comptry","compvalues","dirs","disable","disown","echotc","echoti","emulate","fc","fg","float","functions","getcap","getln","history","integer","jobs","kill","limit","log","noglob","popd","print","pushd","pushln","rehash","sched","setcap","setopt","stat","suspend","ttyctl","unfunction","unhash","unlimit","unsetopt","vared","wait","whence","where","which","zcompile","zformat","zftp","zle","zmodload","zparseopts","zprof","zpty","zregexparse","zsocket","zstyle","ztcp","chcon","chgrp","chown","chmod","cp","dd","df","dir","dircolors","ln","ls","mkdir","mkfifo","mknod","mktemp","mv","realpath","rm","rmdir","shred","sync","touch","truncate","vdir","b2sum","base32","base64","cat","cksum","comm","csplit","cut","expand","fmt","fold","head","join","md5sum","nl","numfmt","od","paste","ptx","pr","sha1sum","sha224sum","sha256sum","sha384sum","sha512sum","shuf","sort","split","sum","tac","tail","tr","tsort","unexpand","uniq","wc","arch","basename","chroot","date","dirname","du","echo","env","expr","factor","groups","hostid","id","link","logname","nice","nohup","nproc","pathchk","pinky","printenv","printf","pwd","readlink","runcon","seq","sleep","stat","stdbuf","stty","tee","test","timeout","tty","uname","unlink","uptime","users","who","whoami","yes"]},contains:[l,e.SHEBANG(),c,a,e.HASH_COMMENT_MODE,o,{match:/(\/[a-z._-]+)+/},s,{match:/\\"/},{className:"string",begin:/'/,end:/'/},{match:/\\'/},n]}},c:function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="("+i+"|"+t.optional(r)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",s={className:"type",variants:[{begin:"\\b[a-z\\d_]*_t\\b"},{match:/\batomic_[a-z]{3,6}\b/}]},a={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(a,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},u={className:"title",begin:t.optional(r)+e.IDENT_RE,relevance:0},d=t.optional(r)+e.IDENT_RE+"\\s*\\(",h={keyword:["asm","auto","break","case","continue","default","do","else","enum","extern","for","fortran","goto","if","inline","register","restrict","return","sizeof","struct","switch","typedef","union","volatile","while","_Alignas","_Alignof","_Atomic","_Generic","_Noreturn","_Static_assert","_Thread_local","alignas","alignof","noreturn","static_assert","thread_local","_Pragma"],type:["float","double","signed","unsigned","int","short","long","char","void","_Bool","_Complex","_Imaginary","_Decimal32","_Decimal64","_Decimal128","const","static","complex","bool","imaginary"],literal:"true false NULL",built_in:"std string wstring cin cout cerr clog stdin stdout stderr stringstream istringstream ostringstream auto_ptr deque list queue stack vector map set pair bitset multiset multimap unordered_set unordered_map unordered_multiset unordered_multimap priority_queue make_pair array shared_ptr abort terminate abs acos asin atan2 atan calloc ceil cosh cos exit exp fabs floor fmod fprintf fputs free frexp fscanf future isalnum isalpha iscntrl isdigit isgraph islower isprint ispunct isspace isupper isxdigit tolower toupper labs ldexp log10 log malloc realloc memchr memcmp memcpy memset modf pow printf putchar puts scanf sinh sin snprintf sprintf sqrt sscanf strcat strchr strcmp strcpy strcspn strlen strncat strncmp strncpy strpbrk strrchr strspn strstr tanh tan vfprintf vprintf vsprintf endl initializer_list unique_ptr"},p=[c,s,n,e.C_BLOCK_COMMENT_MODE,l,a],f={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:p.concat([{begin:/\(/,end:/\)/,keywords:h,contains:p.concat(["self"]),relevance:0}]),relevance:0},m={begin:"("+o+"[\\*&\\s]+)+"+d,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:h,relevance:0},{begin:d,returnBegin:!0,contains:[e.inherit(u,{className:"title.function"})],relevance:0},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,a,l,s,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,a,l,s]}]},s,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C",aliases:["h"],keywords:h,disableAutodetect:!0,illegal:"</",contains:[].concat(f,m,p,[c,{begin:e.IDENT_RE+"::",keywords:h},{className:"class",beginKeywords:"enum class struct union",end:/[{;:<>=]/,contains:[{beginKeywords:"final class struct"},e.TITLE_MODE]}]),exports:{preprocessor:c,strings:a,keywords:h}}},cpp:function(e){const t=e.regex,n=e.COMMENT("//","$",{contains:[{begin:/\\\n/}]}),i="decltype\\(auto\\)",r="[a-zA-Z_]\\w*::",o="(?!struct)("+i+"|"+t.optional(r)+"[a-zA-Z_]\\w*"+t.optional("<[^<>]+>")+")",s={className:"type",begin:"\\b[a-z\\d_]*_t\\b"},a={className:"string",variants:[{begin:'(u8?|U|L)?"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]},{begin:"(u8?|U|L)?'(\\\\(x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4,8}|[0-7]{3}|\\S)|.)",end:"'",illegal:"."},e.END_SAME_AS_BEGIN({begin:/(?:u8?|U|L)?R"([^()\\ ]{0,16})\(/,end:/\)([^()\\ ]{0,16})"/})]},l={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)((ll|LL|l|L)(u|U)?|(u|U)(ll|LL|l|L)?|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},c={className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma _Pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(a,{className:"string"}),{className:"string",begin:/<.*?>/},n,e.C_BLOCK_COMMENT_MODE]},u={className:"title",begin:t.optional(r)+e.IDENT_RE,relevance:0},d=t.optional(r)+e.IDENT_RE+"\\s*\\(",h={type:["bool","char","char16_t","char32_t","char8_t","double","float","int","long","short","void","wchar_t","unsigned","signed","const","static"],keyword:["alignas","alignof","and","and_eq","asm","atomic_cancel","atomic_commit","atomic_noexcept","auto","bitand","bitor","break","case","catch","class","co_await","co_return","co_yield","compl","concept","const_cast|10","consteval","constexpr","constinit","continue","decltype","default","delete","do","dynamic_cast|10","else","enum","explicit","export","extern","false","final","for","friend","goto","if","import","inline","module","mutable","namespace","new","noexcept","not","not_eq","nullptr","operator","or","or_eq","override","private","protected","public","reflexpr","register","reinterpret_cast|10","requires","return","sizeof","static_assert","static_cast|10","struct","switch","synchronized","template","this","thread_local","throw","transaction_safe","transaction_safe_dynamic","true","try","typedef","typeid","typename","union","using","virtual","volatile","while","xor","xor_eq"],literal:["NULL","false","nullopt","nullptr","true"],built_in:["_Pragma"],_type_hints:["any","auto_ptr","barrier","binary_semaphore","bitset","complex","condition_variable","condition_variable_any","counting_semaphore","deque","false_type","future","imaginary","initializer_list","istringstream","jthread","latch","lock_guard","multimap","multiset","mutex","optional","ostringstream","packaged_task","pair","promise","priority_queue","queue","recursive_mutex","recursive_timed_mutex","scoped_lock","set","shared_future","shared_lock","shared_mutex","shared_timed_mutex","shared_ptr","stack","string_view","stringstream","timed_mutex","thread","true_type","tuple","unique_lock","unique_ptr","unordered_map","unordered_multimap","unordered_multiset","unordered_set","variant","vector","weak_ptr","wstring","wstring_view"]},p={className:"function.dispatch",relevance:0,keywords:{_hint:["abort","abs","acos","apply","as_const","asin","atan","atan2","calloc","ceil","cerr","cin","clog","cos","cosh","cout","declval","endl","exchange","exit","exp","fabs","floor","fmod","forward","fprintf","fputs","free","frexp","fscanf","future","invoke","isalnum","isalpha","iscntrl","isdigit","isgraph","islower","isprint","ispunct","isspace","isupper","isxdigit","labs","launder","ldexp","log","log10","make_pair","make_shared","make_shared_for_overwrite","make_tuple","make_unique","malloc","memchr","memcmp","memcpy","memset","modf","move","pow","printf","putchar","puts","realloc","scanf","sin","sinh","snprintf","sprintf","sqrt","sscanf","std","stderr","stdin","stdout","strcat","strchr","strcmp","strcpy","strcspn","strlen","strncat","strncmp","strncpy","strpbrk","strrchr","strspn","strstr","swap","tan","tanh","terminate","to_underlying","tolower","toupper","vfprintf","visit","vprintf","vsprintf"]},begin:t.concat(/\b/,/(?!decltype)/,/(?!if)/,/(?!for)/,/(?!switch)/,/(?!while)/,e.IDENT_RE,t.lookahead(/(<[^<>]+>|)\s*\(/))},f=[p,c,s,n,e.C_BLOCK_COMMENT_MODE,l,a],m={variants:[{begin:/=/,end:/;/},{begin:/\(/,end:/\)/},{beginKeywords:"new throw return else",end:/;/}],keywords:h,contains:f.concat([{begin:/\(/,end:/\)/,keywords:h,contains:f.concat(["self"]),relevance:0}]),relevance:0},g={className:"function",begin:"("+o+"[\\*&\\s]+)+"+d,returnBegin:!0,end:/[{;=]/,excludeEnd:!0,keywords:h,illegal:/[^\w\s\*&:<>.]/,contains:[{begin:i,keywords:h,relevance:0},{begin:d,returnBegin:!0,contains:[u],relevance:0},{begin:/::/,relevance:0},{begin:/:/,endsWithParent:!0,contains:[a,l]},{relevance:0,match:/,/},{className:"params",begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:[n,e.C_BLOCK_COMMENT_MODE,a,l,s,{begin:/\(/,end:/\)/,keywords:h,relevance:0,contains:["self",n,e.C_BLOCK_COMMENT_MODE,a,l,s]}]},s,n,e.C_BLOCK_COMMENT_MODE,c]};return{name:"C++",aliases:["cc","c++","h++","hpp","hh","hxx","cxx"],keywords:h,illegal:"</",classNameAliases:{"function.dispatch":"built_in"},contains:[].concat(m,g,p,f,[c,{begin:"\\b(deque|list|queue|priority_queue|pair|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array|tuple|optional|variant|function)\\s*<(?!<)",end:">",keywords:h,contains:["self",s]},{begin:e.IDENT_RE+"::",keywords:h},{match:[/\b(?:enum(?:\s+(?:class|struct))?|class|struct|union)/,/\s+/,/\w+/],className:{1:"keyword",3:"title.class"}}])}},csharp:function(e){const t={keyword:["abstract","as","base","break","case","catch","class","const","continue","do","else","event","explicit","extern","finally","fixed","for","foreach","goto","if","implicit","in","interface","internal","is","lock","namespace","new","operator","out","override","params","private","protected","public","readonly","record","ref","return","scoped","sealed","sizeof","stackalloc","static","struct","switch","this","throw","try","typeof","unchecked","unsafe","using","virtual","void","volatile","while"].concat(["add","alias","and","ascending","async","await","by","descending","equals","from","get","global","group","init","into","join","let","nameof","not","notnull","on","or","orderby","partial","remove","select","set","unmanaged","value|0","var","when","where","with","yield"]),built_in:["bool","byte","char","decimal","delegate","double","dynamic","enum","float","int","long","nint","nuint","object","sbyte","short","string","ulong","uint","ushort"],literal:["default","false","null","true"]},n=e.inherit(e.TITLE_MODE,{begin:"[a-zA-Z](\\.?\\w)*"}),i={className:"number",variants:[{begin:"\\b(0b[01']+)"},{begin:"(-?)\\b([\\d']+(\\.[\\d']*)?|\\.[\\d']+)(u|U|l|L|ul|UL|f|F|b|B)"},{begin:"(-?)(\\b0[xX][a-fA-F0-9']+|(\\b[\\d']+(\\.[\\d']*)?|\\.[\\d']+)([eE][-+]?[\\d']+)?)"}],relevance:0},r={className:"string",begin:'@"',end:'"',contains:[{begin:'""'}]},o=e.inherit(r,{illegal:/\n/}),s={className:"subst",begin:/\{/,end:/\}/,keywords:t},a=e.inherit(s,{illegal:/\n/}),l={className:"string",begin:/\$"/,end:'"',illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},e.BACKSLASH_ESCAPE,a]},c={className:"string",begin:/\$@"/,end:'"',contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},s]},u=e.inherit(c,{illegal:/\n/,contains:[{begin:/\{\{/},{begin:/\}\}/},{begin:'""'},a]});s.contains=[c,l,r,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,i,e.C_BLOCK_COMMENT_MODE],a.contains=[u,l,o,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,i,e.inherit(e.C_BLOCK_COMMENT_MODE,{illegal:/\n/})];const d={variants:[c,l,r,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},h={begin:"<",end:">",contains:[{beginKeywords:"in out"},n]},p=e.IDENT_RE+"(<"+e.IDENT_RE+"(\\s*,\\s*"+e.IDENT_RE+")*>)?(\\[\\])?",f={begin:"@"+e.IDENT_RE,relevance:0};return{name:"C#",aliases:["cs","c#"],keywords:t,illegal:/::/,contains:[e.COMMENT("///","$",{returnBegin:!0,contains:[{className:"doctag",variants:[{begin:"///",relevance:0},{begin:"\x3c!--|--\x3e"},{begin:"</?",end:">"}]}]}),e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"meta",begin:"#",end:"$",keywords:{keyword:"if else elif endif define undef warning error line region endregion pragma checksum"}},d,i,{beginKeywords:"class interface",relevance:0,end:/[{;=]/,illegal:/[^\s:,]/,contains:[{beginKeywords:"where class"},n,h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"namespace",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"record",relevance:0,end:/[{;=]/,illegal:/[^\s:]/,contains:[n,h,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"meta",begin:"^\\s*\\[(?=[\\w])",excludeBegin:!0,end:"\\]",excludeEnd:!0,contains:[{className:"string",begin:/"/,end:/"/}]},{beginKeywords:"new return throw await else",relevance:0},{className:"function",begin:"("+p+"\\s+)+"+e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,end:/\s*[{;=]/,excludeEnd:!0,keywords:t,contains:[{beginKeywords:["public","private","protected","static","internal","protected","abstract","async","extern","override","unsafe","virtual","new","sealed","partial"].join(" "),relevance:0},{begin:e.IDENT_RE+"\\s*(<[^=]+>\\s*)?\\(",returnBegin:!0,contains:[e.TITLE_MODE,h],relevance:0},{match:/\(\)/},{className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:t,relevance:0,contains:[d,i,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},f]}},css:function(e){const t=e.regex,n=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),i=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE];return{name:"CSS",case_insensitive:!0,illegal:/[=|'\$]/,keywords:{keyframePosition:"from to"},classNameAliases:{keyframePosition:"selector-tag"},contains:[n.BLOCK_COMMENT,{begin:/-(webkit|moz|ms|o)-(?=[a-z])/},n.CSS_NUMBER_MODE,{className:"selector-id",begin:/#[A-Za-z0-9_-]+/,relevance:0},{className:"selector-class",begin:"\\.[a-zA-Z-][a-zA-Z0-9_-]*",relevance:0},n.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",variants:[{begin:":("+mm.join("|")+")"},{begin:":(:)?("+gm.join("|")+")"}]},n.CSS_VARIABLE,{className:"attribute",begin:"\\b("+vm.join("|")+")\\b"},{begin:/:/,end:/[;}{]/,contains:[n.BLOCK_COMMENT,n.HEXCOLOR,n.IMPORTANT,n.CSS_NUMBER_MODE,...i,{begin:/(url|data-uri)\(/,end:/\)/,relevance:0,keywords:{built_in:"url data-uri"},contains:[...i,{className:"string",begin:/[^)]/,endsWithParent:!0,excludeEnd:!0}]},n.FUNCTION_DISPATCH]},{begin:t.lookahead(/@/),end:"[{;]",relevance:0,illegal:/:/,contains:[{className:"keyword",begin:/@-?\w[\w]*(-\w+)*/},{begin:/\s/,endsWithParent:!0,excludeEnd:!0,relevance:0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:fm.join(" ")},contains:[{begin:/[a-z-]+(?=:)/,className:"attribute"},...i,n.CSS_NUMBER_MODE]}]},{className:"selector-tag",begin:"\\b("+pm.join("|")+")\\b"}]}},diff:function(e){const t=e.regex;return{name:"Diff",aliases:["patch"],contains:[{className:"meta",relevance:10,match:t.either(/^@@ +-\d+,\d+ +\+\d+,\d+ +@@/,/^\*\*\* +\d+,\d+ +\*\*\*\*$/,/^--- +\d+,\d+ +----$/)},{className:"comment",variants:[{begin:t.either(/Index: /,/^index/,/={3,}/,/^-{3}/,/^\*{3} /,/^\+{3}/,/^diff --git/),end:/$/},{match:/^\*{15}$/}]},{className:"addition",begin:/^\+/,end:/$/},{className:"deletion",begin:/^-/,end:/$/},{className:"addition",begin:/^!/,end:/$/}]}},go:function(e){const t={keyword:["break","case","chan","const","continue","default","defer","else","fallthrough","for","func","go","goto","if","import","interface","map","package","range","return","select","struct","switch","type","var"],type:["bool","byte","complex64","complex128","error","float32","float64","int8","int16","int32","int64","string","uint8","uint16","uint32","uint64","int","uint","uintptr","rune"],literal:["true","false","iota","nil"],built_in:["append","cap","close","complex","copy","imag","len","make","new","panic","print","println","real","recover","delete"]};return{name:"Go",aliases:["golang"],keywords:t,illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{className:"string",variants:[e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{begin:"`",end:"`"}]},{className:"number",variants:[{begin:e.C_NUMBER_RE+"[i]",relevance:1},e.C_NUMBER_MODE]},{begin:/:=/},{className:"function",beginKeywords:"func",end:"\\s*(\\{|$)",excludeEnd:!0,contains:[e.TITLE_MODE,{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,illegal:/["']/}]}]}},graphql:function(e){const t=e.regex;return{name:"GraphQL",aliases:["gql"],case_insensitive:!0,disableAutodetect:!1,keywords:{keyword:["query","mutation","subscription","type","input","schema","directive","interface","union","scalar","fragment","enum","on"],literal:["true","false","null"]},contains:[e.HASH_COMMENT_MODE,e.QUOTE_STRING_MODE,e.NUMBER_MODE,{scope:"punctuation",match:/[.]{3}/,relevance:0},{scope:"punctuation",begin:/[\!\(\)\:\=\[\]\{\|\}]{1}/,relevance:0},{scope:"variable",begin:/\$/,end:/\W/,excludeEnd:!0,relevance:0},{scope:"meta",match:/@\w+/,excludeEnd:!0},{scope:"symbol",begin:t.concat(/[_A-Za-z][_0-9A-Za-z]*/,t.lookahead(/\s*:/)),relevance:0}],illegal:[/[;<']/,/BEGIN/]}},ini:function(e){const t=e.regex,n={className:"number",relevance:0,variants:[{begin:/([+-]+)?[\d]+_[\d_]+/},{begin:e.NUMBER_RE}]},i=e.COMMENT();i.variants=[{begin:/;/,end:/$/},{begin:/#/,end:/$/}];const r={className:"variable",variants:[{begin:/\$[\w\d"][\w\d_]*/},{begin:/\$\{(.*?)\}/}]},o={className:"literal",begin:/\bon|off|true|false|yes|no\b/},s={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:"'''",end:"'''",relevance:10},{begin:'"""',end:'"""',relevance:10},{begin:'"',end:'"'},{begin:"'",end:"'"}]},a={begin:/\[/,end:/\]/,contains:[i,o,r,s,n,"self"],relevance:0},l=t.either(/[A-Za-z0-9_-]+/,/"(\\"|[^"])*"/,/'[^']*'/);return{name:"TOML, also INI",aliases:["toml"],case_insensitive:!0,illegal:/\S/,contains:[i,{className:"section",begin:/\[+/,end:/\]+/},{begin:t.concat(l,"(\\s*\\.\\s*",l,")*",t.lookahead(/\s*=\s*[^#\s]/)),className:"attr",starts:{end:/$/,contains:[i,a,o,r,s,n]}}]}},java:function(e){const t=e.regex,n="[\xc0-\u02b8a-zA-Z_$][\xc0-\u02b8a-zA-Z_$0-9]*",i=n+wm("(?:<"+n+"~~~(?:\\s*,\\s*"+n+"~~~)*>)?",/~~~/g,2),r={keyword:["synchronized","abstract","private","var","static","if","const ","for","while","strictfp","finally","protected","import","native","final","void","enum","else","break","transient","catch","instanceof","volatile","case","assert","package","default","public","try","switch","continue","throws","protected","public","private","module","requires","exports","do","sealed","yield","permits"],literal:["false","true","null"],type:["char","boolean","long","float","int","byte","short","double"],built_in:["super","this"]},o={className:"meta",begin:"@"+n,contains:[{begin:/\(/,end:/\)/,contains:["self"]}]},s={className:"params",begin:/\(/,end:/\)/,keywords:r,relevance:0,contains:[e.C_BLOCK_COMMENT_MODE],endsParent:!0};return{name:"Java",aliases:["jsp"],keywords:r,illegal:/<\/|#/,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{begin:/\w+@/,relevance:0},{className:"doctag",begin:"@[A-Za-z]+"}]}),{begin:/import java\.[a-z]+\./,keywords:"import",relevance:2},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,{begin:/"""/,end:/"""/,className:"string",contains:[e.BACKSLASH_ESCAPE]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{match:[/\b(?:class|interface|enum|extends|implements|new)/,/\s+/,n],className:{1:"keyword",3:"title.class"}},{match:/non-sealed/,scope:"keyword"},{begin:[t.concat(/(?!else)/,n),/\s+/,n,/\s+/,/=(?!=)/],className:{1:"type",3:"variable",5:"operator"}},{begin:[/record/,/\s+/,n],className:{1:"keyword",3:"title.class"},contains:[s,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{beginKeywords:"new throw return else",relevance:0},{begin:["(?:"+i+"\\s+)",e.UNDERSCORE_IDENT_RE,/\s*(?=\()/],className:{2:"title.function"},keywords:r,contains:[{className:"params",begin:/\(/,end:/\)/,keywords:r,relevance:0,contains:[o,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,km,e.C_BLOCK_COMMENT_MODE]},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},km,o]}},javascript:function(e){const t=e.regex,n=Sm,i="<>",r="</>",o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,i=e.input[n];if("<"===i||","===i)return void t.ignoreMatch();let r;">"===i&&(((e,t)=>{let{after:n}=t;const i="</"+e[0].slice(1);return-1!==e.input.indexOf(i,n)})(e,{after:n})||t.ignoreMatch());const o=e.input.substring(n);((r=o.match(/^\s*=/))||(r=o.match(/^\s+extends\s+/))&&0===r.index)&&t.ignoreMatch()}},s={$pattern:Sm,keyword:Cm,literal:Tm,built_in:Pm,"variable.language":Rm},a="[0-9](_?[0-9])*",l=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",u={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},d={className:"subst",begin:"\\$\\{",end:"\\}",keywords:s,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"xml"}},p={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"css"}},f={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,d]},g={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},v=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,{match:/\$\d+/},u];d.contains=v.concat({begin:/\{/,end:/\}/,keywords:s,contains:["self"].concat(v)});const b=[].concat(g,d.contains),y=b.concat([{begin:/\(/,end:/\)/,keywords:s,contains:["self"].concat(b)}]),x={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y},k={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},w={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...Em,..._m]}},S={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},C={match:t.concat(/\b/,(T=[...Im,"super","import"],t.concat("(?!",T.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0};var T;const E={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},_={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},I="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",R={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(I)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:s,exports:{PARAMS_CONTAINS:y,CLASS_REFERENCE:w},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,g,{match:/\$\d+/},u,w,{className:"attr",begin:n+t.lookahead(":"),relevance:0},R,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[g,e.REGEXP_MODE,{className:"function",begin:I,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i,end:r},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},S,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},E,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},C,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},k,_,{match:/\$[(.]/}]}},json:function(e){const t=["true","false","null"],n={scope:"literal",beginKeywords:t.join(" ")};return{name:"JSON",keywords:{literal:t},contains:[{className:"attr",begin:/"(\\.|[^\\"\r\n])*"(?=\s*:)/,relevance:1.01},{match:/[{}[\],:]/,className:"punctuation",relevance:0},e.QUOTE_STRING_MODE,n,e.C_NUMBER_MODE,e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE],illegal:"\\S"}},kotlin:function(e){const t={keyword:"abstract as val var vararg get set class object open private protected public noinline crossinline dynamic final enum if else do while for when throw try catch finally import package is in fun override companion reified inline lateinit init interface annotation data sealed internal infix operator out by constructor super tailrec where const inner suspend typealias external expect actual",built_in:"Byte Short Char Int Long Boolean Float Double Void Unit Nothing",literal:"true false null"},n={className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"@"},i={className:"subst",begin:/\$\{/,end:/\}/,contains:[e.C_NUMBER_MODE]},r={className:"variable",begin:"\\$"+e.UNDERSCORE_IDENT_RE},o={className:"string",variants:[{begin:'"""',end:'"""(?=[^"])',contains:[r,i]},{begin:"'",end:"'",illegal:/\n/,contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"',illegal:/\n/,contains:[e.BACKSLASH_ESCAPE,r,i]}]};i.contains.push(o);const s={className:"meta",begin:"@(?:file|property|field|get|set|receiver|param|setparam|delegate)\\s*:(?:\\s*"+e.UNDERSCORE_IDENT_RE+")?"},a={className:"meta",begin:"@"+e.UNDERSCORE_IDENT_RE,contains:[{begin:/\(/,end:/\)/,contains:[e.inherit(o,{className:"string"}),"self"]}]},l=Nm,c=e.COMMENT("/\\*","\\*/",{contains:[e.C_BLOCK_COMMENT_MODE]}),u={variants:[{className:"type",begin:e.UNDERSCORE_IDENT_RE},{begin:/\(/,end:/\)/,contains:[]}]},d=u;return d.variants[1].contains=[u],u.variants[1].contains=[d],{name:"Kotlin",aliases:["kt","kts"],keywords:t,contains:[e.COMMENT("/\\*\\*","\\*/",{relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"}]}),e.C_LINE_COMMENT_MODE,c,{className:"keyword",begin:/\b(break|continue|return|this)\b/,starts:{contains:[{className:"symbol",begin:/@\w+/}]}},n,s,a,{className:"function",beginKeywords:"fun",end:"[(]|$",returnBegin:!0,excludeEnd:!0,keywords:t,relevance:5,contains:[{begin:e.UNDERSCORE_IDENT_RE+"\\s*\\(",returnBegin:!0,relevance:0,contains:[e.UNDERSCORE_TITLE_MODE]},{className:"type",begin:/</,end:/>/,keywords:"reified",relevance:0},{className:"params",begin:/\(/,end:/\)/,endsParent:!0,keywords:t,relevance:0,contains:[{begin:/:/,end:/[=,\/]/,endsWithParent:!0,contains:[u,e.C_LINE_COMMENT_MODE,c],relevance:0},e.C_LINE_COMMENT_MODE,c,s,a,o,e.C_NUMBER_MODE]},c]},{begin:[/class|interface|trait/,/\s+/,e.UNDERSCORE_IDENT_RE],beginScope:{3:"title.class"},keywords:"class interface trait",end:/[:\{(]|$/,excludeEnd:!0,illegal:"extends implements",contains:[{beginKeywords:"public protected internal private constructor"},e.UNDERSCORE_TITLE_MODE,{className:"type",begin:/</,end:/>/,excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:/[,:]\s*/,end:/[<\(,){\s]|$/,excludeBegin:!0,returnEnd:!0},s,a]},o,{className:"meta",begin:"^#!/usr/bin/env",end:"$",illegal:"\n"},l]}},less:function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=Um,i="[\\w-]+",r="("+i+"|@\\{"+i+"\\})",o=[],s=[],a=function(e){return{className:"string",begin:"~?"+e+".*?"+e}},l=function(e,t,n){return{className:e,begin:t,relevance:n}},c={$pattern:/[a-z-]+/,keyword:"and or not only",attribute:jm.join(" ")},u={begin:"\\(",end:"\\)",contains:s,keywords:c,relevance:0};s.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,a("'"),a('"'),t.CSS_NUMBER_MODE,{begin:"(url|data-uri)\\(",starts:{className:"string",end:"[\\)\\n]",excludeEnd:!0}},t.HEXCOLOR,u,l("variable","@@?"+i,10),l("variable","@\\{"+i+"\\}"),l("built_in","~?`[^`]*?`"),{className:"attribute",begin:i+"\\s*:",end:":",returnBegin:!0,excludeEnd:!0},t.IMPORTANT,{beginKeywords:"and not"},t.FUNCTION_DISPATCH);const d=s.concat({begin:/\{/,end:/\}/,contains:o}),h={beginKeywords:"when",endsWithParent:!0,contains:[{beginKeywords:"and not"}].concat(s)},p={begin:r+"\\s*:",returnBegin:!0,end:/[;}]/,relevance:0,contains:[{begin:/-(webkit|moz|ms|o)-/},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+Bm.join("|")+")\\b",end:/(?=:)/,starts:{endsWithParent:!0,illegal:"[<=$]",relevance:0,contains:s}}]},f={className:"keyword",begin:"@(import|media|charset|font-face|(-[a-z]+-)?keyframes|supports|document|namespace|page|viewport|host)\\b",starts:{end:"[;{}]",keywords:c,returnEnd:!0,contains:s,relevance:0}},m={className:"variable",variants:[{begin:"@"+i+"\\s*:",relevance:15},{begin:"@"+i}],starts:{end:"[;}]",returnEnd:!0,contains:d}},g={variants:[{begin:"[\\.#:&\\[>]",end:"[;{}]"},{begin:r,end:/\{/}],returnBegin:!0,returnEnd:!0,illegal:"[<='$\"]",relevance:0,contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,h,l("keyword","all\\b"),l("variable","@\\{"+i+"\\}"),{begin:"\\b("+Dm.join("|")+")\\b",className:"selector-tag"},t.CSS_NUMBER_MODE,l("selector-tag",r,0),l("selector-id","#"+r),l("selector-class","\\."+r,0),l("selector-tag","&",0),t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-pseudo",begin:":("+Lm.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+Fm.join("|")+")"},{begin:/\(/,end:/\)/,relevance:0,contains:d},{begin:"!important"},t.FUNCTION_DISPATCH]},v={begin:i+":(:)?"+`(${n.join("|")})`,returnBegin:!0,contains:[g]};return o.push(e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,f,m,v,p,g,h,t.FUNCTION_DISPATCH),{name:"Less",case_insensitive:!0,illegal:"[=>'/<($\"]",contains:o}},lua:function(e){const t="\\[=*\\[",n="\\]=*\\]",i={begin:t,end:n,contains:["self"]},r=[e.COMMENT("--(?!"+t+")","$"),e.COMMENT("--"+t,n,{contains:[i],relevance:10})];return{name:"Lua",keywords:{$pattern:e.UNDERSCORE_IDENT_RE,literal:"true false nil",keyword:"and break do else elseif end for goto if in local not or repeat return then until while",built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"},contains:r.concat([{className:"function",beginKeywords:"function",end:"\\)",contains:[e.inherit(e.TITLE_MODE,{begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",begin:"\\(",endsWithParent:!0,contains:r}].concat(r)},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",begin:t,end:n,contains:[i],relevance:5}])}},makefile:function(e){const t={className:"variable",variants:[{begin:"\\$\\("+e.UNDERSCORE_IDENT_RE+"\\)",contains:[e.BACKSLASH_ESCAPE]},{begin:/\$[@%<?\^\+\*]/}]},n={className:"string",begin:/"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,t]},i={className:"variable",begin:/\$\([\w-]+\s/,end:/\)/,keywords:{built_in:"subst patsubst strip findstring filter filter-out sort word wordlist firstword lastword dir notdir suffix basename addsuffix addprefix join wildcard realpath abspath error warning shell origin flavor foreach if or and call eval file value"},contains:[t]},r={begin:"^"+e.UNDERSCORE_IDENT_RE+"\\s*(?=[:+?]?=)"},o={className:"section",begin:/^[^\s]+:/,end:/$/,contains:[t]};return{name:"Makefile",aliases:["mk","mak","make"],keywords:{$pattern:/[\w-]+/,keyword:"define endef undefine ifdef ifndef ifeq ifneq else endif include -include sinclude override export unexport private vpath"},contains:[e.HASH_COMMENT_MODE,t,n,i,r,{className:"meta",begin:/^\.PHONY:/,end:/$/,keywords:{$pattern:/[\.\w]+/,keyword:".PHONY"}},o]}},markdown:function(e){const t={begin:/<\/?[A-Za-z_]/,end:">",subLanguage:"xml",relevance:0},n={variants:[{begin:/\[.+?\]\[.*?\]/,relevance:0},{begin:/\[.+?\]\(((data|javascript|mailto):|(?:http|ftp)s?:\/\/).*?\)/,relevance:2},{begin:e.regex.concat(/\[.+?\]\(/,/[A-Za-z][A-Za-z0-9+.-]*/,/:\/\/.*?\)/),relevance:2},{begin:/\[.+?\]\([./?&#].*?\)/,relevance:1},{begin:/\[.*?\]\(.*?\)/,relevance:0}],returnBegin:!0,contains:[{match:/\[(?=\])/},{className:"string",relevance:0,begin:"\\[",end:"\\]",excludeBegin:!0,returnEnd:!0},{className:"link",relevance:0,begin:"\\]\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0},{className:"symbol",relevance:0,begin:"\\]\\[",end:"\\]",excludeBegin:!0,excludeEnd:!0}]},i={className:"strong",contains:[],variants:[{begin:/_{2}(?!\s)/,end:/_{2}/},{begin:/\*{2}(?!\s)/,end:/\*{2}/}]},r={className:"emphasis",contains:[],variants:[{begin:/\*(?![*\s])/,end:/\*/},{begin:/_(?![_\s])/,end:/_/,relevance:0}]},o=e.inherit(i,{contains:[]}),s=e.inherit(r,{contains:[]});i.contains.push(s),r.contains.push(o);let a=[t,n];return[i,r,o,s].forEach((e=>{e.contains=e.contains.concat(a)})),a=a.concat(i,r),{name:"Markdown",aliases:["md","mkdown","mkd"],contains:[{className:"section",variants:[{begin:"^#{1,6}",end:"$",contains:a},{begin:"(?=^.+?\\n[=-]{2,}$)",contains:[{begin:"^[=-]*$"},{begin:"^",end:"\\n",contains:a}]}]},t,{className:"bullet",begin:"^[ \t]*([*+-]|(\\d+\\.))(?=\\s+)",end:"\\s+",excludeEnd:!0},i,r,{className:"quote",begin:"^>\\s+",contains:a,end:"$"},{className:"code",variants:[{begin:"(`{3,})[^`](.|\\n)*?\\1`*[ ]*"},{begin:"(~{3,})[^~](.|\\n)*?\\1~*[ ]*"},{begin:"```",end:"```+[ ]*$"},{begin:"~~~",end:"~~~+[ ]*$"},{begin:"`.+?`"},{begin:"(?=^( {4}|\\t))",contains:[{begin:"^( {4}|\\t)",end:"(\\n)$"}],relevance:0}]},{begin:"^[-\\*]{3,}",end:"$"},n,{begin:/^\[[^\n]+\]:/,returnBegin:!0,contains:[{className:"symbol",begin:/\[/,end:/\]/,excludeBegin:!0,excludeEnd:!0},{className:"link",begin:/:\s*/,end:/$/,excludeBegin:!0}]}]}},objectivec:function(e){const t=/[a-zA-Z@][a-zA-Z0-9_]*/,n={$pattern:t,keyword:["@interface","@class","@protocol","@implementation"]};return{name:"Objective-C",aliases:["mm","objc","obj-c","obj-c++","objective-c++"],keywords:{"variable.language":["this","super"],$pattern:t,keyword:["while","export","sizeof","typedef","const","struct","for","union","volatile","static","mutable","if","do","return","goto","enum","else","break","extern","asm","case","default","register","explicit","typename","switch","continue","inline","readonly","assign","readwrite","self","@synchronized","id","typeof","nonatomic","IBOutlet","IBAction","strong","weak","copy","in","out","inout","bycopy","byref","oneway","__strong","__weak","__block","__autoreleasing","@private","@protected","@public","@try","@property","@end","@throw","@catch","@finally","@autoreleasepool","@synthesize","@dynamic","@selector","@optional","@required","@encode","@package","@import","@defs","@compatibility_alias","__bridge","__bridge_transfer","__bridge_retained","__bridge_retain","__covariant","__contravariant","__kindof","_Nonnull","_Nullable","_Null_unspecified","__FUNCTION__","__PRETTY_FUNCTION__","__attribute__","getter","setter","retain","unsafe_unretained","nonnull","nullable","null_unspecified","null_resettable","class","instancetype","NS_DESIGNATED_INITIALIZER","NS_UNAVAILABLE","NS_REQUIRES_SUPER","NS_RETURNS_INNER_POINTER","NS_INLINE","NS_AVAILABLE","NS_DEPRECATED","NS_ENUM","NS_OPTIONS","NS_SWIFT_UNAVAILABLE","NS_ASSUME_NONNULL_BEGIN","NS_ASSUME_NONNULL_END","NS_REFINED_FOR_SWIFT","NS_SWIFT_NAME","NS_SWIFT_NOTHROW","NS_DURING","NS_HANDLER","NS_ENDHANDLER","NS_VALUERETURN","NS_VOIDRETURN"],literal:["false","true","FALSE","TRUE","nil","YES","NO","NULL"],built_in:["dispatch_once_t","dispatch_queue_t","dispatch_sync","dispatch_async","dispatch_once"],type:["int","float","char","unsigned","signed","short","long","double","wchar_t","unichar","void","bool","BOOL","id|0","_Bool"]},illegal:"</",contains:[{className:"built_in",begin:"\\b(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)\\w+"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,e.C_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,{className:"string",variants:[{begin:'@"',end:'"',illegal:"\\n",contains:[e.BACKSLASH_ESCAPE]}]},{className:"meta",begin:/#\s*[a-z]+\b/,end:/$/,keywords:{keyword:"if else elif endif define undef warning error line pragma ifdef ifndef include"},contains:[{begin:/\\\n/,relevance:0},e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),{className:"string",begin:/<.*?>/,end:/$/,illegal:"\\n"},e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE]},{className:"class",begin:"("+n.keyword.join("|")+")\\b",end:/(\{|$)/,excludeEnd:!0,keywords:n,contains:[e.UNDERSCORE_TITLE_MODE]},{begin:"\\."+e.UNDERSCORE_IDENT_RE,relevance:0}]}},perl:function(e){const t=e.regex,n=/[dualxmsipngr]{0,12}/,i={$pattern:/[\w.]+/,keyword:["abs","accept","alarm","and","atan2","bind","binmode","bless","break","caller","chdir","chmod","chomp","chop","chown","chr","chroot","close","closedir","connect","continue","cos","crypt","dbmclose","dbmopen","defined","delete","die","do","dump","each","else","elsif","endgrent","endhostent","endnetent","endprotoent","endpwent","endservent","eof","eval","exec","exists","exit","exp","fcntl","fileno","flock","for","foreach","fork","format","formline","getc","getgrent","getgrgid","getgrnam","gethostbyaddr","gethostbyname","gethostent","getlogin","getnetbyaddr","getnetbyname","getnetent","getpeername","getpgrp","getpriority","getprotobyname","getprotobynumber","getprotoent","getpwent","getpwnam","getpwuid","getservbyname","getservbyport","getservent","getsockname","getsockopt","given","glob","gmtime","goto","grep","gt","hex","if","index","int","ioctl","join","keys","kill","last","lc","lcfirst","length","link","listen","local","localtime","log","lstat","lt","ma","map","mkdir","msgctl","msgget","msgrcv","msgsnd","my","ne","next","no","not","oct","open","opendir","or","ord","our","pack","package","pipe","pop","pos","print","printf","prototype","push","q|0","qq","quotemeta","qw","qx","rand","read","readdir","readline","readlink","readpipe","recv","redo","ref","rename","require","reset","return","reverse","rewinddir","rindex","rmdir","say","scalar","seek","seekdir","select","semctl","semget","semop","send","setgrent","sethostent","setnetent","setpgrp","setpriority","setprotoent","setpwent","setservent","setsockopt","shift","shmctl","shmget","shmread","shmwrite","shutdown","sin","sleep","socket","socketpair","sort","splice","split","sprintf","sqrt","srand","stat","state","study","sub","substr","symlink","syscall","sysopen","sysread","sysseek","system","syswrite","tell","telldir","tie","tied","time","times","tr","truncate","uc","ucfirst","umask","undef","unless","unlink","unpack","unshift","untie","until","use","utime","values","vec","wait","waitpid","wantarray","warn","when","while","write","x|0","xor","y|0"].join(" ")},r={className:"subst",begin:"[$@]\\{",end:"\\}",keywords:i},o={begin:/->\{/,end:/\}/},s={variants:[{begin:/\$\d/},{begin:t.concat(/[$%@](\^\w\b|#\w+(::\w+)*|\{\w+\}|\w+(::\w*)*)/,"(?![A-Za-z])(?![@$%])")},{begin:/[$%@][^\s\w{]/,relevance:0}]},a=[e.BACKSLASH_ESCAPE,r,s],l=[/!/,/\//,/\|/,/\?/,/'/,/"/,/#/],c=function(e,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\\1";const o="\\1"===r?r:t.concat(r,i);return t.concat(t.concat("(?:",e,")"),i,/(?:\\.|[^\\\/])*?/,o,/(?:\\.|[^\\\/])*?/,r,n)},u=(e,i,r)=>t.concat(t.concat("(?:",e,")"),i,/(?:\\.|[^\\\/])*?/,r,n),d=[s,e.HASH_COMMENT_MODE,e.COMMENT(/^=\w/,/=cut/,{endsWithParent:!0}),o,{className:"string",contains:a,variants:[{begin:"q[qwxr]?\\s*\\(",end:"\\)",relevance:5},{begin:"q[qwxr]?\\s*\\[",end:"\\]",relevance:5},{begin:"q[qwxr]?\\s*\\{",end:"\\}",relevance:5},{begin:"q[qwxr]?\\s*\\|",end:"\\|",relevance:5},{begin:"q[qwxr]?\\s*<",end:">",relevance:5},{begin:"qw\\s+q",end:"q",relevance:5},{begin:"'",end:"'",contains:[e.BACKSLASH_ESCAPE]},{begin:'"',end:'"'},{begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE]},{begin:/\{\w+\}/,relevance:0},{begin:"-?\\w+\\s*=>",relevance:0}]},{className:"number",begin:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",relevance:0},{begin:"(\\/\\/|"+e.RE_STARTERS_RE+"|\\b(split|return|print|reverse|grep)\\b)\\s*",keywords:"split return print reverse grep",relevance:0,contains:[e.HASH_COMMENT_MODE,{className:"regexp",variants:[{begin:c("s|tr|y",t.either(...l,{capture:!0}))},{begin:c("s|tr|y","\\(","\\)")},{begin:c("s|tr|y","\\[","\\]")},{begin:c("s|tr|y","\\{","\\}")}],relevance:2},{className:"regexp",variants:[{begin:/(m|qr)\/\//,relevance:0},{begin:u("(?:m|qr)?",/\//,/\//)},{begin:u("m|qr",t.either(...l,{capture:!0}),/\1/)},{begin:u("m|qr",/\(/,/\)/)},{begin:u("m|qr",/\[/,/\]/)},{begin:u("m|qr",/\{/,/\}/)}]}]},{className:"function",beginKeywords:"sub",end:"(\\s*\\(.*?\\))?[;{]",excludeEnd:!0,relevance:5,contains:[e.TITLE_MODE]},{begin:"-\\w\\b",relevance:0},{begin:"^__DATA__$",end:"^__END__$",subLanguage:"mojolicious",contains:[{begin:"^@@.*",end:"$",className:"comment"}]}];return r.contains=d,o.contains=d,{name:"Perl",aliases:["pl","pm"],keywords:i,contains:d}},php:function(e){const t=e.regex,n=/(?![A-Za-z0-9])(?![$])/,i=t.concat(/[a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*/,n),r=t.concat(/(\\?[A-Z][a-z0-9_\x7f-\xff]+|\\?[A-Z]+(?=[A-Z][a-z0-9_\x7f-\xff])){1,}/,n),o={scope:"variable",match:"\\$+"+i},s={scope:"subst",variants:[{begin:/\$\w+/},{begin:/\{\$/,end:/\}/}]},a=e.inherit(e.APOS_STRING_MODE,{illegal:null}),l=e.inherit(e.QUOTE_STRING_MODE,{illegal:null,contains:e.QUOTE_STRING_MODE.contains.concat(s)}),c={begin:/<<<[ \t]*(?:(\w+)|"(\w+)")\n/,end:/[ \t]*(\w+)\b/,contains:e.QUOTE_STRING_MODE.contains.concat(s),"on:begin":(e,t)=>{t.data._beginMatch=e[1]||e[2]},"on:end":(e,t)=>{t.data._beginMatch!==e[1]&&t.ignoreMatch()}},u="[ \t\n]",d={scope:"string",variants:[l,a,c,e.END_SAME_AS_BEGIN({begin:/<<<[ \t]*'(\w+)'\n/,end:/[ \t]*(\w+)\b/})]},h={scope:"number",variants:[{begin:"\\b0[bB][01]+(?:_[01]+)*\\b"},{begin:"\\b0[oO][0-7]+(?:_[0-7]+)*\\b"},{begin:"\\b0[xX][\\da-fA-F]+(?:_[\\da-fA-F]+)*\\b"},{begin:"(?:\\b\\d+(?:_\\d+)*(\\.(?:\\d+(?:_\\d+)*))?|\\B\\.\\d+)(?:[eE][+-]?\\d+)?"}],relevance:0},p=["false","null","true"],f=["__CLASS__","__DIR__","__FILE__","__FUNCTION__","__COMPILER_HALT_OFFSET__","__LINE__","__METHOD__","__NAMESPACE__","__TRAIT__","die","echo","exit","include","include_once","print","require","require_once","array","abstract","and","as","binary","bool","boolean","break","callable","case","catch","class","clone","const","continue","declare","default","do","double","else","elseif","empty","enddeclare","endfor","endforeach","endif","endswitch","endwhile","enum","eval","extends","final","finally","float","for","foreach","from","global","goto","if","implements","instanceof","insteadof","int","integer","interface","isset","iterable","list","match|0","mixed","new","never","object","or","private","protected","public","readonly","real","return","string","switch","throw","trait","try","unset","use","var","void","while","xor","yield"],m=["Error|0","AppendIterator","ArgumentCountError","ArithmeticError","ArrayIterator","ArrayObject","AssertionError","BadFunctionCallException","BadMethodCallException","CachingIterator","CallbackFilterIterator","CompileError","Countable","DirectoryIterator","DivisionByZeroError","DomainException","EmptyIterator","ErrorException","Exception","FilesystemIterator","FilterIterator","GlobIterator","InfiniteIterator","InvalidArgumentException","IteratorIterator","LengthException","LimitIterator","LogicException","MultipleIterator","NoRewindIterator","OutOfBoundsException","OutOfRangeException","OuterIterator","OverflowException","ParentIterator","ParseError","RangeException","RecursiveArrayIterator","RecursiveCachingIterator","RecursiveCallbackFilterIterator","RecursiveDirectoryIterator","RecursiveFilterIterator","RecursiveIterator","RecursiveIteratorIterator","RecursiveRegexIterator","RecursiveTreeIterator","RegexIterator","RuntimeException","SeekableIterator","SplDoublyLinkedList","SplFileInfo","SplFileObject","SplFixedArray","SplHeap","SplMaxHeap","SplMinHeap","SplObjectStorage","SplObserver","SplPriorityQueue","SplQueue","SplStack","SplSubject","SplTempFileObject","TypeError","UnderflowException","UnexpectedValueException","UnhandledMatchError","ArrayAccess","BackedEnum","Closure","Fiber","Generator","Iterator","IteratorAggregate","Serializable","Stringable","Throwable","Traversable","UnitEnum","WeakReference","WeakMap","Directory","__PHP_Incomplete_Class","parent","php_user_filter","self","static","stdClass"],g={keyword:f,literal:(e=>{const t=[];return e.forEach((e=>{t.push(e),e.toLowerCase()===e?t.push(e.toUpperCase()):t.push(e.toLowerCase())})),t})(p),built_in:m},v=e=>e.map((e=>e.replace(/\|\d+$/,""))),b={variants:[{match:[/new/,t.concat(u,"+"),t.concat("(?!",v(m).join("\\b|"),"\\b)"),r],scope:{1:"keyword",4:"title.class"}}]},y=t.concat(i,"\\b(?!\\()"),x={variants:[{match:[t.concat(/::/,t.lookahead(/(?!class\b)/)),y],scope:{2:"variable.constant"}},{match:[/::/,/class/],scope:{2:"variable.language"}},{match:[r,t.concat(/::/,t.lookahead(/(?!class\b)/)),y],scope:{1:"title.class",3:"variable.constant"}},{match:[r,t.concat("::",t.lookahead(/(?!class\b)/))],scope:{1:"title.class"}},{match:[r,/::/,/class/],scope:{1:"title.class",3:"variable.language"}}]},k={scope:"attr",match:t.concat(i,t.lookahead(":"),t.lookahead(/(?!::)/))},w={relevance:0,begin:/\(/,end:/\)/,keywords:g,contains:[k,o,x,e.C_BLOCK_COMMENT_MODE,d,h,b]},S={relevance:0,match:[/\b/,t.concat("(?!fn\\b|function\\b|",v(f).join("\\b|"),"|",v(m).join("\\b|"),"\\b)"),i,t.concat(u,"*"),t.lookahead(/(?=\()/)],scope:{3:"title.function.invoke"},contains:[w]};w.contains.push(S);const C=[k,x,e.C_BLOCK_COMMENT_MODE,d,h,b];return{case_insensitive:!1,keywords:g,contains:[{begin:t.concat(/#\[\s*/,r),beginScope:"meta",end:/]/,endScope:"meta",keywords:{literal:p,keyword:["new","array"]},contains:[{begin:/\[/,end:/]/,keywords:{literal:p,keyword:["new","array"]},contains:["self",...C]},...C,{scope:"meta",match:r}]},e.HASH_COMMENT_MODE,e.COMMENT("//","$"),e.COMMENT("/\\*","\\*/",{contains:[{scope:"doctag",match:"@[A-Za-z]+"}]}),{match:/__halt_compiler\(\);/,keywords:"__halt_compiler",starts:{scope:"comment",end:e.MATCH_NOTHING_RE,contains:[{match:/\?>/,scope:"meta",endsParent:!0}]}},{scope:"meta",variants:[{begin:/<\?php/,relevance:10},{begin:/<\?=/},{begin:/<\?/,relevance:.1},{begin:/\?>/}]},{scope:"variable.language",match:/\$this\b/},o,S,x,{match:[/const/,/\s/,i],scope:{1:"keyword",3:"variable.constant"}},b,{scope:"function",relevance:0,beginKeywords:"fn function",end:/[;{]/,excludeEnd:!0,illegal:"[$%\\[]",contains:[{beginKeywords:"use"},e.UNDERSCORE_TITLE_MODE,{begin:"=>",endsParent:!0},{scope:"params",begin:"\\(",end:"\\)",excludeBegin:!0,excludeEnd:!0,keywords:g,contains:["self",o,x,e.C_BLOCK_COMMENT_MODE,d,h]}]},{scope:"class",variants:[{beginKeywords:"enum",illegal:/[($"]/},{beginKeywords:"class interface trait",illegal:/[:($"]/}],relevance:0,end:/\{/,excludeEnd:!0,contains:[{beginKeywords:"extends implements"},e.UNDERSCORE_TITLE_MODE]},{beginKeywords:"namespace",relevance:0,end:";",illegal:/[.']/,contains:[e.inherit(e.UNDERSCORE_TITLE_MODE,{scope:"title.class"})]},{beginKeywords:"use",relevance:0,end:";",contains:[{match:/\b(as|const|function)\b/,scope:"keyword"},e.UNDERSCORE_TITLE_MODE]},d,h]}},"php-template":function(e){return{name:"PHP template",subLanguage:"xml",contains:[{begin:/<\?(php|=)?/,end:/\?>/,subLanguage:"php",contains:[{begin:"/\\*",end:"\\*/",skip:!0},{begin:'b"',end:'"',skip:!0},{begin:"b'",end:"'",skip:!0},e.inherit(e.APOS_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0}),e.inherit(e.QUOTE_STRING_MODE,{illegal:null,className:null,contains:null,skip:!0})]}]}},plaintext:function(e){return{name:"Plain text",aliases:["text","txt"],disableAutodetect:!0}},python:function(e){const t=e.regex,n=/[\p{XID_Start}_]\p{XID_Continue}*/u,i=["and","as","assert","async","await","break","case","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","in","is","lambda","match","nonlocal|10","not","or","pass","raise","return","try","while","with","yield"],r={$pattern:/[A-Za-z]\w+|__\w+__/,keyword:i,built_in:["__import__","abs","all","any","ascii","bin","bool","breakpoint","bytearray","bytes","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","exec","filter","float","format","frozenset","getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","print","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip"],literal:["__debug__","Ellipsis","False","None","NotImplemented","True"],type:["Any","Callable","Coroutine","Dict","List","Literal","Generic","Optional","Sequence","Set","Tuple","Type","Union"]},o={className:"meta",begin:/^(>>>|\.\.\.) /},s={className:"subst",begin:/\{/,end:/\}/,keywords:r,illegal:/#/},a={begin:/\{\{/,relevance:0},l={className:"string",contains:[e.BACKSLASH_ESCAPE],variants:[{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,o],relevance:10},{begin:/([uU]|[bB]|[rR]|[bB][rR]|[rR][bB])?"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,o],relevance:10},{begin:/([fF][rR]|[rR][fF]|[fF])'''/,end:/'''/,contains:[e.BACKSLASH_ESCAPE,o,a,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"""/,end:/"""/,contains:[e.BACKSLASH_ESCAPE,o,a,s]},{begin:/([uU]|[rR])'/,end:/'/,relevance:10},{begin:/([uU]|[rR])"/,end:/"/,relevance:10},{begin:/([bB]|[bB][rR]|[rR][bB])'/,end:/'/},{begin:/([bB]|[bB][rR]|[rR][bB])"/,end:/"/},{begin:/([fF][rR]|[rR][fF]|[fF])'/,end:/'/,contains:[e.BACKSLASH_ESCAPE,a,s]},{begin:/([fF][rR]|[rR][fF]|[fF])"/,end:/"/,contains:[e.BACKSLASH_ESCAPE,a,s]},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},c="[0-9](_?[0-9])*",u=`(\\b(${c}))?\\.(${c})|\\b(${c})\\.`,d=`\\b|${i.join("|")}`,h={className:"number",relevance:0,variants:[{begin:`(\\b(${c})|(${u}))[eE][+-]?(${c})[jJ]?(?=${d})`},{begin:`(${u})[jJ]?`},{begin:`\\b([1-9](_?[0-9])*|0+(_?0)*)[lLjJ]?(?=${d})`},{begin:`\\b0[bB](_?[01])+[lL]?(?=${d})`},{begin:`\\b0[oO](_?[0-7])+[lL]?(?=${d})`},{begin:`\\b0[xX](_?[0-9a-fA-F])+[lL]?(?=${d})`},{begin:`\\b(${c})[jJ](?=${d})`}]},p={className:"comment",begin:t.lookahead(/# type:/),end:/$/,keywords:r,contains:[{begin:/# type:/},{begin:/#/,end:/\b\B/,endsWithParent:!0}]},f={className:"params",variants:[{className:"",begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:r,contains:["self",o,h,l,e.HASH_COMMENT_MODE]}]};return s.contains=[l,h,o],{name:"Python",aliases:["py","gyp","ipython"],unicodeRegex:!0,keywords:r,illegal:/(<\/|\?)|=>/,contains:[o,h,{begin:/\bself\b/},{beginKeywords:"if",relevance:0},l,p,e.HASH_COMMENT_MODE,{match:[/\bdef/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[f]},{variants:[{match:[/\bclass/,/\s+/,n,/\s*/,/\(\s*/,n,/\s*\)/]},{match:[/\bclass/,/\s+/,n]}],scope:{1:"keyword",3:"title.class",6:"title.class.inherited"}},{className:"meta",begin:/^[\t ]*@/,end:/(?=#)|$/,contains:[h,f,l]}]}},"python-repl":function(e){return{aliases:["pycon"],contains:[{className:"meta.prompt",starts:{end:/ |$/,starts:{end:"$",subLanguage:"python"}},variants:[{begin:/^>>>(?=[ ]|$)/},{begin:/^\.\.\.(?=[ ]|$)/}]}]}},r:function(e){const t=e.regex,n=/(?:(?:[a-zA-Z]|\.[._a-zA-Z])[._a-zA-Z0-9]*)|\.(?!\d)/,i=t.either(/0[xX][0-9a-fA-F]+\.[0-9a-fA-F]*[pP][+-]?\d+i?/,/0[xX][0-9a-fA-F]+(?:[pP][+-]?\d+)?[Li]?/,/(?:\d+(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+)?[Li]?/),r=/[=!<>:]=|\|\||&&|:::?|<-|<<-|->>|->|\|>|[-+*\/?!$&|:<=>@^~]|\*\*/,o=t.either(/[()]/,/[{}]/,/\[\[/,/[[\]]/,/\\/,/,/);return{name:"R",keywords:{$pattern:n,keyword:"function if in break next repeat else for while",literal:"NULL NA TRUE FALSE Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10",built_in:"LETTERS letters month.abb month.name pi T F abs acos acosh all any anyNA Arg as.call as.character as.complex as.double as.environment as.integer as.logical as.null.default as.numeric as.raw asin asinh atan atanh attr attributes baseenv browser c call ceiling class Conj cos cosh cospi cummax cummin cumprod cumsum digamma dim dimnames emptyenv exp expression floor forceAndCall gamma gc.time globalenv Im interactive invisible is.array is.atomic is.call is.character is.complex is.double is.environment is.expression is.finite is.function is.infinite is.integer is.language is.list is.logical is.matrix is.na is.name is.nan is.null is.numeric is.object is.pairlist is.raw is.recursive is.single is.symbol lazyLoadDBfetch length lgamma list log max min missing Mod names nargs nzchar oldClass on.exit pos.to.env proc.time prod quote range Re rep retracemem return round seq_along seq_len seq.int sign signif sin sinh sinpi sqrt standardGeneric substitute sum switch tan tanh tanpi tracemem trigamma trunc unclass untracemem UseMethod xtfrm"},contains:[e.COMMENT(/#'/,/$/,{contains:[{scope:"doctag",match:/@examples/,starts:{end:t.lookahead(t.either(/\n^#'\s*(?=@[a-zA-Z]+)/,/\n^(?!#')/)),endsParent:!0}},{scope:"doctag",begin:"@param",end:/$/,contains:[{scope:"variable",variants:[{match:n},{match:/`(?:\\.|[^`\\])+`/}],endsParent:!0}]},{scope:"doctag",match:/@[a-zA-Z]+/},{scope:"keyword",match:/\\[a-zA-Z]+/}]}),e.HASH_COMMENT_MODE,{scope:"string",contains:[e.BACKSLASH_ESCAPE],variants:[e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\(/,end:/\)(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\{/,end:/\}(-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]"(-*)\[/,end:/\](-*)"/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\(/,end:/\)(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\{/,end:/\}(-*)'/}),e.END_SAME_AS_BEGIN({begin:/[rR]'(-*)\[/,end:/\](-*)'/}),{begin:'"',end:'"',relevance:0},{begin:"'",end:"'",relevance:0}]},{relevance:0,variants:[{scope:{1:"operator",2:"number"},match:[r,i]},{scope:{1:"operator",2:"number"},match:[/%[^%]*%/,i]},{scope:{1:"punctuation",2:"number"},match:[o,i]},{scope:{2:"number"},match:[/[^a-zA-Z0-9._]|^/,i]}]},{scope:{3:"operator"},match:[n,/\s+/,/<-/,/\s+/]},{scope:"operator",relevance:0,variants:[{match:r},{match:/%[^%]*%/}]},{scope:"punctuation",relevance:0,match:o},{begin:"`",end:"`",contains:[{begin:/\\./}]}]}},ruby:function(e){const t=e.regex,n="([a-zA-Z_]\\w*[!?=]?|[-+~]@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?)",i=t.either(/\b([A-Z]+[a-z0-9]+)+/,/\b([A-Z]+[a-z0-9]+)+[A-Z]+/),r=t.concat(i,/(::\w+)*/),o={"variable.constant":["__FILE__","__LINE__","__ENCODING__"],"variable.language":["self","super"],keyword:["alias","and","begin","BEGIN","break","case","class","defined","do","else","elsif","end","END","ensure","for","if","in","module","next","not","or","redo","require","rescue","retry","return","then","undef","unless","until","when","while","yield","include","extend","prepend","public","private","protected","raise","throw"],built_in:["proc","lambda","attr_accessor","attr_reader","attr_writer","define_method","private_constant","module_function"],literal:["true","false","nil"]},s={className:"doctag",begin:"@[A-Za-z]+"},a={begin:"#<",end:">"},l=[e.COMMENT("#","$",{contains:[s]}),e.COMMENT("^=begin","^=end",{contains:[s],relevance:10}),e.COMMENT("^__END__",e.MATCH_NOTHING_RE)],c={className:"subst",begin:/#\{/,end:/\}/,keywords:o},u={className:"string",contains:[e.BACKSLASH_ESCAPE,c],variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/`/,end:/`/},{begin:/%[qQwWx]?\(/,end:/\)/},{begin:/%[qQwWx]?\[/,end:/\]/},{begin:/%[qQwWx]?\{/,end:/\}/},{begin:/%[qQwWx]?</,end:/>/},{begin:/%[qQwWx]?\//,end:/\//},{begin:/%[qQwWx]?%/,end:/%/},{begin:/%[qQwWx]?-/,end:/-/},{begin:/%[qQwWx]?\|/,end:/\|/},{begin:/\B\?(\\\d{1,3})/},{begin:/\B\?(\\x[A-Fa-f0-9]{1,2})/},{begin:/\B\?(\\u\{?[A-Fa-f0-9]{1,6}\}?)/},{begin:/\B\?(\\M-\\C-|\\M-\\c|\\c\\M-|\\M-|\\C-\\M-)[\x20-\x7e]/},{begin:/\B\?\\(c|C-)[\x20-\x7e]/},{begin:/\B\?\\?\S/},{begin:t.concat(/<<[-~]?'?/,t.lookahead(/(\w+)(?=\W)[^\n]*\n(?:[^\n]*\n)*?\s*\1\b/)),contains:[e.END_SAME_AS_BEGIN({begin:/(\w+)/,end:/(\w+)/,contains:[e.BACKSLASH_ESCAPE,c]})]}]},d="[0-9](_?[0-9])*",h={className:"number",relevance:0,variants:[{begin:`\\b([1-9](_?[0-9])*|0)(\\.(${d}))?([eE][+-]?(${d})|r)?i?\\b`},{begin:"\\b0[dD][0-9](_?[0-9])*r?i?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*r?i?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*r?i?\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*r?i?\\b"},{begin:"\\b0(_?[0-7])+r?i?\\b"}]},p={variants:[{match:/\(\)/},{className:"params",begin:/\(/,end:/(?=\))/,excludeBegin:!0,endsParent:!0,keywords:o}]},f=[u,{variants:[{match:[/class\s+/,r,/\s+<\s+/,r]},{match:[/\b(class|module)\s+/,r]}],scope:{2:"title.class",4:"title.class.inherited"},keywords:o},{match:[/(include|extend)\s+/,r],scope:{2:"title.class"},keywords:o},{relevance:0,match:[r,/\.new[. (]/],scope:{1:"title.class"}},{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},{relevance:0,match:i,scope:"title.class"},{match:[/def/,/\s+/,n],scope:{1:"keyword",3:"title.function"},contains:[p]},{begin:e.IDENT_RE+"::"},{className:"symbol",begin:e.UNDERSCORE_IDENT_RE+"(!|\\?)?:",relevance:0},{className:"symbol",begin:":(?!\\s)",contains:[u,{begin:n}],relevance:0},h,{className:"variable",begin:"(\\$\\W)|((\\$|@@?)(\\w+))(?=[^@$?])(?![A-Za-z])(?![@$?'])"},{className:"params",begin:/\|/,end:/\|/,excludeBegin:!0,excludeEnd:!0,relevance:0,keywords:o},{begin:"("+e.RE_STARTERS_RE+"|unless)\\s*",keywords:"unless",contains:[{className:"regexp",contains:[e.BACKSLASH_ESCAPE,c],illegal:/\n/,variants:[{begin:"/",end:"/[a-z]*"},{begin:/%r\{/,end:/\}[a-z]*/},{begin:"%r\\(",end:"\\)[a-z]*"},{begin:"%r!",end:"![a-z]*"},{begin:"%r\\[",end:"\\][a-z]*"}]}].concat(a,l),relevance:0}].concat(a,l);c.contains=f,p.contains=f;const m=[{begin:/^\s*=>/,starts:{end:"$",contains:f}},{className:"meta.prompt",begin:"^([>?]>|[\\w#]+\\(\\w+\\):\\d+:\\d+[>*]|(\\w+-)?\\d+\\.\\d+\\.\\d+(p\\d+)?[^\\d][^>]+>)(?=[ ])",starts:{end:"$",keywords:o,contains:f}}];return l.unshift(a),{name:"Ruby",aliases:["rb","gemspec","podspec","thor","irb"],keywords:o,illegal:/\/\*/,contains:[e.SHEBANG({binary:"ruby"})].concat(m).concat(l).concat(f)}},rust:function(e){const t=e.regex,n={className:"title.function.invoke",relevance:0,begin:t.concat(/\b/,/(?!let|for|while|if|else|match\b)/,e.IDENT_RE,t.lookahead(/\s*\(/))},i="([ui](8|16|32|64|128|size)|f(32|64))?",r=["drop ","Copy","Send","Sized","Sync","Drop","Fn","FnMut","FnOnce","ToOwned","Clone","Debug","PartialEq","PartialOrd","Eq","Ord","AsRef","AsMut","Into","From","Default","Iterator","Extend","IntoIterator","DoubleEndedIterator","ExactSizeIterator","SliceConcatExt","ToString","assert!","assert_eq!","bitflags!","bytes!","cfg!","col!","concat!","concat_idents!","debug_assert!","debug_assert_eq!","env!","eprintln!","panic!","file!","format!","format_args!","include_bytes!","include_str!","line!","local_data_key!","module_path!","option_env!","print!","println!","select!","stringify!","try!","unimplemented!","unreachable!","vec!","write!","writeln!","macro_rules!","assert_ne!","debug_assert_ne!"],o=["i8","i16","i32","i64","i128","isize","u8","u16","u32","u64","u128","usize","f32","f64","str","char","bool","Box","Option","Result","String","Vec"];return{name:"Rust",aliases:["rs"],keywords:{$pattern:e.IDENT_RE+"!?",type:o,keyword:["abstract","as","async","await","become","box","break","const","continue","crate","do","dyn","else","enum","extern","false","final","fn","for","if","impl","in","let","loop","macro","match","mod","move","mut","override","priv","pub","ref","return","self","Self","static","struct","super","trait","true","try","type","typeof","unsafe","unsized","use","virtual","where","while","yield"],literal:["true","false","Some","None","Ok","Err"],built_in:r},illegal:"</",contains:[e.C_LINE_COMMENT_MODE,e.COMMENT("/\\*","\\*/",{contains:["self"]}),e.inherit(e.QUOTE_STRING_MODE,{begin:/b?"/,illegal:null}),{className:"string",variants:[{begin:/b?r(#*)"(.|\n)*?"\1(?!#)/},{begin:/b?'\\?(x\w{2}|u\w{4}|U\w{8}|.)'/}]},{className:"symbol",begin:/'[a-zA-Z_][a-zA-Z0-9_]*/},{className:"number",variants:[{begin:"\\b0b([01_]+)"+i},{begin:"\\b0o([0-7_]+)"+i},{begin:"\\b0x([A-Fa-f0-9_]+)"+i},{begin:"\\b(\\d[\\d_]*(\\.[0-9_]+)?([eE][+-]?[0-9_]+)?)"+i}],relevance:0},{begin:[/fn/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.function"}},{className:"meta",begin:"#!?\\[",end:"\\]",contains:[{className:"string",begin:/"/,end:/"/}]},{begin:[/let/,/\s+/,/(?:mut\s+)?/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"keyword",4:"variable"}},{begin:[/for/,/\s+/,e.UNDERSCORE_IDENT_RE,/\s+/,/in/],className:{1:"keyword",3:"variable",5:"keyword"}},{begin:[/type/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:[/(?:trait|enum|struct|union|impl|for)/,/\s+/,e.UNDERSCORE_IDENT_RE],className:{1:"keyword",3:"title.class"}},{begin:e.IDENT_RE+"::",keywords:{keyword:"Self",built_in:r,type:o}},{className:"punctuation",begin:"->"},n]}},scss:function(e){const t=(e=>({IMPORTANT:{scope:"meta",begin:"!important"},BLOCK_COMMENT:e.C_BLOCK_COMMENT_MODE,HEXCOLOR:{scope:"number",begin:/#(([0-9a-fA-F]{3,4})|(([0-9a-fA-F]{2}){3,4}))\b/},FUNCTION_DISPATCH:{className:"built_in",begin:/[\w-]+(?=\()/},ATTRIBUTE_SELECTOR_MODE:{scope:"selector-attr",begin:/\[/,end:/\]/,illegal:"$",contains:[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE]},CSS_NUMBER_MODE:{scope:"number",begin:e.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},CSS_VARIABLE:{className:"attr",begin:/--[A-Za-z_][A-Za-z0-9_-]*/}}))(e),n=Hm,i=Vm,r="@[a-z-]+",o={className:"variable",begin:"(\\$[a-zA-Z-][a-zA-Z0-9_-]*)\\b",relevance:0};return{name:"SCSS",case_insensitive:!0,illegal:"[=/|']",contains:[e.C_LINE_COMMENT_MODE,e.C_BLOCK_COMMENT_MODE,t.CSS_NUMBER_MODE,{className:"selector-id",begin:"#[A-Za-z0-9_-]+",relevance:0},{className:"selector-class",begin:"\\.[A-Za-z0-9_-]+",relevance:0},t.ATTRIBUTE_SELECTOR_MODE,{className:"selector-tag",begin:"\\b("+$m.join("|")+")\\b",relevance:0},{className:"selector-pseudo",begin:":("+i.join("|")+")"},{className:"selector-pseudo",begin:":(:)?("+n.join("|")+")"},o,{begin:/\(/,end:/\)/,contains:[t.CSS_NUMBER_MODE]},t.CSS_VARIABLE,{className:"attribute",begin:"\\b("+qm.join("|")+")\\b"},{begin:"\\b(whitespace|wait|w-resize|visible|vertical-text|vertical-ideographic|uppercase|upper-roman|upper-alpha|underline|transparent|top|thin|thick|text|text-top|text-bottom|tb-rl|table-header-group|table-footer-group|sw-resize|super|strict|static|square|solid|small-caps|separate|se-resize|scroll|s-resize|rtl|row-resize|ridge|right|repeat|repeat-y|repeat-x|relative|progress|pointer|overline|outside|outset|oblique|nowrap|not-allowed|normal|none|nw-resize|no-repeat|no-drop|newspaper|ne-resize|n-resize|move|middle|medium|ltr|lr-tb|lowercase|lower-roman|lower-alpha|loose|list-item|line|line-through|line-edge|lighter|left|keep-all|justify|italic|inter-word|inter-ideograph|inside|inset|inline|inline-block|inherit|inactive|ideograph-space|ideograph-parenthesis|ideograph-numeric|ideograph-alpha|horizontal|hidden|help|hand|groove|fixed|ellipsis|e-resize|double|dotted|distribute|distribute-space|distribute-letter|distribute-all-lines|disc|disabled|default|decimal|dashed|crosshair|collapse|col-resize|circle|char|center|capitalize|break-word|break-all|bottom|both|bolder|bold|block|bidi-override|below|baseline|auto|always|all-scroll|absolute|table|table-cell)\\b"},{begin:/:/,end:/[;}{]/,relevance:0,contains:[t.BLOCK_COMMENT,o,t.HEXCOLOR,t.CSS_NUMBER_MODE,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.IMPORTANT,t.FUNCTION_DISPATCH]},{begin:"@(page|font-face)",keywords:{$pattern:r,keyword:"@page @font-face"}},{begin:"@",end:"[{;]",returnBegin:!0,keywords:{$pattern:/[a-z-]+/,keyword:"and or not only",attribute:zm.join(" ")},contains:[{begin:r,className:"keyword"},{begin:/[a-z-]+(?=:)/,className:"attribute"},o,e.QUOTE_STRING_MODE,e.APOS_STRING_MODE,t.HEXCOLOR,t.CSS_NUMBER_MODE]},t.FUNCTION_DISPATCH]}},shell:function(e){return{name:"Shell Session",aliases:["console","shellsession"],contains:[{className:"meta.prompt",begin:/^\s{0,3}[/~\w\d[\]()@-]*[>%$#][ ]?/,starts:{end:/[^\\](?=\s*$)/,subLanguage:"bash"}}]}},sql:function(e){const t=e.regex,n=e.COMMENT("--","$"),i=["true","false","unknown"],r=["bigint","binary","blob","boolean","char","character","clob","date","dec","decfloat","decimal","float","int","integer","interval","nchar","nclob","national","numeric","real","row","smallint","time","timestamp","varchar","varying","varbinary"],o=["abs","acos","array_agg","asin","atan","avg","cast","ceil","ceiling","coalesce","corr","cos","cosh","count","covar_pop","covar_samp","cume_dist","dense_rank","deref","element","exp","extract","first_value","floor","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","last_value","lead","listagg","ln","log","log10","lower","max","min","mod","nth_value","ntile","nullif","percent_rank","percentile_cont","percentile_disc","position","position_regex","power","rank","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","row_number","sin","sinh","sqrt","stddev_pop","stddev_samp","substring","substring_regex","sum","tan","tanh","translate","translate_regex","treat","trim","trim_array","unnest","upper","value_of","var_pop","var_samp","width_bucket"],s=["create table","insert into","primary key","foreign key","not null","alter table","add constraint","grouping sets","on overflow","character set","respect nulls","ignore nulls","nulls first","nulls last","depth first","breadth first"],a=o,l=["abs","acos","all","allocate","alter","and","any","are","array","array_agg","array_max_cardinality","as","asensitive","asin","asymmetric","at","atan","atomic","authorization","avg","begin","begin_frame","begin_partition","between","bigint","binary","blob","boolean","both","by","call","called","cardinality","cascaded","case","cast","ceil","ceiling","char","char_length","character","character_length","check","classifier","clob","close","coalesce","collate","collect","column","commit","condition","connect","constraint","contains","convert","copy","corr","corresponding","cos","cosh","count","covar_pop","covar_samp","create","cross","cube","cume_dist","current","current_catalog","current_date","current_default_transform_group","current_path","current_role","current_row","current_schema","current_time","current_timestamp","current_path","current_role","current_transform_group_for_type","current_user","cursor","cycle","date","day","deallocate","dec","decimal","decfloat","declare","default","define","delete","dense_rank","deref","describe","deterministic","disconnect","distinct","double","drop","dynamic","each","element","else","empty","end","end_frame","end_partition","end-exec","equals","escape","every","except","exec","execute","exists","exp","external","extract","false","fetch","filter","first_value","float","floor","for","foreign","frame_row","free","from","full","function","fusion","get","global","grant","group","grouping","groups","having","hold","hour","identity","in","indicator","initial","inner","inout","insensitive","insert","int","integer","intersect","intersection","interval","into","is","join","json_array","json_arrayagg","json_exists","json_object","json_objectagg","json_query","json_table","json_table_primitive","json_value","lag","language","large","last_value","lateral","lead","leading","left","like","like_regex","listagg","ln","local","localtime","localtimestamp","log","log10","lower","match","match_number","match_recognize","matches","max","member","merge","method","min","minute","mod","modifies","module","month","multiset","national","natural","nchar","nclob","new","no","none","normalize","not","nth_value","ntile","null","nullif","numeric","octet_length","occurrences_regex","of","offset","old","omit","on","one","only","open","or","order","out","outer","over","overlaps","overlay","parameter","partition","pattern","per","percent","percent_rank","percentile_cont","percentile_disc","period","portion","position","position_regex","power","precedes","precision","prepare","primary","procedure","ptf","range","rank","reads","real","recursive","ref","references","referencing","regr_avgx","regr_avgy","regr_count","regr_intercept","regr_r2","regr_slope","regr_sxx","regr_sxy","regr_syy","release","result","return","returns","revoke","right","rollback","rollup","row","row_number","rows","running","savepoint","scope","scroll","search","second","seek","select","sensitive","session_user","set","show","similar","sin","sinh","skip","smallint","some","specific","specifictype","sql","sqlexception","sqlstate","sqlwarning","sqrt","start","static","stddev_pop","stddev_samp","submultiset","subset","substring","substring_regex","succeeds","sum","symmetric","system","system_time","system_user","table","tablesample","tan","tanh","then","time","timestamp","timezone_hour","timezone_minute","to","trailing","translate","translate_regex","translation","treat","trigger","trim","trim_array","true","truncate","uescape","union","unique","unknown","unnest","update","upper","user","using","value","values","value_of","var_pop","var_samp","varbinary","varchar","varying","versioning","when","whenever","where","width_bucket","window","with","within","without","year","add","asc","collation","desc","final","first","last","view"].filter((e=>!o.includes(e))),c={begin:t.concat(/\b/,t.either(...a),/\s*\(/),relevance:0,keywords:{built_in:a}};return{name:"SQL",case_insensitive:!0,illegal:/[{}]|<\//,keywords:{$pattern:/\b[\w\.]+/,keyword:function(e){let{exceptions:t,when:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=n;return t=t||[],e.map((e=>e.match(/\|\d+$/)||t.includes(e)?e:i(e)?`${e}|0`:e))}(l,{when:e=>e.length<3}),literal:i,type:r,built_in:["current_catalog","current_date","current_default_transform_group","current_path","current_role","current_schema","current_transform_group_for_type","current_user","session_user","system_time","system_user","current_time","localtime","current_timestamp","localtimestamp"]},contains:[{begin:t.either(...s),relevance:0,keywords:{$pattern:/[\w\.]+/,keyword:l.concat(s),literal:i,type:r}},{className:"type",begin:t.either("double precision","large object","with timezone","without timezone")},c,{className:"variable",begin:/@[a-z0-9][a-z0-9_]*/},{className:"string",variants:[{begin:/'/,end:/'/,contains:[{begin:/''/}]}]},{begin:/"/,end:/"/,contains:[{begin:/""/}]},e.C_NUMBER_MODE,e.C_BLOCK_COMMENT_MODE,n,{className:"operator",begin:/[-+*/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?/,relevance:0}]}},swift:function(e){const t={match:/\s+/,relevance:0},n=e.COMMENT("/\\*","\\*/",{contains:["self"]}),i=[e.C_LINE_COMMENT_MODE,n],r={match:[/\./,Qm(...Ym,...Jm)],className:{2:"keyword"}},o={match:Km(/\./,Qm(...eg)),relevance:0},s=eg.filter((e=>"string"===typeof e)).concat(["_|0"]),a={variants:[{className:"keyword",match:Qm(...eg.filter((e=>"string"!==typeof e)).concat(Zm).map(Xm),...Jm)}]},l={$pattern:Qm(/\b\w+/,/#\w+/),keyword:s.concat(ig),literal:tg},c=[r,o,a],u=[{match:Km(/\./,Qm(...rg)),relevance:0},{className:"built_in",match:Km(/\b/,Qm(...rg),/(?=\()/)}],d={match:/->/,relevance:0},h=[d,{className:"operator",relevance:0,variants:[{match:ag},{match:`\\.(\\.|${sg})+`}]}],p="([0-9]_*)+",f="([0-9a-fA-F]_*)+",m={className:"number",relevance:0,variants:[{match:`\\b(${p})(\\.(${p}))?([eE][+-]?(${p}))?\\b`},{match:`\\b0x(${f})(\\.(${f}))?([pP][+-]?(${p}))?\\b`},{match:/\b0o([0-7]_*)+\b/},{match:/\b0b([01]_*)+\b/}]},g=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{className:"subst",variants:[{match:Km(/\\/,e,/[0\\tnr"']/)},{match:Km(/\\/,e,/u\{[0-9a-fA-F]{1,8}\}/)}]}},v=function(){return{className:"subst",match:Km(/\\/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",/[\t ]*(?:[\r\n]|\r\n)/)}},b=function(){return{className:"subst",label:"interpol",begin:Km(/\\/,arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",/\(/),end:/\)/}},y=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{begin:Km(e,/"""/),end:Km(/"""/,e),contains:[g(e),v(e),b(e)]}},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return{begin:Km(e,/"/),end:Km(/"/,e),contains:[g(e),b(e)]}},k={className:"string",variants:[y(),y("#"),y("##"),y("###"),x(),x("#"),x("##"),x("###")]},w=[e.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[e.BACKSLASH_ESCAPE]}],S={begin:/\/[^\s](?=[^/\n]*\/)/,end:/\//,contains:w},C=e=>{const t=Km(e,/\//),n=Km(/\//,e);return{begin:t,end:n,contains:[...w,{scope:"comment",begin:`#(?!.*${n})`,end:/$/}]}},T={scope:"regexp",variants:[C("###"),C("##"),C("#"),S]},E={match:Km(/`/,ug,/`/)},_=[E,{className:"variable",match:/\$\d+/},{className:"variable",match:`\\$${cg}+`}],I=[{match:/(@|#(un)?)available/,scope:"keyword",starts:{contains:[{begin:/\(/,end:/\)/,keywords:pg,contains:[...h,m,k]}]}},{scope:"keyword",match:Km(/@/,Qm(...hg))},{scope:"meta",match:Km(/@/,ug)}],R={match:Gm(/\b[A-Z]/),relevance:0,contains:[{className:"type",match:Km(/(AV|CA|CF|CG|CI|CL|CM|CN|CT|MK|MP|MTK|MTL|NS|SCN|SK|UI|WK|XC)/,cg,"+")},{className:"type",match:dg,relevance:0},{match:/[?!]+/,relevance:0},{match:/\.\.\./,relevance:0},{match:Km(/\s+&\s+/,Gm(dg)),relevance:0}]},P={begin:/</,end:/>/,keywords:l,contains:[...i,...c,...I,d,R]};R.contains.push(P);const A={begin:/\(/,end:/\)/,relevance:0,keywords:l,contains:["self",{match:Km(ug,/\s*:/),keywords:"_|0",relevance:0},...i,T,...c,...u,...h,m,k,..._,...I,R]},O={begin:/</,end:/>/,keywords:"repeat each",contains:[...i,R]},M={begin:/\(/,end:/\)/,keywords:l,contains:[{begin:Qm(Gm(Km(ug,/\s*:/)),Gm(Km(ug,/\s+/,ug,/\s*:/))),end:/:/,relevance:0,contains:[{className:"keyword",match:/\b_\b/},{className:"params",match:ug}]},...i,...c,...h,m,k,...I,R,A],endsParent:!0,illegal:/["']/},N={match:[/(func|macro)/,/\s+/,Qm(E.match,ug,ag)],className:{1:"keyword",3:"title.function"},contains:[O,M,t],illegal:[/\[/,/%/]},D={match:[/\b(?:subscript|init[?!]?)/,/\s*(?=[<(])/],className:{1:"keyword"},contains:[O,M,t],illegal:/\[|%/},j={match:[/operator/,/\s+/,ag],className:{1:"keyword",3:"title"}},L={begin:[/precedencegroup/,/\s+/,dg],className:{1:"keyword",3:"title"},contains:[R],keywords:[...ng,...tg],end:/}/};for(const F of k.variants){const e=F.contains.find((e=>"interpol"===e.label));e.keywords=l;const t=[...c,...u,...h,m,k,..._];e.contains=[...t,{begin:/\(/,end:/\)/,contains:["self",...t]}]}return{name:"Swift",keywords:l,contains:[...i,N,D,{beginKeywords:"struct protocol class extension enum actor",end:"\\{",excludeEnd:!0,keywords:l,contains:[e.inherit(e.TITLE_MODE,{className:"title.class",begin:/[A-Za-z$_][\u00C0-\u02B80-9A-Za-z$_]*/}),...c]},j,L,{beginKeywords:"import",end:/$/,contains:[...i],relevance:0},T,...c,...u,...h,m,k,..._,...I,R,A]}},typescript:function(e){const t=function(e){const t=e.regex,n=fg,i="<>",r="</>",o={begin:/<[A-Za-z0-9\\._:-]+/,end:/\/[A-Za-z0-9\\._:-]+>|\/>/,isTrulyOpeningTag:(e,t)=>{const n=e[0].length+e.index,i=e.input[n];if("<"===i||","===i)return void t.ignoreMatch();let r;">"===i&&(((e,t)=>{let{after:n}=t;const i="</"+e[0].slice(1);return-1!==e.input.indexOf(i,n)})(e,{after:n})||t.ignoreMatch());const o=e.input.substring(n);((r=o.match(/^\s*=/))||(r=o.match(/^\s+extends\s+/))&&0===r.index)&&t.ignoreMatch()}},s={$pattern:fg,keyword:mg,literal:gg,built_in:kg,"variable.language":xg},a="[0-9](_?[0-9])*",l=`\\.(${a})`,c="0|[1-9](_?[0-9])*|0[0-7]*[89][0-9]*",u={className:"number",variants:[{begin:`(\\b(${c})((${l})|\\.)?|(${l}))[eE][+-]?(${a})\\b`},{begin:`\\b(${c})\\b((${l})\\b|\\.)?|(${l})\\b`},{begin:"\\b(0|[1-9](_?[0-9])*)n\\b"},{begin:"\\b0[xX][0-9a-fA-F](_?[0-9a-fA-F])*n?\\b"},{begin:"\\b0[bB][0-1](_?[0-1])*n?\\b"},{begin:"\\b0[oO][0-7](_?[0-7])*n?\\b"},{begin:"\\b0[0-7]+n?\\b"}],relevance:0},d={className:"subst",begin:"\\$\\{",end:"\\}",keywords:s,contains:[]},h={begin:"html`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"xml"}},p={begin:"css`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"css"}},f={begin:"gql`",end:"",starts:{end:"`",returnEnd:!1,contains:[e.BACKSLASH_ESCAPE,d],subLanguage:"graphql"}},m={className:"string",begin:"`",end:"`",contains:[e.BACKSLASH_ESCAPE,d]},g={className:"comment",variants:[e.COMMENT(/\/\*\*(?!\/)/,"\\*/",{relevance:0,contains:[{begin:"(?=@[A-Za-z]+)",relevance:0,contains:[{className:"doctag",begin:"@[A-Za-z]+"},{className:"type",begin:"\\{",end:"\\}",excludeEnd:!0,excludeBegin:!0,relevance:0},{className:"variable",begin:n+"(?=\\s*(-)|$)",endsParent:!0,relevance:0},{begin:/(?=[^\n])\s/,relevance:0}]}]}),e.C_BLOCK_COMMENT_MODE,e.C_LINE_COMMENT_MODE]},v=[e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,{match:/\$\d+/},u];d.contains=v.concat({begin:/\{/,end:/\}/,keywords:s,contains:["self"].concat(v)});const b=[].concat(g,d.contains),y=b.concat([{begin:/\(/,end:/\)/,keywords:s,contains:["self"].concat(b)}]),x={className:"params",begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y},k={variants:[{match:[/class/,/\s+/,n,/\s+/,/extends/,/\s+/,t.concat(n,"(",t.concat(/\./,n),")*")],scope:{1:"keyword",3:"title.class",5:"keyword",7:"title.class.inherited"}},{match:[/class/,/\s+/,n],scope:{1:"keyword",3:"title.class"}}]},w={relevance:0,match:t.either(/\bJSON/,/\b[A-Z][a-z]+([A-Z][a-z]*|\d)*/,/\b[A-Z]{2,}([A-Z][a-z]+|\d)+([A-Z][a-z]*)*/,/\b[A-Z]{2,}[a-z]+([A-Z][a-z]+|\d)*([A-Z][a-z]*)*/),className:"title.class",keywords:{_:[...vg,...bg]}},S={variants:[{match:[/function/,/\s+/,n,/(?=\s*\()/]},{match:[/function/,/\s*(?=\()/]}],className:{1:"keyword",3:"title.function"},label:"func.def",contains:[x],illegal:/%/},C={match:t.concat(/\b/,(T=[...yg,"super","import"],t.concat("(?!",T.join("|"),")")),n,t.lookahead(/\(/)),className:"title.function",relevance:0};var T;const E={begin:t.concat(/\./,t.lookahead(t.concat(n,/(?![0-9A-Za-z$_(])/))),end:n,excludeBegin:!0,keywords:"prototype",className:"property",relevance:0},_={match:[/get|set/,/\s+/,n,/(?=\()/],className:{1:"keyword",3:"title.function"},contains:[{begin:/\(\)/},x]},I="(\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)|"+e.UNDERSCORE_IDENT_RE+")\\s*=>",R={match:[/const|var|let/,/\s+/,n,/\s*/,/=\s*/,/(async\s*)?/,t.lookahead(I)],keywords:"async",className:{1:"keyword",3:"title.function"},contains:[x]};return{name:"JavaScript",aliases:["js","jsx","mjs","cjs"],keywords:s,exports:{PARAMS_CONTAINS:y,CLASS_REFERENCE:w},illegal:/#(?![$_A-z])/,contains:[e.SHEBANG({label:"shebang",binary:"node",relevance:5}),{label:"use_strict",className:"meta",relevance:10,begin:/^\s*['"]use (strict|asm)['"]/},e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,h,p,f,m,g,{match:/\$\d+/},u,w,{className:"attr",begin:n+t.lookahead(":"),relevance:0},R,{begin:"("+e.RE_STARTERS_RE+"|\\b(case|return|throw)\\b)\\s*",keywords:"return throw case",relevance:0,contains:[g,e.REGEXP_MODE,{className:"function",begin:I,returnBegin:!0,end:"\\s*=>",contains:[{className:"params",variants:[{begin:e.UNDERSCORE_IDENT_RE,relevance:0},{className:null,begin:/\(\s*\)/,skip:!0},{begin:/\(/,end:/\)/,excludeBegin:!0,excludeEnd:!0,keywords:s,contains:y}]}]},{begin:/,/,relevance:0},{match:/\s+/,relevance:0},{variants:[{begin:i,end:r},{match:/<[A-Za-z0-9\\._:-]+\s*\/>/},{begin:o.begin,"on:begin":o.isTrulyOpeningTag,end:o.end}],subLanguage:"xml",contains:[{begin:o.begin,end:o.end,skip:!0,contains:["self"]}]}]},S,{beginKeywords:"while if switch catch for"},{begin:"\\b(?!function)"+e.UNDERSCORE_IDENT_RE+"\\([^()]*(\\([^()]*(\\([^()]*\\)[^()]*)*\\)[^()]*)*\\)\\s*\\{",returnBegin:!0,label:"func.def",contains:[x,e.inherit(e.TITLE_MODE,{begin:n,className:"title.function"})]},{match:/\.\.\./,relevance:0},E,{match:"\\$"+n,relevance:0},{match:[/\bconstructor(?=\s*\()/],className:{1:"title.function"},contains:[x]},C,{relevance:0,match:/\b[A-Z][A-Z_0-9]+\b/,className:"variable.constant"},k,_,{match:/\$[(.]/}]}}(e),n=fg,i=["any","void","number","boolean","string","object","never","symbol","bigint","unknown"],r={beginKeywords:"namespace",end:/\{/,excludeEnd:!0,contains:[t.exports.CLASS_REFERENCE]},o={beginKeywords:"interface",end:/\{/,excludeEnd:!0,keywords:{keyword:"interface extends",built_in:i},contains:[t.exports.CLASS_REFERENCE]},s={$pattern:fg,keyword:mg.concat(["type","namespace","interface","public","private","protected","implements","declare","abstract","readonly","enum","override"]),literal:gg,built_in:kg.concat(i),"variable.language":xg},a={className:"meta",begin:"@"+n},l=(e,t,n)=>{const i=e.contains.findIndex((e=>e.label===t));if(-1===i)throw new Error("can not find mode to replace");e.contains.splice(i,1,n)};Object.assign(t.keywords,s),t.exports.PARAMS_CONTAINS.push(a),t.contains=t.contains.concat([a,r,o]),l(t,"shebang",e.SHEBANG()),l(t,"use_strict",{className:"meta",relevance:10,begin:/^\s*['"]use strict['"]/});const c=t.contains.find((e=>"func.def"===e.label));return c.relevance=0,Object.assign(t,{name:"TypeScript",aliases:["ts","tsx","mts","cts"]}),t},vbnet:function(e){const t=e.regex,n=/\d{1,2}\/\d{1,2}\/\d{4}/,i=/\d{4}-\d{1,2}-\d{1,2}/,r=/(\d|1[012])(:\d+){0,2} *(AM|PM)/,o=/\d{1,2}(:\d{1,2}){1,2}/,s={className:"literal",variants:[{begin:t.concat(/# */,t.either(i,n),/ *#/)},{begin:t.concat(/# */,o,/ *#/)},{begin:t.concat(/# */,r,/ *#/)},{begin:t.concat(/# */,t.either(i,n),/ +/,t.either(r,o),/ *#/)}]},a=e.COMMENT(/'''/,/$/,{contains:[{className:"doctag",begin:/<\/?/,end:/>/}]}),l=e.COMMENT(null,/$/,{variants:[{begin:/'/},{begin:/([\t ]|^)REM(?=\s)/}]});return{name:"Visual Basic .NET",aliases:["vb"],case_insensitive:!0,classNameAliases:{label:"symbol"},keywords:{keyword:"addhandler alias aggregate ansi as async assembly auto binary by byref byval call case catch class compare const continue custom declare default delegate dim distinct do each equals else elseif end enum erase error event exit explicit finally for friend from function get global goto group handles if implements imports in inherits interface into iterator join key let lib loop me mid module mustinherit mustoverride mybase myclass namespace narrowing new next notinheritable notoverridable of off on operator option optional order overloads overridable overrides paramarray partial preserve private property protected public raiseevent readonly redim removehandler resume return select set shadows shared skip static step stop structure strict sub synclock take text then throw to try unicode until using when where while widening with withevents writeonly yield",built_in:"addressof and andalso await directcast gettype getxmlnamespace is isfalse isnot istrue like mod nameof new not or orelse trycast typeof xor cbool cbyte cchar cdate cdbl cdec cint clng cobj csbyte cshort csng cstr cuint culng cushort",type:"boolean byte char date decimal double integer long object sbyte short single string uinteger ulong ushort",literal:"true false nothing"},illegal:"//|\\{|\\}|endif|gosub|variant|wend|^\\$ ",contains:[{className:"string",begin:/"(""|[^/n])"C\b/},{className:"string",begin:/"/,end:/"/,illegal:/\n/,contains:[{begin:/""/}]},s,{className:"number",relevance:0,variants:[{begin:/\b\d[\d_]*((\.[\d_]+(E[+-]?[\d_]+)?)|(E[+-]?[\d_]+))[RFD@!#]?/},{begin:/\b\d[\d_]*((U?[SIL])|[%&])?/},{begin:/&H[\dA-F_]+((U?[SIL])|[%&])?/},{begin:/&O[0-7_]+((U?[SIL])|[%&])?/},{begin:/&B[01_]+((U?[SIL])|[%&])?/}]},{className:"label",begin:/^\w+:/},a,l,{className:"meta",begin:/[\t ]*#(const|disable|else|elseif|enable|end|externalsource|if|region)\b/,end:/$/,keywords:{keyword:"const disable else elseif enable end externalsource if region then"},contains:[l]}]}},wasm:function(e){e.regex;const t=e.COMMENT(/\(;/,/;\)/);return t.contains.push("self"),{name:"WebAssembly",keywords:{$pattern:/[\w.]+/,keyword:["anyfunc","block","br","br_if","br_table","call","call_indirect","data","drop","elem","else","end","export","func","global.get","global.set","local.get","local.set","local.tee","get_global","get_local","global","if","import","local","loop","memory","memory.grow","memory.size","module","mut","nop","offset","param","result","return","select","set_global","set_local","start","table","tee_local","then","type","unreachable"]},contains:[e.COMMENT(/;;/,/$/),t,{match:[/(?:offset|align)/,/\s*/,/=/],className:{1:"keyword",3:"operator"}},{className:"variable",begin:/\$[\w_]+/},{match:/(\((?!;)|\))+/,className:"punctuation",relevance:0},{begin:[/(?:func|call|call_indirect)/,/\s+/,/\$[^\s)]+/],className:{1:"keyword",3:"title.function"}},e.QUOTE_STRING_MODE,{match:/(i32|i64|f32|f64)(?!\.)/,className:"type"},{className:"keyword",match:/\b(f32|f64|i32|i64)(?:\.(?:abs|add|and|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|nearest|neg?|or|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|store(?:8|16|32)?|sqrt|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|xor))\b/},{className:"number",relevance:0,match:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[\da-fA-F](?:_?[\da-fA-F])*(?:\.[\da-fA-F](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[\da-fA-F](?:_?[\da-fA-D])*)?\b/}]}},xml:function(e){const t=e.regex,n=t.concat(/[\p{L}_]/u,t.optional(/[\p{L}0-9_.-]*:/u),/[\p{L}0-9_.-]*/u),i={className:"symbol",begin:/&[a-z]+;|&#[0-9]+;|&#x[a-f0-9]+;/},r={begin:/\s/,contains:[{className:"keyword",begin:/#?[a-z_][a-z1-9_-]+/,illegal:/\n/}]},o=e.inherit(r,{begin:/\(/,end:/\)/}),s=e.inherit(e.APOS_STRING_MODE,{className:"string"}),a=e.inherit(e.QUOTE_STRING_MODE,{className:"string"}),l={endsWithParent:!0,illegal:/</,relevance:0,contains:[{className:"attr",begin:/[\p{L}0-9._:-]+/u,relevance:0},{begin:/=\s*/,relevance:0,contains:[{className:"string",endsParent:!0,variants:[{begin:/"/,end:/"/,contains:[i]},{begin:/'/,end:/'/,contains:[i]},{begin:/[^\s"'=<>`]+/}]}]}]};return{name:"HTML, XML",aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist","wsf","svg"],case_insensitive:!0,unicodeRegex:!0,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,relevance:10,contains:[r,a,s,o,{begin:/\[/,end:/\]/,contains:[{className:"meta",begin:/<![a-z]/,end:/>/,contains:[r,o,a,s]}]}]},e.COMMENT(/<!--/,/-->/,{relevance:10}),{begin:/<!\[CDATA\[/,end:/\]\]>/,relevance:10},i,{className:"meta",end:/\?>/,variants:[{begin:/<\?xml/,relevance:10,contains:[a]},{begin:/<\?[a-z][a-z0-9]+/}]},{className:"tag",begin:/<style(?=\s|>)/,end:/>/,keywords:{name:"style"},contains:[l],starts:{end:/<\/style>/,returnEnd:!0,subLanguage:["css","xml"]}},{className:"tag",begin:/<script(?=\s|>)/,end:/>/,keywords:{name:"script"},contains:[l],starts:{end:/<\/script>/,returnEnd:!0,subLanguage:["javascript","handlebars","xml"]}},{className:"tag",begin:/<>|<\/>/},{className:"tag",begin:t.concat(/</,t.lookahead(t.concat(n,t.either(/\/>/,/>/,/\s/)))),end:/\/?>/,contains:[{className:"name",begin:n,relevance:0,starts:l}]},{className:"tag",begin:t.concat(/<\//,t.lookahead(t.concat(n,/>/))),contains:[{className:"name",begin:n,relevance:0},{begin:/>/,relevance:0,endsParent:!0}]}]}},yaml:function(e){const t="true false yes no null",n="[\\w#;/?:@&=+$,.~*'()[\\]]+",i={className:"string",relevance:0,variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/\S+/}],contains:[e.BACKSLASH_ESCAPE,{className:"template-variable",variants:[{begin:/\{\{/,end:/\}\}/},{begin:/%\{/,end:/\}/}]}]},r=e.inherit(i,{variants:[{begin:/'/,end:/'/},{begin:/"/,end:/"/},{begin:/[^\s,{}[\]]+/}]}),o={className:"number",begin:"\\b[0-9]{4}(-[0-9][0-9]){0,2}([Tt \\t][0-9][0-9]?(:[0-9][0-9]){2})?(\\.[0-9]*)?([ \\t])*(Z|[-+][0-9][0-9]?(:[0-9][0-9])?)?\\b"},s={end:",",endsWithParent:!0,excludeEnd:!0,keywords:t,relevance:0},a={begin:/\{/,end:/\}/,contains:[s],illegal:"\\n",relevance:0},l={begin:"\\[",end:"\\]",contains:[s],illegal:"\\n",relevance:0},c=[{className:"attr",variants:[{begin:"\\w[\\w :\\/.-]*:(?=[ \t]|$)"},{begin:'"\\w[\\w :\\/.-]*":(?=[ \t]|$)'},{begin:"'\\w[\\w :\\/.-]*':(?=[ \t]|$)"}]},{className:"meta",begin:"^---\\s*$",relevance:10},{className:"string",begin:"[\\|>]([1-9]?[+-])?[ ]*\\n( +)[^ ][^\\n]*\\n(\\2[^\\n]+\\n?)*"},{begin:"<%[%=-]?",end:"[%-]?%>",subLanguage:"ruby",excludeBegin:!0,excludeEnd:!0,relevance:0},{className:"type",begin:"!\\w+!"+n},{className:"type",begin:"!<"+n+">"},{className:"type",begin:"!"+n},{className:"type",begin:"!!"+n},{className:"meta",begin:"&"+e.UNDERSCORE_IDENT_RE+"$"},{className:"meta",begin:"\\*"+e.UNDERSCORE_IDENT_RE+"$"},{className:"bullet",begin:"-(?=[ ]|$)",relevance:0},e.HASH_COMMENT_MODE,{beginKeywords:t,keywords:{literal:t}},o,{className:"number",begin:e.C_NUMBER_RE+"\\b",relevance:0},a,l,i],u=[...c];return u.pop(),u.push(r),s.contains=u,{name:"YAML",case_insensitive:!0,aliases:["yml"],contains:c}}};const Sg=n(5891),Cg={},Tg="hljs-";class Eg{constructor(e){this.options=e,this.root={type:"root",children:[],data:{language:void 0,relevance:0}},this.stack=[this.root]}addText(e){if(""===e)return;const t=this.stack[this.stack.length-1],n=t.children[t.children.length-1];n&&"text"===n.type?n.value+=e:t.children.push({type:"text",value:e})}startScope(e){this.openNode(String(e))}endScope(){this.closeNode()}__addSublanguage(e,t){const n=this.stack[this.stack.length-1],i=e.root.children;t?n.children.push({type:"element",tagName:"span",properties:{className:[t]},children:i}):n.children.push(...i)}openNode(e){const t=this,n={type:"element",tagName:"span",properties:{className:e.split(".").map((function(e,n){return n?e+"_".repeat(n):t.options.classPrefix+e}))},children:[]};this.stack[this.stack.length-1].children.push(n),this.stack.push(n)}closeNode(){this.stack.pop()}finalize(){}toHTML(){return""}}const _g=[],Ig=!0,Rg=!1,Pg="skip";function Ag(e,t,n,i){let r;"function"===typeof t&&"function"!==typeof n?(i=n,n=t):r=t;const o=qf(r),s=i?-1:1;!function e(r,a,l){const c=r&&"object"===typeof r?r:{};if("string"===typeof c.type){const e="string"===typeof c.tagName?c.tagName:"string"===typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+r.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,d,h=_g;if((!t||o(r,a,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"===typeof e)return[Ig,e];return null===e||void 0===e?_g:[e]}(n(r,l)),h[0]===Rg))return h;if("children"in r&&r.children){const t=r;if(t.children&&h[0]!==Pg)for(u=(i?t.children.length:-1)+s,d=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,d)(),c[0]===Rg)return c;u="number"===typeof c[1]?c[1]:u+s}}return h}}(e,void 0,[])()}function Og(e,t,n,i){let r,o,s;"function"===typeof t&&"function"!==typeof n?(o=void 0,s=t,r=n):(o=t,s=n,r=i),Ag(e,o,(function(e,t){const n=t[t.length-1],i=n?n.children.indexOf(e):void 0;return s(e,i,n)}),r)}const Mg={};function Ng(e){const t=e||Mg,n=t.aliases,i=t.detect||!1,r=t.languages||wg,o=t.plainText,s=t.prefix,a=t.subset;let l="hljs";const c=function(e){const t=Sg.newInstance();return e&&r(e),{highlight:n,highlightAuto:function(e,r){const o=(r||Cg).subset||i();let s,a=-1,l=0;for(;++a<o.length;){const i=o[a];if(!t.getLanguage(i))continue;const c=n(i,e,r);c.data&&void 0!==c.data.relevance&&c.data.relevance>l&&(l=c.data.relevance,s=c)}return s||{type:"root",children:[],data:{language:void 0,relevance:l}}},listLanguages:i,register:r,registerAlias:function(e,n){if("string"===typeof e)t.registerAliases("string"===typeof n?n:[...n],{languageName:e});else{let n;for(n in e)if(Object.hasOwn(e,n)){const i=e[n];t.registerAliases("string"===typeof i?i:[...i],{languageName:n})}}},registered:function(e){return Boolean(t.getLanguage(e))}};function n(e,n,i){const r=i||Cg,o="string"===typeof r.prefix?r.prefix:Tg;if(!t.getLanguage(e))throw new Error("Unknown language: `"+e+"` is not registered");t.configure({__emitter:Eg,classPrefix:o});const s=t.highlight(n,{ignoreIllegals:!0,language:e});if(s.errorRaised)throw new Error("Could not highlight with `Highlight.js`",{cause:s.errorRaised});const a=s._emitter.root,l=a.data;return l.language=s.language,l.relevance=s.relevance,a}function i(){return t.listLanguages()}function r(e,n){if("string"===typeof e)t.registerLanguage(e,n);else{let n;for(n in e)Object.hasOwn(e,n)&&t.registerLanguage(n,e[n])}}}(r);if(n&&c.registerAlias(n),s){const e=s.indexOf("-");l=e>-1?s.slice(0,e):s}return function(e,t){Og(e,"element",(function(e,n,r){if("code"!==e.tagName||!r||"element"!==r.type||"pre"!==r.tagName)return;const u=function(e){const t=e.properties.className;let n=-1;if(!Array.isArray(t))return;for(;++n<t.length;){const e=String(t[n]);if("no-highlight"===e||"nohighlight"===e)return!1;if("lang-"===e.slice(0,5))return e.slice(5);if("language-"===e.slice(0,9))return e.slice(9)}}(e);if(!1===u||!u&&!i||u&&o&&o.includes(u))return;let d;Array.isArray(e.properties.className)||(e.properties.className=[]),e.properties.className.includes(l)||e.properties.className.unshift(l);try{d=u?c.highlight(u,lm(r),{prefix:s}):c.highlightAuto(lm(r),{prefix:s,subset:a})}catch(h){const n=h;if(u&&/Unknown language/.test(n.message))return void t.message("Cannot highlight as `"+u+"`, it\u2019s not registered",{ancestors:[r,e],cause:n,place:e.position,ruleId:"missing-language",source:"rehype-highlight"});throw n}!u&&d.data&&d.data.language&&e.properties.className.push("language-"+d.data.language),d.children.length>0&&(e.children=d.children)}))}}const Dg="var(--vscode-editor-background, --vscode-sideBar-background, rgb(30 30 30))",jg=cp.div`
	${e=>{let{forceWrap:t}=e;return t&&"\n    pre, code {\n      white-space: pre-wrap;\n      word-break: break-all;\n      overflow-wrap: anywhere;\n    }\n  "}}

	pre {
		background-color: ${Dg};
		border-radius: 5px;
		margin: 0;
		min-width: ${e=>{let{forceWrap:t}=e;return t?"auto":"max-content"}};
		padding: 10px 10px;
	}

	pre > code {
		.hljs-deletion {
			background-color: var(--vscode-diffEditor-removedTextBackground);
			display: inline-block;
			width: 100%;
		}
		.hljs-addition {
			background-color: var(--vscode-diffEditor-insertedTextBackground);
			display: inline-block;
			width: 100%;
		}
	}

	code {
		span.line:empty {
			display: none;
		}
		word-wrap: break-word;
		border-radius: 5px;
		background-color: ${Dg};
		font-size: var(--vscode-editor-font-size, var(--vscode-font-size, 12px));
		font-family: var(--vscode-editor-font-family);
	}

	code:not(pre > code) {
		font-family: var(--vscode-editor-font-family);
		color: #f78383;
	}

	background-color: ${Dg};
	font-family: var(--vscode-font-family), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
		Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
	font-size: var(--vscode-editor-font-size, var(--vscode-font-size, 12px));
	color: var(--vscode-editor-foreground, #fff);

	p,
	li,
	ol,
	ul {
		line-height: 1.5;
	}
`,Lg=cp.pre`
	& .hljs {
		color: var(--vscode-editor-foreground, #fff);
	}

	${e=>Object.keys(e.theme).map(((t,n)=>`\n      & ${t} {\n        color: ${e.theme[t]};\n      }\n    `)).join("")}
`,Fg=(0,t.memo)((e=>{let{source:n,forceWrap:i=!1}=e;const{theme:r}=wp(),[o,s]=Hf({remarkPlugins:[()=>e=>{Og(e,"code",(e=>{e.lang?e.lang.includes(".")&&(e.lang=e.lang.split(".").slice(-1)[0]):e.lang="javascript"}))}],rehypePlugins:[Ng,{}],rehypeReactOptions:{components:{pre:e=>{let{node:t,...n}=e;return(0,us.jsx)(Lg,{...n,theme:r})}}}});return(0,t.useEffect)((()=>{s(n||"")}),[n,s,r]),(0,us.jsx)("div",{style:{overflowY:i?"visible":"auto",maxHeight:i?"none":"100%",backgroundColor:Dg},children:(0,us.jsx)(jg,{forceWrap:i,children:o})})})),Bg=Fg;function Ug(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((t=>t.uri===e));return n||function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).find((t=>{const n=String(t.uriTemplate).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/\\\{([^}]+)\\\}/g,"([^/]+)");return new RegExp(`^${n}$`).test(e)}))}(e,t)}function $g(e,t){const n=t.items.find((t=>t.mcpId===e));return(null===n||void 0===n?void 0:n.name)||e}const zg={html:"html",htm:"html",css:"css",js:"javascript",jsx:"jsx",ts:"typescript",tsx:"tsx",py:"python",rb:"ruby",php:"php",java:"java",cs:"csharp",go:"go",rs:"rust",scala:"scala",kt:"kotlin",swift:"swift",json:"json",xml:"xml",yaml:"yaml",yml:"yaml",md:"markdown",csv:"csv",sh:"bash",bash:"bash",zsh:"bash",ps1:"powershell",toml:"toml",ini:"ini",cfg:"ini",conf:"ini",sql:"sql",graphql:"graphql",gql:"graphql",tex:"latex",svg:"svg",txt:"text",c:"c",cpp:"cpp",h:"c",hpp:"cpp",hs:"haskell",lhs:"haskell",elm:"elm",clj:"clojure",cljs:"clojure",erl:"erlang",ex:"elixir",exs:"elixir",dart:"dart",m:"objectivec",mm:"objectivec",lua:"lua",gd:"gdscript",unity:"csharp",r:"r",jl:"julia",ipynb:"jupyter"};const Vg=e=>e.replace(/^[^a-zA-Z0-9]+/,""),Hg=e=>{var n;let{code:i,diff:r,language:o,path:s,isFeedback:a,isConsoleLogs:l,isExpanded:c,onToggleExpand:u,isLoading:d}=e;const h=(0,t.useMemo)((()=>i&&(null!==o&&void 0!==o?o:s?function(e){var t;const n=(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase())||"";return zg[n]}(s):void 0)),[s,o,i]);return(0,us.jsxs)("div",{style:{borderRadius:3,backgroundColor:Dg,overflow:"hidden",border:"1px solid var(--vscode-editorGroup-border)"},children:[(s||a||l)&&(0,us.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",display:"flex",alignItems:"center",padding:"9px 10px",cursor:d?"wait":"pointer",opacity:d?.7:1,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onClick:d?void 0:u,children:[a||l?(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,us.jsx)("span",{className:"codicon codicon-"+(a?"feedback":"output"),style:{marginRight:"6px"}}),(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px"},children:a?"User Edits":"Console Logs"})]}):(0,us.jsxs)(us.Fragment,{children:[(null===s||void 0===s?void 0:s.startsWith("."))&&(0,us.jsx)("span",{children:"."}),(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px",direction:"rtl",textAlign:"left"},children:Vg(null!==s&&void 0!==s?s:"")+"\u200e"})]}),(0,us.jsx)("div",{style:{flexGrow:1}}),(0,us.jsx)("span",{className:"codicon codicon-chevron-"+(c?"up":"down")})]}),(!(s||a||l)||c)&&(0,us.jsx)("div",{style:{overflowX:"auto",overflowY:"hidden",maxWidth:"100%"},children:(0,us.jsx)(Bg,{source:`\`\`\`${void 0!==r?"diff":h}\n${(null!==(n=null!==i&&void 0!==i?i:r)&&void 0!==n?n:"").trim()}\n\`\`\``})})]})},qg=(0,t.memo)(Hg),Wg=()=>e=>{Og(e,"text",((e,t,n)=>{const i=/https?:\/\/[^\s<>)"]+/g,r=e.value.match(i);if(!r)return;const o=e.value.split(i),s=[];o.forEach(((e,t)=>{e&&s.push({type:"text",value:e}),r[t]&&s.push({type:"link",url:r[t],children:[{type:"text",value:r[t]}]})})),n&&n.children.splice(t,1,...s)}))},Gg=cp.div`
	pre {
		background-color: ${Dg};
		border-radius: 3px;
		margin: 13x 0;
		padding: 10px 10px;
		max-width: calc(100vw - 20px);
		overflow-x: auto;
		overflow-y: hidden;
	}

	pre > code {
		.hljs-deletion {
			background-color: var(--vscode-diffEditor-removedTextBackground);
			display: inline-block;
			width: 100%;
		}
		.hljs-addition {
			background-color: var(--vscode-diffEditor-insertedTextBackground);
			display: inline-block;
			width: 100%;
		}
	}

	code {
		span.line:empty {
			display: none;
		}
		word-wrap: break-word;
		border-radius: 3px;
		background-color: ${Dg};
		font-size: var(--vscode-editor-font-size, var(--vscode-font-size, 12px));
		font-family: var(--vscode-editor-font-family);
	}

	code:not(pre > code) {
		font-family: var(--vscode-editor-font-family, monospace);
		color: var(--vscode-textPreformat-foreground, #f78383);
		background-color: var(--vscode-textCodeBlock-background, #1e1e1e);
		padding: 0px 2px;
		border-radius: 3px;
		border: 1px solid var(--vscode-textSeparator-foreground, #424242);
		white-space: pre-line;
		word-break: break-word;
		overflow-wrap: anywhere;
	}

	font-family: var(--vscode-font-family), system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
		Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
	font-size: var(--vscode-font-size, 13px);

	p,
	li,
	ol,
	ul {
		line-height: 1.25;
	}

	ol,
	ul {
		padding-left: 2.5em;
		margin-left: 0;
	}

	p {
		white-space: pre-wrap;
	}

	a {
		text-decoration: none;
	}
	a {
		&:hover {
			text-decoration: underline;
		}
	}
`,Kg=cp.button`
  position: absolute;
  top: 5px;
  right: 5px;
  background: var(--vscode-button-secondaryBackground);
  border: 1px solid var(--vscode-button-border, transparent);
  color: var(--vscode-button-secondaryForeground);
  padding: 4px;
  border-radius: 3px;
  cursor: pointer;
  opacity: 0;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 24px;
  height: 24px;

  &:hover {
    background: var(--vscode-button-secondaryHoverBackground);
  }

  &:active {
    background: var(--vscode-button-activeBackground);
  }

  & > i {
    font-family: codicon;
    font-style: normal;
    font-size: 16px;
    display: inline-block;
    text-align: center;
    vertical-align: middle;
    line-height: 16px;
    transition: transform 0.2s ease;
  }

  & > i.codicon-check {
    transform: scale(1.1);
    color: var(--vscode-testing-iconPassed, #73c991);
  }
`,Qg=e=>{let{children:n,theme:i}=e;const[r,o]=(0,t.useState)(!1),s=e=>{var t;return"string"===typeof e?e:Array.isArray(e)?e.map(s).join(""):null!==e&&void 0!==e&&null!==(t=e.props)&&void 0!==t&&t.children?s(e.props.children):""};return(0,us.jsxs)(Xg,{children:[(0,us.jsx)(Kg,{onClick:()=>{try{var e,t;const i=null===n||void 0===n||null===(e=n[0])||void 0===e||null===(t=e.props)||void 0===t?void 0:t.children;if(!i)return void console.error("No code content found");const r=s(i);r?(navigator.clipboard.writeText(r),o(!0),setTimeout((()=>o(!1)),2e3)):console.error("Could not extract code text",{codeElement:i})}catch(i){console.error("Error copying code:",i)}},title:r?"Copied!":"Copy",children:(0,us.jsx)("i",{className:r?"codicon codicon-check":"codicon codicon-copy"})}),(0,us.jsx)(Yg,{theme:i,children:n})]})},Xg=cp.div`
  position: relative;
  
  &:hover ${Kg} {
    opacity: 1;
  }
`,Yg=cp.pre`
	& .hljs {
		color: var(--vscode-editor-foreground, #fff);
	}

	${e=>Object.keys(e.theme).map(((t,n)=>`\n      & ${t} {\n        color: ${e.theme[t]};\n      }\n    `)).join("")}
`,Jg=(0,t.memo)((e=>{let{markdown:n}=e;const{theme:i}=wp(),[r,o]=Hf({remarkPlugins:[Wg,()=>e=>{Og(e,"code",(e=>{e.lang?e.lang.includes(".")&&(e.lang=e.lang.split(".").slice(-1)[0]):e.lang="javascript"}))}],rehypePlugins:[Ng,{}],rehypeReactOptions:{components:{pre:e=>(0,us.jsx)(Qg,{...e,theme:i})}}});return(0,t.useEffect)((()=>{o(n||"")}),[n,o,i]),(0,us.jsx)("div",{style:{},children:(0,us.jsx)(Gg,{children:r})})})),Zg=Jg;const ev=function(e){var n=(0,t.useRef)(e);n.current=e,xs((function(){return function(){return n.current()}}))};const tv=function(e){var n=(0,t.useRef)(0),i=(0,t.useState)(e),r=i[0],o=i[1],s=(0,t.useCallback)((function(e){cancelAnimationFrame(n.current),n.current=requestAnimationFrame((function(){o(e)}))}),[]);return ev((function(){cancelAnimationFrame(n.current)})),[r,s]};const nv=function(e,n){void 0===e&&(e=1/0),void 0===n&&(n=1/0);var i=tv({width:a?window.innerWidth:e,height:a?window.innerHeight:n}),r=i[0],l=i[1];return(0,t.useEffect)((function(){if(a){var e=function(){l({width:window.innerWidth,height:window.innerHeight})};return o(window,"resize",e),function(){s(window,"resize",e)}}}),[]),r},iv=e=>{let{images:n,style:i,setImages:r,onHeightChange:o}=e;const[s,a]=(0,t.useState)(null),l=(0,t.useRef)(null),{width:c}=nv();(0,t.useLayoutEffect)((()=>{if(l.current){let e=l.current.clientHeight;e||(e=l.current.getBoundingClientRect().height),null===o||void 0===o||o(e)}a(null)}),[n,c,o]);const u=void 0!==r;return(0,us.jsx)("div",{ref:l,style:{display:"flex",flexWrap:"wrap",gap:5,rowGap:3,...i},children:n.map(((e,t)=>(0,us.jsxs)("div",{style:{position:"relative"},onMouseEnter:()=>a(t),onMouseLeave:()=>a(null),children:[(0,us.jsx)("img",{src:e,alt:`Thumbnail ${t+1}`,style:{width:34,height:34,objectFit:"cover",borderRadius:4,cursor:"pointer"},onClick:()=>(e=>{hs.postMessage({type:"openImage",text:e})})(e)}),u&&s===t&&(0,us.jsx)("div",{onClick:()=>(e=>{null===r||void 0===r||r((t=>t.filter(((t,n)=>n!==e))))})(t),style:{position:"absolute",top:-4,right:-4,width:13,height:13,borderRadius:"50%",backgroundColor:"var(--vscode-badge-background)",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer"},children:(0,us.jsx)("span",{className:"codicon codicon-close",style:{color:"var(--vscode-foreground)",fontSize:10,fontWeight:"bold"}})})]},t)))})},rv=(0,t.memo)(iv),ov=e=>{let{item:t}=e;const n="uri"in t?t.uri:t.uriTemplate;return(0,us.jsxs)("div",{style:{padding:"3px 0"},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[(0,us.jsx)("span",{className:"codicon codicon-symbol-file",style:{marginRight:"6px"}}),(0,us.jsx)("span",{style:{fontWeight:500,wordBreak:"break-all"},children:n})]}),(0,us.jsx)("div",{style:{fontSize:"12px",opacity:.8,margin:"4px 0"},children:t.name&&t.description?`${t.name}: ${t.description}`:!t.name&&t.description?t.description:!t.description&&t.name?t.name:"No description"}),(0,us.jsxs)("div",{style:{fontSize:"12px"},children:[(0,us.jsx)("span",{style:{opacity:.8},children:"Returns "}),(0,us.jsx)("code",{style:{color:"var(--vscode-textPreformat-foreground)",background:"var(--vscode-textPreformat-background)",padding:"1px 4px",borderRadius:"3px"},children:t.mimeType||"Unknown"})]})]},n)},sv=e=>{let{tool:t,serverName:n}=e;return(0,us.jsxs)("div",{style:{padding:"3px 0"},children:[(0,us.jsxs)("div",{style:{display:"flex"},children:[(0,us.jsx)("span",{className:"codicon codicon-symbol-method",style:{marginRight:"6px"}}),(0,us.jsx)("span",{style:{fontWeight:500},children:t.name})]}),t.description&&(0,us.jsx)("div",{style:{marginLeft:"0px",marginTop:"4px",opacity:.8,fontSize:"12px"},children:t.description}),t.inputSchema&&"properties"in t.inputSchema&&Object.keys(t.inputSchema.properties).length>0&&(0,us.jsxs)("div",{style:{marginTop:"8px",fontSize:"12px",border:"1px solid color-mix(in srgb, var(--vscode-descriptionForeground) 30%, transparent)",borderRadius:"3px",padding:"8px"},children:[(0,us.jsx)("div",{style:{marginBottom:"4px",opacity:.8,fontSize:"11px",textTransform:"uppercase"},children:"Parameters"}),Object.entries(t.inputSchema.properties).map((e=>{let[n,i]=e;const r=t.inputSchema&&"required"in t.inputSchema&&Array.isArray(t.inputSchema.required)&&t.inputSchema.required.includes(n);return(0,us.jsxs)("div",{style:{display:"flex",alignItems:"baseline",marginTop:"4px"},children:[(0,us.jsxs)("code",{style:{color:"var(--vscode-textPreformat-foreground)",marginRight:"8px"},children:[n,r&&(0,us.jsx)("span",{style:{color:"var(--vscode-errorForeground)"},children:"*"})]}),(0,us.jsx)("span",{style:{opacity:.8,overflowWrap:"break-word",wordBreak:"break-word"},children:i.description||"No description"})]},n)}))]})]},t.name)},av=/@((?:\/|\w+:\/\/)[^\s]+?|[a-f0-9]{7,40}\b|problems\b|terminal\b|git-changes\b)(?=[.,;:!?]?(?=[\s\r\n]|$))/,lv=new RegExp(av.source,"g"),cv="https://payment.blackbox.ai",uv=e=>{let{task:n,tokensIn:i,tokensOut:r,doesModelSupportPromptCache:o,cacheWrites:s,cacheReads:a,totalCost:l,onClose:c,userCredits:u,onAddCredits:d,hasCouponRedeemed:h=!1}=e;const{apiConfiguration:p}=wp(),[f,m]=(0,t.useState)(!0),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),[x,k]=(0,t.useState)(!1),w=(0,t.useRef)(null),S=(0,t.useRef)(null),{height:C,width:T}=nv();(0,t.useEffect)((()=>{if(g&&w.current){const e=.5*C;w.current.style.maxHeight=`${e}px`}}),[g,C]),(0,t.useEffect)((()=>{if(S.current&&w.current){let e=w.current.clientHeight;e||(e=w.current.getBoundingClientRect().height);const t=S.current.scrollHeight>e;t||v(!1),y(t)}}),[n.text,T]);const E=(0,t.useMemo)((()=>"gpt4omini"!==(null===p||void 0===p?void 0:p.apiProvider)),[null===p||void 0===p?void 0:p.apiProvider]);return(0,us.jsxs)("div",{style:{padding:"10px 13px 10px 13px"},children:[(0,us.jsxs)("div",{style:{backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-badge-foreground)",borderRadius:"3px",padding:"9px 10px 9px 14px",display:"flex",flexDirection:"column",gap:6,position:"relative",zIndex:1},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",cursor:"pointer",marginLeft:-2,userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",flexGrow:1,minWidth:0},onClick:()=>m(!f),children:[(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",flexShrink:0},children:(0,us.jsx)("span",{style:{color:"var(--vscode-foreground)"},className:"codicon codicon-chevron-"+(f?"down":"right")})}),(0,us.jsxs)("div",{style:{marginLeft:6,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",flexGrow:1,minWidth:0},children:[(0,us.jsxs)("span",{style:{fontWeight:"bold",color:"var(--vscode-foreground)"},children:["Task",!f&&":"]}),!f&&(0,us.jsx)("span",{style:{marginLeft:4,color:"var(--vscode-foreground)"},children:dv(n.text,!1)})]})]}),!f&&E&&(0,us.jsx)("div",{style:{marginLeft:10,backgroundColor:"color-mix(in srgb, var(--vscode-badge-foreground) 70%, transparent)",color:"var(--vscode-badge-background)",padding:"2px 4px",borderRadius:"500px",fontSize:"11px",fontWeight:500,display:"inline-block",flexShrink:0}}),(0,us.jsx)("div",{className:"task-header-actions",children:(0,us.jsx)(Jo,{appearance:"icon",title:"Copy task text",onClick:async()=>{if(n.text)try{await navigator.clipboard.writeText(n.text),k(!0),setTimeout((()=>k(!1)),2e3)}catch(e){console.error("Copy to clipboard failed:",e);const t=document.createElement("textarea");t.value=n.text,document.body.appendChild(t),t.select();try{document.execCommand("copy"),k(!0),setTimeout((()=>k(!1)),2e3)}catch(e){console.error("Fallback: Unable to copy",e)}document.body.removeChild(t)}},style:{marginLeft:6,flexShrink:0,opacity:0},className:"copy-button",children:(0,us.jsx)("span",{className:"codicon codicon-"+(x?"check":"copy")})})}),(0,us.jsx)("style",{children:"\n\t\t\t\t\t\t\t.task-header-actions:hover .copy-button {\n\t\t\t\t\t\t\t\topacity: 1 !important;\n\t\t\t\t\t\t\t\ttransition: opacity 0.2s ease-in-out;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t.copy-button {\n\t\t\t\t\t\t\t\ttransition: opacity 0.2s ease-in-out;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t"}),(0,us.jsx)(Jo,{appearance:"icon",onClick:c,style:{marginLeft:6,flexShrink:0},children:(0,us.jsx)("span",{className:"codicon codicon-close"})})]}),f&&(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{ref:w,style:{marginTop:-2,fontSize:"var(--vscode-font-size)",overflowY:g?"auto":"hidden",wordBreak:"break-word",overflowWrap:"anywhere",position:"relative"},children:[(0,us.jsx)("div",{ref:S,style:{display:"-webkit-box",WebkitLineClamp:g?"unset":3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere",color:"var(--vscode-foreground)"},children:dv(n.text,!1)}),!g&&b&&(0,us.jsxs)("div",{style:{position:"absolute",right:0,bottom:0,display:"flex",alignItems:"center"},children:[(0,us.jsx)("div",{style:{width:30,height:"1.2em",background:"linear-gradient(to right, transparent, var(--vscode-badge-background))"}}),(0,us.jsx)("div",{style:{cursor:"pointer",color:"var(--vscode-textLink-foreground)",paddingRight:0,paddingLeft:3,backgroundColor:"var(--vscode-badge-background)"},onClick:()=>v(!g),children:"See more"})]})]}),g&&b&&(0,us.jsx)("div",{style:{cursor:"pointer",color:"var(--vscode-textLink-foreground)",marginLeft:"auto",textAlign:"right",paddingRight:2},onClick:()=>v(!g),children:"See less"}),n.images&&n.images.length>0&&(0,us.jsx)(rv,{images:n.images}),n.videos&&n.videos.length>0&&(0,us.jsx)(rv,{images:[n.videos[0].frameDataUrls[0]]}),(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:E&&!h&&(null!==u&&void 0!==u?u:0)>0&&(0,us.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"API Cost:"}),(0,us.jsxs)("span",{children:["$",null===l||void 0===l?void 0:l.toFixed(4)]})]})})})]})]}),(null!==u&&void 0!==u?u:0)>0&&!h&&(0,us.jsxs)("div",{style:{backgroundColor:"color-mix(in srgb, var(--vscode-badge-background) 50%, transparent)",color:"var(--vscode-badge-foreground)",borderRadius:"0 0 3px 3px",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 12px 6px 12px",fontSize:"0.9em",marginLeft:"10px",marginRight:"10px"},children:[(0,us.jsx)("div",{style:{fontWeight:"500"},children:"Credits Remaining:"}),(0,us.jsxs)("div",{children:[Ef(u||0),(u||0)<.01&&(0,us.jsxs)(us.Fragment,{children:[" ",(0,us.jsx)(ts,{style:{fontSize:"0.9em"},onClick:d,href:"#",children:"(get more?)"})]})]})]})]})},dv=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)return e;return e.split(lv).map(((e,n)=>n%2===0?e:(0,us.jsxs)("span",{className:t?"mention-context-highlight-with-shadow":"mention-context-highlight",style:{cursor:"pointer"},onClick:()=>hs.postMessage({type:"openMention",text:e}),children:["@",e]},n)))},hv=(0,t.memo)(uv);async function pv(e,t,n){try{fetch("https://www.useblackbox.io/tlm",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({userId:t,eventName:e,eventMetadata:n})})}catch(WU){console.log("Error telemtry",WU)}}const fv="Other Engagement",mv=e=>{let{path:t,revisionId:n}=e;return(0,us.jsx)("button",{style:{background:"var(--vscode-button-secondaryBackground)",color:"var(--vscode-button-secondaryForeground)",border:"none",padding:"4px 8px",borderRadius:"3px",cursor:"pointer",fontSize:"12px",display:"flex",alignItems:"center",gap:"4px"},onClick:e=>{e.stopPropagation(),hs.postMessage({type:"getRevisions",path:t,revisionId:n})},children:"Rollback"})},gv=(0,t.memo)((e=>{const{isLast:n,onHeightChange:i,message:r}=e,o=(0,t.useRef)(0),[s,{height:a}]=Nf((0,us.jsx)("div",{style:{padding:"10px 6px 10px 15px"},children:(0,us.jsx)(vv,{...e})}));return(0,t.useEffect)((()=>{const e=0===o.current;n&&0!==a&&a!==1/0&&a!==o.current&&(e||i(a>o.current),o.current=a)}),[a,n,i,r]),s}),Pf()),vv=e=>{var n,i,r,o;let{message:s,isExpanded:a,onToggleExpand:l,lastModifiedMessage:c,getLatestCodeRevisions:u,isLast:d}=e;const[h,p]=(0,t.useState)([]),{mcpServers:f,mcpMarketplaceCatalog:m}=wp(),[g,v,b]=(0,t.useMemo)((()=>{if(null!=s.text&&"api_req_started"===s.say){const e=JSON.parse(s.text);return[e.cost,e.cancelReason,e.streamingFailedMessage]}return[void 0,void 0,void 0]}),[s.text,s.say]),y=d&&"api_req_failed"===(null===c||void 0===c?void 0:c.ask)?null===c||void 0===c?void 0:c.text:void 0,x=d&&"command"===(null===c||void 0===c?void 0:c.ask)&&(null===c||void 0===c||null===(n=c.text)||void 0===n?void 0:n.includes(dp)),k=d&&"mcp_server_request_started"===(null===c||void 0===c?void 0:c.say),w="ask"===s.type?s.ask:s.say,S="var(--vscode-foreground)",C="var(--vscode-errorForeground)",T="var(--vscode-charts-green)";(0,t.useEffect)((()=>{setTimeout((()=>{const e=u();p(e)}),0)}),[s.ts,u]),(0,t.useEffect)((()=>{null!=s.text&&"api_req_started"===s.say&&setTimeout((()=>{const e=u();e.length!==h.length&&p(e)}),1e3)}),[s.text,s.say,u]);const[E,_]=(0,t.useMemo)((()=>{var e;switch(w){case"error":return!(null===(e=s.text)||void 0===e||!e.includes("Error writing file:"))&&(s.text="Attempting to write."),[(0,us.jsx)(us.Fragment,{})];case"mistake_limit_reached":return[(0,us.jsx)("span",{className:"codicon codicon-error",style:{color:C,marginBottom:"-1.5px"}}),(0,us.jsx)("span",{style:{color:C,fontWeight:"bold"},children:"blackbox is having trouble..."})];case"command":return[x?(0,us.jsx)(bv,{}):(0,us.jsx)("span",{className:"codicon codicon-terminal",style:{color:S,marginBottom:"-1.5px"}}),(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"blackbox wants to execute this command:"})];case"use_mcp_server":const t=JSON.parse(s.text||"{}");return[k?(0,us.jsx)(bv,{}):(0,us.jsx)("span",{className:"codicon codicon-server",style:{color:S,marginBottom:"-1.5px"}}),(0,us.jsxs)("span",{style:{color:S,fontWeight:"bold",wordBreak:"break-word"},children:["Blackbox wants to ","use_mcp_tool"===t.type?"use a tool":"access a resource"," on the"," ",(0,us.jsx)("code",{style:{wordBreak:"break-all"},children:$g(t.serverName,m)})," ","MCP server:"]})];case"completion_result":return[(0,us.jsx)("span",{className:"codicon codicon-check",style:{color:T,marginBottom:"-1.5px"}}),(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"Task Completed"})];case"api_req_started":const n=(e,t)=>(0,us.jsx)("div",{style:{width:16,height:16,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,us.jsx)("span",{className:`codicon codicon-${e}`,style:{color:t,fontSize:16,marginBottom:"-1.5px"}})});return y&&pv("Other Engagement","",{tag:"vscode-agent",status:"request-fail"}),[null!=v?"user_cancelled"===v?n("error","var(--vscode-descriptionForeground)"):(0,us.jsx)(us.Fragment,{}):null!=g?n("check",T):y?(0,us.jsx)(us.Fragment,{}):(0,us.jsx)(bv,{}),null!=v?"user_cancelled"===v?(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"API Request Cancelled"}):(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"There was an error, please try again"}),(0,us.jsxs)("button",{onClick:e=>{e.stopPropagation(),hs.postMessage({type:"reloadWindow"})},style:{background:"var(--vscode-button-background)",color:"var(--vscode-button-foreground)",border:"none",padding:"4px 8px",borderRadius:"2px",cursor:"pointer",fontSize:"12px"},children:[(0,us.jsx)("span",{className:"reload-btn-full",children:"Reload Window"}),(0,us.jsx)("span",{className:"reload-btn-short",children:"Reload"})]})]}):null!=g?(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"BLACKBOXAI"}):y?(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"We're witnessing high demand. Try again in a few minutes."}):(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"BLACKBOXAI Thinking..."})];case"followup":return[(0,us.jsx)("span",{className:"codicon codicon-question",style:{color:S,marginBottom:"-1.5px"}}),(0,us.jsx)("span",{style:{color:S,fontWeight:"bold"},children:"blackbox has a question:"})];default:return[null,null]}}),[w,g,y,x,v,k,m,s.text]),I={display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},R={margin:0,whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},P=(0,t.useMemo)((()=>"tool"===s.ask||"tool"===s.say?JSON.parse(s.text||"{}"):null),[s.ask,s.say,s.text]);if(P){const e=e=>(0,us.jsx)("span",{className:`codicon codicon-${e}`,style:{color:"var(--vscode-foreground)",marginBottom:"-1.5px"}});switch(P.tool){case"editedExistingFile":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[e("edit"),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"blackbox wants to edit this file:"}),!s.partial&&h&&h.length>0&&P.revisionId&&(0,us.jsx)("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:(0,us.jsx)(mv,{path:P.path,revisionId:P.revisionId})})]}),(0,us.jsx)(qg,{code:P.diff,path:P.path,isExpanded:a,onToggleExpand:l})]});case"newFileCreated":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[e("new-file"),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"blackbox wants to create a new file:"}),!s.partial&&h&&h.length>0&&P.revisionId&&(0,us.jsx)("div",{style:{marginLeft:"auto",display:"flex",gap:"8px"},children:(0,us.jsx)(mv,{path:P.path,revisionId:P.revisionId})})]}),(0,us.jsx)(qg,{isLoading:s.partial,code:P.content,path:P.path,isExpanded:a,onToggleExpand:l})]});case"readFile":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[e("file-code"),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to read this file:":"blackbox read this file:"})]}),(0,us.jsx)("div",{style:{borderRadius:3,backgroundColor:Dg,overflow:"hidden",border:"1px solid var(--vscode-editorGroup-border)"},children:(0,us.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",display:"flex",alignItems:"center",padding:"9px 10px",cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onClick:()=>{hs.postMessage({type:"openFile",text:P.content})},children:[(null===(i=P.path)||void 0===i?void 0:i.startsWith("."))&&(0,us.jsx)("span",{children:"."}),(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginRight:"8px",direction:"rtl",textAlign:"left"},children:Vg(null!==(r=P.path)&&void 0!==r?r:"")+"\u200e"}),(0,us.jsx)("div",{style:{flexGrow:1}}),(0,us.jsx)("span",{className:"codicon codicon-link-external",style:{fontSize:13.5,margin:"1px 0"}})]})})]});case"listFilesTopLevel":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[e("folder-opened"),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to view the top level files in this directory:":"blackbox viewed the top level files in this directory:"})]}),(0,us.jsx)(qg,{code:P.content,path:P.path,language:"shell-session",isExpanded:a,onToggleExpand:l})]});case"listFilesRecursive":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[e("folder-opened"),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to recursively view all files in this directory:":"blackbox recursively viewed all files in this directory:"})]}),(0,us.jsx)(qg,{code:P.content,path:P.path,language:"shell-session",isExpanded:a,onToggleExpand:l})]});case"listCodeDefinitionNames":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[e("file-code"),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?"blackbox wants to view source code definition names used in this directory:":"blackbox viewed source code definition names used in this directory:"})]}),(0,us.jsx)(qg,{code:P.content,path:P.path,isExpanded:a,onToggleExpand:l})]});case"searchFiles":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[e("search"),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"ask"===s.type?(0,us.jsxs)(us.Fragment,{children:["blackbox wants to search this directory for ",(0,us.jsx)("code",{children:P.regex}),":"]}):(0,us.jsxs)(us.Fragment,{children:["blackbox searched this directory for ",(0,us.jsx)("code",{children:P.regex}),":"]})})]}),(0,us.jsx)(qg,{code:P.content,path:P.path+(P.filePattern?`/(${P.filePattern})`:""),language:"plaintext",isExpanded:a,onToggleExpand:l})]});default:return null}}if("use_mcp_server"===s.ask||"use_mcp_server"===s.say){var A,O,M,N;const e=JSON.parse(s.text||"{}"),t=f.find((t=>t.name===e.serverName));return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[E,_]}),(0,us.jsxs)("div",{style:{background:"var(--vscode-textCodeBlock-background)",borderRadius:"3px",padding:"8px 10px",marginTop:"8px"},children:["access_mcp_resource"===e.type&&(0,us.jsx)(ov,{item:{...Ug(e.uri||"",null===t||void 0===t?void 0:t.resources,null===t||void 0===t?void 0:t.resourceTemplates)||{name:"",mimeType:"",description:""},uri:e.uri||""}}),"use_mcp_tool"===e.type&&(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,us.jsx)(sv,{tool:{name:e.toolName||"",description:(null===t||void 0===t||null===(A=t.tools)||void 0===A||null===(O=A.find((t=>t.name===e.toolName)))||void 0===O?void 0:O.description)||"",autoApprove:(null===t||void 0===t||null===(M=t.tools)||void 0===M||null===(N=M.find((t=>t.name===e.toolName)))||void 0===N?void 0:N.autoApprove)||!1},serverName:e.serverName})}),e.arguments&&"{}"!==e.arguments&&(0,us.jsxs)("div",{style:{marginTop:"8px"},children:[(0,us.jsx)("div",{style:{marginBottom:"4px",opacity:.8,fontSize:"12px",textTransform:"uppercase"},children:"Arguments"}),(0,us.jsx)(qg,{code:e.arguments,language:"json",isExpanded:!0,onToggleExpand:l})]})]})]})]})}switch(s.type){case"say":switch(s.say){case"api_req_started":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:{...I,marginBottom:null==g&&y||b?10:0,justifyContent:"space-between",cursor:"pointer",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none"},onClick:l,children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[E,_]}),(0,us.jsx)("span",{className:"codicon codicon-chevron-"+(a?"up":"down")})]}),(null==g&&y||b)&&(0,us.jsx)(us.Fragment,{}),a&&(0,us.jsx)("div",{style:{marginTop:"10px"},children:(0,us.jsx)(qg,{code:JSON.parse(s.text||"{}").request,language:"markdown",isExpanded:!0,onToggleExpand:l})})]});case"api_req_finished":return null;case"text":return(0,us.jsx)("div",{children:(0,us.jsx)(yv,{markdown:s.text})});case"user_feedback":return(0,us.jsxs)("div",{style:{backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-badge-foreground)",borderRadius:"3px",padding:"9px",whiteSpace:"pre-line",wordWrap:"break-word"},children:[(0,us.jsx)("span",{style:{display:"block"},children:dv(s.text)}),s.images&&s.images.length>0&&(0,us.jsx)(rv,{images:s.images,style:{marginTop:"8px"}})]});case"user_feedback_diff":const e=JSON.parse(s.text||"{}");return(0,us.jsx)("div",{style:{marginTop:-10,width:"100%"},children:(0,us.jsx)(qg,{diff:e.diff,isFeedback:!0,isExpanded:a,onToggleExpand:l})});case"error":null===(o=s.text)||void 0===o||o.includes("Error writing file:");return(0,us.jsx)(us.Fragment,{});case"completion_result":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[E,_]}),(0,us.jsx)("div",{style:{color:S,paddingTop:10},children:(0,us.jsx)(yv,{markdown:s.text})})]});case"shell_integration_warning":return(0,us.jsx)(us.Fragment,{children:(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",backgroundColor:"rgba(255, 191, 0, 0.1)",padding:8,borderRadius:3,fontSize:12},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:4},children:[(0,us.jsx)("i",{className:"codicon codicon-warning",style:{marginRight:8,fontSize:18,color:"#FFA500"}}),(0,us.jsx)("span",{style:{fontWeight:500,color:"#FFA500"},children:"Shell Integration Unavailable"})]}),(0,us.jsxs)("div",{children:["blackbox won't be able to view the command's output. Please update VSCode (",(0,us.jsx)("code",{children:"CMD/CTRL + Shift + P"}),' \u2192 "Update") and make sure you\'re using a supported shell: zsh, bash, fish, or PowerShell (',(0,us.jsx)("code",{children:"CMD/CTRL + Shift + P"}),' \u2192 "Terminal: Select Default Profile").'," "]})]})});case"mcp_server_response":return(0,us.jsx)(us.Fragment,{children:(0,us.jsxs)("div",{style:{paddingTop:0},children:[(0,us.jsx)("div",{style:{marginBottom:"4px",opacity:.8,fontSize:"12px",textTransform:"uppercase"},children:"Response"}),(0,us.jsx)(qg,{code:s.text,language:"json",isExpanded:!0,onToggleExpand:l})]})});default:return(0,us.jsxs)(us.Fragment,{children:[_&&(0,us.jsxs)("div",{style:I,children:[E,_]}),(0,us.jsx)("div",{style:{paddingTop:10},children:(0,us.jsx)(yv,{markdown:s.text})})]})}case"ask":switch(s.ask){case"mistake_limit_reached":return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[E,_]}),(0,us.jsx)("p",{style:{...R,color:"var(--vscode-errorForeground)"},children:s.text})]});case"command":const e=e=>{const t=e.indexOf(dp);let n=e;const i=" --template typescript";return-1===t?(n.includes("npx create-react-app")&&n.includes(i)&&(n=n.replace(i,"")),{command:n,output:""}):(n=e.slice(0,t).trim(),n.includes("npx create-react-app")&&n.includes(i)&&(n=n.replace(i,"")),{command:e.slice(0,t).trim(),output:e.slice(t+dp.length).trim().split("").map((e=>{switch(e){case"\t":return"\u2192   ";case"\b":return"\u232b";case"\f":return"\u23cf";case"\v":return"\u21f3";default:return e}})).join("")})},{command:t,output:n}=e(s.text||"");return(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:I,children:[E,_]}),(0,us.jsxs)("div",{style:{borderRadius:3,border:"1px solid var(--vscode-editorGroup-border)",overflow:"hidden",backgroundColor:Dg},children:[(0,us.jsx)(Bg,{source:`\`\`\`shell\n${t}\n\`\`\``,forceWrap:!0}),n.length>0&&(0,us.jsxs)("div",{style:{width:"100%"},children:[(0,us.jsxs)("div",{onClick:l,style:{display:"flex",alignItems:"center",gap:"4px",width:"100%",justifyContent:"flex-start",cursor:"pointer",padding:`2px 8px ${a?0:8}px 8px`},children:[(0,us.jsx)("span",{className:"codicon codicon-chevron-"+(a?"down":"right")}),(0,us.jsx)("span",{style:{fontSize:"0.8em"},children:"Command Output"})]}),a&&(0,us.jsx)(Bg,{source:`\`\`\`shell\n${n}\n\`\`\``})]})]})]});case"completion_result":return s.text?(0,us.jsxs)("div",{children:[(0,us.jsxs)("div",{style:I,children:[E,_]}),(0,us.jsx)("div",{style:{color:S,paddingTop:10},children:(0,us.jsx)(yv,{markdown:s.text})})]}):null;case"followup":return(0,us.jsxs)(us.Fragment,{children:[_&&(0,us.jsxs)("div",{style:I,children:[E,_]}),(0,us.jsx)("div",{style:{paddingTop:10},children:(0,us.jsx)(yv,{markdown:s.text})})]});default:return null}}},bv=()=>(0,us.jsx)("div",{style:{width:"16px",height:"16px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,us.jsx)("div",{style:{transform:"scale(0.55)",transformOrigin:"center"},children:(0,us.jsx)(ss,{})})}),yv=(0,t.memo)((e=>{let{markdown:t}=e;return(0,us.jsx)("div",{style:{wordBreak:"break-word",overflowWrap:"anywhere",marginBottom:-15,marginTop:-15},children:(0,us.jsx)(Zg,{markdown:t})})})),xv=(0,t.memo)((e=>{var n,i;const{messages:r,isLast:o,onHeightChange:s,lastModifiedMessage:a}=e,l=(0,t.useRef)(0),[c,u]=(0,t.useState)(0),[d,h]=(0,t.useState)(!1),p=(0,t.useMemo)((()=>{const e=[...r].reverse().find((e=>"api_req_started"===e.say));if(null!=(null===e||void 0===e?void 0:e.text)){if(null!=JSON.parse(e.text).cancelReason)return!0}return!(!o||"api_req_failed"!==(null===a||void 0===a?void 0:a.ask))}),[r,a,o]),f=(0,t.useMemo)((()=>o&&r.some((e=>"browser_action_result"===e.say))&&!p),[o,r,p]),m=(0,t.useMemo)((()=>{const e=[];let t=[],n=[];return r.forEach((i=>{if("browser_action_launch"===i.ask)t=[i];else if("browser_action_result"===i.say){if(""===i.text)return;t.push(i);const r=JSON.parse(i.text||"{}");e.push({currentState:{url:r.currentUrl,screenshot:r.screenshot,mousePosition:r.currentMousePosition,consoleLogs:r.logs,messages:[...t]},nextAction:n.length>0?{messages:[...n]}:void 0}),t=[],n=[]}else"api_req_started"===i.say||"text"===i.say||"browser_action"===i.say?n.push(i):t.push(i)})),(t.length>0||n.length>0)&&e.push({currentState:{messages:[...t]},nextAction:n.length>0?{messages:[...n]}:void 0}),e}),[r]),[g,v]=(0,t.useState)(0);(0,t.useEffect)((()=>{v(m.length-1)}),[m.length]);const b=(0,t.useMemo)((()=>{const e=r.find((e=>"browser_action_launch"===e.ask));return(null===e||void 0===e?void 0:e.text)||""}),[r]),y=(0,t.useMemo)((()=>{for(let e=m.length-1;e>=0;e--){const t=m[e];if(t.currentState.url||t.currentState.screenshot)return{url:t.currentState.url,mousePosition:t.currentState.mousePosition,consoleLogs:t.currentState.consoleLogs,screenshot:t.currentState.screenshot}}return{url:void 0,mousePosition:void 0,consoleLogs:void 0,screenshot:void 0}}),[m]),x=m[g],k=g===m.length-1?{url:(null===x||void 0===x?void 0:x.currentState.url)||y.url||b,mousePosition:(null===x||void 0===x?void 0:x.currentState.mousePosition)||y.mousePosition||"700,400",consoleLogs:null===x||void 0===x?void 0:x.currentState.consoleLogs,screenshot:(null===x||void 0===x?void 0:x.currentState.screenshot)||y.screenshot}:{url:(null===x||void 0===x?void 0:x.currentState.url)||b,mousePosition:(null===x||void 0===x?void 0:x.currentState.mousePosition)||"700,400",consoleLogs:null===x||void 0===x?void 0:x.currentState.consoleLogs,screenshot:null===x||void 0===x?void 0:x.currentState.screenshot},[w,{height:S}]=Nf((0,us.jsxs)("div",{children:[null===x||void 0===x||null===(n=x.nextAction)||void 0===n?void 0:n.messages.map((t=>(0,us.jsx)(kv,{...e,message:t,setMaxActionHeight:u},t.ts))),!f&&r.some((e=>"browser_action_result"===e.say))&&0===g&&(0,us.jsx)(wv,{action:"launch",text:b})]}));(0,t.useEffect)((()=>{0!==S&&S!==1/0&&S>c&&u(S)}),[S,c]);const C=(0,t.useMemo)((()=>{var e;if(!f)return;const t=(null===x||void 0===x||null===(e=x.nextAction)||void 0===e?void 0:e.messages)||[];for(let n=t.length-1;n>=0;n--){const e=t[n];if("browser_action"===e.say){const t=JSON.parse(e.text||"{}");if("click"===t.action&&t.coordinate)return t.coordinate}}}),[f,null===x||void 0===x||null===(i=x.nextAction)||void 0===i?void 0:i.messages]),T=f&&C||k.mousePosition,[E,{height:_}]=Nf((0,us.jsxs)("div",{style:{padding:"10px 6px 10px 15px",marginBottom:-10},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"},children:[f?(0,us.jsx)(bv,{}):(0,us.jsx)("span",{className:"codicon codicon-inspect",style:{color:"var(--vscode-foreground)",marginBottom:"-1.5px"}}),(0,us.jsx)("span",{style:{fontWeight:"bold"},children:(0,us.jsx)(us.Fragment,{children:"blackbox wants to use the browser:"})})]}),(0,us.jsxs)("div",{style:{borderRadius:3,border:"1px solid var(--vscode-editorGroup-border)",overflow:"hidden",backgroundColor:Dg,marginBottom:10},children:[(0,us.jsx)("div",{style:{margin:"5px auto",width:"calc(100% - 10px)",boxSizing:"border-box",backgroundColor:"var(--vscode-input-background)",border:"1px solid var(--vscode-input-border)",borderRadius:"4px",padding:"3px 5px",display:"flex",alignItems:"center",justifyContent:"center",color:k.url?"var(--vscode-input-foreground)":"var(--vscode-descriptionForeground)",fontSize:"12px"},children:(0,us.jsx)("div",{style:{textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",textAlign:"center"},children:k.url||"http"})}),(0,us.jsxs)("div",{style:{width:"100%",paddingBottom:"calc(200%/3)",position:"relative",backgroundColor:"var(--vscode-input-background)"},children:[k.screenshot?(0,us.jsx)("img",{src:k.screenshot,alt:"Browser screenshot",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"contain",cursor:"pointer"},onClick:()=>hs.postMessage({type:"openImage",text:k.screenshot})}):(0,us.jsx)("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:(0,us.jsx)("span",{className:"codicon codicon-globe",style:{fontSize:"80px",color:"var(--vscode-descriptionForeground)"}})}),k.mousePosition&&(0,us.jsx)(Sv,{style:{position:"absolute",top:parseInt(T.split(",")[1])/600*100+"%",left:parseInt(T.split(",")[0])/900*100+"%",transition:"top 0.3s ease-out, left 0.3s ease-out"}})]}),(0,us.jsxs)("div",{style:{width:"100%"},children:[(0,us.jsxs)("div",{onClick:()=>{h(!d)},style:{display:"flex",alignItems:"center",gap:"4px",width:"100%",justifyContent:"flex-start",cursor:"pointer",padding:`9px 8px ${d?0:8}px 8px`},children:[(0,us.jsx)("span",{className:"codicon codicon-chevron-"+(d?"down":"right")}),(0,us.jsx)("span",{style:{fontSize:"0.8em"},children:"Console Logs"})]}),d&&(0,us.jsx)(Bg,{source:`\`\`\`shell\n${k.consoleLogs||"(No new logs)"}\n\`\`\``})]})]}),(0,us.jsx)("div",{style:{minHeight:c},children:w}),m.length>1&&(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 0px",marginTop:"15px",borderTop:"1px solid var(--vscode-editorGroup-border)"},children:[(0,us.jsxs)("div",{children:["Step ",g+1," of ",m.length]}),(0,us.jsxs)("div",{style:{display:"flex",gap:"4px"},children:[(0,us.jsx)(Jo,{disabled:0===g||f,onClick:()=>v((e=>e-1)),children:"Previous"}),(0,us.jsx)(Jo,{disabled:g===m.length-1||f,onClick:()=>v((e=>e+1)),children:"Next"})]})]})]}));return(0,t.useEffect)((()=>{const e=0===l.current;o&&0!==_&&_!==1/0&&_!==l.current&&(e||s(_>l.current),l.current=_)}),[_,o,s]),E}),Pf()),kv=e=>{let{message:t,isExpanded:n,onToggleExpand:i,lastModifiedMessage:r,getLatestCodeRevisions:o,isLast:s,setMaxActionHeight:a}=e;const l={display:"flex",alignItems:"center",gap:"10px",marginBottom:"10px"};switch(t.type){case"say":switch(t.say){case"api_req_started":case"text":return(0,us.jsx)("div",{style:{padding:"10px 0 10px 0"},children:(0,us.jsx)(vv,{message:t,isExpanded:n(t.ts),onToggleExpand:()=>{"api_req_started"===t.say&&a(0),i(t.ts)},getLatestCodeRevisions:o,lastModifiedMessage:r,isLast:s})});case"browser_action":const e=JSON.parse(t.text||"{}");return(0,us.jsx)(wv,{action:e.action,coordinate:e.coordinate,text:e.text});default:return null}case"ask":return"browser_action_launch"===t.ask?(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("div",{style:l,children:(0,us.jsx)("span",{style:{fontWeight:"bold"},children:"Browser Session Started"})}),(0,us.jsx)("div",{style:{borderRadius:3,border:"1px solid var(--vscode-editorGroup-border)",overflow:"hidden",backgroundColor:Dg},children:(0,us.jsx)(Bg,{source:`\`\`\`shell\n${t.text}\n\`\`\``,forceWrap:!0})})]}):null}},wv=e=>{let{action:t,coordinate:n,text:i}=e;return(0,us.jsx)("div",{style:{padding:"10px 0 0 0"},children:(0,us.jsx)("div",{style:{borderRadius:3,backgroundColor:Dg,overflow:"hidden",border:"1px solid var(--vscode-editorGroup-border)"},children:(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",padding:"9px 10px"},children:(0,us.jsxs)("span",{style:{whiteSpace:"normal",wordBreak:"break-word"},children:[(0,us.jsx)("span",{style:{fontWeight:500},children:"Browse Action: "}),((e,t,n)=>{switch(e){case"launch":return`Launch browser at ${n}`;case"click":return`Click (${null===t||void 0===t?void 0:t.replace(",",", ")})`;case"type":return`Type "${n}"`;case"scroll_down":return"Scroll down";case"scroll_up":return"Scroll up";case"close":return"Close browser";default:return e}})(t,n,i)]})})})})},Sv=e=>{let{style:t}=e;return(0,us.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAYCAYAAAAVibZIAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAFaADAAQAAAABAAAAGAAAAADwi9a/AAADGElEQVQ4EZ2VbUiTURTH772be/PxZdsz3cZwC4RVaB8SAjMpxQwSWZbQG/TFkN7oW1Df+h6IRV9C+hCpKUSIZUXOfGM5tAKViijFFEyfZ7Ol29S1Pbdzl8Uw9+aBu91zzv3/nt17zt2DEZjBYOAkKrtFMXIghAWM8U2vMN/FctsxGRMpM7NbEEYNMM2CYUSInlJx3OpawO9i+XSNQYkmk2uFb9njzkcfVSr1p/GJiQKMULVaw2WuBv296UKRxWJR6wxGCmM1EAhSNppv33GBH9qI32cPTAtss9lUm6EM3N7R+RbigT+5/CeosFCZKpjEW+iorS1pb30wDUXzQfHqtD/9L3ieZ2ee1OJCmbL8QHnRs+4uj0wmW4QzrpCwvJ8zGg3JqAmhTLynuLiwv8/5KyND8Q3cEkUEDWu15oJE4KRQJt5hs1rcriGNRqP+DK4dyyWXXm/aFQ+cEpSJ8/LyDGPuEZNOmzsOroUSOqzXG/dtBU4ZysTZYKNut91sNo2Cq6cE9enz86s2g9OCMrFSqVC5hgb32u072W3jKMU90Hb1seC0oUwsB+t92bO/rKx0EFGkgFCnjjc1/gVvC8rE0L+4o63t4InjxwbAJQjTe3qD8QrLkXA4DC24fWtuajp06cLFYSBIFKGmXKPRRmAnME9sPt+yLwIWb9WN69fKoTneQz4Dh2mpPNkvfeV0jjecb9wNAkwIEVQq5VJOds4Kb+DXoAsiVquVwI1Dougpij6UyGYx+5cKroeDEFibm5lWRRMbH1+npmYrq6qhwlQHIbajZEf1fElcqGGFpGg9HMuKzpfBjhytCTMgkJ56RX09zy/ysENTBElmjIgJnmNChJqohDVQqpEfwkILE8v/o0GAnV9F1eEvofVQCbiTBEXOIPQh5PGgefDZeAcjrpGZjULBr/m3tZOnz7oEQWRAQZLjWlEU/XEJWySiILgRc5Cz1DkcAyuBFcnpfF0JiXWKpcolQXizhS5hKAqFpr0MVbgbuxJ6+5xX+P4wNpbqPPrugZfbmIbLmgQR3Aw8QSi66hUXulOFbF73GxqjE5BNXWNeAAAAAElFTkSuQmCC",style:{width:"17px",height:"22px",...t},alt:"cursor"})},Cv=xv;function Tv(){return Tv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Tv.apply(null,arguments)}const Ev=t.useLayoutEffect;var _v=function(e,t){"function"!==typeof e?e.current=t:e(t)};const Iv=function(e,n){var i=(0,t.useRef)();return(0,t.useCallback)((function(t){e.current=t,i.current&&_v(i.current,null),i.current=n,n&&_v(n,t)}),[n])};var Rv={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},Pv=function(e){Object.keys(Rv).forEach((function(t){e.style.setProperty(t,Rv[t],"important")}))},Av=null,Ov=function(e,t){var n=e.scrollHeight;return"border-box"===t.sizingStyle.boxSizing?n+t.borderSize:n-t.paddingSize};var Mv=function(){},Nv=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],Dv=!!document.documentElement.currentStyle,jv=function(e){var t=window.getComputedStyle(e);if(null===t)return null;var n,i=(n=t,Nv.reduce((function(e,t){return e[t]=n[t],e}),{})),r=i.boxSizing;return""===r?null:(Dv&&"border-box"===r&&(i.width=parseFloat(i.width)+parseFloat(i.borderRightWidth)+parseFloat(i.borderLeftWidth)+parseFloat(i.paddingRight)+parseFloat(i.paddingLeft)+"px"),{sizingStyle:i,paddingSize:parseFloat(i.paddingBottom)+parseFloat(i.paddingTop),borderSize:parseFloat(i.borderBottomWidth)+parseFloat(i.borderTopWidth)})};function Lv(e,n,i){var r=function(e){var n=t.useRef(e);return Ev((function(){n.current=e})),n}(i);t.useLayoutEffect((function(){var t=function(e){return r.current(e)};if(e)return e.addEventListener(n,t),function(){return e.removeEventListener(n,t)}}),[])}var Fv=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Bv=function(e,n){var i=e.cacheMeasurements,r=e.maxRows,o=e.minRows,s=e.onChange,a=void 0===s?Mv:s,l=e.onHeightChange,c=void 0===l?Mv:l,u=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(t.indexOf(i)>=0)continue;n[i]=e[i]}return n}(e,Fv),d=void 0!==u.value,h=t.useRef(null),p=Iv(h,n),f=t.useRef(0),m=t.useRef(),g=function(){var e=h.current,t=i&&m.current?m.current:jv(e);if(t){m.current=t;var n=function(e,t,n,i){void 0===n&&(n=1),void 0===i&&(i=1/0),Av||((Av=document.createElement("textarea")).setAttribute("tabindex","-1"),Av.setAttribute("aria-hidden","true"),Pv(Av)),null===Av.parentNode&&document.body.appendChild(Av);var r=e.paddingSize,o=e.borderSize,s=e.sizingStyle,a=s.boxSizing;Object.keys(s).forEach((function(e){var t=e;Av.style[t]=s[t]})),Pv(Av),Av.value=t;var l=Ov(Av,e);Av.value=t,l=Ov(Av,e),Av.value="x";var c=Av.scrollHeight-r,u=c*n;"border-box"===a&&(u=u+r+o),l=Math.max(u,l);var d=c*i;return"border-box"===a&&(d=d+r+o),[l=Math.min(d,l),c]}(t,e.value||e.placeholder||"x",o,r),s=n[0],a=n[1];f.current!==s&&(f.current=s,e.style.setProperty("height",s+"px","important"),c(s,{rowHeight:a}))}};return t.useLayoutEffect(g),Lv(window,"resize",g),function(e){Lv(document.fonts,"loadingdone",e)}(g),t.createElement("textarea",Tv({},u,{onChange:function(e){d||g(),a(e)},ref:p}))},Uv=t.forwardRef(Bv);const $v={216:"O",223:"s",248:"o",273:"d",295:"h",305:"i",320:"l",322:"l",359:"t",383:"s",384:"b",385:"B",387:"b",390:"O",392:"c",393:"D",394:"D",396:"d",398:"E",400:"E",402:"f",403:"G",407:"I",409:"k",410:"l",412:"M",413:"N",414:"n",415:"O",421:"p",427:"t",429:"t",430:"T",434:"V",436:"y",438:"z",477:"e",485:"g",544:"N",545:"d",549:"z",564:"l",565:"n",566:"t",567:"j",570:"A",571:"C",572:"c",573:"L",574:"T",575:"s",576:"z",579:"B",580:"U",581:"V",582:"E",583:"e",584:"J",585:"j",586:"Q",587:"q",588:"R",589:"r",590:"Y",591:"y",592:"a",593:"a",595:"b",596:"o",597:"c",598:"d",599:"d",600:"e",603:"e",604:"e",605:"e",606:"e",607:"j",608:"g",609:"g",610:"G",613:"h",614:"h",616:"i",618:"I",619:"l",620:"l",621:"l",623:"m",624:"m",625:"m",626:"n",627:"n",628:"N",629:"o",633:"r",634:"r",635:"r",636:"r",637:"r",638:"r",639:"r",640:"R",641:"R",642:"s",647:"t",648:"t",649:"u",651:"v",652:"v",653:"w",654:"y",655:"Y",656:"z",657:"z",663:"c",665:"B",666:"e",667:"G",668:"H",669:"j",670:"k",671:"L",672:"q",686:"h",867:"a",868:"e",869:"i",870:"o",871:"u",872:"c",873:"d",874:"h",875:"m",876:"r",877:"t",878:"v",879:"x",7424:"A",7427:"B",7428:"C",7429:"D",7431:"E",7432:"e",7433:"i",7434:"J",7435:"K",7436:"L",7437:"M",7438:"N",7439:"O",7440:"O",7441:"o",7442:"o",7443:"o",7446:"o",7447:"o",7448:"P",7449:"R",7450:"R",7451:"T",7452:"U",7453:"u",7454:"u",7455:"m",7456:"V",7457:"W",7458:"Z",7522:"i",7523:"r",7524:"u",7525:"v",7834:"a",7835:"s",8305:"i",8341:"h",8342:"k",8343:"l",8344:"m",8345:"n",8346:"p",8347:"s",8348:"t",8580:"c"};for(let n="\u0300".codePointAt(0);n<="\u036f".codePointAt(0);++n){const e=String.fromCodePoint(n);for(const t of"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"){const n=(t+e).normalize().codePointAt(0);n>126&&($v[n]=t)}}const zv={a:[7844,7863],e:[7870,7879],o:[7888,7907],u:[7912,7921]};for(const n of Object.keys(zv)){const e=n.toUpperCase();for(let t=zv[n][0];t<=zv[n][1];++t)$v[t]=t%2===0?e:n}function Vv(e){if(e<192||e>8580)return e;const t=$v[e];return void 0!==t?t.codePointAt(0):e}function Hv(e,t){return e>t?e:t}const qv=e=>e.split("").map((e=>e.codePointAt(0))),Wv=new Set(" \f\n\r\t\v\xa0\u1680\u2028\u2029\u202f\u205f\u3000\ufeff".split("").map((e=>e.codePointAt(0))));for(let n="\u2000".codePointAt(0);n<="\u200a".codePointAt(0);n++)Wv.add(n);const Gv="\x7f".codePointAt(0),Kv="A".codePointAt(0),Qv="Z".codePointAt(0),Xv="a".codePointAt(0),Yv="z".codePointAt(0),Jv="0".codePointAt(0),Zv="9".codePointAt(0);function eb(e,t,n){return n?e:t-e-1}const tb=16,nb=8,ib=8,rb=nb+-1;function ob(e){return e?new Set:null}function sb(e,t,n){if(null!==t&&t.i16.length>e+n){return[e+n,t.i16.subarray(e,e+n)]}return[e,new Int16Array(n)]}function ab(e,t,n){if(null!==t&&t.i32.length>e+n){return[e+n,t.i32.subarray(e,e+n)]}return[e,new Int32Array(n)]}function lb(e){return e>=Xv&&e<=Yv?1:e>=Kv&&e<=Qv?2:e>=Jv&&e<=Zv?4:0}function cb(e){const t=String.fromCodePoint(e);return t!==t.toUpperCase()?1:t!==t.toLowerCase()?2:null!==t.match(/\p{Number}/gu)?4:null!==t.match(/\p{Letter}/gu)?3:0}function ub(e){return e<=Gv?lb(e):cb(e)}function db(e,t){return 0===e&&0!==t?nb:1===e&&2===t||4!==e&&4===t?rb:0===t?ib:0}function hb(e,t,n,i){let r=e.slice(i),o=r.indexOf(n);if(0===o)return i;if(!t&&n>=Xv&&n<=Yv){o>0&&(r=r.slice(0,o));const e=r.indexOf(n-32);e>=0&&(o=e)}return o<0?-1:i+o}function pb(e){for(const t of e)if(t>=128)return!1;return!0}function fb(e,t,n){if(!pb(e))return 0;if(!pb(t))return-1;let i=0,r=0;for(let o=0;o<t.length;o++){if(r=hb(e,n,t[o],r),r<0)return-1;0===o&&r>0&&(i=r-1),r++}return i}const mb=(e,t,n,i,r,o,s)=>{const a=r.length;if(0===a)return[{start:0,end:0,score:0},ob(o)];const l=i.length;if(null!==s&&l*a>s.i16.length)return vb(e,t,n,i,r,o);const c=fb(i,r,e);if(c<0)return[{start:-1,end:-1,score:0},null];let u=0,d=0,h=null,p=null,f=null,m=null;[u,h]=sb(u,s,l),[u,p]=sb(u,s,l),[u,f]=sb(u,s,l),[d,m]=ab(d,s,a);const[,g]=ab(d,s,l);for(let F=0;F<g.length;F++)g[F]=i[F];let v=0,b=0,y=0,x=0;const k=r[0];let w=r[0],S=0,C=0,T=!1,E=g.subarray(c),_=h.subarray(c).subarray(0,E.length),I=p.subarray(c).subarray(0,E.length),R=f.subarray(c).subarray(0,E.length);for(let[F,B]of E.entries()){let i=null;B<=Gv?(i=lb(B),e||2!==i||(B+=32)):(i=cb(B),e||2!==i||(B=String.fromCodePoint(B).toLowerCase().codePointAt(0)),t&&(B=Vv(B))),E[F]=B;const o=db(C,i);if(R[F]=o,C=i,B===w&&(y<a&&(m[y]=c+F,y++,w=r[Math.min(y,a-1)]),x=c+F),B===k){const e=tb+2*o;if(_[F]=e,I[F]=1,1===a&&(n&&e>v||!n&&e>=v)&&(v=e,b=c+F,n&&o===nb))break;T=!1}else _[F]=Hv(T?S+-1:S+-3,0),I[F]=0,T=!0;S=_[F]}if(y!==a)return[{start:-1,end:-1,score:0},null];if(1===a){const e={start:b,end:b+1,score:v};if(!o)return[e,null];const t=new Set;return t.add(b),[e,t]}const P=m[0],A=x-P+1;let O=null;[u,O]=sb(u,s,A*a);{const e=h.subarray(P,x+1);for(const[t,n]of e.entries())O[t]=n}let[,M]=sb(u,s,A*a);{const e=p.subarray(P,x+1);for(const[t,n]of e.entries())M[t]=n}const N=m.subarray(1),D=r.slice(1).slice(0,N.length);for(const[F,B]of N.entries()){let e=!1;const t=D[F],i=F+1,r=i*A,o=g.subarray(B,x+1),s=f.subarray(B).subarray(0,o.length),l=M.subarray(r+B-P).subarray(0,o.length),c=M.subarray(r+B-P-1-A).subarray(0,o.length),u=O.subarray(r+B-P).subarray(0,o.length),d=O.subarray(r+B-P-1-A).subarray(0,o.length),h=O.subarray(r+B-P-1).subarray(0,o.length);h[0]=0;for(const[p,m]of o.entries()){const r=p+B;let o=0,g=0,y=0;if(g=e?h[p]+-1:h[p]+-3,t===m){o=d[p]+tb;let e=s[p];y=c[p]+1,e===nb?y=1:y>1&&(e=Hv(e,Hv(4,f[r-y+1]))),o+e<g?(o+=s[p],y=0):o+=e}l[p]=y,e=o<g;const x=Hv(Hv(o,g),0);i===a-1&&(n&&x>v||!n&&x>=v)&&(v=x,b=r),u[p]=x}}const j=ob(o);let L=P;if(o&&null!==j){let e=a-1;L=b;let t=!0;for(;;){const n=e*A,i=L-P,r=O[n+i];let o=0,s=0;if(e>0&&L>=m[e]&&(o=O[n-A+i-1]),L>m[e]&&(s=O[n+i-1]),r>o&&(r>s||r===s&&t)){if(j.add(L),0===e)break;e--}t=M[n+i]>1||n+A+i+1<M.length&&M[n+A+i+1]>0,L--}}return[{start:L,end:b+1,score:v},j]};function gb(e,t,n,i,r,o,s){let a=0,l=0,c=!1,u=0,d=0;const h=ob(s);let p=0;r>0&&(p=ub(n[r-1]));for(let f=r;f<o;f++){let r=n[f];const o=ub(r);if(e||(r>=Kv&&r<=Qv?r+=32:r>Gv&&(r=String.fromCodePoint(r).toLowerCase().codePointAt(0))),t&&(r=Vv(r)),r===i[a]){s&&null!==h&&h.add(f),l+=tb;let e=db(p,o);0===u?d=e:(e===nb&&(d=e),e=Hv(Hv(e,d),4)),l+=0===a?2*e:e,c=!1,u++,a++}else l+=c?-1:-3,c=!0,u=0,d=0;p=o}return[l,h]}const vb=(e,t,n,i,r,o,s)=>{if(0===r.length)return[{start:0,end:0,score:0},null];if(fb(i,r,e)<0)return[{start:-1,end:-1,score:0},null];let a=0,l=-1,c=-1;const u=i.length,d=r.length;for(let h=0;h<u;h++){let o=i[eb(h,u,n)];e||(o>=Kv&&o<=Qv?o+=32:o>Gv&&(o=String.fromCodePoint(o).toLowerCase().codePointAt(0))),t&&(o=Vv(o));if(o===r[eb(a,d,n)]&&(l<0&&(l=h),a++,a===d)){c=h+1;break}}if(l>=0&&c>=0){a--;for(let t=c-1;t>=l;t--){let o=i[eb(t,u,n)];e||(o>=Kv&&o<=Qv?o+=32:o>Gv&&(o=String.fromCodePoint(o).toLowerCase().codePointAt(0)));if(o===r[eb(a,d,n)]&&(a--,a<0)){l=t;break}}if(!n){const e=l;l=u-c,c=u-e}const[s,h]=gb(e,t,i,r,l,c,o);return[{start:l,end:c,score:s},h]}return[{start:-1,end:-1,score:0},null]},bb=(e,t,n,i,r,o,s)=>{if(0===r.length)return[{start:0,end:0,score:0},null];const a=i.length,l=r.length;if(a<l)return[{start:-1,end:-1,score:0},null];if(fb(i,r,e)<0)return[{start:-1,end:-1,score:0},null];let c=0,u=-1,d=0,h=-1;for(let m=0;m<a;m++){const o=eb(m,a,n);let s=i[o];e||(s>=Kv&&s<=Qv?s+=32:s>Gv&&(s=String.fromCodePoint(s).toLowerCase().codePointAt(0))),t&&(s=Vv(s));const g=eb(c,l,n);if(r[g]===s){if(0===g&&(p=i,d=0===(f=o)?nb:db(ub(p[f-1]),ub(p[f]))),c++,c===l){if(d>h&&(u=m,h=d),d===nb)break;m-=c-1,c=0,d=0}}else m-=c,c=0,d=0}var p,f;if(u>=0){let o=0,s=0;n?(o=u-l+1,s=u+1):(o=a-(u+1),s=a-(u-l+1));const[c]=gb(e,t,i,r,o,s,!1);return[{start:o,end:s,score:c},null]}return[{start:-1,end:-1,score:0},null]};const yb=(xb=2048,{i16:new Int16Array(102400),i32:new Int32Array(xb)});var xb;const kb=(e,t,n)=>{let i=!1;switch(t){case"smart-case":e.toLowerCase()!==e&&(i=!0);break;case"case-sensitive":i=!0;break;case"case-insensitive":e=e.toLowerCase(),i=!1}let r=qv(e);return n&&(r=r.map(Vv)),{queryRunes:r,caseSensitive:i}};function wb(e,t){const n=Object.keys(e).map((e=>parseInt(e,10))).sort(((e,t)=>t-e));let i=[];for(const r of n)if(i=i.concat(e[r]),i.length>=t)break;return i}function Sb(e,t,n){return i=>{const r=this.runesList[i];if(t.length>r.length)return;let[o,s]=this.algoFn(n,this.opts.normalize,this.opts.forward,r,t,!0,yb);if(-1===o.start)return;if(!1===this.opts.fuzzy){s=new Set;for(let e=o.start;e<o.end;++e)s.add(e)}const a=this.opts.sort?o.score:0;void 0===e[a]&&(e[a]=[]),e[a].push({item:this.items[i],...o,positions:null!=s?s:new Set})}}const Cb="undefined"!==typeof require&&"undefined"===typeof window;function Tb(e,t,n,i){return new Promise(((r,o)=>{let s=0,a=Math.min(1e3,t);const l=()=>{if(e.cancelled)return o("search cancelled");for(;s<a;++s)n(s);a<t?(Math.min(a+1e3,t),Cb?setImmediate(l):setTimeout(l)):r(i())};l()}))}const Eb={limit:1/0,selector:e=>e,casing:"smart-case",normalize:!0,fuzzy:"v2",tiebreakers:[],sort:!0,forward:!0};class _b{constructor(e){switch(this.opts={...Eb,...arguments.length<=1?void 0:arguments[1]},this.items=e,this.runesList=e.map((e=>qv(this.opts.selector(e).normalize()))),this.algoFn=bb,this.opts.fuzzy){case"v2":this.algoFn=mb;break;case"v1":this.algoFn=vb}}}const Ib={...Eb,match:function(e){const{queryRunes:t,caseSensitive:n}=kb(e,this.opts.casing,this.opts.normalize),i={},r=Sb.bind(this)(i,t,n);for(let o=0,s=this.runesList.length;o<s;++o)r(o);return wb(i,this.opts.limit)}};class Rb extends _b{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];super(e,...n),this.opts={...Ib,...n[0]}}find(e){if(0===e.length||0===this.items.length)return this.items.slice(0,this.opts.limit).map(Pb);return e=e.normalize(),Ab(this.opts.match.bind(this)(e),this.opts)}}const Pb=e=>({item:e,start:-1,end:-1,score:0,positions:new Set});function Ab(e,t){if(t.sort){const{selector:n}=t;e.sort(((e,i)=>{if(e.score===i.score)for(const r of t.tiebreakers){const t=r(e,i,n);if(0!==t)return t}return 0}))}return Number.isFinite(t.limit)&&e.splice(t.limit),e}class Ob{constructor(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.finder=new Rb(e,...n),this.find=this.finder.find.bind(this.finder)}}let Mb=function(e){return e.File="file",e.Folder="folder",e.Problems="problems",e.Terminal="terminal",e.URL="url",e.Git="git",e.NoResults="noResults",e}({});function Nb(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;const i={type:Mb.Git,value:"git-changes",label:"Working changes",description:"Current uncommitted changes"};if(""===e){if(t===Mb.File){const e=n.filter((e=>e.type===Mb.File)).map((e=>({type:Mb.File,value:e.value})));return e.length>0?e:[{type:Mb.NoResults}]}if(t===Mb.Folder){const e=n.filter((e=>e.type===Mb.Folder)).map((e=>({type:Mb.Folder,value:e.value})));return e.length>0?e:[{type:Mb.NoResults}]}if(t===Mb.Git){const e=n.filter((e=>e.type===Mb.Git));return e.length>0?[i,...e]:[i]}return[{type:Mb.URL},{type:Mb.Problems},{type:Mb.Terminal},{type:Mb.Git},{type:Mb.Folder},{type:Mb.File}]}const r=e.toLowerCase(),o=[];if("git".startsWith(r)?o.push({type:Mb.Git,label:"Git Commits",description:"Search repository history"}):"git-changes".startsWith(r)&&o.push(i),"problems".startsWith(r)&&o.push({type:Mb.Problems}),e.startsWith("http")&&o.push({type:Mb.URL,value:e}),/^[a-f0-9]{7,40}$/i.test(r)){const e=n.filter((e=>{var t;return e.type===Mb.Git&&(null===(t=e.value)||void 0===t?void 0:t.toLowerCase())===r}));e.length>0?o.push(...e):o.push({type:Mb.Git,value:r,label:`Commit ${r}`,description:"Git commit hash"})}const s=n.map((e=>({original:e,searchStr:[e.value,e.label,e.description].filter(Boolean).join(" ")}))),a=new Ob(s,{selector:e=>e.searchStr}),l=e?a.find(e).map((e=>e.item.original)):[],c=l.filter((e=>e.type===Mb.File||e.type===Mb.Folder)),u=l.filter((e=>e.type===Mb.Git)),d=l.filter((e=>e.type!==Mb.File&&e.type!==Mb.Folder&&e.type!==Mb.Git));if(o.length>0||l.length>0){const e=[...o,...c,...u,...d],t=new Set;return e.filter((e=>{const n=`${e.type}-${e.value}`;return!t.has(n)&&(t.add(n),!0)}))}return[{type:Mb.NoResults}]}const Db=e=>{let{onSelect:n,searchQuery:i,onMouseDown:r,selectedIndex:o,setSelectedIndex:s,selectedType:a,queryItems:l}=e;const c=(0,t.useRef)(null),u=(0,t.useMemo)((()=>Nb(i,a,l)),[i,a,l]);(0,t.useEffect)((()=>{if(c.current){const e=c.current.children[o];if(e){const t=c.current.getBoundingClientRect(),n=e.getBoundingClientRect();n.bottom>t.bottom?c.current.scrollTop+=n.bottom-t.bottom:n.top<t.top&&(c.current.scrollTop-=t.top-n.top)}}}),[o]);const d=e=>{switch(e.type){case Mb.Problems:return(0,us.jsx)("span",{children:"Problems"});case Mb.Terminal:return(0,us.jsx)("span",{children:"Terminal"});case Mb.URL:return(0,us.jsx)("span",{children:"Paste URL to fetch contents"});case Mb.NoResults:return(0,us.jsx)("span",{children:"No results found"});case Mb.Git:return e.value?(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0},children:[(0,us.jsx)("span",{style:{lineHeight:"1.2"},children:e.label}),(0,us.jsx)("span",{style:{fontSize:"0.85em",opacity:.7,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",lineHeight:"1.2"},children:e.description})]}):(0,us.jsx)("span",{children:"Git Commits"});case Mb.File:case Mb.Folder:var t;return e.value?(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("span",{children:"/"}),(null===(t=e.value)||void 0===t?void 0:t.startsWith("/."))&&(0,us.jsx)("span",{children:"."}),(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",direction:"rtl",textAlign:"left"},children:Vg(e.value||"")+"\u200e"})]}):(0,us.jsxs)("span",{children:["Add ",e.type===Mb.File?"File":"Folder"]})}},h=e=>{switch(e.type){case Mb.File:return"file";case Mb.Folder:return"folder";case Mb.Problems:return"warning";case Mb.Terminal:return"terminal";case Mb.URL:return"link";case Mb.Git:return"git-commit";case Mb.NoResults:return"info";default:return"file"}},p=e=>e.type!==Mb.NoResults&&e.type!==Mb.URL;return(0,us.jsx)("div",{style:{position:"absolute",bottom:"calc(100% - 10px)",left:15,right:15,overflowX:"hidden"},onMouseDown:r,children:(0,us.jsx)("div",{ref:c,style:{backgroundColor:"var(--vscode-dropdown-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.25)",zIndex:1e3,display:"flex",flexDirection:"column",maxHeight:"200px",overflowY:"auto"},children:u.map(((e,t)=>(0,us.jsxs)("div",{onClick:()=>p(e)&&n(e.type,e.value),style:{padding:"8px 12px",cursor:p(e)?"pointer":"default",color:"var(--vscode-dropdown-foreground)",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:t===o&&p(e)?"var(--vscode-list-activeSelectionBackground)":""},onMouseEnter:()=>p(e)&&s(t),children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:[(0,us.jsx)("i",{className:`codicon codicon-${h(e)}`,style:{marginRight:"8px",flexShrink:0,fontSize:"14px"}}),d(e)]}),(e.type===Mb.File||e.type===Mb.Folder||e.type===Mb.Git)&&!e.value&&(0,us.jsx)("i",{className:"codicon codicon-chevron-right",style:{fontSize:"14px",flexShrink:0,marginLeft:8}}),(e.type===Mb.Problems||e.type===Mb.Terminal||(e.type===Mb.File||e.type===Mb.Folder||e.type===Mb.Git)&&e.value)&&(0,us.jsx)("i",{className:"codicon codicon-add",style:{fontSize:"14px",flexShrink:0,marginLeft:8}})]},`${e.type}-${e.value||t}`)))})})},jb=["blackbox-base","blackbox-pro","blackbox-pro-plus","claude","anthropic/claude-sonnet-4","google/gemini-2.5-pro-preview","claude-sonnet-3-7","deepseek-r1","deepseek-v3","llama-4-maverick-17b-128e-instruct-fp8","grok-3-beta","gemini-2.5-pro-preview-03-25","o3-mini","o1"],Lb={"blackbox-base":{modelId:"custom/blackbox-base",modelName:"Blackbox Base",apiProvider:"blackbox-base",icon:"sparkle"},"blackbox-pro":{modelId:"custom/blackbox-pro",modelName:"Blackbox Pro",apiProvider:"blackbox-pro",icon:"rocket"},claude:{modelId:"claude-3-5-sonnet-20241022",modelName:"Claude Sonnet 3.5",apiProvider:"sonnet",icon:"hubot"},"deepseek-v3":{modelId:"deepseek-v3",modelName:"Deepseek-V3",apiProvider:"deepseek-v3",icon:"zap"},"deepseek-r1":{modelId:"deepseek-r1",modelName:"Deepseek-R1",apiProvider:"deepseek-r1",icon:"light-bulb"},"claude-sonnet-3-7":{modelId:"claude-3-7-sonnet-20250219",modelName:"Claude Sonnet 3.7",apiProvider:"sonnet",icon:"hubot"},"blackbox-pro-plus":{modelId:"blackbox-pro-plus",modelName:"Blackbox Pro Plus",apiProvider:"sonnet",icon:"hubot"},"llama-4-maverick-17b-128e-instruct-fp8":{modelId:"llama-4-maverick-17b-128e-instruct-fp8",modelName:"Llama 4 Maverick",apiProvider:"llama-4-maverick-17b-128e-instruct-fp8",icon:"sparkle"},"anthropic/claude-sonnet-4":{modelId:"anthropic/claude-sonnet-4",modelName:"Claude Sonnet 4",apiProvider:"anthropic/claude-sonnet-4",icon:"sparkle"},"google/gemini-2.5-pro-preview":{modelId:"google/gemini-2.5-pro-preview",modelName:"Gemini 2.5 Pro Preview 06-05",apiProvider:"google/gemini-2.5-pro-preview",icon:"sparkle"},"o3-mini":{modelId:"o3-mini",modelName:"O3 Mini",apiProvider:"o3-mini",icon:"sparkle"},o1:{modelId:"o1",modelName:"OpenAI o1",apiProvider:"o1",icon:"sparkle"},"grok-3-beta":{modelId:"grok-3-beta",modelName:"Grok 3 Beta",apiProvider:"grok-3-beta",icon:"sparkle"},"gemini-2.5-pro-preview-03-25":{modelId:"gemini-2.5-pro-preview-03-25",modelName:"Gemini 2.5 Pro Preview",apiProvider:"gemini-2.5-pro-preview-03-25",icon:"sparkle"}},Fb=(Lb["blackbox-base"].icon,Lb["blackbox-pro"].icon,Lb.claude.icon,Lb["deepseek-v3"].icon,Lb["deepseek-r1"].icon,Lb["claude-sonnet-3-7"].icon,Lb["llama-4-maverick-17b-128e-instruct-fp8"].icon,Lb["anthropic/claude-sonnet-4"].icon,Lb["google/gemini-2.5-pro-preview"].icon,Lb["o3-mini"].icon,Lb.o1.icon,Lb["blackbox-pro-plus"].icon,Lb["grok-3-beta"].icon,Lb["gemini-2.5-pro-preview-03-25"].icon,"undefined"!==typeof window&&localStorage.getItem("blackbox_redeem_success"),e=>{let{onSelect:n,onMouseDown:i,selectedIndex:r,setSelectedIndex:o,upgradeForAccess:s,apiConfiguration:a,setApiConfiguration:l}=e;const c=(0,t.useRef)(null),u=(0,t.useCallback)((e=>{const t="true"===localStorage.getItem("blackbox_redeem_success");if(!t&&"blackbox-base"!==e)return void s();const i=Lb[e];if(!i)return;n(e);const r={...a,apiProvider:i.apiProvider,apiModelId:i.modelId,hasRedeemedCoupon:t};l(r),hs.postMessage({type:"apiConfiguration",apiConfiguration:r})}),[a,s,l]);return(0,t.useEffect)((()=>{if(c.current){const e=c.current.children[r];if(e){const t=c.current.getBoundingClientRect(),n=e.getBoundingClientRect();n.bottom>t.bottom?c.current.scrollTop+=n.bottom-t.bottom:n.top<t.top&&(c.current.scrollTop-=t.top-n.top)}}}),[r]),(0,us.jsx)("div",{style:{position:"absolute",bottom:"calc(100% - 10px)",left:15,right:15,overflowX:"hidden"},onMouseDown:i,children:(0,us.jsx)("div",{ref:c,style:{backgroundColor:"var(--vscode-dropdown-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.25)",zIndex:1e3,display:"flex",flexDirection:"column",maxHeight:"400px",overflowY:"auto"},children:jb.map(((e,t)=>(0,us.jsx)("div",{onClick:()=>{u(e)},style:{padding:"8px 12px",cursor:"pointer",color:t===r?"var(--background)":"var(--vscode-dropdown-foreground)",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex",alignItems:"center",backgroundColor:t===r?"var(--vscode-list-activeSelectionBackground)":""},onMouseEnter:()=>o(t),children:(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:(0,us.jsx)("span",{children:Lb[e].modelName})})},e)))})})}),Bb=e=>{let{type:n,items:i,selectedRepo:r,onSelect:o,onMouseDown:s,selectedIndex:a,setSelectedIndex:l}=e;const c=(0,t.useRef)(null),u=(0,t.useCallback)((e=>{o(e)}),[o]);(0,t.useEffect)((()=>{if(c.current){const e=c.current.children[a];if(e){const t=c.current.getBoundingClientRect(),n=e.getBoundingClientRect();n.bottom>t.bottom?c.current.scrollTop+=n.bottom-t.bottom:n.top<t.top&&(c.current.scrollTop-=t.top-n.top)}}}),[a]);const[d,h]=(0,t.useState)(""),p=i.filter((e=>e.name.toLowerCase().includes(d.toLowerCase())));return(0,us.jsx)("div",{style:{position:"absolute",bottom:"calc(100% - 10px)",left:15,right:15,overflowX:"hidden"},onMouseDown:s,children:(0,us.jsxs)("div",{ref:c,style:{backgroundColor:"var(--vscode-dropdown-background)",border:"1px solid var(--vscode-editorGroup-border)",borderRadius:"3px",boxShadow:"0 4px 10px rgba(0, 0, 0, 0.25)",zIndex:1e3,display:"flex",flexDirection:"column",maxHeight:"400px",overflowY:"auto"},children:[(0,us.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid var(--vscode-editorGroup-border)"},children:"repo"===n?"Select Repository:":`Select Branch for ${r}:`}),(0,us.jsx)("div",{style:{padding:"8px 12px",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex"},children:(0,us.jsx)("input",{type:"text",value:d,onChange:e=>{h(e.target.value),l(0)},placeholder:`Search ${n}s...`,style:{width:"100%",padding:"4px 8px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",border:"1px solid var(--vscode-input-border)",borderRadius:"2px",outline:"none"}})}),p.map(((e,t)=>(0,us.jsx)("div",{onClick:()=>u(e),style:{padding:"8px 12px",cursor:"pointer",color:t===a?"var(--background)":"var(--vscode-dropdown-foreground)",borderBottom:"1px solid var(--vscode-editorGroup-border)",display:"flex",alignItems:"center",backgroundColor:t===a?"var(--vscode-list-activeSelectionBackground)":""},onMouseEnter:()=>l(t),children:(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",flex:1,minWidth:0,overflow:"hidden"},children:(0,us.jsx)("span",{children:e.name})})},e.name)))]})})},Ub=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.flatMap((e=>Array.isArray(e)?e:[e])).filter((e=>"string"===typeof e||"number"===typeof e)).join(" ")};function $b(e){let{className:t,...n}=e;return(0,us.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1,strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-audio-lines-icon lucide-audio-lines",...n,children:[(0,us.jsx)("path",{d:"M2 10v3"}),(0,us.jsx)("path",{d:"M6 6v11"}),(0,us.jsx)("path",{d:"M10 3v18"}),(0,us.jsx)("path",{d:"M14 8v7"}),(0,us.jsx)("path",{d:"M18 5v13"}),(0,us.jsx)("path",{d:"M22 10v3"})]})}function zb(e){let{className:t,...n}=e;return(0,us.jsx)("svg",{fill:"none",stroke:"currentColor",strokeWidth:"1.5",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:Ub("size-5 animate-spin stroke-zinc-400",t),...n,children:(0,us.jsx)("path",{d:"M12 3v3m6.366-.366-2.12 2.12M21 12h-3m.366 6.366-2.12-2.12M12 21v-3m-6.366.366 2.12-2.12M3 12h3m-.366-6.366 2.12 2.12"})})}function Vb(e){let{options:n,active:i,onChange:r,disabled:o=!1}=e;n.length;const s=(0,t.useMemo)((()=>Math.max(0,n.findIndex((e=>e.value===i)))),[n,i]),[a,l]=(0,t.useState)([]),c=(0,t.useRef)([]);(0,t.useLayoutEffect)((()=>{c.current=c.current.slice(0,n.length);const e=c.current.map((e=>{const t=null===e||void 0===e?void 0:e.getBoundingClientRect();return t?t.width:0}));l(e)}),[n]);const u=(0,t.useCallback)((e=>()=>{o||r(e)}),[r,o]);return(0,us.jsxs)(Hb,{disabled:o,children:[(0,us.jsx)(Wb,{style:{width:a[s]||0,transform:`translateX(${a.slice(0,s).reduce(((e,t)=>e+t),0)}px)`,transition:"width 0.2s ease, transform 0.2s ease"}}),n.map(((e,t)=>{let{label:n,value:r}=e;return(0,us.jsx)(qb,{ref:e=>c.current[t]=e,isActive:r===i,style:{width:"fit"},onClick:u(r),children:n},t)}))]})}const Hb=cp.div`
	position: relative;
	display: flex;
	background-color: var(--vscode-editor-background);
	border: 1px solid var(--vscode-input-border);
	border-radius: 12px;
	overflow: hidden;
	cursor: ${e=>{let{disabled:t}=e;return t?"not-allowed":"pointer"}};
	opacity: ${e=>{let{disabled:t}=e;return t?.5:1}};
`,qb=cp.div`
	padding: 2px 8px;
	text-align: center;
	font-size: 12px;
	color: ${e=>{let{isActive:t}=e;return t?"var(--vscode-badge-foreground)":"var(--vscode-input-foreground)"}};
	transition: color 0.2s ease;
	z-index: 1;
	&:hover {
		background-color: ${e=>{let{isActive:t}=e;return t?"transparent":"var(--vscode-toolbar-hoverBackground)"}};
	}
`,Wb=cp.div`
	position: absolute;
	top: 0; bottom: 0; left: 0;
	background-color: var(--vscode-badge-background);
	transition: transform 0.2s ease;
	z-index: 0;
`,Gb=(cp.div`
	padding: 8px;
	cursor: pointer;
	&:hover {
		background-color: var(--vscode-list-hoverBackground);
	}
`,cp.div`
	display: flex;
	align-items: center;
	justify-content: space-between;
	margin-top: -5px;
	padding: 0px 15px 5px 15px;
`),Kb=(cp.div`
	position: absolute;
	height: 100%;
	width: 50%;
	background-color: var(--vscode-badge-background);
	transition: transform 0.2s ease;
	transform: translateX(${e=>e.isAuto?"100%":"0%"});
`,(0,t.forwardRef)(((e,n)=>{let{inputValue:i,setInputValue:r,textAreaDisabled:o,placeholderText:s,setSelectedModel:a=(()=>null),showModelMenu:l=!1,setShowModelMenu:c=(()=>null),selectedImages:u=[],setSelectedImages:h,selectedVideos:p=[],setSelectedVideos:f,showVoiceAssistant:m,setShowVoiceAssistant:g,onSend:v,onSelectImages:b,hideFileUpload:y=!1,shouldDisableImages:x=!0,onHeightChange:k,onModelChange:w,upgradeForAccess:S=(()=>{}),isAutoApprove:C=!1,setIsAutoApprove:T=(()=>{}),apiConfiguration:E,setApiConfiguration:_,isMediaLoading:I=!1,gitHubToken:R,setGitHubToken:P,selectedRepo:A,setSelectedRepo:O,selectedBranch:M,setSelectedBranch:N,showGitHubRepoMenu:D,setShowGitHubRepoMenu:j,showGitHubBranchMenu:L,setShowGitHubBranchMenu:F}=e;const{filePaths:B,chatSettings:U}=wp(),[$,z]=(0,t.useState)(!1),[V,H]=(0,t.useState)([]),[q,W]=(0,t.useState)([]),[G,K]=(0,t.useState)([]),[Q,X]=(0,t.useState)(!1),[Y,J]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(0),[te,ne]=(0,t.useState)(void 0),[ie,re]=(0,t.useState)(!1),[oe,se]=(0,t.useState)(0),[ae,le]=(0,t.useState)(""),ce=(0,t.useRef)(null),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(0),fe=(0,t.useRef)(null),me=(0,t.useRef)(null),[ge,ve]=(0,t.useState)(-1),[be,ye]=(0,t.useState)(null),[xe,ke]=(0,t.useState)(!1),we=(0,t.useRef)(null),[Se,Ce]=(0,t.useState)(!1),Te=(0,t.useRef)(null),[Ee,_e]=(0,t.useState)(!1),[Ie,Re]=(0,t.useState)(null),Pe=(0,t.useRef)(null),Ae=(0,t.useRef)(null),Oe=(0,t.useRef)(null);(0,t.useEffect)((()=>{(be===Mb.Git||/^[a-f0-9]+$/i.test(ae))&&hs.postMessage({type:"searchCommits",text:ae||""})}),[be,ae]);const Me=(0,t.useCallback)((e=>{const t=e.data;switch(t.type){case"commitSearchResults":{var n;const e=(null===(n=t.commits)||void 0===n?void 0:n.map((e=>({type:Mb.Git,value:e.hash,label:e.subject,description:`${e.shortHash} by ${e.author} on ${e.date}`}))))||[];H(e);break}case"gitConnected":null===j||void 0===j||j(!0),t.value?(null===P||void 0===P||P(t.value),localStorage.setItem("github_token",t.value),hs.postMessage({type:"fetchGitHubRepos",value:t.value||""})):t.error&&console.error("Couldn't connect with git",t.error);break;case"githubRepos":var i;W((null===(i=t.repos)||void 0===i?void 0:i.map((e=>({name:e.full_name}))))||[]);break;case"githubBranches":var r;K((null===(r=t.branches)||void 0===r?void 0:r.map((e=>({name:e.name}))))||[])}}),[]);d("message",Me);const Ne=(0,t.useMemo)((()=>[{type:Mb.Problems,value:"problems"},{type:Mb.Terminal,value:"terminal"},...V,...B.map((e=>"/"+e)).map((e=>({type:e.endsWith("/")?Mb.Folder:Mb.File,value:e})))]),[B,V]);(0,t.useEffect)((()=>{const e=e=>{Pe.current&&!Pe.current.contains(e.target)&&re(!1),fe.current&&!fe.current.contains(e.target)&&c(!1),Ae.current&&!Ae.current.contains(e.target)&&(null===j||void 0===j||j(!1)),Oe.current&&!Oe.current.contains(e.target)&&(null===F||void 0===F||F(!1))};return(ie||l||D||L)&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[ie,re,l,c,D,L]);const De=(0,t.useCallback)(((e,t)=>{if(e!==Mb.NoResults){if((e===Mb.File||e===Mb.Folder||e===Mb.Git)&&!t)return ye(e),le(""),void ve(0);if(re(!1),ye(null),ce.current){let n=t||"";e===Mb.URL||e===Mb.File||e===Mb.Folder?n=t||"":e===Mb.Problems?n="problems":e===Mb.Terminal?n="terminal":e===Mb.Git&&(n=t||"");const{newValue:i,mentionIndex:o}=function(e,t,n){const i=e.slice(0,t),r=e.slice(t),o=i.lastIndexOf("@");let s,a;-1!==o?(s=e.slice(0,o)+"@"+n+" "+r.replace(/^[^\s]*/,""),a=o):(s=i+"@"+n+" "+r,a=t);return{newValue:s,mentionIndex:a}}(ce.current.value,oe,n);r(i);const s=i.indexOf(" ",o+n.length)+1;se(s),Re(s),setTimeout((()=>{ce.current&&(ce.current.blur(),ce.current.focus())}),0)}}}),[r,oe]),je=(0,t.useCallback)((e=>{var t,n;if(l){if("Escape"===e.key)return void c(!1);if("ArrowUp"===e.key||"ArrowDown"===e.key)return e.preventDefault(),void pe((t=>(t+("ArrowUp"===e.key?-1:1)+jb.length)%jb.length));if("Enter"===e.key||"Tab"===e.key){e.preventDefault();const t=jb[he];return a(t),c(!1),void(null===w||void 0===w||w(t))}}if(ie){if("Escape"===e.key)return ye(null),void ve(3);if("ArrowUp"===e.key||"ArrowDown"===e.key)return e.preventDefault(),void ve((t=>{const n="ArrowUp"===e.key?-1:1,i=Nb(ae,be,Ne);if(0===i.length)return t;const r=i.filter((e=>e.type!==Mb.URL&&e.type!==Mb.NoResults));if(0===r.length)return-1;const o=(r.findIndex((e=>e===i[t]))+n+r.length)%r.length;return i.findIndex((e=>e===r[o]))}));if(("Enter"===e.key||"Tab"===e.key)&&-1!==ge){e.preventDefault();const t=Nb(ae,be,Ne)[ge];return void(t&&t.type!==Mb.URL&&t.type!==Mb.NoResults&&De(t.type,t.value))}}const o=null!==(t=null===(n=e.nativeEvent)||void 0===n?void 0:n.isComposing)&&void 0!==t&&t;if("Enter"!==e.key||e.shiftKey||o||(e.preventDefault(),v()),"Backspace"===e.key&&!o){const t=i[oe-1],n=i[oe+1],o=" "===n||"\n"===n||"\r\n"===n;if((" "===t||"\n"===t||"\r\n"===t)&&i.slice(0,oe-1).match(new RegExp(av.source+"$"))){const t=oe-1;var s;if(!o)e.preventDefault(),null===(s=ce.current)||void 0===s||s.setSelectionRange(t,t),se(t);se(t),_e(!0)}else if(Ee){const{newText:t,newPosition:n}=function(e,t){const n=e.slice(0,t),i=e.slice(t),r=n.match(new RegExp(av.source+"$"));if(r)return{newText:e.slice(0,t-r[0].length)+i.replace(" ",""),newPosition:t-r[0].length};return{newText:e,newPosition:t}}(i,oe);t!==i&&(e.preventDefault(),r(t),Re(n)),_e(!1),re(!1)}else _e(!1)}}),[v,l,ie,c,he,a,w,ge,ae,be,Ne,De,i,oe,Ee,r]);(0,t.useCallback)((e=>{if(o)return;localStorage.getItem("blackbox_redeem_success")||"act"!==U.mode?(hs.postMessage({type:"chatSettings",chatSettings:{mode:e}}),setTimeout((()=>{var e;return null===(e=ce.current)||void 0===e?void 0:e.focus()}),100)):S()}),[U.mode,o,S]),(0,t.useMemo)((()=>{switch(U.mode){case"act":return 1;case"remote":return 2;default:return 0}}),[U.mode]);(0,t.useLayoutEffect)((()=>{null!==Ie&&ce.current&&(ce.current.setSelectionRange(Ie,Ie),Re(null))}),[i,Ie]);const Le=(0,t.useCallback)((e=>{const t=e.target.value,n=e.target.selectionStart;r(t),se(n);const i=function(e,t){const n=e.slice(0,t),i=n.lastIndexOf("@");if(-1===i)return!1;const r=n.slice(i+1);return!/\s/.test(r)&&!r.toLowerCase().startsWith("http")&&!r.toLowerCase().startsWith("problems")&&!r.toLowerCase().startsWith("terminal")}(t,n);if(re(i),i){const e=t.lastIndexOf("@",n-1),i=t.slice(e+1,n);le(i),i.length>0?ve(0):ve(3)}else le(""),ve(-1)}),[r]);(0,t.useEffect)((()=>{ie||ye(null)}),[ie]);const Fe=(0,t.useCallback)((()=>{ue||re(!1),X(!1)}),[ue]),Be=(0,t.useCallback)((async e=>{const t=e.clipboardData.items,n=e.clipboardData.getData("text");if(/^\S+:\/\/\S+$/.test(n.trim())){e.preventDefault();const t=n.trim(),o=i.slice(0,oe)+t+" "+i.slice(oe);r(o);const s=oe+t.length+1;return se(s),Re(s),re(!1),void setTimeout((()=>{ce.current&&(ce.current.blur(),ce.current.focus())}),0)}const o=["png","jpeg","webp"],s=Array.from(t).filter((e=>{const[t,n]=e.type.split("/");return"image"===t&&o.includes(n)}));if(!x&&s.length>0){e.preventDefault();const t=s.map((e=>new Promise((t=>{const n=e.getAsFile();if(!n)return void t(null);const i=new FileReader;i.onloadend=()=>{if(i.error)console.error("Error reading file:",i.error),t(null);else{const e=i.result;t("string"===typeof e?e:null)}},i.readAsDataURL(n)})))),n=(await Promise.all(t)).filter((e=>null!==e));n.length>0?h&&h((e=>[...e,...n].slice(0,by))):console.warn("No valid images were processed")}}),[x,h,oe,r,i]),Ue=(0,t.useCallback)((e=>{ee(e)}),[]);(0,t.useEffect)((()=>{0===u.length&&ee(0)}),[u]);const $e=(0,t.useCallback)((()=>{de(!0)}),[]),ze=(0,t.useCallback)((()=>{if(!ce.current||!me.current)return;const e=ce.current.value;me.current.innerHTML=e.replace(/\n$/,"\n\n").replace(/[<>&]/g,(e=>({"<":"&lt;",">":"&gt;","&":"&amp;"}[e]||e))).replace(lv,'<mark class="mention-context-textarea-highlight">$&</mark>'),me.current.scrollTop=ce.current.scrollTop,me.current.scrollLeft=ce.current.scrollLeft}),[]);(0,t.useLayoutEffect)((()=>{ze()}),[i,ze]);const Ve=(0,t.useCallback)((()=>{ce.current&&se(ce.current.selectionStart)}),[]),He=(0,t.useCallback)((e=>{["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Home","End"].includes(e.key)&&Ve()}),[Ve]);(0,t.useEffect)((()=>{const e=e=>{const t=e.data;"copyFileContent"===t.type&&t.content&&(r(t.content),null!==ce&&void 0!==ce&&ce.current&&(ce.current.focus(),setTimeout((()=>{ce.current&&(ce.current.scrollTo({top:ce.current.scrollHeight,behavior:"smooth"}),setTimeout((()=>{ce.current&&ce.current.scrollTo({top:ce.current.scrollHeight,behavior:"smooth"})}),300))}),0)),se(t.content.length))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}}),[]);const qe=(0,t.useCallback)((()=>{Ce(!0),Te.current&&clearTimeout(Te.current),Te.current=setTimeout((()=>{Ce(!1),Te.current=null}),3e3)}),[]),We=e=>Promise.all(e.map((e=>new Promise((t=>{const n=new FileReader;n.onloadend=async()=>{if(n.error)console.error("Error reading file:",n.error),t(null);else{const r=n.result;if("string"===typeof r)try{await(e=r,new Promise(((t,n)=>{const i=new Image;i.onload=()=>{i.naturalWidth>7500||i.naturalHeight>7500?n(new Error("Image dimensions exceed maximum allowed size of 7500px.")):t({width:i.naturalWidth,height:i.naturalHeight})},i.onerror=e=>{console.error("Failed to load image for dimension check:",e),n(new Error("Failed to load image to check dimensions."))},i.src=e}))),t(r)}catch(i){console.warn(i.message),qe(),t(null)}else t(null)}var e},n.readAsDataURL(e)})))));return(0,us.jsxs)("div",{onMouseEnter:e=>{e.preventDefault(),z(!0)},onMouseLeave:e=>{e.preventDefault(),z(!1)},children:[(0,us.jsxs)("div",{style:{padding:"5px 15px 10px 15px",opacity:o?.5:1,position:"relative",display:"flex"},onDrop:async e=>{e.preventDefault(),J(!1),ke(!1),we.current&&(clearTimeout(we.current),we.current=null);let t=[];const n=e.dataTransfer.getData("resourceurls"),o=e.dataTransfer.getData("application/vnd.code.uri-list");if(n)try{t=JSON.parse(n),t=t.map((e=>decodeURIComponent(e)))}catch(p){console.error("Failed to parse resourceurls JSON:",p),t=[]}0===t.length&&o&&(t=o.split("\n").map((e=>e.trim())));const s=t.filter((e=>e&&(e.startsWith("vscode-file:")||e.startsWith("file:"))));if(s.length>0){const e=ce.current?ce.current.selectionStart:i.length,t=s[0],n=decodeURIComponent(t.replace(/^(vscode-file|file):\/\//,"")),o=[...B].sort(((e,t)=>t.length-e.length)),a=o.find((e=>n.endsWith("/"+e)));if(a){const{newValue:t,mentionIndex:n}=function(e,t,n){return{newValue:e.slice(0,t)+"@"+n+" "+e.slice(t),mentionIndex:t}}(i,e,"/"+a);r(t);const o=n+a.length+2;Re(o)}return}const a=e.dataTransfer.getData("text");if(a)return void(e=>{const t=i.slice(0,oe)+e+i.slice(oe);r(t);const n=oe+e.length;se(n),Re(n)})(a);const l=Array.from(e.dataTransfer.files),c=["png","jpeg","webp"],u=l.filter((e=>{const[t,n]=e.type.split("/");return"image"===t&&c.includes(n)}));if(x||0===u.length)return;const d=(await We(u)).filter((e=>null!==e));d.length>0?null===h||void 0===h||h((e=>[...e,...d].slice(0,by))):console.warn("No valid images were processed")},onDragOver:e=>{e.preventDefault(),Y||J(!0)},onDragEnter:e=>{if(e.preventDefault(),J(!0),e.dataTransfer.types.includes("Files")){Array.from(e.dataTransfer.items).some((e=>{if("file"===e.kind){return"image"!==e.type.split("/")[0]}return!1}))&&(ke(!0),we.current&&clearTimeout(we.current),we.current=setTimeout((()=>{ke(!1),we.current=null}),3e3))}},onDragLeave:e=>{e.preventDefault();e.currentTarget.contains(e.relatedTarget)||J(!1)},children:[Se&&(0,us.jsx)("div",{style:{position:"absolute",inset:"10px 15px",backgroundColor:"rgba(var(--vscode-errorForeground-rgb), 0.1)",border:"2px solid var(--vscode-errorForeground)",borderRadius:2,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,pointerEvents:"none"},children:(0,us.jsx)("span",{style:{color:"var(--vscode-errorForeground)",fontWeight:"bold",fontSize:"12px",textAlign:"center"},children:"Image dimensions exceed 7500px"})}),xe&&(0,us.jsx)("div",{style:{position:"absolute",inset:"10px 15px",backgroundColor:"rgba(var(--vscode-foreground-rgb), 0.1)",border:"2px solid var(--vscode-foreground)",borderRadius:6,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,pointerEvents:"none"},children:(0,us.jsx)("span",{style:{color:"var(--vscode-foreground)",fontWeight:"bold",fontSize:"12px"},children:"File Type Not Supported"})}),l&&(0,us.jsx)("div",{ref:fe,children:(0,us.jsx)(Fb,{onSelect:e=>{a(e),c(!1),null===w||void 0===w||w(e),pv(fv,"",{tag:"model_selected",type:e})},onMouseDown:()=>de(!0),selectedIndex:he,setSelectedIndex:pe,upgradeForAccess:S,apiConfiguration:E,setApiConfiguration:_})}),D&&(0,us.jsx)("div",{ref:Ae,children:(0,us.jsx)(Bb,{type:"repo",items:q,onSelect:e=>{null===O||void 0===O||O(e.name),null===j||void 0===j||j(!1),null===F||void 0===F||F(!0),hs.postMessage({type:"fetchGitHubBranches",data:{token:R,repo:e.name}})},onMouseDown:()=>de(!0),selectedIndex:ge,setSelectedIndex:ve})}),L&&(0,us.jsx)("div",{ref:Oe,children:(0,us.jsx)(Bb,{type:"branch",items:G,selectedRepo:A,onSelect:e=>{if(null===N||void 0===N||N(e.name),null===F||void 0===F||F(!1),R&&A&&e.name){const t={...E,gitInfo:{token:R,repo:A,branch:e.name}};_(t),hs.postMessage({type:"apiConfiguration",apiConfiguration:t})}},onMouseDown:()=>de(!0),selectedIndex:ge,setSelectedIndex:ve})}),ie&&(0,us.jsx)("div",{ref:Pe,children:(0,us.jsx)(Db,{onSelect:De,searchQuery:ae,onMouseDown:$e,selectedIndex:ge,setSelectedIndex:ve,selectedType:be,queryItems:Ne})}),!Q&&(0,us.jsx)("div",{style:{position:"absolute",inset:"5px 15px 10px 15px",border:"1px solid var(--vscode-input-border)",borderRadius:12,pointerEvents:"none",zIndex:5}}),(0,us.jsx)("div",{ref:me,style:{position:"absolute",top:5,left:15,right:15,bottom:10,pointerEvents:"none",whiteSpace:"pre-wrap",wordWrap:"break-word",color:"transparent",overflow:"hidden",backgroundColor:"var(--vscode-toolbar-hoverBackground)",opacity:.8,fontFamily:"var(--vscode-font-family)",fontSize:"var(--vscode-editor-font-size)",lineHeight:"var(--vscode-editor-line-height)",borderRadius:12,borderLeft:0,borderRight:0,borderTop:0,borderColor:"transparent",borderBottom:`${Z+6}px solid transparent`,padding:"9px 85px 3px 9px"}}),(0,us.jsx)(Uv,{ref:e=>{"function"===typeof n?n(e):n&&(n.current=e),ce.current=e},value:i,disabled:o,onChange:e=>{Le(e),ze()},onKeyDown:je,onKeyUp:He,onFocus:()=>X(!0),onBlur:Fe,onPaste:Be,onSelect:Ve,onMouseUp:Ve,onHeightChange:e=>{(void 0===te||e<te)&&ne(e),null===k||void 0===k||k(e)},placeholder:s,maxRows:10,minRows:5,autoFocus:!0,style:{width:"100%",boxSizing:"border-box",backgroundColor:"transparent",color:"var(--vscode-input-foreground)",borderRadius:12,fontFamily:"var(--vscode-font-family)",fontSize:"var(--vscode-editor-font-size)",lineHeight:"var(--vscode-editor-line-height)",resize:"none",overflowX:"hidden",overflowY:"scroll",scrollbarWidth:"none",borderLeft:0,borderRight:0,borderTop:0,borderBottom:`${Z+6}px solid transparent`,borderColor:"transparent",padding:"9px 85px 3px 9px",cursor:o?"not-allowed":void 0,flex:1,zIndex:1,outline:Y&&!xe?"2px dashed var(--vscode-focusBorder)":"none",outlineOffset:Y&&!xe?"1px":"0px"},onScroll:()=>ze()}),u.length>0&&(0,us.jsx)(rv,{images:u,setImages:h,onHeightChange:Ue,style:{position:"absolute",paddingTop:4,bottom:14,left:22,right:67,zIndex:2}}),p.length>0&&(0,us.jsx)(rv,{images:[p[0].frameDataUrls[0]],setImages:f,onHeightChange:Ue,style:{position:"absolute",paddingTop:4,bottom:14,left:22,right:67,zIndex:2}}),I&&(0,us.jsx)("div",{style:{position:"absolute",bottom:14,left:22,width:24,height:24,zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,us.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin",style:{fontSize:24,color:"var(--vscode-descriptionForeground)"}})}),(0,us.jsx)("div",{style:{position:"absolute",right:23,display:"flex",alignItems:"flex-center",height:te||31,bottom:9.5,zIndex:2},children:(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,us.jsx)("div",{style:{marginRight:5.5},className:"input-icon-button "+(o?"disabled":""),onClick:async()=>{localStorage.getItem("blackbox_redeem_success")?!m&&g&&g(!0):S()},children:(0,us.jsx)($b,{style:{width:"1.1rem",height:"1.1rem"}})}),!y&&(0,us.jsx)("div",{className:`input-icon-button ${o?"disabled":""} codicon codicon-file-directory-create`,onClick:()=>{if(!o&&ce.current){const e=ce.current.selectionStart,t=i.slice(0,e)+"@"+i.slice(e);r(t),se(e+1),re(!0),le(""),ve(3),ce.current.focus()}},style:{marginRight:5.5,fontSize:16.5}}),b&&(0,us.jsx)("div",{className:`input-icon-button ${x?"disabled":""} codicon codicon-device-camera`,onClick:()=>{x||b()},style:{marginRight:5.5,fontSize:16.5}}),(0,us.jsx)("div",{className:`input-icon-button ${o?"disabled":""} codicon codicon-send`,onClick:()=>{o||v()},style:{fontSize:15}})]})})]}),(0,us.jsxs)(Gb,{children:[(0,us.jsx)(Vb,{options:[{label:"MCP",value:"mcp"},{label:"Local",value:"act"},{label:"Remote",value:"remote"}],active:U.mode,disabled:o,onChange:e=>{"true"===localStorage.getItem("blackbox_redeem_success")||"remote"!==e?hs.postMessage({type:"chatSettings",chatSettings:{mode:e}}):S()}}),$&&(0,us.jsx)("p",{style:{fontSize:"10px",color:"var(--vscode-descriptionForeground)",margin:0},children:"hold Shift to drop files"}),(0,us.jsx)(Vb,{options:[{label:"Manual",value:!1},{label:"Auto",value:!0}],active:C,disabled:!1,onChange:async()=>{localStorage.getItem("blackbox_redeem_success")?T(!C):S()}})]})]})}))),Qb=Kb;let Xb="https://invite-server.onrender.com";function Yb(){let e=localStorage.getItem("blackbox_userId");return e||(e=crypto.randomUUID(),localStorage.setItem("blackbox_userId",e)),e}const Jb=cp.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px;
  border-bottom: 1px solid rgba(128, 128, 128, 0.1);

  &:last-child {
    border-bottom: none;
  }
`,Zb=e=>{let{email:t,isSelected:n,onToggle:i}=e;return(0,us.jsx)(Jb,{children:(0,us.jsx)(Zo,{checked:n,onChange:e=>{e.preventDefault(),e.stopPropagation(),i()},children:t})})},ey=e=>{try{null===e||void 0===e||e.push("gisele@blackbox.ai");const t=encodeURIComponent("Your Invite to BLACKBOX.AI!"),n=encodeURIComponent("I'm excited to share a referral to BLACKBOX.AI, the BEST AI Coding Agent ever made. You can fly through your coding tasks faster then ever. It's  packed with powerful AI that helps you autonomously go through the full implementation without you having to break a sweat, create new projects, fix bugs, add new features, run terminal commands and more!\n\nI love the product and I think you will too! I've been using it on VSCode https://marketplace.visualstudio.com/items?itemName=Blackboxapp.blackbox!\n\nClick here https://www.blackbox.ai to get started with BLACKBOXAI.\n\nI've cc'ed Gisele from their team to help :)");return`https://mail.google.com/mail/u/0/?fs=1&su=${t}&body=${n}&tf=cm${null!==e&&void 0!==e&&e.length?`&bcc=${e.join(",")}`:""}`}catch(t){return console.error(t),""}},ty=cp.div`
  padding: 16px;
  border-top: 1px solid var(--vscode-panel-border);
  margin-top: auto;
`,ny=cp.div`
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
`,iy=cp.div`
  background-color: var(--vscode-editor-background);
  border-radius: 4px;
  width: 90%;
  max-width: 500px;
  height: 500px;
  display: flex;
  flex-direction: column;
`,ry=cp.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px;
  border-bottom: 1px solid var(--vscode-panel-border);

  h3 {
    margin: 0;
    color: var(--vscode-foreground);
  }
`,oy=cp.button`
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: var(--vscode-foreground);
  padding: 0;
  
  &:hover {
    opacity: 0.8;
  }
`,sy=cp.div`
  padding: 16px;
  overflow-y: auto;
  flex: 1;
  display: flex;
  flex-direction: column;
  scrollbar-width: none;
  -ms-overflow-style: none;
  
  &::-webkit-scrollbar {
    display: none;
  }
`,ay=cp.div`
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  flex: 1;
  gap: 12px;
  color: var(--vscode-descriptionForeground);

  .codicon {
    font-size: 24px;
  }
`,ly=cp.div`
  text-align: center;
  color: var(--vscode-descriptionForeground);
  padding: 20px;
`,cy=e=>{let{onClose:n}=e;const[i,r]=(0,t.useState)([]),[o,s]=(0,t.useState)([]),[a,l]=(0,t.useState)(!0);(0,t.useEffect)((()=>{l(!0),hs.postMessage({type:"getGitRepoUsers"});const e=e=>{const t=e.data;if("gitRepoUsers"===t.type&&(r(t.users),s(t.users),l(!1),0===t.users.length)){const e=ey();hs.postMessage({type:"openBrowserLink",text:e}),n()}};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[n]);return(0,us.jsx)(ny,{onClick:n,children:(0,us.jsxs)(iy,{onClick:e=>e.stopPropagation(),children:[(0,us.jsxs)(ry,{children:[(0,us.jsx)("h3",{children:"Repository Collaborators"}),(0,us.jsx)(oy,{onClick:n,children:"\xd7"})]}),(0,us.jsx)(sy,{children:a?(0,us.jsxs)(ay,{children:[(0,us.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin"}),(0,us.jsx)("span",{children:"Loading collaborators..."})]}):0===i.length?(0,us.jsx)(ly,{children:"No collaborators found"}):i.map(((e,t)=>(0,us.jsx)(Zb,{email:e,isSelected:o.includes(e),onToggle:()=>(e=>{s((t=>t.includes(e)?t.filter((t=>t!==e)):[...t,e]))})(e)},t)))}),(0,us.jsx)(ty,{children:(0,us.jsxs)(Jo,{disabled:0===o.length,onClick:()=>{pv(fv,"",{tag:"vscode-invite-sent"});const e=ey(o);hs.postMessage({type:"openBrowserLink",text:e}),n()},style:{width:"100%"},children:["Send Invites (",o.length,")"]})})]})})},uy={gpu_1x_gh200:{instance_type:{name:"gpu_1x_gh200",description:"1x GH200 (96 GB)",gpu_description:"GH200 (96 GB)",price_cents_per_hour:149,specs:{vcpus:64,memory_gib:432,storage_gib:4096,gpus:1}},regions_with_capacity_available:[]},gpu_8x_h100_sxm5:{instance_type:{name:"gpu_8x_h100_sxm5",description:"8x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:2392,specs:{vcpus:208,memory_gib:1800,storage_gib:22528,gpus:8}},regions_with_capacity_available:[{name:"us-south-2",description:"North Texas, USA"}]},gpu_4x_h100_sxm5:{instance_type:{name:"gpu_4x_h100_sxm5",description:"4x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:1236,specs:{vcpus:104,memory_gib:900,storage_gib:11264,gpus:4}},regions_with_capacity_available:[]},gpu_2x_h100_sxm5:{instance_type:{name:"gpu_2x_h100_sxm5",description:"2x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:638,specs:{vcpus:52,memory_gib:450,storage_gib:5632,gpus:2}},regions_with_capacity_available:[{name:"us-south-2",description:"North Texas, USA"}]},gpu_1x_h100_sxm5:{instance_type:{name:"gpu_1x_h100_sxm5",description:"1x H100 (80 GB SXM5)",gpu_description:"H100 (80 GB SXM5)",price_cents_per_hour:329,specs:{vcpus:26,memory_gib:225,storage_gib:2816,gpus:1}},regions_with_capacity_available:[{name:"us-south-2",description:"North Texas, USA"}]},gpu_1x_h100_pcie:{instance_type:{name:"gpu_1x_h100_pcie",description:"1x H100 (80 GB PCIe)",gpu_description:"H100 (80 GB PCIe)",price_cents_per_hour:249,specs:{vcpus:26,memory_gib:200,storage_gib:1024,gpus:1}},regions_with_capacity_available:[{name:"us-west-3",description:"Utah, USA"}]},gpu_8x_a100_80gb_sxm4:{instance_type:{name:"gpu_8x_a100_80gb_sxm4",description:"8x A100 (80 GB SXM4)",gpu_description:"A100 (80 GB SXM4)",price_cents_per_hour:1432,specs:{vcpus:240,memory_gib:1800,storage_gib:20480,gpus:8}},regions_with_capacity_available:[{name:"us-midwest-1",description:"Illinois, USA"},{name:"australia-east-1",description:"Sydney, Australia"},{name:"us-east-1",description:"Virginia, USA"}]},gpu_1x_a10:{instance_type:{name:"gpu_1x_a10",description:"1x A10 (24 GB PCIe)",gpu_description:"A10 (24 GB PCIe)",price_cents_per_hour:75,specs:{vcpus:30,memory_gib:200,storage_gib:1400,gpus:1}},regions_with_capacity_available:[{name:"us-east-1",description:"Virginia, USA"},{name:"us-west-1",description:"California, USA"}]},gpu_1x_rtx6000:{instance_type:{name:"gpu_1x_rtx6000",description:"1x RTX 6000 (24 GB)",gpu_description:"RTX 6000 (24 GB)",price_cents_per_hour:50,specs:{vcpus:14,memory_gib:46,storage_gib:512,gpus:1}},regions_with_capacity_available:[]},gpu_1x_a100:{instance_type:{name:"gpu_1x_a100",description:"1x A100 (40 GB PCIe)",gpu_description:"A100 (40 GB PCIe)",price_cents_per_hour:129,specs:{vcpus:30,memory_gib:200,storage_gib:512,gpus:1}},regions_with_capacity_available:[]},gpu_1x_a100_sxm4:{instance_type:{name:"gpu_1x_a100_sxm4",description:"1x A100 (40 GB SXM4)",gpu_description:"A100 (40 GB SXM4)",price_cents_per_hour:129,specs:{vcpus:30,memory_gib:200,storage_gib:512,gpus:1}},regions_with_capacity_available:[{name:"us-east-1",description:"Virginia, USA"}]},gpu_2x_a100:{instance_type:{name:"gpu_2x_a100",description:"2x A100 (40 GB PCIe)",gpu_description:"A100 (40 GB PCIe)",price_cents_per_hour:258,specs:{vcpus:60,memory_gib:400,storage_gib:1024,gpus:2}},regions_with_capacity_available:[]},gpu_4x_a100:{instance_type:{name:"gpu_4x_a100",description:"4x A100 (40 GB PCIe)",gpu_description:"A100 (40 GB PCIe)",price_cents_per_hour:516,specs:{vcpus:120,memory_gib:800,storage_gib:1024,gpus:4}},regions_with_capacity_available:[]},gpu_8x_a100:{instance_type:{name:"gpu_8x_a100",description:"8x A100 (40 GB SXM4)",gpu_description:"A100 (40 GB SXM4)",price_cents_per_hour:1032,specs:{vcpus:124,memory_gib:1800,storage_gib:6144,gpus:8}},regions_with_capacity_available:[{name:"asia-northeast-2",description:"Tokyo, Japan"},{name:"us-west-2",description:"Arizona, USA"},{name:"europe-central-1",description:"Germany"}]},gpu_1x_a6000:{instance_type:{name:"gpu_1x_a6000",description:"1x A6000 (48 GB)",gpu_description:"A6000 (48 GB)",price_cents_per_hour:80,specs:{vcpus:14,memory_gib:100,storage_gib:200,gpus:1}},regions_with_capacity_available:[]},gpu_2x_a6000:{instance_type:{name:"gpu_2x_a6000",description:"2x A6000 (48 GB)",gpu_description:"A6000 (48 GB)",price_cents_per_hour:160,specs:{vcpus:28,memory_gib:200,storage_gib:1024,gpus:2}},regions_with_capacity_available:[]},gpu_4x_a6000:{instance_type:{name:"gpu_4x_a6000",description:"4x A6000 (48 GB)",gpu_description:"A6000 (48 GB)",price_cents_per_hour:320,specs:{vcpus:56,memory_gib:400,storage_gib:1024,gpus:4}},regions_with_capacity_available:[{name:"us-south-1",description:"Texas, USA"}]},gpu_8x_v100:{instance_type:{name:"gpu_8x_v100",description:"8x Tesla V100 (16 GB)",gpu_description:"Tesla V100 (16 GB)",price_cents_per_hour:440,specs:{vcpus:92,memory_gib:448,storage_gib:6041,gpus:8}},regions_with_capacity_available:[{name:"us-south-1",description:"Texas, USA"}]},cpu_4x_general:{instance_type:{name:"cpu_4x_general",description:"4x CPU General (16 GiB)",gpu_description:"N/A",price_cents_per_hour:20,specs:{vcpus:4,memory_gib:16,storage_gib:100,gpus:0}},regions_with_capacity_available:[]}},dy="https://gpu.blackbox.ai",hy=[{id:"monthly-999",period:"month",price:9.99,requestPriceMultiplier:1},{id:"monthly-1999",period:"month",price:19.99,requestPriceMultiplier:.9},{id:"monthly-4999",period:"month",price:49.99,requestPriceMultiplier:.75},{id:"monthly-9999",period:"month",price:99.99,requestPriceMultiplier:.5}],py=e=>{let{onClose:n,customerId:i,gpuPlans:r=uy,refreshPlans:o}=e;const[s,a]=(0,t.useState)([]),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(null),x={"Content-Type":"application/json","X-Customer-Id":i||"","X-Api-Key":""},k=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{e&&c(!0),d(null);const r=await fetch(`${dy}/api/public/extension/gpu`,{method:"GET",headers:x});if(!r.ok)throw new Error("Failed to fetch instances");const o=await r.json();if(Array.isArray(o)){var t,n,i;const e=localStorage.getItem("SSH_KEY_NAME"),r=o.length>0?null===(t=o[o.length-1])||void 0===t?void 0:t.data:null,s=null!==(n=null===r||void 0===r||null===(i=r.ssh_key_names)||void 0===i?void 0:i[0])&&void 0!==n?n:null;e&&s&&e!==s&&["SSH_KEY_NAME","PUBLIC_SSH_KEY","PRIVATE_SSH_KEY"].forEach((e=>localStorage.removeItem(e))),(async()=>{const e=localStorage.getItem("PRIVATE_SSH_KEY"),t=localStorage.getItem("PUBLIC_SSH_KEY");if(!e||!t)try{var n;const e=await fetch(`${dy}/api/public/extension/gpu/ssh-keys`,{method:"GET",headers:x});if(!e.ok)throw new Error("Failed to fetch SSH keys");const t=await e.json();if(null!==t&&void 0!==t&&null!==(n=t.data)&&void 0!==n&&n[0]){const e=t.data[0];e.name&&localStorage.setItem("SSH_KEY_NAME",e.name),e.public_key&&localStorage.setItem("PUBLIC_SSH_KEY",e.public_key),e.private_key&&localStorage.setItem("PRIVATE_SSH_KEY",e.private_key)}}catch(i){console.error("Error fetching SSH keys:",i)}})(),a(o.map((e=>e.data)))}else a([])}catch(r){d(r instanceof Error?r.message:"Failed to fetch instances")}finally{e&&c(!1)}};(0,t.useEffect)((()=>{const e=s.some((e=>"booting"===e.status||"terminating"===e.status));let t=null;return e&&(t=setInterval((()=>k(!1)),6e4)),()=>{t&&clearInterval(t)}}),[s,x]),(0,t.useEffect)((()=>{k(),o&&o()}),[]);const w=async(e,t)=>{try{if(d(null),"launch"===t){const t=localStorage.getItem("PRIVATE_SSH_KEY"),n=(localStorage.getItem("PUBLIC_SSH_KEY"),s.find((t=>t.id===e)));return void hs.postMessage({type:"openRemoteSSH",data:{sshKey:t,sshKeyName:null===n||void 0===n?void 0:n.ssh_key_names[0],ip:(null===n||void 0===n?void 0:n.ip)||"",instanceId:e}})}if(!(await fetch(`${dy}/api/public/extension/gpu/${e}`,{method:"POST",headers:x,body:JSON.stringify({action:t})})).ok)throw new Error(`Failed to ${t} instance`);k()}catch(n){d(n instanceof Error?n.message:`Failed to ${t} instance`)}};return(0,us.jsx)("div",{className:"modal-overlay",onClick:()=>{g?(v(!1),y(null)):n()},children:(0,us.jsxs)("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[(0,us.jsxs)("div",{className:"modal-header",children:[(0,us.jsx)("h2",{children:h?"Create Instance":"GPU Instances"}),(0,us.jsx)(Jo,{appearance:"icon",onClick:()=>{g?(v(!1),y(null)):n()},children:(0,us.jsx)("i",{className:"codicon codicon-close"})})]}),!l&&!g&&(0,us.jsxs)("div",{className:"modal-header-actions",children:[h&&(0,us.jsx)("div",{className:"back-button-container",children:(0,us.jsxs)(Jo,{onClick:()=>p(!1),children:[(0,us.jsx)("i",{className:"codicon codicon-arrow-left"})," Back"]})}),!h||s.length>0&&(0,us.jsx)("div",{})]}),l?(0,us.jsx)("div",{className:"loading",children:"Loading instances..."}):h||0===s.length?(0,us.jsx)("div",{className:"gpu-list",children:Object.entries(r).filter((e=>{let[t,n]=e;return n.regions_with_capacity_available.length>0})).map((e=>{let[t,n]=e;const{instance_type:i}=n,r=(i.price_cents_per_hour/100).toFixed(2),o=(i.price_cents_per_hour/(100*i.specs.gpus||1)).toFixed(2);return(0,us.jsxs)("div",{className:"gpu-item "+(f?"disabled":""),onClick:()=>(async e=>{f||(y(e),v(!0))})(t),style:{cursor:f?"not-allowed":"pointer",opacity:f?.6:1},children:[(0,us.jsxs)("div",{className:"gpu-info",children:[(0,us.jsx)("div",{className:"gpu-name",children:i.description}),(0,us.jsxs)("div",{className:"gpu-specs",children:[i.specs.vcpus," vCPUs, ",i.specs.memory_gib," GiB RAM, ",(i.specs.storage_gib/1024).toFixed(1)," TiB SSD"]})]}),(0,us.jsxs)("div",{className:"gpu-price",children:["$",r,"/hr",(0,us.jsxs)("div",{className:"price-per-gpu",children:["$",o,"/GPU/hr"]})]})]},t)}))}):(0,us.jsxs)("div",{className:"instances-list",children:[u&&(0,us.jsx)("div",{className:"error-message",children:u}),(0,us.jsxs)("div",{className:"create-instance-row",onClick:()=>p(!0),children:[(0,us.jsxs)("div",{className:"instance-info",children:[(0,us.jsx)("div",{className:"instance-name",children:"Create New Instance"}),(0,us.jsx)("div",{className:"instance-details",children:(0,us.jsx)("span",{children:"Click to add a new GPU instance"})})]}),(0,us.jsx)("div",{className:"instance-actions",children:(0,us.jsx)("button",{className:"action-button","data-tooltip":"Create",children:(0,us.jsx)("i",{className:"codicon codicon-plus"})})})]}),s.map((e=>(0,us.jsxs)("div",{className:"instance-item",children:[(0,us.jsxs)("div",{className:"instance-info",children:[(0,us.jsx)("div",{className:"instance-name",children:e.name||"NO_NAME"}),(0,us.jsxs)("div",{className:"instance-details",children:[(0,us.jsx)("span",{children:e.instance_type.name}),(0,us.jsxs)("span",{className:"status",children:[(0,us.jsx)("span",{className:`status-dot ${e.status}`}),e.status]})]}),e.ip&&(0,us.jsx)("div",{className:"instance-ip",children:e.region.name})]}),(0,us.jsxs)("div",{className:"instance-actions",children:["active"===e.status&&(0,us.jsx)("button",{className:"action-button",onClick:()=>w(e.id,"launch"),"data-tooltip":"Launch",children:(0,us.jsx)("i",{className:"codicon codicon-play"})}),"active"===e.status&&(0,us.jsx)("button",{className:"action-button",onClick:()=>w(e.id,"restart"),"data-tooltip":"Restart",children:(0,us.jsx)("i",{className:"codicon codicon-refresh"})}),"active"===e.status&&e.actions.terminate.available&&(0,us.jsx)("button",{className:"action-button",onClick:()=>w(e.id,"terminate"),"data-tooltip":"Stop",children:(0,us.jsx)("i",{className:"codicon codicon-stop"})})]})]},e.id)))]}),g&&b&&(0,us.jsx)("div",{className:"launch-confirmation-overlay",onClick:()=>{v(!1),y(null)},children:(0,us.jsxs)("div",{className:"launch-confirmation",onClick:e=>e.stopPropagation(),children:[(0,us.jsxs)("div",{className:"confirmation-header",children:[(0,us.jsx)("h3",{children:"Instance type"}),(0,us.jsx)(Jo,{appearance:"icon",onClick:()=>{v(!1),y(null)},children:(0,us.jsx)("i",{className:"codicon codicon-close"})})]}),(0,us.jsx)("div",{className:"confirmation-details",children:(0,us.jsxs)("div",{className:"launch-button-container",children:[(0,us.jsxs)(Jo,{onClick:async()=>{if(!f&&b)try{m(!0),v(!1);const e=uy[b],t=await fetch(`${dy}/api/public/extension/gpu`,{method:"POST",headers:x,body:JSON.stringify({region_name:(t=>{const n=e.regions_with_capacity_available.find((e=>e.name.startsWith("us-")));return(null===n||void 0===n?void 0:n.name)||(null===(t=e.regions_with_capacity_available[0])||void 0===t?void 0:t.name)})(),instance_type_name:b})}),n=await t.json();if(n.error)return void hs.postMessage({type:"showInformationMessage",text:`GPU Creation Failed: ${n.error}`});hs.postMessage({type:"showInformationMessage",text:"GPU successfully created!"}),h&&p(!1),k()}catch(u){console.error("Error requesting GPU:",u),hs.postMessage({type:"showInformationMessage",text:`Error requesting GPU: ${(null===u||void 0===u?void 0:u.message)||"Unknown error occurred"}`})}finally{m(!1)}},disabled:f,children:["Launch ",r[b].instance_type.description]}),(0,us.jsx)("p",{className:"launch-note",children:"Instances may take up to 20 minutes to boot, you will not be charged during this time."})]})})]})}),(0,us.jsx)("style",{children:"\n                        .launch-confirmation-overlay {\n                            position: fixed;\n                            top: 0;\n                            left: 0;\n                            right: 0;\n                            bottom: 0;\n                            background: rgba(0, 0, 0, 0.5);\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n                            z-index: 1000;\n                        }\n                        .launch-confirmation {\n                            position: relative;\n                            width: 90%;\n                            max-width: 500px;\n                            padding: 20px;\n                            background: var(--vscode-editor-background);\n                            border-radius: 6px;\n                            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n                        }\n                        .confirmation-header {\n                            display: flex;\n                            justify-content: space-between;\n                            align-items: center;\n                            margin-bottom: 16px;\n                        }\n                        .confirmation-header h3 {\n                            margin: 0;\n                            color: var(--vscode-editor-foreground);\n                        }\n                        .confirmation-details {\n                            display: flex;\n                            flex-direction: column;\n                            gap: 16px;\n                        }\n                        .launch-button-container {\n                            display: flex;\n                            flex-direction: column;\n                            gap: 8px;\n                            margin-top: 16px;\n                        }\n                        .launch-note {\n                            font-size: 12px;\n                            color: var(--vscode-descriptionForeground);\n                            margin: 0;\n                        }\n                    "})]})})},fy=e=>{let{onDone:n,isLoading:i=!1}=e;const{taskHistory:r}=wp(),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)("newest"),[c,u]=(0,t.useState)("newest"),[d,h]=(0,t.useState)(""),p=(0,t.useRef)(null);(0,t.useEffect)((()=>{o&&"mostRelevant"!==a&&!c?(u(a),l("mostRelevant")):!o&&"mostRelevant"===a&&c&&(l(c),u(null))}),[o,a,c]);const f=e=>{const t=new Date(e);return null===t||void 0===t?void 0:t.toLocaleString("en-US",{month:"long",day:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}).replace(", "," ").replace(" at",",").toUpperCase()},m=(0,t.useMemo)((()=>{const e=r.filter((e=>e.ts&&e.task&&!0===e.isRemote));return h(`Found ${e.length} remote tasks out of ${r.length} total tasks`),e}),[r]),g=(0,t.useMemo)((()=>new yf(m,{keys:["task"],threshold:.6,shouldSort:!0,isCaseSensitive:!1,ignoreLocation:!1,includeMatches:!0,minMatchCharLength:1})),[m]),v=(0,t.useMemo)((()=>{let e=o?gy(g.search(o)):m;return e.sort(((e,t)=>{switch(a){case"oldest":return e.ts-t.ts;case"mostRelevant":return o?0:t.ts-e.ts;default:return t.ts-e.ts}})),e}),[m,o,g,a]);return(0,t.useEffect)((()=>{var e;p.current&&(null===(e=p.current)||void 0===e||e.scrollToIndex({index:0}))}),[v]),(0,us.jsx)("div",{className:"modal-overlay",children:(0,us.jsxs)("div",{className:"modal-content",children:[(0,us.jsxs)("div",{className:"modal-header",children:[(0,us.jsx)("h2",{children:"Remote Tasks"}),(0,us.jsx)(Jo,{appearance:"icon",onClick:n,children:(0,us.jsx)("i",{className:"codicon codicon-close"})})]}),(0,us.jsxs)("div",{className:"modal-body",children:[(0,us.jsxs)("div",{className:"search-container",children:[(0,us.jsxs)(cs,{style:{width:"100%"},placeholder:"Search remote tasks...",value:o,onInput:e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.value;s(n),n&&!o&&"mostRelevant"!==a&&(u(a),l("mostRelevant"))},children:[(0,us.jsx)("div",{slot:"start",className:"codicon codicon-search",style:{fontSize:13,marginTop:2.5,opacity:.8}}),o&&(0,us.jsx)("div",{className:"input-icon-button codicon codicon-close","aria-label":"Clear search",onClick:()=>s(""),slot:"end",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}})]}),(0,us.jsxs)(ls,{className:"sort-options",value:a,onChange:e=>l(e.target.value),children:[(0,us.jsx)(as,{value:"newest",children:"Newest"}),(0,us.jsx)(as,{value:"oldest",children:"Oldest"})]})]}),(0,us.jsx)("div",{className:"tasks-container",children:i?(0,us.jsxs)("div",{className:"empty-state",children:[(0,us.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin",style:{fontSize:"32px",marginBottom:"10px"}}),(0,us.jsx)("div",{children:"Loading tasks..."})]}):0===v.length?(0,us.jsx)("div",{className:"empty-state",children:(0,us.jsx)("div",{children:"No remote tasks found"})}):(0,us.jsx)(_c,{ref:p,className:"tasks-list",style:{height:"400px"},data:v,itemContent:(e,t)=>{var n;return(0,us.jsx)("div",{className:"task-item",onClick:()=>(e=>{hs.postMessage({type:"showTaskWithId",text:e})})(t.id),children:(0,us.jsxs)("div",{className:"task-content",children:[(0,us.jsxs)("div",{className:"task-header",children:[(0,us.jsx)("span",{className:"task-date",children:f(t.ts)}),(0,us.jsx)("div",{className:"task-actions",children:(0,us.jsx)(Jo,{appearance:"icon",onClick:e=>{e.stopPropagation(),(e=>{hs.postMessage({type:"deleteTaskWithId",text:e})})(t.id)},className:"delete-button",children:(0,us.jsx)("span",{className:"codicon codicon-trash"})})})]}),(0,us.jsx)("div",{className:"task-description",dangerouslySetInnerHTML:{__html:t.task}}),(0,us.jsxs)("div",{className:"task-details",style:{display:"none"},children:[(0,us.jsx)("div",{className:"task-model-info",children:t.selectedModel&&(0,us.jsxs)("span",{className:"model-name",children:["Model: ",t.selectedModel.displayName||t.selectedModel.id]})}),!!t.totalCost&&(0,us.jsxs)("div",{className:"task-cost",children:[(0,us.jsxs)("div",{className:"cost-label",children:[(0,us.jsx)("span",{children:"API Cost:"}),(0,us.jsxs)("span",{children:["$",null===(n=t.totalCost)||void 0===n?void 0:n.toFixed(4)]})]}),(0,us.jsx)(my,{itemId:t.id})]}),!t.totalCost&&(0,us.jsx)(my,{itemId:t.id})]})]})},t.id)}})})]}),(0,us.jsx)("div",{style:{borderTop:"1px solid var(--vscode-panel-border)",padding:"16px",display:"flex"},children:(0,us.jsx)(Jo,{style:{width:"100%"},onClick:()=>{hs.postMessage({type:"chatSettings",chatSettings:{mode:"remote",autoMode:!1}}),n()},children:"New Remote Task"})})]})})},my=e=>{let{itemId:t}=e;return(0,us.jsx)(Jo,{className:"export-button",appearance:"icon",onClick:e=>{e.stopPropagation(),hs.postMessage({type:"exportTaskWithId",text:t})},title:"Export task",children:(0,us.jsx)("span",{className:"codicon codicon-export"})})},gy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"task-item-highlight";const n=e=>{if(0===e.length)return e;e.sort(((e,t)=>e[0]-t[0]));const t=[e[0]];for(let n=1;n<e.length;n++){const i=t[t.length-1],r=e[n];r[0]<=i[1]+1?i[1]=Math.max(i[1],r[1]):t.push(r)}return t};return e.filter((e=>{let{matches:t}=e;return t&&t.length})).map((e=>{let{item:i,matches:r}=e;const o={...i};return null===r||void 0===r||r.forEach((e=>{if(e.key&&"string"===typeof e.value&&e.indices){const i=n([...e.indices]);((e,t,n)=>{const i=t.split(".");let r;for(r=0;r<i.length-1;r++)e=e[i[r]];e[i[r]]=n})(o,e.key,function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===i.length)return e;const r=n(i);let o="",s=0;return r.forEach((n=>{const i=n[0],r=n[1]+1;o+=[e.substring(s,i),`<span class="${t}">`,e.substring(i,r),"</span>"].join(""),s=r})),o+=e.substring(s),o}(e.value,i))}})),o}))},vy=(0,t.memo)(fy),by=20,yy=cp.div`
	background-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 55%, transparent);
	border-radius: 3px;
	overflow: hidden;
	cursor: pointer;
	display: flex;
	justify-content: center;
	align-items: center;
	flex: 1;
	height: 25px;

	&:hover {
		background-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 90%, transparent);
	}

	&:active {
		background-color: color-mix(in srgb, var(--vscode-toolbar-hoverBackground) 70%, transparent);
	}
`,xy=e=>{let{isHidden:n,showHistoryView:i,redeemedSuccess:r,setRedeemedSuccess:o,handleProVersionToggle:s,redeemInviteForAccess:a,isPro:l,setUserCredits:c,apiConfiguration:u,userCredits:h,setApiConfiguration:p,chatModeEnableDisable:f,setChatModeEnableDisable:m,upgradeForAccess:g,fetchUserCredits:v,customerId:b,setCustomerId:y,selectedModel:x,setSelectedModel:k,showVoiceAssistant:w,setShowVoiceAssistant:S,isAutoApprove:C,setIsAutoApprove:T,waitingToResume:E,setWaitingToResume:_}=e;const I=(0,t.useRef)(null),[R,P]=(0,t.useState)(window.innerWidth);(0,t.useEffect)((()=>{const e=()=>{P(window.innerWidth)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const{version:A,blackboxMessages:O,taskHistory:M,chatSettings:N}=wp(),D=(0,t.useMemo)((()=>O.at(0)),[O]),j=(0,t.useMemo)((()=>function(e){const t=[];for(let n=0;n<e.length;n++)if("say"===e[n].type&&"api_req_started"===e[n].say){let i=JSON.parse(e[n].text||"{}"),r=n+1;for(;r<e.length;){if("say"===e[r].type&&"api_req_finished"===e[r].say){let o={...i,...JSON.parse(e[r].text||"{}")};t.push({...e[n],text:JSON.stringify(o)}),n=r;break}r++}r===e.length&&t.push(e[n])}return e.filter((e=>!("say"===e.type&&"api_req_finished"===e.say))).map((e=>"say"===e.type&&"api_req_started"===e.say&&t.find((t=>t.ts===e.ts))||e))}(function(e){const t=[];for(let n=0;n<e.length;n++)if("ask"===e[n].type&&"command"===e[n].ask){let i=e[n].text||"",r=!1,o=n+1;for(;o<e.length&&("ask"!==e[o].type||"command"!==e[o].ask);){if("command_output"===e[o].ask||"command_output"===e[o].say){r||(i+=`\n${dp}`,r=!0);const t=e[o].text||"";t.length>0&&(i+="\n"+t)}o++}t.push({...e[n],text:i}),n=o-1}return e.filter((e=>!("command_output"===e.ask||"command_output"===e.say))).map((e=>"ask"===e.type&&"command"===e.ask&&t.find((t=>t.ts===e.ts))||e))}(O.slice(1)))),[O]),L=(0,t.useMemo)((()=>function(e){const t={totalTokensIn:0,totalTokensOut:0,totalCacheWrites:void 0,totalCacheReads:void 0,totalCost:0};return e.forEach((e=>{if("say"===e.type&&"api_req_started"===e.say&&e.text)try{const r=JSON.parse(e.text),{tokensIn:o,tokensOut:s,cacheWrites:a,cacheReads:l,cost:c,isCreditDeducted:u}=r;if(!u)return;var n,i;"number"===typeof o&&(t.totalTokensIn+=o),"number"===typeof s&&(t.totalTokensOut+=s),"number"===typeof a&&(t.totalCacheWrites=(null!==(n=t.totalCacheWrites)&&void 0!==n?n:0)+a),"number"===typeof l&&(t.totalCacheReads=(null!==(i=t.totalCacheReads)&&void 0!==i?i:0)+l),"number"===typeof c&&(t.totalCost+=c)}catch(r){console.error("Error parsing JSON:",r)}})),t}(j)),[j]),[F,B]=(0,t.useState)(""),U=(0,t.useRef)(null),[$,z]=(0,t.useState)(!1),[V,H]=(0,t.useState)([]),[q,W]=(0,t.useState)([]),[G,K]=(0,t.useState)(!1),[Q,X]=(0,t.useState)(void 0),[Y,J]=(0,t.useState)(!1),[Z,ee]=(0,t.useState)(void 0),[te,ne]=(0,t.useState)(void 0),[ie,re]=(0,t.useState)(!1),oe=(0,t.useRef)(null),[se,ae]=(0,t.useState)({}),le=(0,t.useRef)(null),ce=(0,t.useRef)(!1),[ue,de]=(0,t.useState)(!1),[he,pe]=(0,t.useState)(!1),[fe,me]=(0,t.useState)(!1),[ge,ve]=(0,t.useState)([]),[be,ye]=(0,t.useState)(!1),[xe,ke]=(0,t.useState)(!1),[we,Se]=(0,t.useState)(!1),[Ce,Te]=(0,t.useState)(!1),[Ee,_e]=(0,t.useState)(!1),[Ie,Re]=(0,t.useState)(uy),[Pe,Ae]=(0,t.useState)(""),[Oe,Me]=(0,t.useState)(""),[Ne,De]=(0,t.useState)(""),[je,Le]=(0,t.useState)(!1),[Fe,Be]=(0,t.useState)(!1),[Ue,$e]=(0,t.useState)(null),ze=(0,t.useCallback)((async()=>{try{const e={"Content-Type":"application/json","X-Customer-Id":b||"","X-Api-Key":""},t=await fetch(`${dy}/api/public/extension/gpu/list`,{headers:e});if(t.ok){const e=await t.json();Re(e.data),$e(Date.now())}}catch(e){console.error("Error fetching GPU plans:",e)}}),[]),Ve=(0,t.useCallback)((()=>{const e=Date.now();(!Ue||e-Ue>3e5)&&ze()}),[Ue,ze]);(0,t.useEffect)((()=>{Ve()}),[Ve]);const He=(0,t.useCallback)((async e=>{var t;const n=e.data;switch(n.type){case"updateUserCredits":const e=n.value?parseFloat(n.value):0;c(e);break;case"getRevisions":null!==n&&void 0!==n&&n.revisions?ve(n.revisions):ve([]);break;case"TRIGGER_UPGRADE_FLOW":g&&g();break;case"SHOW_ADD_CREDITS_DIALOG":_("wait_for_credits"),n.value&&y(n.value),g&&g();break;case"setPromptInput":null!==n&&void 0!==n&&n.text&&B(null===n||void 0===n?void 0:n.text);break;case"historyItemFetching":_e(!0);break;case"historyItemFetched":Te(!1),_e(!1),null!==n&&void 0!==n&&null!==(t=n.data)&&void 0!==t&&t.mode&&"remote"===n.data.mode?me(!0):me(!1);break;case"historyItemFetchError":_e(!1);break;case"githubRepos":n.repos&&Le(!0);break;case"githubBranches":n.branches&&Be(!0)}}),[s]);d("message",He),(0,t.useEffect)((()=>{!async function(){const e=localStorage.getItem("github_token");e&&Ae(e);const t=l?"sonnet":"qwen",n="true"===localStorage.getItem("blackbox_redeem_success"),i={...u,apiProvider:t,hasRedeemedCoupon:n};p(i),hs.postMessage({type:"apiConfiguration",apiConfiguration:i}),v()}()}),[]);const qe=(0,t.useMemo)((()=>O.at(-1)),[O]),We=(0,t.useMemo)((()=>O.at(-2)),[O]);ys((()=>{if(qe)switch(qe.type){case"ask":const e=!0===qe.partial;switch(qe.ask){case"api_req_failed":X("api_req_failed"),J(!0),ee("Retry"),ne("Start New Task");break;case"mistake_limit_reached":X("mistake_limit_reached"),J(!0),ee("Proceed Anyways"),ne("Start New Task");break;case"followup":X("followup"),J(e);break;case"tool":X("tool"),J(!e);switch(JSON.parse(qe.text||"{}").tool){case"editedExistingFile":case"newFileCreated":if(!e&&C){ee(void 0),ne(void 0),Ze("tool");break}ee("Save"),ne("Reject");break;default:if(!e&&C){ee(void 0),ne(void 0),Ze("tool");break}ee("Approve"),ne("Reject")}break;case"browser_action_launch":if(X("browser_action_launch"),J(!e),!e&&C){ee(void 0),ne(void 0),Ze("browser_action_launch");break}ee("Approve"),ne("Reject");break;case"command":if(X("command"),J(!e),!e&&C){ee(void 0),ne(void 0),Ze("command");break}ee("Run Command"),ne("Reject");break;case"command_output":X("command_output"),J(!0),ee("Proceed While Running"),ne(void 0),!e&&C&&setTimeout((()=>{Ze("command_output")}),3e3);break;case"use_mcp_server":if(X("use_mcp_server"),J(!e),!e&&C){ee(void 0),ne(void 0),Ze("use_mcp_server");break}ee("Approve"),ne("Reject");break;case"completion_result":X("completion_result"),J(!e),ee("Start New Task"),ne(void 0);break;case"resume_task":X("resume_task"),J(!0),ee("Resume Task"),ne(void 0),re(!1);break;case"resume_completed_task":X("resume_completed_task"),J(!0),ee("Start New Task"),ne(void 0),re(!1)}break;case"say":if("api_req_started"===qe.say)"command_output"===(null===We||void 0===We?void 0:We.ask)&&(B(""),H([]),X(void 0),J(!1))}}),[qe,We]),(0,t.useEffect)((()=>{if(0===O.length){X(void 0),J(!1),ee(void 0),ne(void 0),pv("Blackbox Activated",Yb(),{tag:"vscode-agent"})}else{const n=O[O.length-1];if(null!=n.text&&"api_req_started"===n.say)try{var e;const t=JSON.parse(n.text),i=/\[(create_file|edit_file) for '.*?'\]/;null!==(e=t.request)&&void 0!==e&&e.startsWith("[")&&i.test(t.request)&&hs.postMessage({type:"getRevisions"})}catch(t){console.error("Error parsing message text:",t)}N.mode}}),[O.length]),(0,t.useEffect)((()=>{ae({}),null!==D&&void 0!==D&&D.ts&&hs.postMessage({type:"getRevisions"})}),[null===D||void 0===D?void 0:D.ts]);const Ge=(0,t.useMemo)((()=>{var e,t;if(!(null===(e=j.at(-1))||void 0===e||!e.ask)&&void 0!==Q&&Y&&void 0!==Z)return!1;if(!0===(null===(t=j.at(-1))||void 0===t?void 0:t.partial))return!0;{const e=function(e,t){const n=up(e,t);return-1===n?void 0:e[n]}(j,(e=>"api_req_started"===e.say));if(e&&null!=e.text&&"api_req_started"===e.say){if(void 0===JSON.parse(e.text).cost)return!0}}return!1}),[j,Q,Y,Z]),Ke=(0,t.useCallback)((async(e,t,n)=>{let i=!1;if((e=e.trim())||t.length>0||n.length>0){Ge&&(i=!0,hs.postMessage({type:"cancelTask"}),re(!0),z(!0),ee(void 0),await new Promise((e=>setTimeout(e,4e3))),z(!1));const r="true"===localStorage.getItem("blackbox_redeem_success");let o=Yb();const s=localStorage.getItem("hasShownPaymentDialog"),a=!s||Date.now()-parseInt(s)>=864e5;if(!l&&!r&&a)return localStorage.setItem("hasShownPaymentDialog",Date.now().toString()),g(),void pv(fv,o,{tag:"viewed-payment-one-time"});if(pv("Chat Request",o,{tag:"blackbox-vscode-agent"}),0===O.length){const i="true"===localStorage.getItem("blackbox_redeem_success");if(l&&!i&&!("blackbox-base"===x)&&0===h)return void hs.postMessage({type:"showInformationMessage",options:{prompt:Xe(),title:"Add Credits",placeHolder:"Please add credits to continue"},text:"Add credits since credits are below threshold (0.4)"});const r={provider:Lb[x].apiProvider,model:Lb[x].modelId};hs.postMessage({type:"newTask",text:e,images:t,videos:n,selectedModel:r}),me("remote"===N.mode)}else if(Q)switch(Q){case"followup":case"tool":case"browser_action_launch":case"command":case"command_output":case"use_mcp_server":case"completion_result":case"resume_task":case"resume_completed_task":case"mistake_limit_reached":hs.postMessage({type:"askResponse",askResponse:"messageResponse",text:e,images:t,videos:n})}else i&&(hs.postMessage({type:"askResponse",askResponse:"messageResponse",text:e,images:t,videos:n}),i=!1);B(""),H([]),W([]),X(void 0),J(!1),ce.current=!1}}),[O.length,Q,l,h,x,g,Ge]),Qe=(0,t.useCallback)((()=>{hs.postMessage({type:"clearTask"})}),[]);const Xe=()=>`https://www.blackbox.ai/api/buy-credits?productId=${"prod_RI1k0eOeA1Xf5u"}&userId=${Yb()}&productName=${"cybercoder"}`,Ye=async()=>{let e=await async function(){try{let e=localStorage.getItem("referralId");if(!e)return null;let t=await fetch(`${Xb}/api/referral/status/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}}),n=await t.json();return n?404===t.status?(console.error("Referral not found"),null):{isRedeemed:n.isRedeemed,senderId:n.senderId,receiverId:n.receiverId,redeemedAt:n.redeemedAt}:null}catch(e){return console.error("Error checking redemption status:",e),null}}();null!==e&&void 0!==e&&e.isRedeemed&&(o(!0),localStorage.setItem("blackbox_redeem_success","true"))};function Je(){let e=0,t=Math.floor(8640);const n=async()=>{if(e++,e>t)return;Ye(),localStorage.getItem("blackbox_redeem_success")||setTimeout(n,1e4)};n()}(0,t.useEffect)((()=>{let e=localStorage.getItem("blackbox_redeem_success"),t=localStorage.getItem("referralId");if(!e&&t&&Je(),e&&!l){const t="qwen",n={...u,apiProvider:t,hasRedeemedCoupon:"true"===e};p(n),hs.postMessage({type:"apiConfiguration",apiConfiguration:n})}}),[]);const Ze=(0,t.useCallback)((e=>{switch(null!==e&&void 0!==e?e:Q){case"api_req_failed":case"command":case"command_output":case"tool":case"browser_action_launch":case"use_mcp_server":case"resume_task":case"mistake_limit_reached":hs.postMessage({type:"askResponse",askResponse:"yesButtonClicked"});break;case"completion_result":case"resume_completed_task":Qe()}X(void 0),J(!1),ce.current=!1}),[Q,Qe]),et=(0,t.useCallback)((()=>{if(Ge)return hs.postMessage({type:"cancelTask"}),void re(!0);switch(Q){case"api_req_failed":case"mistake_limit_reached":Qe();break;case"command":case"tool":case"browser_action_launch":case"use_mcp_server":hs.postMessage({type:"askResponse",askResponse:"noButtonClicked"})}X(void 0),J(!1),ce.current=!1}),[Q,Qe,Ge]),tt=(0,t.useCallback)((()=>{Qe()}),[Qe]),{selectedModelInfo:nt}=(0,t.useMemo)((()=>_f(u)),[u]),it=(0,t.useCallback)((()=>{K(!0),hs.postMessage({type:"selectImages"})}),[]),rt=!nt.supportsImages||$||V.length>=by,ot=(0,t.useCallback)((e=>{var t,i,r,o,s;const a=e.data;switch(a.type){case"action":var l;if("didBecomeVisible"===a.action)n||$||Y||null===(l=U.current)||void 0===l||l.focus();break;case"selectedImages":const e=null!==(t=a.images)&&void 0!==t?t:[];e.length>0&&H((t=>[...t,...e].slice(0,by))),K(!1);break;case"selectedVideos":const c=null!==(i=a.videos)&&void 0!==i?i:[];c.length>0&&W((e=>[...c,...e].slice(0,1))),K(!1);break;case"selectMediaAbort":K(!1);break;case"invoke":switch(a.invoke){case"sendMessage":Ke(null!==(r=a.text)&&void 0!==r?r:"",null!==(o=a.images)&&void 0!==o?o:[],null!==(s=a.videos)&&void 0!==s?s:[]);break;case"primaryButtonClick":Ze();break;case"secondaryButtonClick":et()}}}),[n,$,Y,Ke,Ze,et]);d("message",ot),ks((()=>{var e;null===(e=U.current)||void 0===e||e.focus()})),(0,t.useEffect)((()=>{const e=setTimeout((()=>{var e;n||$||Y||(null===(e=U.current)||void 0===e||e.focus())}),50);return()=>{clearTimeout(e)}}),[n,$,Y]);const st=(0,t.useMemo)((()=>j.filter((e=>{var t,n,i;switch(e.ask){case"completion_result":if(""===e.text)return!1;break;case"api_req_failed":case"resume_task":case"resume_completed_task":return!1}switch(e.say){case"api_req_finished":case"api_req_retried":case"mcp_server_request_started":return!1;case"text":if(""===(null!==(t=e.text)&&void 0!==t?t:"")&&0===(null!==(n=null===(i=e.images)||void 0===i?void 0:i.length)&&void 0!==n?n:0))return!1}return!0}))),[j]),at=(0,t.useCallback)((e=>{const t="true"===localStorage.getItem("blackbox_redeem_success");if(!t&&"blackbox-base"!==e)return void g();const n=Lb[e];if(!n)return;k(e);const i={...u,apiProvider:n.apiProvider,hasRedeemedCoupon:t};p(i),hs.postMessage({type:"apiConfiguration",apiConfiguration:i})}),[u,g,p]),lt=(0,t.useMemo)((()=>{const e=[];let t=[],n=!1;const i=()=>{t.length>0&&(e.push([...t]),t=[],n=!1)};return st.forEach((r=>{if("browser_action_launch"===r.ask)i(),n=!0,t.push(r);else if(n){if("api_req_started"===r.say){const n=[...t].reverse().find((e=>"api_req_started"===e.say));if(null!=(null===n||void 0===n?void 0:n.text)){if(null!=JSON.parse(n.text).cancelReason)return i(),void e.push(r)}}if((e=>"ask"===e.type?["browser_action_launch"].includes(e.ask):"say"===e.type&&["api_req_started","text","browser_action","browser_action_result"].includes(e.say))(r)){if(t.push(r),"browser_action"===r.say){"close"===JSON.parse(r.text||"{}").action&&i()}}else i(),e.push(r)}else e.push(r)})),t.length>0&&e.push([...t]),e}),[st]),ct=(0,t.useMemo)((()=>ms()((()=>{var e;null===(e=oe.current)||void 0===e||e.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"smooth"})}),10,{immediate:!0})),[]),ut=(0,t.useCallback)((()=>ge),[ge]),dt=(0,t.useCallback)((()=>{var e;null===(e=oe.current)||void 0===e||e.scrollTo({top:Number.MAX_SAFE_INTEGER,behavior:"auto"})}),[]),ht=(0,t.useCallback)((e=>{var t;const n=null!==(t=se[e])&&void 0!==t&&t,i=lt.at(-1),r=Array.isArray(i)?i[0].ts===e:(null===i||void 0===i?void 0:i.ts)===e,o=lt.at(-2),s=Array.isArray(o)?o[0].ts===e:(null===o||void 0===o?void 0:o.ts)===e,a=r&&!Array.isArray(i)&&"api_req_started"===(null===i||void 0===i?void 0:i.say)&&!se[i.ts];if(ae((t=>({...t,[e]:!t[e]}))),n||(ce.current=!0),n&&he){const e=setTimeout((()=>{dt()}),0);return()=>clearTimeout(e)}if(r||s){if(n){if(s&&!a)return;const e=setTimeout((()=>{dt()}),0);return()=>clearTimeout(e)}{const e=setTimeout((()=>{var e;null===(e=oe.current)||void 0===e||e.scrollToIndex({index:lt.length-(r?1:2),align:"start"})}),0);return()=>clearTimeout(e)}}}),[lt,se,dt,he]),pt=(0,t.useCallback)((e=>{ce.current||(e?ct():setTimeout((()=>{dt()}),0))}),[ct,dt]);(0,t.useEffect)((()=>{ce.current||setTimeout((()=>{ct()}),50)}),[lt.length,ct]);const ft=(0,t.useCallback)((e=>{const t=e;var n;t.deltaY&&t.deltaY<0&&(null!==(n=le.current)&&void 0!==n&&n.contains(t.target)&&(ce.current=!0))}),[]);d("wheel",ft,window,{passive:!0});const mt=(0,t.useMemo)((()=>D?"Type a message (@ to add files)...":"Type your task here (@ to add files)..."),[D]),gt=(0,t.useCallback)(((e,t)=>{if(Array.isArray(t))return(0,us.jsx)(Cv,{messages:t,isLast:e===lt.length-1,lastModifiedMessage:j.at(-1),getLatestCodeRevisions:ut,onHeightChange:pt,isExpanded:e=>{var t;return null!==(t=se[e])&&void 0!==t&&t},onToggleExpand:e=>{ae((t=>({...t,[e]:!t[e]})))}});if("say"===t.type&&"api_req_started"===t.say){const t=lt.filter((e=>!Array.isArray(e))).slice(e+1).find((e=>!Array.isArray(e)&&"say"===(null===e||void 0===e?void 0:e.type)));if(t&&("text"===(null===t||void 0===t?void 0:t.say)&&""===(null===t||void 0===t?void 0:t.text)||"text"!==(null===t||void 0===t?void 0:t.say)))return(0,us.jsx)(us.Fragment,{})}return Array.isArray(t)?null:(0,us.jsx)(gv,{message:t,getLatestCodeRevisions:ut,isExpanded:se[t.ts]||!1,onToggleExpand:()=>ht(t.ts),lastModifiedMessage:j.at(-1),isLast:e===lt.length-1,onHeightChange:pt},t.ts)}),[se,j,lt.length,ge,ht,pt]);return(0,t.useEffect)((()=>{"resume_task"===E&&("resume_task"===Q&&Ze(),_(null))}),[E,Q,Ze,_]),(0,us.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:n?"none":"flex",flexDirection:"column",overflow:"hidden"},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:R>500?"space-between":"end",alignItems:"center",borderBottom:"1px solid var(--vscode-panel-border)",backgroundColor:"var(--vscode-sideBar-background)",padding:"2px"},children:[R>500&&(0,us.jsx)(ps,{chatModeEnableDisable:f||!1,setChatModeEnableDisable:m}),(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[l&&(0,us.jsx)("div",{style:{marginLeft:"10px"},children:(0,us.jsx)(Jo,{appearance:"secondary",onClick:()=>Te(!0),style:{backgroundColor:"transparent"},children:(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",display:"inline-block"},children:R<=500?"Remote":"Remote Agent"})})}),l&&(0,us.jsx)("div",{children:(0,us.jsx)(Jo,{appearance:"secondary",onClick:()=>Se(!0),style:{backgroundColor:"transparent"},children:(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",display:"inline-block"},children:"GPUs"})})}),l&&(0,us.jsx)("div",{children:(0,us.jsx)(Jo,{appearance:"secondary",onClick:g,style:{backgroundColor:"transparent"},children:(0,us.jsx)("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",width:"100%",display:"inline-block"},children:R<=500?"Credits":"Add Credits"})})}),(0,us.jsx)(ds,{isPro:l,onToggle:s})]})]}),D?(0,us.jsx)(hv,{task:D,tokensIn:L.totalTokensIn,tokensOut:L.totalTokensOut,doesModelSupportPromptCache:nt.supportsPromptCache,cacheWrites:L.totalCacheWrites,cacheReads:L.totalCacheReads,totalCost:L.totalCost,onClose:tt,userCredits:h,onAddCredits:()=>{g()},hasCouponRedeemed:"true"===localStorage.getItem("blackbox_redeem_success")}):(0,us.jsxs)("div",{style:{flexGrow:1,overflowY:"auto",display:"flex",flexDirection:"column"},children:[(0,us.jsx)("div",{style:{padding:"0 20px",flexShrink:0,display:"flex",flexDirection:"column"},children:"mcp"===N.mode?(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("h2",{children:"BLACKBOXAI MCP Mode"}),(0,us.jsx)("p",{children:"BLACKBOXAI Model Context Protocol (MCP) mode is designed for communicating with external data sources (e.g., APIs, custom tools), enabling seamless connections between AI systems and data sources. It excels at:"}),(0,us.jsxs)("ol",{children:[(0,us.jsx)("li",{children:"Creating new MCP servers to connect BLACKBOX with your external data sources (e.g., add to tool to ...)"}),(0,us.jsx)("li",{children:"Modifying existing MCP server implementations for enhanced functionality"}),(0,us.jsx)("li",{children:"Connecting to and utilizing MCP servers"})]})]}):(0,us.jsx)(us.Fragment,{children:(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",marginBottom:"20px",textAlign:"center"},children:[(0,us.jsx)("h2",{style:{paddingTop:"200px",fontSize:"18px",margin:"0 0 10px 0"},children:"Ask BLACKBOXAI"}),(0,us.jsx)("p",{style:{fontSize:"14px",margin:"0",color:"var(--vscode-descriptionForeground)",maxWidth:"400px"},children:"BLACKBOXAI is the most advanced coding agent."})]})})}),(0,us.jsx)("div",{style:{padding:"0 20px",flexShrink:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:!(localStorage.getItem("blackbox_redeem_success")||r)&&(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("div",{onClick:g,style:{marginTop:"5px",marginBottom:"5px",width:"fit",background:"var(--vscode-toolbar-hoverBackground)",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:"4px 20px"},children:(0,us.jsx)("span",{style:{color:"var(--vscode-textLink-foreground)",fontWeight:"bold"},children:"START 90 DAY FREE TRIAL"})}),(0,us.jsxs)("div",{onClick:()=>hs.postMessage({type:"openBrowserLink",text:"https://www.blackbox.ai/?ref=connect-vscode"}),style:{marginTop:"5px",marginBottom:"5px",width:"fit",height:"20px",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",padding:"0 20px"},children:[(0,us.jsx)("span",{style:{color:"var(--vscode-foreground)",marginRight:"8px",fontWeight:"normal"},children:"Already subscribed?"}),(0,us.jsx)("span",{style:{color:"var(--vscode-textLink-foreground)",fontWeight:"bold"},children:"\u2022 Connect"})]})]})}),M.length>0&&(0,us.jsx)(Cp,{showHistoryView:i})]}),Ee&&(0,us.jsx)("div",{style:{position:"absolute",top:"48px",left:0,right:0,bottom:0,backgroundColor:"color-mix(in srgb, var(--vscode-editor-background) 80%, transparent)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10},children:(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"10px",color:"var(--vscode-foreground)"},children:[(0,us.jsx)("div",{className:"codicon codicon-loading codicon-modifier-spin",style:{fontSize:"32px"}}),(0,us.jsx)("div",{children:"Loading task..."})]})}),D&&(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("div",{style:{flexGrow:1,display:"flex"},ref:le,children:(0,us.jsx)(_c,{ref:oe,className:"scrollable",style:{flexGrow:1,overflowY:"scroll"},components:{Footer:()=>(0,us.jsx)("div",{style:{height:5}})},increaseViewportBy:{top:3e3,bottom:Number.MAX_SAFE_INTEGER},data:lt,itemContent:gt,atBottomStateChange:e=>{pe(e),e&&(ce.current=!1),de(ce.current&&!e)},atBottomThreshold:10,initialTopMostItemIndex:lt.length-1},D.ts)}),$||"followup"!==Q||Y?(0,us.jsx)(us.Fragment,{children:ue?(0,us.jsx)("div",{style:{display:"flex",padding:"10px 15px 0px 15px"},children:(0,us.jsx)(yy,{onClick:()=>{ct(),ce.current=!1},children:(0,us.jsx)("span",{className:"codicon codicon-chevron-down",style:{fontSize:"18px"}})})}):(0,us.jsxs)(us.Fragment,{children:[("remote"===N.mode||fe)&&Ge&&(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 15px 0px 15px",color:"var(--vscode-foreground)",fontWeight:"bold"},children:[(0,us.jsx)(bv,{}),"Running..."]}),(0,us.jsxs)("div",{style:{opacity:Z||te||Ge?Y||Ge&&!ie?1:.5:0,display:!1===(te||Ge)&&!1===(Z&&!Ge)?"none":"flex",padding:"10px 15px 0px 15px"},children:[Z&&!Ge&&(0,us.jsx)(Jo,{appearance:"primary",disabled:!Y,style:{flex:te?1:2,marginRight:te?"6px":"0"},onClick:()=>{Ze()},children:Z}),(te||Ge)&&(0,us.jsx)(Jo,{appearance:"secondary",disabled:!Y&&!(Ge&&!ie),style:{flex:Ge?2:1,marginLeft:Ge?0:"6px"},onClick:et,children:Ge?"Cancel":te})]})]})}):(0,us.jsx)("div",{style:{marginTop:"10px",marginLeft:"15px",marginRight:"15px",display:"flex",alignItems:"center",position:"relative"},children:(0,us.jsx)("div",{style:{flex:"1",borderRadius:"3px",fontSize:"13.66px",backgroundColor:"var(--button-primary-background)",height:"inherit",flexGrow:"1",boxSizing:"border-box",display:"inline-flex",alignItems:"center",padding:"var(--button-padding-vertical) var(--button-padding-horizontal)",whiteSpace:"wrap",outline:"none",textDecoration:"none",border:"calc(var(--border-width)* 1px) solid var(--button-border)",color:"var(--button-primary-foreground",fill:"inherit",cursor:"inherit",fontFamily:"inherit"},children:"Please answer the question"})})]}),(0,us.jsx)("div",{style:{marginTop:"10px",marginLeft:"15px",display:"flex",alignItems:"center",position:"relative"},ref:I,children:(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,us.jsxs)("div",{className:"input-icon-button",onClick:()=>ye(!0),style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)"},children:[(0,us.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Lb[x].modelName}),(0,us.jsx)("i",{className:"codicon codicon-chevron-down",style:{marginLeft:"4px",fontSize:"12px"}})]}),"blackbox-base"===x&&(l?(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("div",{onClick:()=>{at("anthropic/claude-sonnet-4")},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100px"},children:"Claude Sonnet 4"}),R>480&&(0,us.jsx)("div",{onClick:()=>{at("blackbox-pro")},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100px"},children:"Blackbox Pro"}),R>480&&(0,us.jsx)("div",{onClick:()=>{at("deepseek-r1")},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100px"},children:"Deepseek-R1"})]}):(0,us.jsx)(us.Fragment,{children:(0,us.jsx)("div",{onClick:()=>{localStorage.getItem("blackbox_redeem_success")||g()},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-textLink-foreground)",fontWeight:"bold"},children:R>380?"Start FREE Trial. 10X Coding Agent":R>280?"Access all models":"Upgrade"})})),"remote"===N.mode&&(localStorage.getItem("github_token")?[(0,us.jsxs)("div",{className:"input-icon-button",onClick:()=>{const e=Pe;e&&hs.postMessage({type:"fetchGitHubRepos",value:e})},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)"},children:[(0,us.jsx)("i",{className:"codicon codicon-repo",style:{marginRight:"4px",fontSize:"12px"}}),(0,us.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Oe||"Select Repository"})]},"git-repo-select"),Oe&&(0,us.jsxs)("div",{className:"input-icon-button",onClick:()=>{const e=Pe;e&&Oe&&hs.postMessage({type:"fetchGitHubBranches",data:{token:e,repo:Oe}})},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)"},children:[(0,us.jsx)("i",{className:"codicon codicon-git-branch",style:{marginRight:"4px",fontSize:"12px"}}),(0,us.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:Ne||"Select Branch"})]},"git-branch-select")]:(0,us.jsxs)("div",{className:"input-icon-button",onClick:()=>{Pe||hs.postMessage({type:"connectGithub"})},style:{display:"flex",alignItems:"center",padding:"4px 8px",border:"1px solid var(--vscode-input-border)",borderRadius:"3px",cursor:"pointer",fontSize:"12px",backgroundColor:"var(--vscode-input-background)",color:"var(--vscode-input-foreground)"},children:[(0,us.jsx)("i",{className:"codicon codicon-github",style:{marginRight:"4px",fontSize:"12px"}}),(0,us.jsx)("div",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:"Connect to Github"})]}))]})}),(0,us.jsx)(Qb,{ref:U,inputValue:F,setInputValue:B,textAreaDisabled:$,placeholderText:mt,setSelectedModel:k,showModelMenu:be,setShowModelMenu:ye,selectedImages:V,setSelectedImages:H,selectedVideos:q,setSelectedVideos:W,showVoiceAssistant:w,setShowVoiceAssistant:S,onSend:()=>Ke(F,V,q),onSelectImages:it,shouldDisableImages:rt,onHeightChange:()=>{he&&dt()},upgradeForAccess:g,isAutoApprove:C,setIsAutoApprove:e=>T(e),apiConfiguration:u,setApiConfiguration:p,isMediaLoading:G,selectedRepo:Oe,setSelectedRepo:Me,selectedBranch:Ne,setSelectedBranch:De,showGitHubRepoMenu:je,setShowGitHubRepoMenu:Le,showGitHubBranchMenu:Fe,setShowGitHubBranchMenu:Be,gitHubToken:Pe,setGitHubToken:Ae}),xe&&(0,us.jsx)(cy,{onClose:()=>ke(!1)}),we&&(0,us.jsx)(py,{customerId:b,onClose:()=>Se(!1),gpuPlans:Ie,refreshPlans:Ve}),Ce&&(0,us.jsx)(vy,{isLoading:Ee,onDone:()=>Te(!1)})]})},ky=e=>{let{onDone:n}=e;const{apiConfiguration:i,version:r,alwaysAllowReadOnly:o,setAlwaysAllowReadOnly:s}=wp(),[a,l]=(0,t.useState)(void 0),[c,u]=(0,t.useState)(void 0),d=(0,t.useCallback)((()=>{i?(hs.postMessage({type:"apiConfiguration",apiConfiguration:i}),hs.postMessage({type:"alwaysAllowReadOnly",bool:o}),n()):l("API configuration is required")}),[i,o,n]),h=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation();try{d()}catch(t){console.error("Change API model error:",t),l("Failed to change the model. Please try again.")}}),[d]);return(0,t.useEffect)((()=>{l(void 0),u(void 0)}),[i]),(0,us.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,padding:"10px 0px 0px 20px",display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"17px",paddingRight:17},children:[(0,us.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"Settings"}),(0,us.jsx)("div",{children:(0,us.jsx)(Jo,{onClick:h,onMouseDown:e=>e.preventDefault(),children:"Done"})})]}),a&&(0,us.jsx)("div",{style:{color:"var(--vscode-errorForeground)",marginBottom:"10px",padding:"8px",backgroundColor:"var(--vscode-inputValidation-errorBackground)",border:"1px solid var(--vscode-inputValidation-errorBorder)",borderRadius:"4px"},children:a}),(0,us.jsxs)("div",{style:{flexGrow:1,overflowY:"scroll",paddingRight:8,display:"flex",flexDirection:"column"},children:[(0,us.jsx)("div",{style:{marginBottom:5},children:(0,us.jsx)(If,{showModelOptions:!0,apiErrorMessage:a,modelIdErrorMessage:c})}),(0,us.jsxs)("div",{style:{marginBottom:5},children:[(0,us.jsx)(Zo,{checked:o,onChange:e=>s(e.target.checked),children:(0,us.jsx)("span",{style:{fontWeight:"500"},children:"Always approve read-only operations"})}),(0,us.jsx)("p",{style:{fontSize:"12px",marginTop:"5px",color:"var(--vscode-descriptionForeground)"},children:"When enabled, BLACKBOX will automatically view directory contents and read files without requiring you to click the Approve button."})]}),(0,us.jsxs)("div",{style:{textAlign:"center",color:"var(--vscode-descriptionForeground)",fontSize:"12px",lineHeight:"1.2",marginTop:"auto",padding:"10px 8px 15px 0px"},children:[(0,us.jsxs)("p",{style:{wordWrap:"break-word",margin:0,padding:0},children:["If you have any questions or feedback, feel free to contact us at"," ",(0,us.jsx)(ts,{href:"mailto:team@blackbox.ai",style:{display:"inline"},children:"team@blackbox.ai"})]}),(0,us.jsxs)("p",{style:{fontStyle:"italic",margin:"10px 0 0 0",padding:0},children:["v",r]})]})]})]})},wy=(0,t.memo)(ky),Sy=["chris","signal","stanfordmedical","neon","stellic","santiago","protrial"];const Cy=Object.create(null);Cy.open="0",Cy.close="1",Cy.ping="2",Cy.pong="3",Cy.message="4",Cy.upgrade="5",Cy.noop="6";const Ty=Object.create(null);Object.keys(Cy).forEach((e=>{Ty[Cy[e]]=e}));const Ey={type:"error",data:"parser error"},_y="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Iy="function"===typeof ArrayBuffer,Ry=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Py=(e,t,n)=>{let{type:i,data:r}=e;return _y&&r instanceof Blob?t?n(r):Ay(r,n):Iy&&(r instanceof ArrayBuffer||Ry(r))?t?n(r):Ay(new Blob([r]),n):n(Cy[i]+(r||""))},Ay=(e,t)=>{const n=new FileReader;return n.onload=function(){const e=n.result.split(",")[1];t("b"+(e||""))},n.readAsDataURL(e)};function Oy(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let My;const Ny="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Dy="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let n=0;n<64;n++)Dy[Ny.charCodeAt(n)]=n;const jy="function"===typeof ArrayBuffer,Ly=(e,t)=>{if("string"!==typeof e)return{type:"message",data:By(e,t)};const n=e.charAt(0);if("b"===n)return{type:"message",data:Fy(e.substring(1),t)};return Ty[n]?e.length>1?{type:Ty[n],data:e.substring(1)}:{type:Ty[n]}:Ey},Fy=(e,t)=>{if(jy){const n=(e=>{let t,n,i,r,o,s=.75*e.length,a=e.length,l=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);const c=new ArrayBuffer(s),u=new Uint8Array(c);for(t=0;t<a;t+=4)n=Dy[e.charCodeAt(t)],i=Dy[e.charCodeAt(t+1)],r=Dy[e.charCodeAt(t+2)],o=Dy[e.charCodeAt(t+3)],u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&o;return c})(e);return By(n,t)}return{base64:!0,data:e}},By=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Uy=String.fromCharCode(30);function $y(){return new TransformStream({transform(e,t){!function(e,t){_y&&e.data instanceof Blob?e.data.arrayBuffer().then(Oy).then(t):Iy&&(e.data instanceof ArrayBuffer||Ry(e.data))?t(Oy(e.data)):Py(e,!1,(e=>{My||(My=new TextEncoder),t(My.encode(e))}))}(e,(n=>{const i=n.length;let r;if(i<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,i);else if(i<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,i)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(i))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(n)}))}})}let zy;function Vy(e){return e.reduce(((e,t)=>e+t.length),0)}function Hy(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let i=0;for(let r=0;r<t;r++)n[r]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),n}function qy(e){if(e)return function(e){for(var t in qy.prototype)e[t]=qy.prototype[t];return e}(e)}qy.prototype.on=qy.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},qy.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},qy.prototype.off=qy.prototype.removeListener=qy.prototype.removeAllListeners=qy.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,i=this._callbacks["$"+e];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<i.length;r++)if((n=i[r])===t||n.fn===t){i.splice(r,1);break}return 0===i.length&&delete this._callbacks["$"+e],this},qy.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(n){i=0;for(var r=(n=n.slice(0)).length;i<r;++i)n[i].apply(this,t)}return this},qy.prototype.emitReserved=qy.prototype.emit,qy.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},qy.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Wy="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Gy="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function Ky(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n.reduce(((t,n)=>(e.hasOwnProperty(n)&&(t[n]=e[n]),t)),{})}const Qy=Gy.setTimeout,Xy=Gy.clearTimeout;function Yy(e,t){t.useNativeTimers?(e.setTimeoutFn=Qy.bind(Gy),e.clearTimeoutFn=Xy.bind(Gy)):(e.setTimeoutFn=Gy.setTimeout.bind(Gy),e.clearTimeoutFn=Gy.clearTimeout.bind(Gy))}function Jy(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class Zy extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class ex extends qy{constructor(e){super(),this.writable=!1,Yy(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new Zy(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Ly(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}(e);return t.length?"?"+t:""}}class tx extends ex{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",(function(){--e||t()}))),this.writable||(e++,this.once("drain",(function(){--e||t()})))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const n=e.split(Uy),i=[];for(let r=0;r<n.length;r++){const e=Ly(n[r],t);if(i.push(e),"error"===e.type)break}return i})(e,this.socket.binaryType).forEach((e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)})),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const n=e.length,i=new Array(n);let r=0;e.forEach(((e,o)=>{Py(e,!1,(e=>{i[o]=e,++r===n&&t(i.join(Uy))}))}))})(e,(e=>{this.doWrite(e,(()=>{this.writable=!0,this.emitReserved("drain")}))}))}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=Jy()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let nx=!1;try{nx="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(GU){}const ix=nx;function rx(){}class ox extends tx{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let n=location.port;n||(n=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",((e,t)=>{this.onError("xhr post error",e,t)}))}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",((e,t)=>{this.onError("xhr poll error",e,t)})),this.pollXhr=e}}class sx extends qy{constructor(e,t,n){super(),this.createRequest=e,Yy(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=void 0!==n.data?n.data:null,this._create()}_create(){var e;const t=Ky(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&n.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(WU){}if("POST"===this._method)try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(WU){}try{n.setRequestHeader("Accept","*/*")}catch(WU){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var e;3===n.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(n.getResponseHeader("set-cookie"))),4===n.readyState&&(200===n.status||1223===n.status?this._onLoad():this.setTimeoutFn((()=>{this._onError("number"===typeof n.status?n.status:0)}),0))},n.send(this._data)}catch(WU){return void this.setTimeoutFn((()=>{this._onError(WU)}),0)}"undefined"!==typeof document&&(this._index=sx.requestsCount++,sx.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=rx,e)try{this._xhr.abort()}catch(WU){}"undefined"!==typeof document&&delete sx.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(sx.requestsCount=0,sx.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",ax);else if("function"===typeof addEventListener){addEventListener("onpagehide"in Gy?"pagehide":"unload",ax,!1)}function ax(){for(let e in sx.requests)sx.requests.hasOwnProperty(e)&&sx.requests[e].abort()}const lx=function(){const e=cx({xdomain:!1});return e&&null!==e.responseType}();function cx(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||ix))return new XMLHttpRequest}catch(WU){}if(!t)try{return new(Gy[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(WU){}}const ux="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class dx extends ex{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=ux?{}:Ky(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(GU){return this.emitReserved("error",GU)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;Py(n,this.supportsBinary,(e=>{try{this.doWrite(n,e)}catch(WU){}i&&Wy((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=Jy()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const hx=Gy.WebSocket||Gy.MozWebSocket;const px={websocket:class extends dx{createSocket(e,t,n){return ux?new hx(e,t,n):t?new hx(e,t):new hx(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends ex{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(GU){return this.emitReserved("error",GU)}this._transport.closed.then((()=>{this.onClose()})).catch((e=>{this.onError("webtransport error",e)})),this._transport.ready.then((()=>{this._transport.createBidirectionalStream().then((e=>{const t=function(e,t){zy||(zy=new TextDecoder);const n=[];let i=0,r=-1,o=!1;return new TransformStream({transform(s,a){for(n.push(s);;){if(0===i){if(Vy(n)<1)break;const e=Hy(n,1);o=128===(128&e[0]),r=127&e[0],i=r<126?3:126===r?1:2}else if(1===i){if(Vy(n)<2)break;const e=Hy(n,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),i=3}else if(2===i){if(Vy(n)<8)break;const e=Hy(n,8),t=new DataView(e.buffer,e.byteOffset,e.length),o=t.getUint32(0);if(o>Math.pow(2,21)-1){a.enqueue(Ey);break}r=o*Math.pow(2,32)+t.getUint32(4),i=3}else{if(Vy(n)<r)break;const e=Hy(n,r);a.enqueue(Ly(o?e:zy.decode(e),t)),i=0}if(0===r||r>e){a.enqueue(Ey);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),i=$y();i.readable.pipeTo(e.writable),this._writer=i.writable.getWriter();const r=()=>{n.read().then((e=>{let{done:t,value:n}=e;t||(this.onPacket(n),r())})).catch((e=>{}))};r();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then((()=>this.onOpen()))}))}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],i=t===e.length-1;this._writer.write(n).then((()=>{i&&Wy((()=>{this.writable=!0,this.emitReserved("drain")}),this.setTimeoutFn)}))}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends ox{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=lx&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new sx(cx,this.uri(),e)}}},fx=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mx=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function gx(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),i=e.indexOf("]");-1!=n&&-1!=i&&(e=e.substring(0,n)+e.substring(n,i).replace(/:/g,";")+e.substring(i,e.length));let r=fx.exec(e||""),o={},s=14;for(;s--;)o[mx[s]]=r[s]||"";return-1!=n&&-1!=i&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){const n=/\/{2,9}/g,i=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||i.splice(0,1);"/"==t.slice(-1)&&i.splice(i.length-1,1);return i}(0,o.path),o.queryKey=function(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,i){t&&(n[t]=i)})),n}(0,o.query),o}const vx="function"===typeof addEventListener&&"function"===typeof removeEventListener,bx=[];vx&&addEventListener("offline",(()=>{bx.forEach((e=>e()))}),!1);class yx extends qy{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const n=gx(e);t.hostname=n.host,t.secure="https"===n.protocol||"wss"===n.protocol,t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=gx(t.host).host);Yy(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach((e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e})),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},n=e.split("&");for(let i=0,r=n.length;i<r;i++){let e=n[i].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),vx&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},bx.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);const e=this.opts.rememberUpgrade&&yx.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",(e=>this._onClose("transport close",e)))}onOpen(){this.readyState="open",yx.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn((()=>{this._onClose("ping timeout")}),e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(e+="string"===typeof(t=i)?function(e){let t=0,n=0;for(let i=0,r=e.length;i<r;i++)t=e.charCodeAt(i),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(i++,n+=4);return n}(t):Math.ceil(1.33*(t.byteLength||t.size))),n>0&&e>this._maxPayload)return this.writeBuffer.slice(0,n);e+=2}var t;return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Wy((()=>{this._onClose("ping timeout")}),this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,i){if("function"===typeof t&&(i=t,t=void 0),"function"===typeof n&&(i=n,n=null),"closing"===this.readyState||"closed"===this.readyState)return;(n=n||{}).compress=!1!==n.compress;const r={type:e,data:t,options:n};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?n():e()})):this.upgrading?n():e()),this}_onError(e){if(yx.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),vx&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=bx.indexOf(this._offlineEventListener);-1!==e&&bx.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}yx.protocol=4;class xx extends yx{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;yx.priorWebsocketSuccess=!1;const i=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",(e=>{if(!n)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;yx.priorWebsocketSuccess="websocket"===t.name,this.transport.pause((()=>{n||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}))}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}})))};function r(){n||(n=!0,c(),t.close(),t=null)}const o=e=>{const n=new Error("probe error: "+e);n.transport=t.name,r(),this.emitReserved("upgradeError",n)};function s(){o("transport closed")}function a(){o("socket closed")}function l(e){t&&e.name!==t.name&&r()}const c=()=>{t.removeListener("open",i),t.removeListener("error",o),t.removeListener("close",s),this.off("close",a),this.off("upgrading",l)};t.once("open",i),t.once("error",o),t.once("close",s),this.once("close",a),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn((()=>{n||t.open()}),200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}class kx extends xx{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map((e=>px[e])).filter((e=>!!e))),super(e,t)}}const wx="function"===typeof ArrayBuffer,Sx=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Cx=Object.prototype.toString,Tx="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Cx.call(Blob),Ex="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Cx.call(File);function _x(e){return wx&&(e instanceof ArrayBuffer||Sx(e))||Tx&&e instanceof Blob||Ex&&e instanceof File}function Ix(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,n=e.length;t<n;t++)if(Ix(e[t]))return!0;return!1}if(_x(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Ix(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&Ix(e[n]))return!0;return!1}function Rx(e){const t=[],n=e.data,i=e;return i.data=Px(n,t),i.attachments=t.length,{packet:i,buffers:t}}function Px(e,t){if(!e)return e;if(_x(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){const n=new Array(e.length);for(let i=0;i<e.length;i++)n[i]=Px(e[i],t);return n}if("object"===typeof e&&!(e instanceof Date)){const n={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=Px(e[i],t));return n}return e}function Ax(e,t){return e.data=Ox(e.data,t),delete e.attachments,e}function Ox(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Ox(e[n],t);else if("object"===typeof e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Ox(e[n],t));return e}const Mx=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Nx=5;var Dx;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Dx||(Dx={}));class jx{constructor(e){this.replacer=e}encode(e){return e.type!==Dx.EVENT&&e.type!==Dx.ACK||!Ix(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Dx.EVENT?Dx.BINARY_EVENT:Dx.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Dx.BINARY_EVENT&&e.type!==Dx.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Rx(e),n=this.encodeAsString(t.packet),i=t.buffers;return i.unshift(n),i}}function Lx(e){return"[object Object]"===Object.prototype.toString.call(e)}class Fx extends qy{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===Dx.BINARY_EVENT;n||t.type===Dx.BINARY_ACK?(t.type=n?Dx.EVENT:Dx.ACK,this.reconstructor=new Bx(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!_x(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(void 0===Dx[n.type])throw new Error("unknown packet type "+n.type);if(n.type===Dx.BINARY_EVENT||n.type===Dx.BINARY_ACK){const i=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(i,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");n.attachments=Number(r)}if("/"===e.charAt(t+1)){const i=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}n.nsp=e.substring(i,t)}else n.nsp="/";const i=e.charAt(t+1);if(""!==i&&Number(i)==i){const i=t+1;for(;++t;){const n=e.charAt(t);if(null==n||Number(n)!=n){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(!Fx.isPayloadValid(n.type,i))throw new Error("invalid payload");n.data=i}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(WU){return!1}}static isPayloadValid(e,t){switch(e){case Dx.CONNECT:return Lx(t);case Dx.DISCONNECT:return void 0===t;case Dx.CONNECT_ERROR:return"string"===typeof t||Lx(t);case Dx.EVENT:case Dx.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Mx.indexOf(t[0]));case Dx.ACK:case Dx.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Bx{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Ax(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function Ux(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const $x=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class zx extends qy{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Ux(e,"open",this.onopen.bind(this)),Ux(e,"packet",this.onpacket.bind(this)),Ux(e,"error",this.onerror.bind(this)),Ux(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,n,i;if($x.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];if(o.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(o),this;const a={type:Dx.EVENT,data:o,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"===typeof o[o.length-1]){const e=this.ids++,t=o.pop();this._registerAckCallback(e,t),a.id=e}const l=null===(n=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===n?void 0:n.writable,c=this.connected&&!(null===(i=this.io.engine)||void 0===i?void 0:i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var n,i=this;const r=null!==(n=this.flags.timeout)&&void 0!==n?n:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const o=this.io.setTimeoutFn((()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))}),r),s=function(){i.io.clearTimeoutFn(o);for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(i,n)};s.withError=!0,this.acks[e]=s}emitWithAck(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(((t,i)=>{const r=(e,n)=>e?i(e):t(n);r.withError=!0,n.push(r),this.emit(e,...n)}))}_addToQueue(e){var t=this;let n;"function"===typeof e[e.length-1]&&(n=e.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((function(e){if(i!==t._queue[0])return;if(null!==e)i.tryCount>t._opts.retries&&(t._queue.shift(),n&&n(e));else if(t._queue.shift(),n){for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];n(null,...o)}return i.pending=!1,t._drainQueue()})),this._queue.push(i),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth((e=>{this._sendConnectPacket(e)})):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Dx.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach((e=>{if(!this.sendBuffer.some((t=>String(t.id)===e))){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}}))}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Dx.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Dx.EVENT:case Dx.BINARY_EVENT:this.onevent(e);break;case Dx.ACK:case Dx.BINARY_ACK:this.onack(e);break;case Dx.DISCONNECT:this.ondisconnect();break;case Dx.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(){if(!n){n=!0;for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];t.packet({type:Dx.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach((e=>this.emitEvent(e))),this.receiveBuffer=[],this.sendBuffer.forEach((e=>{this.notifyOutgoingListeners(e),this.packet(e)})),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((e=>e())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Dx.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Vx(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Vx.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},Vx.prototype.reset=function(){this.attempts=0},Vx.prototype.setMin=function(e){this.ms=e},Vx.prototype.setMax=function(e){this.max=e},Vx.prototype.setJitter=function(e){this.jitter=e};class Hx extends qy{constructor(t,n){var i;super(),this.nsps={},this.subs=[],t&&"object"===typeof t&&(n=t,t=void 0),(n=n||{}).path=n.path||"/socket.io",this.opts=n,Yy(this,n),this.reconnection(!1!==n.reconnection),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(i=n.randomizationFactor)&&void 0!==i?i:.5),this.backoff=new Vx({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==n.timeout?2e4:n.timeout),this._readyState="closed",this.uri=t;const r=n.parser||e;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==n.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new kx(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=Ux(t,"open",(function(){n.onopen(),e&&e()})),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},o=Ux(t,"error",r);if(!1!==this._timeout){const e=this._timeout,n=this.setTimeoutFn((()=>{i(),r(new Error("timeout")),t.close()}),e);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Ux(e,"ping",this.onping.bind(this)),Ux(e,"data",this.ondata.bind(this)),Ux(e,"error",this.onerror.bind(this)),Ux(e,"close",this.onclose.bind(this)),Ux(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(WU){this.onclose("parse error",WU)}}ondecoded(e){Wy((()=>{this.emitReserved("packet",e)}),this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new zx(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t){if(this.nsps[n].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach((e=>e())),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),null===(n=this.engine)||void 0===n||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn((()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open((t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()})))}),t);this.opts.autoUnref&&n.unref(),this.subs.push((()=>{this.clearTimeoutFn(n)}))}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const qx={};function Wx(e,t){"object"===typeof e&&(t=e,e=void 0);const n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,i=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),i=gx(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const r=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+r+":"+i.port+t,i.href=i.protocol+"://"+r+(n&&n.port===i.port?"":":"+i.port),i}(e,(t=t||{}).path||"/socket.io"),i=n.source,r=n.id,o=n.path,s=qx[r]&&o in qx[r].nsps;let a;return t.forceNew||t["force new connection"]||!1===t.multiplex||s?a=new Hx(i,t):(qx[r]||(qx[r]=new Hx(i,t)),a=qx[r]),n.query&&!t.query&&(t.query=n.queryKey),a.socket(n.path,t)}Object.assign(Wx,{Manager:Hx,Socket:zx,io:Wx,connect:Wx});let Gx=e=>crypto.getRandomValues(new Uint8Array(e));const Kx=(0,t.createContext)(void 0),Qx=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(null),[o,s]=(0,t.useState)({}),[a,l]=(0,t.useState)({}),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)({}),[p,f]=(0,t.useState)([]),[m,g]=(0,t.useState)("disconnected"),v=(0,t.useRef)(null),b=(0,t.useRef)(null),y=(0,t.useRef)({}),x=(0,t.useRef)(null),k=(0,t.useRef)(i),w=(0,t.useRef)(!1),S=(0,t.useRef)(d),C=(0,t.useRef)([]),T=(0,t.useRef)({}),E=(0,t.useRef)(!1),_=(0,t.useRef)(null),I=(0,t.useRef)({}),R=(0,t.useRef)({}),P=(0,t.useRef)(!0),A=(0,t.useRef)(null),O=e=>{A.current&&(A.current(),A.current=null),A.current=e},M=()=>!!k.current||(console.error("Socket not initialized"),!1),N=(e,t)=>{oe(e,t)},D=()=>b.current?b.current:localStorage.getItem("chatRoomUserId")?localStorage.getItem("chatRoomUserId"):"",j=()=>localStorage.getItem("chatRoomUserName")?localStorage.getItem("chatRoomUserName"):"",{audioRoomId:L,isAudioMuted:F,isRecording:B,handleExtensionMessageForAudio:U,audioRoomCallInProgressRef:$,setupAudioSocketEvents:z,removeAudioSocketEvents:V,installAudioCallPluggin:H,initializeAudioCallPluggin:q,closeAudioCallPluggin:W,getAudioPlugginInitialized:G,audioCreateRoom:K,audioJoinRoom:Q,audioLeaveRoom:X,audioToggleMute:Y,sendVSCodeMessageToExtension:J,startAudioRinging:Z,stopAudioRinging:ee}=function(e){let{socketInitialized:n,sendCallback:i,getUserId:r,getUserName:o}=e;const[s,a]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!1),h=(0,t.useRef)(null),p=(0,t.useRef)(!1),f=(0,t.useRef)(!1),m=(0,t.useRef)(null),g=(0,t.useRef)(!1),v=(0,t.useRef)(!1);(0,t.useEffect)((()=>{s&&(h.current=s)}));const b=e=>{gk.log("In onAudioRoomCreated"),i("audioRoomCreated",e)},y=e=>{const{roomId:t}=e;gk.log("In onAudioRoomJoined"),i("audioRoomJoined",t)},x=e=>{const{userId:t}=e;gk.log("In onAudioUserJoined"),i("audioUserJoined",t)},k=e=>{const{socketId:t,userId:n}=e;gk.log("In onAudioUserLeft"),i("audioUserLeft",{socketId:t,userId:n})},w=e=>{gk.log("In onAudioLeftRoom"),i("audioLeftRoom",e),a(null)},S=e=>{gk.log("In onAudioCallNotification");const{socketId:t}=e;e.isCurrentUser=!1,i("audioCallNotification",e)},C=e=>{gk.log("In onAudioCallDisconnected"),i("audioCallDisconnected",e)},T=e=>{l&&(c(!1),i("audioMuteChanged",{isMuted:!1,roomId:e}))},E=()=>{d(!1)},_=(e,t)=>{const n=t?{...t,type:e}:{type:e};hs.postMessage({type:"groupAudioType",data:n})},I=(e,t)=>{gk.info("Stopping ringing from "+e),g.current=!1,_("stop-ringing-tone"),t&&t(),m.current&&(clearTimeout(m.current),m.current=null)};return{audioRoomId:s,isAudioMuted:l,isRecording:u,audioRoomCallInProgressRef:f,handleExtensionMessageForAudio:e=>{const t=e.data;if("audioData"===t.type){const e=t.data;switch(e.type){case"audio-pluggin-initialized":gk.log("Audio Pluggin Initialized"),_("audio-initialize"),p.current=!0,setTimeout((()=>{i("audioPlugginInitialized")}),500);break;case"audio-room-created":b(e);break;case"audio-room-joined":y(e);break;case"audio-user-joined":x(e);break;case"audio-user-left":k(e);break;case"audio-left-room":w(e);break;case"audio-pluggin-installation-error":i("audioPlugginInstallationError",e);break;case"audio-pluggin-initialized-error":i("audioPlugginInitializedError",e);break;case"audio-pluggin-error":i("audioPlugginError",e)}}},setupAudioSocketEvents:e=>{e.on("audio-call-notification",S),e.on("audio-call-disconnected",C)},removeAudioSocketEvents:e=>{e.off("audio-call-notification",S),e.off("audio-call-disconnected",C)},installAudioCallPluggin:()=>{v.current||(_("install-audio-pluggin"),v.current=!0)},initializeAudioCallPluggin:()=>{_("initialize-audio-pluggin")},closeAudioCallPluggin:()=>{_("close-audio-pluggin"),p.current=!1},getAudioPlugginInitialized:()=>!!p.current,audioCreateRoom:e=>{try{if(!n())return;T(e),_("audio-create-room",{roomId:lk(e)}),d(!0),a(e)}catch(t){console.error("Error creating audio room:",t)}},audioJoinRoom:async e=>{try{if(!n())return;if(!e.trim())throw new Error("Room ID is required");T(e),_("audio-join-room",{roomId:lk(e)}),d(!0),a(e)}catch(t){console.error("Error joining room:",t)}},audioLeaveRoom:e=>{try{if(!n())return;if(!e.trim())throw new Error("Room ID is required");E(),_("audio-leave-room",{roomId:lk(e)})}catch(t){console.error("Error leaving room:",t)}a(null)},audioLeaveAllRooms:()=>{},audioToggleMute:e=>{const t=!l;_(l?"audio-unmute":"audio-mute",{roomId:lk(e)}),c(t),i("audioMuteChanged",{isMuted:t,roomId:e})},sendVSCodeMessageToExtension:_,startAudioRinging:(e,t,n)=>{g.current||(gk.info("Starting ringing from "+e),_("play-ringing-tone"),t&&t(),m.current&&clearTimeout(m.current),g.current=!0,m.current=setTimeout((()=>{I(e,n),gk.info("The call was not answered within the time frame so disconnecting the audio sound")}),3e4))},stopAudioRinging:I}}({socketInitialized:M,sendCallback:N,getUserId:D,getUserName:j});(0,t.useEffect)((()=>{function e(e){const t=e.data;if("action"===t.type)switch(t.action){case"didBecomeVisible":P.current=!0;break;case"didBecomeInvisible":P.current=!1}U(e)}return window.addEventListener("message",e),()=>window.removeEventListener("message",e)}),[]),(0,t.useEffect)((()=>{let e=null===k.current;k.current=i,e&&N("initialized",{socket:k.current})}),[i]),(0,t.useEffect)((()=>{k.current=i}),[i]),(0,t.useEffect)((()=>{S.current=d}),[d]),(0,t.useEffect)((()=>{y.current||(y.current={}),y.current=o,C.current=p,x.current=c}));const te=async()=>{let e=0;const t={autoConnect:!0,reconnection:!0,reconnectionAttempts:5,reconnectionDelay:1e3,reconnectionDelayMax:3e3,timeout:3e4};return new Promise(((n,i)=>{g("connecting");const o=Wx("https://websocket-messaging-2.onrender.com",t),s=()=>{ie(o),o.disconnect()};o.once("connect",(()=>{g("connected"),v.current||(v.current=j());const e=v.current;b.current||(b.current=D());const t=b.current;gk.log(`Connected to server with socket ID: ${o.id} and username: ${e} and userId: ${t}`),e&&t?(w.current=!0,o.emit("user_connected",{username:e,userId:t})):gk.log(`Socket not connected to server with socket ID: ${o.id} and username: ${e} and userId: ${t}`),ne(o),r(o),k.current=o,n(s)})),o.on("connect_error",(t=>{gk.error(`Connection error: ${t}`),e<5?(e++,g("connecting"),setTimeout((()=>{o.connect()}),2e3)):(g("error"),N("connection_error",{message:"Unable to connect to server after multiple attempts."}),i(new Error("Unable to connect to server after multiple attempts.")))})),o.on("disconnect",(()=>{g("disconnected"),gk.log(`Socket disconnected: ${o.id}`)}))}))},ne=e=>{e.on("connect_error",se),e.on("error_message",ae),e.on("receive_message",le.bind(null,e)),e.on("user_list",ce),e.on("room_list",ue),e.on("user_rooms",de),e.on("users_in_room",he),e.on("message_history",pe),e.on("message_history_pages",fe),e.on("room_deleted",me),e.on("room_created",ge),e.on("joined_room",ve),e.on("new_message_notification",be),z(e)},ie=e=>{e.off("connect_error",se),e.off("error_message",ae),e.off("receive_message",le),e.off("user_list",ce),e.off("room_list",ue),e.off("user_rooms",de),e.off("users_in_room",he),e.off("message_history",pe),e.off("message_history_pages",fe),e.off("room_deleted",me),e.off("room_created",ge),e.off("joined_room",ve),e.off("new_message_notification",be),V(e)},re=["newMessageNotification"],oe=(e,t)=>{T.current[e]&&T.current[e].forEach((n=>{n(t,e)})),re.includes(e)&&((e,t)=>{const n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)})(e,t)},se=e=>{console.error("Connection error:",e),N("connect_error",e)},ae=e=>{console.error("Error:",e.message,e.error),N("error_message",e)},le=(e,t)=>{if(t.affectedUserId===D()&&"system"===t.messageType)return;gk.log(e.id);const n={id:(t.id||t.time)+"",name:t.author,createdAt:new Date(t.time),content:t.message,role:t.role||"group",userId:t.userId||"",room:t.room,messageType:t.messageType,file:t.file,modelName:t.modelName,parentContent:t.parentContent,parentId:t.parentId,repliedMessage:t.repliedMessage},i=t.author===v.current;N("beforeNewMessageAdded",{message:n,isCurrentUserSender:i});let r=d[t.room];r||(r=S.current[t.room]);let a=o[t.room]||[],l=a[a.length-1];if(ok(n,l)||s((e=>({...e,[t.room]:[...e[t.room]||[],n]}))),r&&(a=r.messagesRef.current||[],l=a[a.length-1],!ok(n,l))){const e=[...r.messagesRef.current,n];r.setRoomMessages(e),N("newMessageReceived",{message:n,isCurrentUserSender:i})}},ce=e=>{let{room:t,users:n}=e;gk.log("user_list:",t,n),l((e=>({...e,[t]:n}))),N("userListUpdated",{room:t,users:n})},ue=e=>{gk.log("Available rooms:",e),N("roomListUpdated",e)},de=e=>{gk.log("User is part of rooms:",e),f(e),N("userRooms",e)},he=e=>{gk.log(`Users in room ${e.room} is ${e.users}`);const{room:t,users:n}=e;if((null===n||void 0===n?void 0:n.length)>0){const i=n.filter((e=>e&&e.username&&""!==e.username.trim()));e.users=i,l((e=>({...e,[t]:i.map((e=>e.username))})))}else l((e=>({...e,[t]:[]})));N("userListUpdated",e)},pe=e=>{let{room:t,messages:n,totalMessages:i}=e;const r=n.map((e=>({id:e.id||e.time,room:e.room,name:e.author,createdAt:new Date(e.time),content:e.message,role:e.role||"group",userId:e.userId||"",messageType:e.messageType,file:e.file,modelName:e.modelName,parentContent:e.parentContent,parentId:e.parentId,repliedMessage:e.repliedMessage})));s((e=>({...e,[t]:r})));let o=d[t];o||(o=S.current[t]),o&&o.setRoomMessages(r),N("messageHistory",{room:t,messages:r,totalMessages:i})},fe=e=>{let{room:t,messages:n,page:i,pageSize:r,totalMessages:a}=e;if(n&&n.length>0){var l,c,u,h;const e=n.map((e=>({id:e.id||e.time,name:e.author,createdAt:new Date(e.time),content:e.message,role:e.role||"group",userId:e.userId||"",messageType:e.messageType,file:e.file,modelName:e.modelName,parentContent:e.parentContent,parentId:e.parentId,repliedMessage:e.repliedMessage})));gk.log("---------------------",null===(l=o[t])||void 0===l?void 0:l.length,null===(c=y.current)||void 0===c||null===(u=c[t])||void 0===u?void 0:u.length);const p=(null===(h=y.current)||void 0===h?void 0:h[t])||[];y.current||(y.current={});const f=[...e,...p];s((e=>({...e,[t]:f}))),y.current[t]=f,gk.log(`Room has ${a} messages and we have ${f.length} messages`);const m=d[t]||S.current[t];m&&m.setRoomMessages(f),N("messageHistoryPages",{room:t,messages:e,page:i,pageSize:r,totalMessages:a,allMessages:f})}},me=e=>{let{room:t}=e;gk.log(`Room deleted: ${t}`),l((e=>{const{[t]:n,...i}=e;return i})),s((e=>{const{[t]:n,...i}=e;return i})),N("roomDeleted",t)},ge=e=>{let{room:t}=e;gk.log(`New room created: ${t}`),N("roomCreated",t)},ve=e=>{let{room:t}=e;gk.log(`Joined room: ${t}`),N("roomJoined",t)},be=e=>{let{room:t,message:n}=e;gk.log(`New Notification received for room ${t}`),I.current[t]=(I.current[t]||0)+1,ak(t,n),N("newMessageNotification",{room:t,message:n})},ye=e=>{if(ik(e)){const t=e.content;return Yx(t)||""}return""},xe=e=>`vscode://${R.current.extensionPublisher||"Blackboxapp"}.${R.current.extensionName||"blackboxagent"}/${e}`,ke={initialize:te,connectionStatus:m,createRoom:async(e,t,n,i)=>{const r=hk(),o=lk(e)+"-"+r;if(v.current=t,b.current=n,!M())return gk.error("Socket not initialized"),Promise.reject("Socket not initialized");t||console.error("username is null from createRoom");let s=null;return i&&i.length>0&&(s=[],i.forEach(((e,r)=>{var a;const l=new Date;let c=e.messageType;if(!c)if("user"===e.role)c="toBot";else if("assistant"===e.role){const t=i[r-1];e.parentContent=t.content,e.parentId=t.id;let n=Yx(t.content);n||(n="BLACKBOXAI"),e.modelName=n,c="fromBot"}let u=e.file;if(!u&&e.data&&e.data.imageBase64){const t=e.data;u={},u.data=t.imageBase64,u.type=pk(u.data),u.name=t.title||"image.jpg"}const d={id:(e.id||l.getTime()).toString(),room:o,author:e.name||t||"User",userId:n,time:l.toISOString(),message:e.content,role:e.role||"group",messageType:c,file:u,modelName:e.modelName,parentContent:e.parentContent,parentId:e.parentId,repliedMessage:e.repliedMessage};null===(a=s)||void 0===a||a.push(d)})),gk.log(s)),new Promise(((e,i)=>{k.current.emit("create_room",{room:o,username:t,userId:n,initialMessages:s}),u(o),e(o)}))},getSocket:()=>k.current?k.current:null,joinRoom:function(e,t,n){var i;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;if(v.current=t,b.current=n,!M())return gk.error("Socket not initialized"),void N("connection_error",{message:"Socket not connected. Please check your connection."});t||console.error("username is null from createRoom"),e=lk(e),u(e),null===(i=k.current)||void 0===i||i.emit("join_room",{room:e,username:t,userId:n,page:r,pageSize:o})},getUserListForRoom:e=>(e=lk(e),a[e]||[]),handleGroupMessage:(e,t,n,i)=>{if(!k.current)return void console.error(`Socket not found for room: ${e}`);e=lk(e);const r=new Date,o={id:(t.id||r.getTime()).toString(),room:e,author:t.name||"User",userId:t.userId||D(),time:r.toISOString(),message:t.content,role:t.role||"group",messageType:t.messageType,file:t.file,modelName:t.modelName,parentContent:t.parentContent,parentId:t.parentId,repliedMessage:t.repliedMessage};h((t=>({...t,[e]:{messagesRef:i,setRoomMessages:n}}))),k.current.emit("send_message",o)},isGroupMessage:e=>{if(e){let t="";if(t="object"===typeof e?e.content:e,!t||!t.trim())return!0;if(!t.includes("@"))return!0;if(!Yx(t))return!0}return!1},isUserInRoom:(e,t)=>{e=lk(e);return(a[e]||[]).includes(t)},currentRoomId:c,getUserRooms:e=>{var t;M()&&(null===(t=k.current)||void 0===t||t.emit("get_user_rooms",{username:e,userId:D()}))},getUsersInRoom:e=>{var t;M()&&(e=lk(e),null===(t=k.current)||void 0===t||t.emit("get_user_in_rooms",{room:e}))},getRoomMessages:(e,t,n)=>{var i;M()&&(e=lk(e),h((i=>({...i,[e]:{messagesRef:n,setRoomMessages:t}}))),null===(i=k.current)||void 0===i||i.emit("get_room_messages",{room:e,userId:D(),username:j()}))},getRoomMessagesByPage:function(e,t,n){var i;let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:50;M()&&(e=lk(e),h((i=>({...i,[e]:{messagesRef:n,setRoomMessages:t}}))),null===(i=k.current)||void 0===i||i.emit("get_room_messages_pages",{room:e,page:r,pageSize:o,userId:D(),username:j()}))},extractRoomIdFromUrl:()=>{const e=window.location.href.match(/\/chat\/room\/([^/]+)$/);if(e){return lk(e[1])}return null},getUserId:D,setUserId:e=>{e&&(b.current=e,localStorage.setItem("chatRoomUserId",e),N("groupUserIdSet",e))},getUserName:j,setUserName:e=>{if(localStorage.setItem("chatRoomUserName",e),!w.current&&e){var t;b.current||(b.current=D());const n=b.current;gk.log(`Connected to server with socket ID: ${null===(t=k.current)||void 0===t?void 0:t.id} and username: ${e} and userId: ${n} from setUserName`),n&&O(te())}N("groupUserNameSet",e)},isBotMessage:tk,isFromBotMessage:nk,isToBotMessage:ik,isUserMessage:rk,getSetModelType:(e,t,n)=>{if(e&&"assistant"===e.role&&t.length>n&&!e.modelName){const i=t[n-1],r=ye(i);return e.modelName=r,r}return""},getModelType:ye,isOpeningInVSCode:E,sanitizeUrlString:lk,replyToMessage:_,setReplyToMessage:e=>{_.current=e,N("replyToMessage",_.current)},updateLastReadMessage:e=>{I.current[e]=0,k.current&&(ak(e,null),k.current.emit("update_last_read_message",{room:e,userId:D(),username:j()}))},installAudioCallPluggin:H,initializeAudioCallPluggin:q,closeAudioCallPluggin:W,getAudioPlugginInitialized:G,audioRoomCallInProgressRef:$,audioCreateRoom:K,audioJoinRoom:Q,audioLeaveRoom:X,audioToggleMute:Y,clearRoomData:e=>{s((t=>({...t,[e]:[]}))),h((t=>({...t,[e]:null}))),S.current[e]=null},sendCallback:N,addVSCodeData:e=>{e&&(R.current={...R.current,...e})},getVSCodeChatRoomLink:e=>{if(e){return xe(`join?roomId=${encodeURIComponent(e)}`)}return""},getVSCodeShowRoomsLink:()=>xe("chatrooms"),sendVSCodeMessageToExtension:J,startAudioRinging:Z,stopAudioRinging:ee,getIsExtensionActive:()=>P.current,playMessageReceivedNotification:()=>{J("play-audio-notification")},setVisitedChat:()=>{gk.log("Setting visited chat"),localStorage.setItem("group-chat-rooms-visited","true")},getVisitedChat:()=>localStorage.getItem("group-chat-rooms-visited")&&"true"===localStorage.getItem("group-chat-rooms-visited")?(gk.log("Returning visited chat as true"),!0):(gk.log("Returning visited chat as false"),!1),setCleanup:O,getCleanup:()=>A.current,addEventListener:(e,t)=>{T.current[e]||(T.current[e]=new Set),T.current[e].add(t)},removeEventListener:(e,t)=>{T.current[e]&&(T.current[e].delete(t),0===T.current[e].size&&delete T.current[e])},addCustomEventListener:(e,t)=>{document.addEventListener(e,t)},removeCustomEventListener:(e,t)=>{document.removeEventListener(e,t)}};return(0,us.jsx)(Kx.Provider,{value:ke,children:n})},Xx=()=>{const e=(0,t.useContext)(Kx);if(!e)throw new Error("useGroupChatRooms must be used within a GroupChatProvider");return e},Yx=e=>e.toLowerCase().includes("@gpt-4o")||window.location.href.toLocaleLowerCase().includes("gpt-4o")?"GPT-4o":e.toLowerCase().includes("@gemini-pro")||window.location.href.toLocaleLowerCase().includes("gemini-pro")?"Gemini-Pro":e.toLowerCase().includes("@claude-sonnet-3.5")||window.location.href.toLocaleLowerCase().includes("claude-sonnet-3.5")?"Claude-Sonnet-3.5":e.toLowerCase().includes("@blackboxai")||e.toLowerCase().includes("@blackbox.ai")||window.location.href.toLocaleLowerCase().includes("blackboxai")?"BLACKBOX.AI":e.toLowerCase().includes("@blackboxai-pro")||e.toLowerCase().includes("@blackbox.ai-pro")||window.location.href.toLocaleLowerCase().includes("blackboxai-pro")?"BLACKBOX.AI-PRO":null;function Jx(e){if(e){const t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date format.",e),"";const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate()),o=n.getTime()-t.getTime(),s=Math.floor((i.getTime()-r.getTime())/864e5),a=Math.floor(o/6e4),l=Math.floor(o/36e5);return a<1&&0===l&&0===s?"Just now":0===s?l>0?`${l}h ago`:`${a}m ago`:1===s?`Yesterday at ${Zx(t)}`:Zx(t)}return""}function Zx(e){return e.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0})}function ek(e,t,n){return t===n?"You":e}const tk=e=>!(!e||"fromBot"!==e.messageType&&"toBot"!==e.messageType),nk=e=>!(!e||"fromBot"!==e.messageType),ik=e=>!(!e||"toBot"!==e.messageType),rk=e=>!(!e||"group"!==e.role&&"user"!==e.role),ok=(e,t)=>!!(e&&t&&e.id&&t.id&&e.id===t.id)&&(gk.log("Received same message",e),!0),sk=()=>{localStorage.removeItem("group-chat-rooms")},ak=(e,t)=>{const n=(()=>{let e=localStorage.getItem("group-chat-rooms");if(e){const t=JSON.parse(e);(new Date).getTime()>t.expiry&&(sk(),e=null)}return e})();if(n){const i=JSON.parse(n),r=i.value;if(r&&r.length){const n=[];r.map((i=>{i.name===e&&(i.latestMessages=i.latestMessages&&i.latestMessages.length?i.latestMessages.push(t):[t]),n.push(i)})),i.value=n,localStorage.setItem("group-chat-rooms",JSON.stringify(i))}}},lk=e=>decodeURIComponent(e),ck=(e,t,n)=>{if(!e)return;const i=e.scrollTop,r=t-i,o=performance.now(),s=t=>{const a=t-o,l=Math.min(a/500,1),c=l*(2-l);e.scrollTop=i+r*c,a<500?requestAnimationFrame(s):"function"===typeof n&&n()};requestAnimationFrame(s)},uk=e=>{if(e.includes("-")){return e.split("-").slice(0,-1).join("-")}return e},dk=function(e){return((e,t,n)=>{let i=(2<<Math.log(e.length-1)/Math.LN2)-1,r=-~(1.6*i*t/e.length);return function(){let o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,s="";for(;;){let t=n(r),a=0|r;for(;a--;)if(s+=e[t[a]&i]||"",s.length===o)return s}}})(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:21,Gx)}("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",15),hk=()=>`${dk()}${Date.now()}`,pk=e=>{const t=e.match(/^data:(.+);base64,/);return t?t[1]:null},fk=e=>{const t=e=>{var t,n;const i=null!==(t=null!==(n=e.createdAt)&&void 0!==n?n:e.time)&&void 0!==t?t:null;if(!i)return null;let r;if("string"===typeof i)r=new Date(i);else{if(!(i instanceof Date))return null;r=i}return isNaN(r.getTime())?null:r};return[...e].sort(((e,n)=>{const i=e.latestMessages&&e.latestMessages.length>0,r=n.latestMessages&&n.latestMessages.length>0;if(i&&!r)return-1;if(!i&&r)return 1;if(i&&r){const i=e.latestMessages[e.latestMessages.length-1],r=n.latestMessages[n.latestMessages.length-1],o=t(i),s=t(r);return o&&s?s.getTime()-o.getTime():o&&!s?-1:!o&&s?1:0}if(!i&&!r){const i=e.lastMessage?t(e.lastMessage):null,r=n.lastMessage?t(n.lastMessage):null;return i&&r?r.getTime()-i.getTime():i&&!r?-1:!i&&r?1:0}return 0}))},mk=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:80,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const i=[];let r=0;for(;r<e.length;)i.push(e.substring(r,r+t)),r+=t;return i.length>n?i.slice(0,n).join("\n")+"...":i.join("\n")};const gk={log:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},info:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},warn:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},error:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]},debug:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i]}},vk=e=>{var n;let{groupRoom:i,handleChatRoomClick:r}=e;const o=()=>{var e;return i.lastMessage?null===(e=i.lastMessage)||void 0===e?void 0:e.time:null},[s,a]=(0,t.useState)(Jx(o()));return(0,t.useEffect)((()=>{let e=null;return i.lastMessage&&(e=setInterval((()=>{a(Jx(o()))}),5e3)),()=>{e&&clearInterval(e)}}),[i.lastMessage]),(0,us.jsx)("div",{className:"group-chat-room-item","data-group-id":i.name,onClick:e=>r(i.name,i,e),children:i.lastMessage?(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8,padding:"12px",position:"relative"},children:[(0,us.jsxs)("div",{className:"room-name-con",children:[(0,us.jsx)("div",{style:{display:"flex",flexDirection:"row",gap:"10px"},children:(0,us.jsx)("div",{className:"group-chat-room-item-room-name",children:uk(i.name)})}),(0,us.jsx)("div",{className:"room-name-date",children:s})]}),(0,us.jsxs)("div",{className:"room-name-con",style:{gap:"10px"},children:[(0,us.jsxs)("div",{style:{fontSize:"var(--vscode-font-size)",color:"var(--vscode-foreground)",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",overflow:"hidden",whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"anywhere"},children:[i.lastMessage.author,": ",null===(n=i.lastMessage)||void 0===n?void 0:n.message]}),i.latestMessages&&i.latestMessages.length>0&&(0,us.jsx)("div",{className:"indicator-container",children:(0,us.jsx)("div",{className:"message-indicator",children:i.latestMessages.length})})]}),(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:4},children:(0,us.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",gap:4,flexWrap:"wrap"}})})})]}):(0,us.jsxs)("div",{style:{padding:"12px",display:"flex"},children:[(0,us.jsx)("div",{children:(0,us.jsx)("span",{className:"group-chat-room-item-room-name",children:uk(i.name)})}),i.latestMessages&&i.latestMessages.length>0&&(0,us.jsx)("div",{className:"indicator-container",children:(0,us.jsx)("div",{className:"message-indicator",children:i.latestMessages.length})})]})},i.name)},bk=e=>{let{groupRooms:t,handleChatRoomClick:n}=e;return(0,us.jsx)("div",{className:"scrollable-section",style:{maxHeight:"87vh",overflowY:"auto"},children:t&&t.length>0?t.map((e=>(0,us.jsx)(vk,{groupRoom:e,handleChatRoomClick:n}))):(0,us.jsx)("div",{className:"no-rooms-message",children:"No rooms available. Please Create or join a room to get started!"})})},yk=e=>{let{onCreate:n,userName:i,resetData:r,setResetData:o}=e;const[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(i||"");(0,t.useEffect)((()=>{r&&(a(""),c(i||""),o(!1))}),[r]);const u=()=>{s.trim()&&l.trim()&&n(s,l)};return(0,us.jsxs)("form",{className:"create-room-form",onSubmit:e=>e.preventDefault(),children:[(0,us.jsx)(cs,{className:"form-field",placeholder:"Enter Room Name",value:s,onInput:e=>a(e.currentTarget.value)}),!i&&(0,us.jsx)(cs,{className:"form-field",placeholder:"Enter User Name",value:l,onInput:e=>c(e.currentTarget.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),u())}}),(0,us.jsx)(Jo,{appearance:"primary",onClick:u,children:"Create Room"})]})},xk=e=>{let{isVisible:n,onClose:i,title:r,children:o,closeOnClickOutside:s=!0}=e;const a=(0,t.useRef)(null);if((0,t.useEffect)((()=>{const e=e=>{if("Escape"===e.key&&i(),"Tab"===e.key&&a.current){const t=a.current.querySelectorAll('a[href], button, textarea, input, select, [tabindex]:not([tabindex="-1"])'),n=t[0],i=t[t.length-1];e.shiftKey||document.activeElement!==i||(e.preventDefault(),n.focus()),e.shiftKey&&document.activeElement===n&&(e.preventDefault(),i.focus())}};return n&&(window.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{window.removeEventListener("keydown",e),document.body.style.overflow="auto"}}),[n,i]),!n)return null;return(0,us.jsx)("div",{className:"modal-overlay",onClick:e=>{e.target===e.currentTarget&&s&&i()},children:(0,us.jsxs)("div",{className:"modal-content",role:"dialog","aria-modal":"true","aria-labelledby":r?"modal-title":void 0,ref:a,tabIndex:-1,children:[(0,us.jsxs)("div",{className:"modal-header",children:[r&&(0,us.jsx)("h2",{className:"modal-title",id:"modal-title",children:r}),(0,us.jsx)("button",{className:"modal-close-button",onClick:i,"aria-label":"Close Modal",children:"\xd7"})]}),(0,us.jsx)("div",{className:"modal-body",children:o})]})})},kk=e=>{let{onJoin:n,userName:i,resetData:r,setResetData:o}=e;const[s,a]=(0,t.useState)(""),[l,c]=(0,t.useState)(i||"");(0,t.useEffect)((()=>{r&&(a(""),c(i||""),o(!1))}),[r,i,o]);return(0,us.jsxs)("form",{className:"join-room-form",onSubmit:e=>e.preventDefault(),children:[(0,us.jsx)(cs,{className:"form-field",placeholder:"Enter Room Code or Room Url",value:s,onInput:e=>a(e.currentTarget.value)}),!i&&(0,us.jsx)(cs,{className:"form-field",placeholder:"Enter User Name",value:l,onInput:e=>c(e.currentTarget.value)}),(0,us.jsx)(Jo,{style:{width:"100%",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-foreground)"},onClick:()=>{s.trim()&&l.trim()&&n(s,l)},children:"Join Room"})]})},wk=e=>{let{showMessagesForRoom:n,isVisible:i,isParentHidden:r,paramData:o,isFromChatView:s,setIsFromChatView:a}=e;const[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)([]),[h,p]=(0,t.useState)(!1),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),[b,y]=(0,t.useState)(!1),x=(0,t.useRef)([]),k=(0,t.useRef)(null),w=(0,t.useRef)(!0),[S,C]=(0,t.useState)(!1),T=(0,t.useRef)(null),E=(0,t.useRef)(!1),_=(0,t.useRef)(r),I=(0,t.useRef)(i);(0,t.useEffect)((()=>{x.current=u}));const{initialize:R,connectionStatus:P,joinRoom:A,createRoom:O,getUserId:M,setUserId:N,getUserName:D,setUserName:j,sanitizeUrlString:L,getUserRooms:F,updateLastReadMessage:B,addVSCodeData:U,getVSCodeChatRoomLink:$,getVSCodeShowRoomsLink:z,sendVSCodeMessageToExtension:V,installAudioCallPluggin:H,startAudioRinging:q,stopAudioRinging:W,getIsExtensionActive:G,audioRoomCallInProgressRef:K,playMessageReceivedNotification:Q,setVisitedChat:X,getVisitedChat:Y,setCleanup:J,getCleanup:Z,addEventListener:ee,removeEventListener:te}=Xx(),ne=async()=>{if(!E.current&&M()){gk.log("Initializing WebSocket...");const e=await R();return X(),E.current=!0,J(e),e}return null},ie=()=>{Y()&&M()&&ne()};(0,t.useEffect)((()=>{const e=(e,t)=>{if("initialized"===t)se();else if("roomJoined"===t){n(e)}else if("userRooms"===t){if(e&&e.length>0){let t=e.map((e=>({name:L(e.room),latestMessages:ae(e.latestMessages),lastMessage:e.lastMessage,users:null,loading:!0})));if(t=fk(t),d(t),w.current){let e=0;if(t&&t.length>0&&t.forEach((t=>{t.latestMessages&&t.latestMessages.length>0&&(e+=t.latestMessages.length)})),e>0){const t={message:`You have ${e} unread messages in Blackbox chat app.`,url:z(),messageType:"unreadMessages"};hs.postMessage({type:"showMessage",data:t})}w.current=!1}gk.log(t),(e=>{if(e&&e.length>0){const n=30,i={value:e,expiry:(new Date).getTime()+60*n*1e3};try{localStorage.setItem("group-chat-rooms",JSON.stringify(i))}catch(t){console.error(t)}}})(t)}}else if("newMessageNotification"===t){const{room:t,message:n}=e;if(gk.log("------------------- newMessageNotification ",t,n),!k.current||k.current!==t){le(t,n);const e=`${n.author}: ${n.message}`,i=`New message from ${n.author} in ${uk(t)}: ${n.message}`,r={title:"Blackbox Notification for New Message",body:e,roomId:t,message:mk(i),url:$(t),messageType:"groupChatMessage"};Q(),hs.postMessage({type:"showMessage",data:r})}}else if("goingBackToChatRoom"===t){le(e,null),k.current=null}else if("chatSetRoomId"===t){const t=e;t&&(k.current=t)}else if("audioCallNotification"===t){const{roomId:t}=e;gk.log(`In audioCallNotification Outer Most Component with isVisible ${i} and ${S}\n                    and isParentHidden ${_.current}`),G()?_.current?(gk.log("Call Notification Received In Outer Most Component when Parent is Hidden"),re(t)):G()&&!_.current&&I.current&&(gk.log("Call Notification Received In Outer Most Component when Outer Most Component is visible"),re(t)):(gk.log("Call Notification Received In Outer Most Component when Extension is not Active"),re(t))}else if("audioPlugginInstallationError"===t)gk.log("Error installing audio plugin");else if("error_message"===t){const{message:t,error:n}=e;console.error(t,n)}},t=e=>{T.current&&T.current.contains(e.target)&&C(!0)},r=e=>{T.current&&!T.current.contains(e.relatedTarget)&&C(!1)};let o;return ee("initialized",e),ee("roomJoined",e),ee("newMessageNotification",e),ee("userRooms",e),ee("goingBackToChatRoom",e),ee("chatSetRoomId",e),ee("audioCallNotification",e),ee("audioPlugginInitializedError",e),ee("error_message",e),ie(),Y()&&(o=setInterval((()=>{E.current?clearInterval(o):(ie(),E.current&&clearInterval(o))}),1e3)),document.addEventListener("focusin",t),document.addEventListener("focusout",r),()=>{te("initialized",e),te("roomJoined",e),te("newMessageNotification",e),te("userRooms",e),te("goingBackToChatRoom",e),te("chatSetRoomId",e),te("audioCallNotification",e),te("audioPlugginInitializedError",e),te("error_message",e),clearInterval(o),J(null),document.removeEventListener("focusin",t),document.removeEventListener("focusout",r)}}),[]),(0,t.useEffect)((()=>{"connected"===P&&se()}),[P]),(0,t.useEffect)((()=>{I.current=i}),[i]),(0,t.useEffect)((()=>{_.current=r,r||(!M()&&null!==o&&void 0!==o&&o.userId&&N(o.userId),M()?(gk.log("Socket Initaized status is "+E.current),ne()):gk.log("UserId is not set yet"),H())}),[r]),(0,t.useEffect)((()=>{U(o),o&&o.userId&&N(o.userId)}),[o]),(0,t.useEffect)((()=>{s&&(x.current&&x.current.length>0&&d(x.current),a(!1))}),[s]);const re=e=>{gk.log("In startAudioCall in Outer Most Component"),K.current||(gk.log("In startAudioCall in Outer Most Component - audioRoomCallInProgressRef.current"),oe(e),ce())},oe=e=>{const t=`Audio call has been started in ${uk(e)}`,n={title:"Blackbox Notification for Audio Call",body:t,roomId:e,message:mk(t),url:$(e),messageType:"groupChatMessage"};hs.postMessage({type:"showMessage",data:n})},se=()=>{D()&&F(D())},ae=e=>{if(e&&e.length>0){const t=[];for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.userId===M())break;t.push(i)}return t}return null},le=(e,t)=>{gk.log("updateRoomForMessage:",e,t);let n=[];x.current.map((i=>{i.name===e&&(t?(i.lastMessage=t,i.latestMessages=i.latestMessages?[...i.latestMessages,t]:[t],i.latestMessages=ae(i.latestMessages)):i.latestMessages=null),n.push(i)})),n=fk(n),gk.log("updateRoomForMessage newRooms is :",n),d([...n])},ce=()=>{q("ChatCallMembersIcon")};return(0,us.jsx)(us.Fragment,{children:i&&(0,us.jsxs)("div",{ref:T,children:[(0,us.jsxs)("div",{style:{color:"var(--vscode-descriptionForeground)",margin:"10px 20px",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,us.jsx)("span",{className:"codicon codicon-comment-discussion",style:{marginRight:"4px",transform:"scale(0.9)"}}),(0,us.jsx)("span",{style:{fontWeight:500,fontSize:"0.85em",textTransform:"uppercase"},children:"Chat Rooms"})]}),(0,us.jsxs)("div",{style:{padding:"0px 20px 20px 20px",display:"flex",flexDirection:"column",gap:"10px"},children:[(0,us.jsx)(Jo,{style:{width:"100%"},appearance:"primary",onClick:()=>{p(!0)},children:"Create Room"}),(0,us.jsx)(Jo,{style:{width:"100%",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-foreground)"},onClick:()=>{v(!0)},children:"Join Room"})]}),(0,us.jsx)(bk,{groupRooms:u,handleChatRoomClick:(e,t,i)=>{i.preventDefault(),k.current=e,B(e),le(e,null),n(e)}}),(0,us.jsx)(xk,{isVisible:h,onClose:()=>{p(!1)},title:"Create Room",closeOnClickOutside:!0,children:(0,us.jsx)(yk,{onCreate:async(e,t)=>{gk.log("Create Room:",{roomName:e,userName:t}),c(!0);try{sk(),"connected"!==P&&await ne(),j(t);const n=await O(e,t,M());p(!1),m(!0),gk.log("*****************roomId::"+n)}catch(n){console.error("Error creating room:",n),c(!1)}},userName:D(),resetData:f,setResetData:m})}),(0,us.jsx)(xk,{isVisible:g,onClose:()=>{v(!1)},title:"Join Room",closeOnClickOutside:!0,children:(0,us.jsx)(kk,{onJoin:async(e,t)=>{gk.log("Join Room:",{roomId:e,userName:t}),"connected"!==P&&await ne(),j(t);const n=(e=>{if(e.startsWith("http")||e.startsWith("https")){const t="/room/",n=e.indexOf(t);return-1===n?null:e.substring(n+t.length)}if(e.startsWith("vscode")){const t="roomId=",n=e.indexOf(t);return-1===n?null:e.substring(n+t.length)}return e})(e);n?(A(n,t,M()),v(!1),y(!0)):hs.postMessage({type:"showMessage",data:{messageType:"info",message:"Enter a valid Room Id or Room URL to join a room"}})},userName:D(),resetData:b,setResetData:y})})]})})},Sk=e=>{let{message:n,index:i,userId:r,username:o,isSameUser:s}=e;const[a,l]=(0,t.useState)(Jx(null===n||void 0===n?void 0:n.createdAt)),c=n.userId===r,u=c?"message-container message-right":"message-container message-left";return(0,t.useEffect)((()=>{const e=setInterval((()=>{l(Jx(null===n||void 0===n?void 0:n.createdAt))}),5e3);return()=>{clearInterval(e)}}),[null===n||void 0===n?void 0:n.createdAt]),(0,us.jsx)("div",{className:u,children:(0,us.jsxs)("div",{className:"message-bubble",children:[!c&&!s&&(0,us.jsx)("div",{style:{marginBottom:"5px"},children:(0,us.jsx)("span",{style:{fontWeight:"bold"},children:ek(n.name,n.userId,r)})}),(0,us.jsx)("div",{style:{wordBreak:"break-word",overflowWrap:"anywhere"},children:(0,us.jsx)("div",{style:{margin:0,whiteSpace:"pre-wrap"},children:n.content})}),(0,us.jsx)("div",{className:"message-timestamp",children:a})]})})},Ck=e=>{let{roomId:n,handleBackClick:i,members:r,getUsersInRoom:o}=e;const{getVSCodeChatRoomLink:s}=Xx(),[a,l]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{o(n)}),[n,o]),(0,us.jsxs)("div",{style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px"},children:[(0,us.jsxs)("div",{className:"header-container",children:[(0,us.jsxs)("div",{className:"action-container",onClick:i,children:[(0,us.jsx)("span",{className:"codicon codicon-chevron-left icon icon-chevron-left",style:{marginRight:"0px"}}),(0,us.jsx)("div",{style:{display:"flex"},children:(0,us.jsx)("span",{className:"header-text",children:"BACK"})})]}),(0,us.jsx)("div",{style:{display:"flex"},children:(0,us.jsx)("span",{className:"header-text",children:uk(n)})}),(0,us.jsx)("div",{style:{display:"flex",flexDirection:"row",paddingRight:"20px",gap:"10px"},children:(0,us.jsx)(Jo,{style:{backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-foreground)"},onClick:async()=>{try{const e=(e=>`https://blackbox.ai/chat/room/${e}`)(n);await navigator.clipboard.writeText(e),hs.postMessage({type:"showMessage",data:{messageType:"info",message:"Room Link Copied to Clipboard"}}),gk.log("Room link copied to clipboard!")}catch(e){console.error("Failed to copy text: ",e)}},children:"Invite"})})]}),(0,us.jsx)(xk,{isVisible:a,onClose:()=>{l(!1)},title:"Team Members",children:(0,us.jsxs)("ul",{children:[0===r.length&&(0,us.jsx)("li",{children:"No members found"}),r.map((e=>(0,us.jsx)("li",{children:e},e)))]})})]})};const Tk=(0,t.createContext)(void 0),Ek=e=>{let{children:n}=e;const[i,r]=(0,t.useState)([]),o=(0,t.useCallback)(((e,t,n)=>{const i=Date.now().toString(),{position:o="top-right",autoClose:s=!0,showCloseButton:a=!1,onClick:l,containerId:c="default"}=n||{},u={id:i,type:e,message:t,position:o,autoClose:s,showCloseButton:a,onClick:l,containerId:c};r((e=>[...e,u]))}),[]),s=(0,t.useCallback)((e=>{r((t=>t.filter((t=>t.id!==e))))}),[]),a={toasts:i,addToast:o,removeToast:s,removeAllToasts:(0,t.useCallback)((()=>{r([])}),[])};return(0,us.jsx)(Tk.Provider,{value:a,children:n})};const _k=e=>{let{roomId:n,showRoomsHandler:i,isExternalLink:r,apiConfiguration:o,setApiConfiguration:s}=e;const[a,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(!0),p=(0,t.useRef)(1),f=(0,t.useRef)(!1),m=(0,t.useRef)(!1),[g,v]=(0,t.useState)(""),[b,y]=(0,t.useState)([]),x=(0,t.useRef)([]);(0,t.useEffect)((()=>{x.current=a}));const[k,w]=(0,t.useState)(""),S=(0,t.useRef)(null),C=(0,t.useRef)(null),T=(0,t.useRef)(!1),E=(0,t.useRef)({scrollHeightBefore:0,scrollTopBefore:0,firstCallResponseGot:!1}),{addToast:_,removeToast:I,removeAllToasts:R}=function(){const e=(0,t.useContext)(Tk);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}(),{joinRoom:P,handleGroupMessage:A,getRoomMessagesByPage:O,getUserName:M,getUserId:N,updateLastReadMessage:D,clearRoomData:j,sendVSCodeMessageToExtension:L,audioLeaveRoom:F,audioRoomCallInProgressRef:B,playMessageReceivedNotification:U,sendCallback:$,addEventListener:z,removeEventListener:V,getUserListForRoom:H,getUsersInRoom:q}=Xx();(0,t.useEffect)((()=>{const e=(e,t)=>{if("roomJoined"===t)ee(p.current),$("chatSetRoomId",n);else if("messageHistoryPages"===t){gk.log("Fetching Completed ...");const{room:t,messages:i,page:r,totalMessages:o,allMessages:s}=e;K(),u(!1),t===n&&(gk.info(`totalMessages : ${o}, allMessages: ${s.length} for room ${n}`),i.length<20||o<=s.length?(h(!1),J()):d&&Y()&&setTimeout((()=>{Z()}),500))}else if("beforeNewMessageAdded"===t){const{message:t,isCurrentUserSender:n}=e;T.current=!1,C.current&&!n&&ne()}else if("newMessageReceived"===t){const{message:t,isCurrentUserSender:n}=e;n?T.current=!0:re()}else if("userListUpdated"===t){if(e&&e.room===n){const t=e.users?e.users.map((e=>e.username)):[];y(t)}}else if("error_message"===t){const{message:t,error:n}=e;console.error(t,n),f.current=!1,u(!1),v(t)}};return z("roomJoined",e),z("messageHistoryPages",e),z("newMessageReceived",e),z("beforeNewMessageAdded",e),z("error_message",e),z("userListUpdated",e),()=>{D(n),V("roomJoined",e),V("messageHistoryPages",e),V("newMessageReceived",e),V("beforeNewMessageAdded",e),V("error_message",e),V("userListUpdated",e)}}),[]),(0,t.useEffect)((()=>{n&&N()&&(r?setTimeout((()=>{P(n,M(),N())}),1e3):P(n,M(),N()))}),[n]);const W=(0,t.useRef)(null),G=(0,t.useRef)(null);(0,t.useEffect)((()=>(W.current&&!G.current&&(G.current=new MutationObserver((e=>{e.forEach((e=>{"childList"===e.type&&T.current&&(te(),T.current=!1)}))})),G.current.observe(W.current,{childList:!0}),gk.log("Added Mutation Observer")),()=>{G.current&&(G.current.disconnect(),G.current=null,gk.log("Removing Mutation Observer"))})),[W.current]),(0,t.useEffect)((()=>{(f.current||m.current)&&setTimeout((()=>{if(C.current)if(gk.log("Scrolling according to size",T.current),T.current||m.current)gk.log("Scrolling according to size to bottom in use effect"),ck(C.current,C.current.scrollHeight,(()=>{gk.log("Scrolling animation completed!"),f.current=!1,m.current=!1,T.current=!0,ne()}));else{gk.log("Scrolling according to size not to bottom in use effect");const e=C.current.scrollHeight-E.current.scrollHeightBefore;ck(C.current,E.current.scrollTopBefore+e,(()=>{gk.log("Scrolling animation completed!"),f.current=!1,m.current=!1,ne()}))}}),0)}),[a]);const{fetchCompleted:K}=function(e){let{chatAreaRef:n,hasMore:i,loadMore:r,scrollStarted:o,threshold:s=50}=e;const a=(0,t.useRef)(!1);return(0,t.useEffect)((()=>{const e=()=>{if(!n.current||!i||a.current)return;o();const e=n.current,t=(e.scrollHeight-e.clientHeight)/2-s;e.scrollTop<=t&&(gk.log("Starting Fetching"),a.current=!0,r(),a.current=!1,gk.log("Fetching..."))},t=n.current;return t&&t.addEventListener("scroll",e),()=>{t&&t.removeEventListener("scroll",e)}}),[n,i,r,s]),{fetchCompleted:()=>{a.current=!1}}}({chatAreaRef:C,hasMore:d,loadMore:()=>{J(),C.current&&!f.current&&d&&(E.current.scrollHeightBefore=C.current.scrollHeight,E.current.scrollTopBefore=C.current.scrollTop,p.current=p.current+1,ee(p.current))},scrollStarted:()=>{},threshold:50}),Q=(0,t.useRef)(0),X=(0,t.useRef)(null),Y=()=>Q.current<3,J=()=>{X.current&&(clearTimeout(X.current),X.current=null)},Z=()=>{J(),X.current=setTimeout((()=>{!d||m.current||f.current||(Y()?(C.current&&(E.current.scrollHeightBefore=C.current.scrollHeight,E.current.scrollTopBefore=C.current.scrollTop),m.current=!0,Q.current+=1,p.current+=1,gk.log(`Fetching in background page ${p.current}`),O(n,(e=>{l(e)}),x,p.current,20)):J())}),1e3)},ee=e=>{f.current=!0,u(!0),O(n,(e=>{l(e)}),x,e,20)},te=()=>{setTimeout((()=>{C.current&&(gk.info("Scrolling to the bottom ",m.current),ck(C.current,C.current.scrollHeight,(()=>{gk.log("Scrolling animation completed in scrollToBottom!"),T.current=!0,u(!1)})))}),0)},ne=()=>{if(C.current){const{scrollTop:e,scrollHeight:t,clientHeight:n}=C.current,i=t-(e+n)<30;T.current=i,gk.log("scroll ref is "+T.current)}},ie=(e,t)=>{let n=!1,i=a;if(i.length<=t&&x.current.length>t&&(i=x.current),i&&i.length>2&&void 0!==t){const r=i[t-1];!r||r.userId!==e.userId||nk(r)||nk(e)||(n=!0)}return n},re=()=>{U()};return(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100vh",overflow:"hidden"},children:[(0,us.jsx)("div",{style:{flexShrink:0},children:(0,us.jsx)(Ck,{roomId:n,handleBackClick:()=>{D(n),F(n),j(n),B.current=!1,R(),L("stop-ringing-tone"),$("goingBackToChatRoom",n),i&&i()},members:b,getUsersInRoom:q})}),(0,us.jsx)("div",{style:{flex:1,minHeight:0,position:"relative"},children:(0,us.jsx)("div",{id:"divMessageContainer",ref:C,className:"scrollable-section",style:{position:"absolute",top:0,bottom:0,left:0,right:0,overflowY:"auto",width:"100%"},children:a.length?(0,us.jsxs)("div",{id:"divMessages",ref:W,children:[c&&(0,us.jsx)("div",{className:"loader",children:(0,us.jsx)("div",{className:"text-center flex justify-center",children:(0,us.jsx)(zb,{})})}),a.map(((e,t)=>(0,us.jsx)(Sk,{message:e,index:t,username:M(),userId:N(),isSameUser:ie(e,t)},e.id)))]}):g?(0,us.jsx)("div",{className:"text-center mt-10 flex justify-center",children:g}):(0,us.jsx)("div",{className:"text-center mt-10 flex justify-center",children:(0,us.jsx)(zb,{})})})}),(0,us.jsx)(Qb,{ref:S,inputValue:k,setInputValue:w,hideFileUpload:!0,textAreaDisabled:!1,placeholderText:"Message room",onSend:()=>{gk.log(k);const e=new Date,t={id:e.getTime(),name:M(),content:k,createdAt:e,role:"user"};A(n,t,l,x),w("")},onHeightChange:()=>{},apiConfiguration:o,setApiConfiguration:s})]})},Ik=e=>{let{paramData:n,isHidden:i,apiConfiguration:r,setApiConfiguration:o}=e;const{roomId:s,userId:a,extensionName:l,extensionPublisher:c}=n||{},[u,d]=(0,t.useState)(null),[h,p]=(0,t.useState)(!0),[f,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(!1),b=(0,t.useRef)(!1);(0,t.useEffect)((()=>{s&&(gk.log("*****************",s),b.current=!0,y(s))}),[s]);const y=e=>{d(e),p(!1),m(!0)},x=()=>{b.current=!1,d(null),p(!0),m(!1)};return(0,us.jsx)(Ek,{children:(0,us.jsxs)("div",{className:"group-chat",style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:i?"none":"flex",flexDirection:"column",overflow:"hidden"},children:[(0,us.jsx)(wk,{showMessagesForRoom:y,isVisible:h&&!f,isParentHidden:i,paramData:n,isFromChatView:g,setIsFromChatView:v}),u&&f&&(0,us.jsx)(_k,{roomId:u,showRoomsHandler:x,isExternalLink:b.current,apiConfiguration:r,setApiConfiguration:o})]})})};var Rk,Pk="https://js.stripe.com/v3",Ak=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,Ok="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",Mk=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(Pk).concat(t);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},Nk=null,Dk=null,jk=null,Lk=function(e){return null!==Nk?Nk:(Nk=new Promise((function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(Ok),window.Stripe)t(window.Stripe);else try{var i=function(){for(var e=document.querySelectorAll('script[src^="'.concat(Pk,'"]')),t=0;t<e.length;t++){var n=e[t];if(Ak.test(n.src))return n}return null}();if(i&&e)console.warn(Ok);else if(i){if(i&&null!==jk&&null!==Dk){var r;i.removeEventListener("load",jk),i.removeEventListener("error",Dk),null===(r=i.parentNode)||void 0===r||r.removeChild(i),i=Mk(e)}}else i=Mk(e);jk=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),Dk=function(e){return function(){e(new Error("Failed to load Stripe.js"))}}(n),i.addEventListener("load",jk),i.addEventListener("error",Dk)}catch(o){return void n(o)}else t(null)}))).catch((function(e){return Nk=null,Promise.reject(e)}))},Fk=!1,Bk=function(){return Rk||(Rk=Lk(null).catch((function(e){return Rk=null,Promise.reject(e)})))};Promise.resolve().then((function(){return Bk()})).catch((function(e){Fk||console.warn(e)}));var Uk=n(3393);const $k=(()=>{const e=getComputedStyle(document.documentElement);return{textColor:e.getPropertyValue("--vscode-input-foreground"),buttonTextColor:e.getPropertyValue("--vscode-foreground"),placeholderColor:e.getPropertyValue("--vscode-input-placeholderForeground"),iconColor:e.getPropertyValue("--vscode-input-foreground"),errorColor:e.getPropertyValue("--vscode-titleBar-inactiveForeground")}})(),zk={style:{base:{fontSize:"14px",lineHeight:"18px",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif',color:$k.textColor,backgroundColor:"transparent","::placeholder":{color:$k.placeholderColor},":-webkit-autofill":{color:$k.textColor},":focus":{color:$k.textColor},"::selection":{backgroundColor:"var(--vscode-editor-selectionBackground)"},iconColor:$k.iconColor},invalid:{color:$k.errorColor,iconColor:$k.errorColor}}},Vk=e=>{let{onClose:n,onSuccess:i,planId:r,amount:o,stripePublicKey:s,mode:a="subscription",customerId:l,enableAutoFill:c,setEnableAutoFill:u,customerEmail:d,currentCredits:h=0,setSelectedModel:p,onAmountChange:f,isMonthly:m,setIsMonthly:g,fetchUserCredits:v,setSelectedTier:b,selectedTier:y}=e;const[x,k]=(0,t.useState)({email:"",fullName:"",paymentMethod:"card",creditAmount:"subscription"===a?9.99:o}),[w,S]=(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,(0,t.useState)(!1)),[C,T]=(0,t.useState)(null),[E,_]=(0,t.useState)(!1),[I,R]=(0,t.useState)("initial"),[P,A]=(0,t.useState)(!1),O=(0,Uk.useStripe)(),M=(0,Uk.useElements)(),N=e=>{const{name:t,value:n}=e.target;"creditAmount"===t?(e=>{if(!e||"-"===e)return void k((e=>({...e,creditAmount:0})));if("0"===e)return void k((e=>({...e,creditAmount:0})));const t=e.replace(/^0+/,"");if(""===t)return;const n=Number(t);!isNaN(n)&&n>=0&&k((e=>({...e,creditAmount:n})))})(n):k((e=>({...e,[t]:n}))),T(null)};return(0,us.jsx)("div",{className:"payment-dialog-overlay",onClick:e=>{e.target===e.currentTarget&&n()},children:(0,us.jsx)("div",{className:"payment-dialog",children:(0,us.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),O&&M)if("credits"!==a||x.creditAmount&&!(x.creditAmount<=0)){S(!0),T(null),R("processing");try{let e;if("subscription"===a||!l||P){const{paymentMethod:t,error:n}=await O.createPaymentMethod({type:"card",card:M.getElement(Uk.CardElement),billing_details:{email:x.email,name:x.fullName}});if(n)throw new Error(n.message);e=t}const v=(100*((null===x||void 0===x?void 0:x.creditAmount)||o)).toFixed(0);let b;if("subscription"===a||P)b=await fetch(`${cv}/api/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":localStorage.getItem("blackbox_userId")||""},body:JSON.stringify({amount:v,customerEmail:x.email,customerName:null===x||void 0===x?void 0:x.fullName,bonus:9.99===x.creditAmount||19.99===x.creditAmount,paymentMethod:e})});else{var t;const n=`${cv}/api/${m?"get-subscription":"purchase-credits"}`;b=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:l,amount:x.creditAmount?(100*x.creditAmount).toFixed(0):0,paymentMethod:null===(t=e)||void 0===t?void 0:t.id})})}const y=await b.json();if(y.error)throw new Error(y.error);if("subscription"===a||P)if(y.requiresAction)if(R("authenticating"),"setup_intent"===y.actionType){var n,r;const{error:t}=await O.confirmCardSetup(y.setupIntentSecret,{payment_method:null===(n=e)||void 0===n?void 0:n.id});if(t)throw new Error(t.message);const o=await fetch(`${cv}/api/create-checkout`,{method:"POST",headers:{"Content-Type":"application/json","X-User-Id":localStorage.getItem("blackbox_userId")||""},body:JSON.stringify({amount:x.creditAmount?(100*x.creditAmount).toFixed(0):0,customerEmail:x.email,customerName:null===x||void 0===x?void 0:x.fullName,customerId:null===(r=y.customer)||void 0===r?void 0:r.id,bonus:9.99===x.creditAmount,paymentMethod:e,isRetry:!0})}),l=await o.json();if(200!==o.status)throw new Error(l.error||"Payment failed after authentication");if(l.requiresAction&&l.clientSecret){var s,c;const{error:t}=await O.confirmCardPayment(l.clientSecret,{payment_method:null===(s=e)||void 0===s?void 0:s.id});if(t)throw new Error(t.message);const n=await fetch(`${cv}/api/confirm-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:l.subscriptionId})}),r=await n.json();i({mode:a,customer:y.customer,subscription:r.subscription,creditAmount:x.creditAmount,paymentMethodId:null===(c=e)||void 0===c?void 0:c.id})}else{var u;i({mode:a,customer:l.customer,subscription:l.subscription,creditAmount:x.creditAmount,paymentMethodId:null===(u=e)||void 0===u?void 0:u.id})}}else{var d,h;const{error:t}=await O.confirmCardPayment(y.clientSecret,{payment_method:null===(d=e)||void 0===d?void 0:d.id});if(t)throw new Error(t.message);const n=await fetch(`${cv}/api/confirm-subscription`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscriptionId:y.subscriptionId})}),r=await n.json();i({mode:a,customer:y.customer,subscription:r.subscription,paymentMethodId:null===(h=e)||void 0===h?void 0:h.id})}else{var p;const{customer:t,subscription:n}=y;if(console.log("Subscription response:",n),null!==n&&void 0!==n&&n.error)throw new Error(n.error);i({mode:a,customer:t,subscription:n,cardElementVisible:P,creditAmount:x.creditAmount,paymentMethodId:null===(p=e)||void 0===p?void 0:p.id})}else if(y.requiresAction){R("authenticating");const{error:t,paymentIntent:n}=await O.confirmCardPayment(y.clientSecret,{payment_method:y.paymentMethodId});if(t)throw new Error(t.message);var f;console.log("Credit purchase response:",n),i({mode:a,paymentIntent:n,cardElementVisible:P,creditAmount:x.creditAmount,paymentMethodId:null===(f=e)||void 0===f?void 0:f.id})}else{if(!y.success)throw new Error("Credit purchase failed");var g;console.log("Credit purchase response:",y.paymentIntent),i({mode:a,paymentIntent:y.paymentIntent,cardElementVisible:P,creditAmount:x.creditAmount,paymentMethodId:null===(g=e)||void 0===g?void 0:g.id})}}catch(GU){console.log("inside catch error",GU),T(GU instanceof Error?GU.message:"Something went wrong. Please try again.")}finally{S(!1),R("initial")}}else T("Please enter a valid amount greater than 0")},children:[(0,us.jsxs)("div",{className:"p-6 space-y-6",children:[(0,us.jsxs)("div",{className:"space-y-2",style:{position:"relative"},children:[(0,us.jsx)("div",{style:{position:"absolute",right:0,top:0,cursor:"pointer",padding:"4px 8px",color:"var(--vscode-foreground)",opacity:.7,fontSize:"14px"},onClick:n,children:"Close"}),(0,us.jsx)("h2",{className:"text-xl font-semibold",style:{marginTop:0},children:"subscription"===a?"90 DAY FREE TRIAL":"Purchase More Credits"}),"subscription"===a?(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("div",{style:{marginBottom:"15px"},children:(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px",marginTop:"8px"},children:hy.map((e=>(0,us.jsxs)("div",{onClick:()=>{null===f||void 0===f||f(e.price),k((t=>({...t,creditAmount:e.price}))),b(e)},style:{width:"90%",padding:"8px 12px",color:"var(--vscode-foreground)",border:"1px solid var(--vscode-foreground)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center",marginRight:"12px",backgroundColor:"transparent"},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",overflow:"hidden"},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"2px",flexShrink:0},children:[(0,us.jsxs)("span",{style:{fontWeight:"500",fontSize:"16px",lineHeight:"24px"},children:["$",e.price]}),(0,us.jsxs)("span",{style:{opacity:.7,fontSize:"13px"},children:["/ $",e.period]})]}),9.99===e.price||19.99===e.price?(0,us.jsxs)("span",{style:{opacity:.7,fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["\u2022 Start 90 DAY Free Trial \u2022 ",Math.round(e.price/(.04*e.requestPriceMultiplier))," pro agent requests ",1===e.requestPriceMultiplier?"":`(Save ${100-100*e.requestPriceMultiplier}%)`]}):(0,us.jsxs)("span",{style:{opacity:.7,fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["\u2022 ",Math.round(e.price/(.04*e.requestPriceMultiplier))," pro agent requests ",1===e.requestPriceMultiplier?"":`(Save ${100-100*e.requestPriceMultiplier}%)`]})]}),x.creditAmount===e.price&&(0,us.jsx)("span",{style:{color:"var(--vscode-foreground)",fontSize:"20px",fontWeight:"bold"},children:"\u2713"})]},e.price)))})}),(0,us.jsx)("div",{className:"pro-features",children:(0,us.jsxs)("ul",{style:{listStyle:"none",padding:"10px 0",margin:0},children:[(0,us.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,us.jsx)("span",{children:"\u2713"}),"The BEST AI Coding Agent"]}),(0,us.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,us.jsx)("span",{children:"\u2713"}),"Unlimited code completion"]}),(0,us.jsxs)("li",{style:{display:"flex",alignItems:"flex-start",gap:"8px",marginBottom:"8px"},children:[(0,us.jsx)("span",{style:{marginTop:"2px"},children:"\u2713"}),(0,us.jsx)("span",{style:{lineHeight:"1.5"},children:"Choose any AI Model: OpenAI o3-mini, GPT-4o, o1, Deepseek R1, V3, Anthropic Claude Sonnet 3.5 and 3.7, Grok 3, Gemini 2.5, Llama 4 and more"})]}),(0,us.jsxs)("li",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[(0,us.jsx)("span",{children:"\u2713"}),"Unlimited base agent requests"]})]})})]}):(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,us.jsxs)("p",{className:"text-sm opacity-80",children:["Amount: ",(0,us.jsxs)("span",{style:{fontWeight:"700"},children:["$",x.creditAmount]})]}),(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,us.jsxs)("p",{className:"text-sm opacity-80",style:{margin:0},children:["Current Credits: ",(0,us.jsxs)("span",{style:{fontWeight:"700"},children:["$",Math.max(0,h).toFixed(2)]})]}),(0,us.jsx)(Jo,{appearance:"secondary",onClick:()=>{_(!0),v(),setTimeout((()=>{_(!1)}),1e3)},style:{padding:"0px",minWidth:"24px",height:"24px",border:"none",background:"transparent",display:"flex",alignItems:"center",justifyContent:"center"},"aria-label":"Reload Credits",title:"Reload Credits",children:(0,us.jsx)("span",{className:E?"animate-spin":"",style:{fontSize:"16px"},children:"\u21bb"})})]})]}),(0,us.jsx)("div",{style:{marginBottom:"15px"},children:(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"4px",marginTop:"8px"},children:[20,100,500].map((e=>(0,us.jsxs)("div",{onClick:()=>(e=>{var t;k((t=>({...t,creditAmount:e}))),T(null),null===(t=document.getElementById("creditAmount"))||void 0===t||t.focus()})(e),style:{width:"90%",padding:"8px 12px",color:"var(--vscode-foreground)",border:"1px solid var(--vscode-foreground)",borderRadius:"6px",cursor:"pointer",transition:"all 0.2s ease",display:"flex",justifyContent:"space-between",alignItems:"center",marginRight:"12px",backgroundColor:"transparent"},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",width:"100%",overflow:"hidden"},children:[(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"2px",flexShrink:0},children:(0,us.jsxs)("span",{style:{fontWeight:"500",fontSize:"16px",lineHeight:"24px"},children:["$",e]})}),(0,us.jsxs)("span",{style:{opacity:.7,fontSize:"13px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:["\u2022 ",Math.round(e/.04)," pro agent requests"]})]}),x.creditAmount===e&&(0,us.jsx)("span",{style:{color:"var(--vscode-foreground)",fontSize:"20px",fontWeight:"bold"},children:"\u2713"})]},e)))})})]}),(0,us.jsx)("div",{style:{marginTop:"10px"},children:(0,us.jsx)(Zo,{checked:c,onChange:e=>u(e.target.checked),children:(0,us.jsx)("span",{style:{fontWeight:"300",fontSize:"12px"},children:"subscription"===a?"20$ Credit Auto-Refill":"Credit Auto-Refill"})})})]}),(0,us.jsxs)("div",{className:"space-y-6",children:[("subscription"===a||P)&&(0,us.jsxs)(us.Fragment,{children:[(0,us.jsxs)("div",{className:"input-field-container",children:[(0,us.jsx)("label",{htmlFor:"fullName",className:"block text-sm font-medium mb-4",children:"Full Name"}),(0,us.jsx)("div",{className:"card-element-container",children:(0,us.jsx)("input",{type:"text",id:"fullName",name:"fullName",value:x.fullName,onChange:N,className:"input-field",required:!0,placeholder:"Full Name"})})]}),(0,us.jsxs)("div",{className:"input-field-container",children:[(0,us.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium mb-4",children:"Email"}),(0,us.jsx)("div",{className:"card-element-container",children:(0,us.jsx)("input",{type:"email",id:"email",name:"email",value:x.email,onChange:N,className:"input-field",required:!0,placeholder:"john@example.com"})})]})]}),"credits"===a&&(0,us.jsxs)("div",{className:"input-field-container",style:{marginTop:"10px"},children:[(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"8px",height:"32px"},children:(0,us.jsxs)("label",{htmlFor:"creditAmount",className:"text-sm font-medium",style:{display:"flex",alignItems:"center",gap:"4px"},children:["Credit Amount",(0,us.jsxs)("div",{style:{position:"relative",display:"inline-flex",alignItems:"center",cursor:"help"},onMouseEnter:e=>{const t=e.currentTarget.querySelector(".tooltip");t&&(t.style.display="block")},onMouseLeave:e=>{const t=e.currentTarget.querySelector(".tooltip");t&&(t.style.display="none")},children:[(0,us.jsx)("div",{style:{width:"16px",height:"16px",borderRadius:"50%",border:"1px solid currentColor",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px"},children:"?"}),(0,us.jsxs)("div",{className:"tooltip",style:{position:"absolute",bottom:"calc(100% + 8px)",left:"50%",transform:"translateX(-50%)",backgroundColor:"var(--vscode-editor-background)",color:"var(--vscode-editor-foreground)",padding:"8px 12px",borderRadius:"4px",whiteSpace:"normal",maxWidth:"250px",width:"max-content",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"none",zIndex:1e3,marginLeft:"20px",border:"1px solid var(--vscode-input-border)",fontSize:"12px",lineHeight:"1.4"},children:["The credits count ",Math.round(x.creditAmount/.04)," requests. Large and small edits will be counted the same. Increase your credit amount to increase requests."]})]})]})}),(0,us.jsx)("div",{className:"card-element-container",children:(0,us.jsx)("input",{type:"number",id:"creditAmount",name:"creditAmount",value:x.creditAmount||"",onChange:N,className:"input-field",required:!0,min:"0",step:"1"})})]}),"card"===x.paymentMethod&&("subscription"===a||P||!l?(0,us.jsxs)("div",{className:"input-field-container",style:{position:"relative"},children:[(0,us.jsx)("label",{className:"block text-sm font-medium mb-4",children:"Card Details"}),(0,us.jsxs)("div",{className:"card-element-container",style:{position:"relative"},children:[(0,us.jsx)(Uk.CardElement,{options:zk}),(0,us.jsx)("div",{style:{position:"absolute",bottom:"-15px",right:"-1px",fontSize:"10px",color:"var(--vscode-input-placeholderForeground)",userSelect:"none",pointerEvents:"none",fontWeight:"500",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif'},children:"powered by Stripe"})]})]}):null)]})]}),C&&(0,us.jsx)("div",{className:"p-3 rounded text-sm bg-opacity-10 bg-red-500 text-red-500",style:{padding:"0 1.5rem 1.5rem 1.5rem"},children:C}),(0,us.jsxs)("div",{className:"flex gap-3",style:{padding:"0 1.5rem 1.5rem 1.5rem",flexDirection:"column"},children:["authenticating"!==I?null:(0,us.jsx)("button",{type:"button",onClick:n,className:"button-secondary flex-1",style:{color:$k.buttonTextColor},disabled:w||"authenticating"===I,children:"Cancel"}),(0,us.jsx)("button",{type:"submit",className:"flex-1 button-blue",disabled:w||!O||"authenticating"===I,children:"authenticating"===I?"Verifying...":w?"Processing...":"subscription"===a?9.99===(null===y||void 0===y?void 0:y.price)||19.99===(null===y||void 0===y?void 0:y.price)?"Start 90 DAY FREE Trial":"Get Started":"Purchase Credits"})]}),"credits"===a&&(0,us.jsx)("div",{className:"flex gap-3",style:{padding:"0 1.5rem 1.5rem 1.5rem",flexDirection:"column"},children:(0,us.jsx)(Jo,{appearance:"secondary",onClick:()=>{A(!0),d&&k((e=>({...e,email:d})))},style:{backgroundColor:"transparent"},children:(0,us.jsx)("span",{style:{width:"100%",display:"inline-block",height:"auto",padding:"3px",fontWeight:500},children:"Add new card"})})}),"subscription"!==a&&(0,us.jsx)("div",{className:"flex gap-3",style:{padding:"0 1.5rem 1.5rem 1.5rem",flexDirection:"column"},children:(0,us.jsx)(Jo,{appearance:"secondary",onClick:()=>{p("blackbox-base"),n()},style:{backgroundColor:"transparent"},children:(0,us.jsx)("span",{style:{width:"100%",display:"inline-block",height:"auto",padding:"3px",fontWeight:500,borderRadius:"4px"},children:"Continue on BLACKBOX BASE"})})})]})})})},Hk=e=>{let t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Fk=!0;var i=Date.now();return Bk().then((function(e){return function(e,t,n){if(null===e)return null;var i=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"5.6.0",startTime:t})}(i,n),i}(e,t,i)}))}(e.stripePublicKey);const n="#1e1e1e"===getComputedStyle(document.documentElement).getPropertyValue("--vscode-editor-background").trim().toLowerCase();return(0,us.jsx)(Uk.Elements,{stripe:t||null,options:{appearance:{theme:n?"night":"stripe"}},children:(0,us.jsx)(Vk,{...e})})};function qk(e,t){return t.forEach((function(t){t&&"string"!==typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var Wk=Object.defineProperty,Gk=(e,t,n)=>((e,t,n)=>t in e?Wk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);class Kk{constructor(){Gk(this,"_locking"),Gk(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){let e;this._locks+=1;const t=new Promise((t=>e=()=>{this._locks-=1,t()})),n=this._locking.then((()=>e));return this._locking=this._locking.then((()=>t)),n}}function Qk(e,t){if(!e)throw new Error(t)}const Xk=34028234663852886e22,Yk=-34028234663852886e22,Jk=4294967295,Zk=2147483647,ew=-2147483648;function tw(e){if("number"!==typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>Zk||e<ew)throw new Error("invalid int 32: "+e)}function nw(e){if("number"!==typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>Jk||e<0)throw new Error("invalid uint 32: "+e)}function iw(e){if("number"!==typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>Xk||e<Yk))throw new Error("invalid float 32: "+e)}const rw=Symbol("@bufbuild/protobuf/enum-type");function ow(e){const t=e[rw];return Qk(t,"missing enum type on enum object"),t}function sw(e,t,n,i){e[rw]=aw(t,n.map((t=>({no:t.no,name:t.name,localName:e[t.no]}))))}function aw(e,t,n){const i=Object.create(null),r=Object.create(null),o=[];for(const s of t){const e=cw(s);o.push(e),i[s.name]=e,r[s.no]=e}return{typeName:e,values:o,findName:e=>i[e],findNumber:e=>r[e]}}function lw(e,t,n){const i={};for(const r of t){const e=cw(r);i[e.localName]=e.no,i[e.no]=e.localName}return sw(i,e,t),i}function cw(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class uw{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,t){const n=this.getType().runtime.bin,i=n.makeReadOptions(t);return n.readMessage(this,i.readerFactory(e),e.byteLength,i),this}fromJson(e,t){const n=this.getType(),i=n.runtime.json,r=i.makeReadOptions(t);return i.readMessage(n,e,r,this),this}fromJsonString(e,t){let n;try{n=JSON.parse(e)}catch(WU){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(WU instanceof Error?WU.message:String(WU)))}return this.fromJson(n,t)}toBinary(e){const t=this.getType().runtime.bin,n=t.makeWriteOptions(e),i=n.writerFactory();return t.writeMessage(this,i,n),i.finish()}toJson(e){const t=this.getType().runtime.json,n=t.makeWriteOptions(e);return t.writeMessage(this,n)}toJsonString(e){var t;const n=this.toJson(e);return JSON.stringify(n,null,null!==(t=null===e||void 0===e?void 0:e.prettySpaces)&&void 0!==t?t:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function dw(){let e=0,t=0;for(let i=0;i<28;i+=7){let n=this.buf[this.pos++];if(e|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(15&n)<<28,t=(112&n)>>4,0==(128&n))return this.assertBounds(),[e,t];for(let i=3;i<=31;i+=7){let n=this.buf[this.pos++];if(t|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function hw(e,t,n){for(let o=0;o<28;o+=7){const i=e>>>o,r=!(i>>>7==0&&0==t),s=255&(r?128|i:i);if(n.push(s),!r)return}const i=e>>>28&15|(7&t)<<4,r=!(t>>3==0);if(n.push(255&(r?128|i:i)),r){for(let e=3;e<31;e+=7){const i=t>>>e,r=!(i>>>7==0),o=255&(r?128|i:i);if(n.push(o),!r)return}n.push(t>>>31&1)}}const pw=4294967296;function fw(e){const t="-"===e[0];t&&(e=e.slice(1));const n=1e6;let i=0,r=0;function o(t,o){const s=Number(e.slice(t,o));r*=n,i=i*n+s,i>=pw&&(r+=i/pw|0,i%=pw)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),t?vw(i,r):gw(i,r)}function mw(e,t){if(({lo:e,hi:t}=function(e,t){return{lo:e>>>0,hi:t>>>0}}(e,t)),t<=2097151)return String(pw*t+e);const n=16777215&(e>>>24|t<<8),i=t>>16&65535;let r=(16777215&e)+6777216*n+6710656*i,o=n+8147497*i,s=2*i;const a=1e7;return r>=a&&(o+=Math.floor(r/a),r%=a),o>=a&&(s+=Math.floor(o/a),o%=a),s.toString()+bw(o)+bw(r)}function gw(e,t){return{lo:0|e,hi:0|t}}function vw(e,t){return t=~t,e?e=1+~e:t+=1,gw(e,t)}const bw=e=>{const t=String(e);return"0000000".slice(t.length)+t};function yw(e,t){if(e>=0){for(;e>127;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function xw(){let e=this.buf[this.pos++],t=127&e;if(0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<7,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<14,0==(128&e))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(127&e)<<21,0==(128&e))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(15&e)<<28;for(let n=5;0!==(128&e)&&n<10;n++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}const kw=function(){const e=new DataView(new ArrayBuffer(8));if("function"===typeof BigInt&&"function"===typeof e.getBigInt64&&"function"===typeof e.getBigUint64&&"function"===typeof e.setBigInt64&&"function"===typeof e.setBigUint64&&("object"!=typeof process||"1"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.BUF_BIGINT_DISABLE)){const t=BigInt("-9223372036854775808"),n=BigInt("9223372036854775807"),i=BigInt("0"),r=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(e){const i="bigint"==typeof e?e:BigInt(e);if(i>n||i<t)throw new Error("int64 invalid: ".concat(e));return i},uParse(e){const t="bigint"==typeof e?e:BigInt(e);if(t>r||t<i)throw new Error("uint64 invalid: ".concat(e));return t},enc(t){return e.setBigInt64(0,this.parse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(t){return e.setBigInt64(0,this.uParse(t),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigInt64(0,!0)),uDec:(t,n)=>(e.setInt32(0,t,!0),e.setInt32(4,n,!0),e.getBigUint64(0,!0))}}const t=e=>Qk(/^-?[0-9]+$/.test(e),"int64 invalid: ".concat(e)),n=e=>Qk(/^[0-9]+$/.test(e),"uint64 invalid: ".concat(e));return{zero:"0",supported:!1,parse:e=>("string"!=typeof e&&(e=e.toString()),t(e),e),uParse:e=>("string"!=typeof e&&(e=e.toString()),n(e),e),enc:e=>("string"!=typeof e&&(e=e.toString()),t(e),fw(e)),uEnc:e=>("string"!=typeof e&&(e=e.toString()),n(e),fw(e)),dec:(e,t)=>function(e,t){let n=gw(e,t);const i=2147483648&n.hi;i&&(n=vw(n.lo,n.hi));const r=mw(n.lo,n.hi);return i?"-"+r:r}(e,t),uDec:(e,t)=>mw(e,t)}}();var ww,Sw,Cw;function Tw(e,t,n){if(t===n)return!0;if(e==ww.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array))return!1;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e]!==n[e])return!1;return!0}switch(e){case ww.UINT64:case ww.FIXED64:case ww.INT64:case ww.SFIXED64:case ww.SINT64:return t==n}return!1}function Ew(e,t){switch(e){case ww.BOOL:return!1;case ww.UINT64:case ww.FIXED64:case ww.INT64:case ww.SFIXED64:case ww.SINT64:return 0==t?kw.zero:"0";case ww.DOUBLE:case ww.FLOAT:return 0;case ww.BYTES:return new Uint8Array(0);case ww.STRING:return"";default:return 0}}function _w(e,t){switch(e){case ww.BOOL:return!1===t;case ww.STRING:return""===t;case ww.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return 0==t}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(ww||(ww={})),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"}(Sw||(Sw={})),function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(Cw||(Cw={}));class Iw{constructor(e){this.stack=[],this.textEncoder=null!==e&&void 0!==e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let t=new Uint8Array(e),n=0;for(let i=0;i<this.chunks.length;i++)t.set(this.chunks[i],n),n+=this.chunks[i].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),t=this.stack.pop();if(!t)throw new Error("invalid state, fork stack empty");return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(nw(e);e>127;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return tw(e),yw(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let t=this.textEncoder.encode(e);return this.uint32(t.byteLength),this.raw(t)}float(e){iw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){let t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){nw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){tw(e);let t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return tw(e),yw(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=kw.enc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}fixed64(e){let t=new Uint8Array(8),n=new DataView(t.buffer),i=kw.uEnc(e);return n.setInt32(0,i.lo,!0),n.setInt32(4,i.hi,!0),this.raw(t)}int64(e){let t=kw.enc(e);return hw(t.lo,t.hi,this.buf),this}sint64(e){let t=kw.enc(e),n=t.hi>>31;return hw(t.lo<<1^n,(t.hi<<1|t.lo>>>31)^n,this.buf),this}uint64(e){let t=kw.uEnc(e);return hw(t.lo,t.hi,this.buf),this}}class Rw{constructor(e,t){this.varint64=dw,this.uint32=xw,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!==t&&void 0!==t?t:new TextDecoder}tag(){let e=this.uint32(),t=e>>>3,n=7&e;if(t<=0||n<0||n>5)throw new Error("illegal tag: field no "+t+" wire type "+n);return[t,n]}skip(e,t){let n=this.pos;switch(e){case Cw.Varint:for(;128&this.buf[this.pos++];);break;case Cw.Bit64:this.pos+=4;case Cw.Bit32:this.pos+=4;break;case Cw.LengthDelimited:let n=this.uint32();this.pos+=n;break;case Cw.StartGroup:for(;;){const[e,n]=this.tag();if(n===Cw.EndGroup){if(void 0!==t&&e!==t)throw new Error("invalid end group tag");break}this.skip(n,e)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){let e=this.uint32();return e>>>1^-(1&e)}int64(){return kw.dec(...this.varint64())}uint64(){return kw.uDec(...this.varint64())}sint64(){let[e,t]=this.varint64(),n=-(1&e);return e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n,kw.dec(e,t)}bool(){let[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return kw.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return kw.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function Pw(e){const t=e.field.localName,n=Object.create(null);return n[t]=function(e){const t=e.field;if(t.repeated)return[];if(void 0!==t.default)return t.default;switch(t.kind){case"enum":return t.T.values[0].no;case"scalar":return Ew(t.T,t.L);case"message":const e=t.T,n=new e;return e.fieldWrapper?e.fieldWrapper.unwrapField(n):n;case"map":throw"map fields are not allowed to be extensions"}}(e),[n,()=>n[t]]}let Aw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Ow=[];for(let n=0;n<Aw.length;n++)Ow[Aw[n].charCodeAt(0)]=n;Ow["-".charCodeAt(0)]=Aw.indexOf("+"),Ow["_".charCodeAt(0)]=Aw.indexOf("/");const Mw={dec(e){let t=3*e.length/4;"="==e[e.length-2]?t-=2:"="==e[e.length-1]&&(t-=1);let n,i=new Uint8Array(t),r=0,o=0,s=0;for(let a=0;a<e.length;a++){if(n=Ow[e.charCodeAt(a)],void 0===n)switch(e[a]){case"=":o=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(o){case 0:s=n,o=1;break;case 1:i[r++]=s<<2|(48&n)>>4,s=n,o=2;break;case 2:i[r++]=(15&s)<<4|(60&n)>>2,s=n,o=3;break;case 3:i[r++]=(3&s)<<6|n,o=0}}if(1==o)throw Error("invalid base64 string.");return i.subarray(0,r)},enc(e){let t,n="",i=0,r=0;for(let o=0;o<e.length;o++)switch(t=e[o],i){case 0:n+=Aw[t>>2],r=(3&t)<<4,i=1;break;case 1:n+=Aw[r|t>>4],r=(15&t)<<2,i=2;break;case 2:n+=Aw[r|t>>6],n+=Aw[63&t],i=0}return i&&(n+=Aw[r],n+="=",1==i&&(n+="=")),n}};function Nw(e,t,n){Lw(t,e);const i=t.runtime.bin.makeReadOptions(n),r=function(e,t){if(!t.repeated&&("enum"==t.kind||"scalar"==t.kind)){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.no)return[e[n]];return[]}return e.filter((e=>e.no===t.no))}(e.getType().runtime.bin.listUnknownFields(e),t.field),[o,s]=Pw(t);for(const a of r)t.runtime.bin.readField(o,i.readerFactory(a.data),t.field,a.wireType,i);return s()}function Dw(e,t,n,i){Lw(t,e);const r=t.runtime.bin.makeReadOptions(i),o=t.runtime.bin.makeWriteOptions(i);if(jw(e,t)){const n=e.getType().runtime.bin.listUnknownFields(e).filter((e=>e.no!=t.field.no));e.getType().runtime.bin.discardUnknownFields(e);for(const t of n)e.getType().runtime.bin.onUnknownField(e,t.no,t.wireType,t.data)}const s=o.writerFactory();let a=t.field;a.opt||a.repeated||"enum"!=a.kind&&"scalar"!=a.kind||(a=Object.assign(Object.assign({},t.field),{opt:!0})),t.runtime.bin.writeField(a,n,s,o);const l=r.readerFactory(s.finish());for(;l.pos<l.len;){const[t,n]=l.tag(),i=l.skip(n,t);e.getType().runtime.bin.onUnknownField(e,t,n,i)}}function jw(e,t){const n=e.getType();return t.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(e).find((e=>e.no==t.field.no))}function Lw(e,t){Qk(e.extendee.typeName==t.getType().typeName,"extension ".concat(e.typeName," can only be applied to message ").concat(e.extendee.typeName))}function Fw(e,t){const n=e.localName;if(e.repeated)return t[n].length>0;if(e.oneof)return t[e.oneof.localName].case===n;switch(e.kind){case"enum":case"scalar":return e.opt||e.req?void 0!==t[n]:"enum"==e.kind?t[n]!==e.T.values[0].no:!_w(e.T,t[n]);case"message":return void 0!==t[n];case"map":return Object.keys(t[n]).length>0}}function Bw(e,t){const n=e.localName,i=!e.opt&&!e.req;if(e.repeated)t[n]=[];else if(e.oneof)t[e.oneof.localName]={case:void 0};else switch(e.kind){case"map":t[n]={};break;case"enum":t[n]=i?e.T.values[0].no:void 0;break;case"scalar":t[n]=i?Ew(e.T,e.L):void 0;break;case"message":t[n]=void 0}}function Uw(e,t){if(null===e||"object"!=typeof e)return!1;if(!Object.getOwnPropertyNames(uw.prototype).every((t=>t in e&&"function"==typeof e[t])))return!1;const n=e.getType();return null!==n&&"function"==typeof n&&"typeName"in n&&"string"==typeof n.typeName&&(void 0===t||n.typeName==t.typeName)}function $w(e,t){return Uw(t)||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}ww.DOUBLE,ww.FLOAT,ww.INT64,ww.UINT64,ww.INT32,ww.UINT32,ww.BOOL,ww.STRING,ww.BYTES;const zw={ignoreUnknownFields:!1},Vw={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function Hw(e){return e?Object.assign(Object.assign({},zw),e):zw}function qw(e){return e?Object.assign(Object.assign({},Vw),e):Vw}const Ww=Symbol(),Gw=Symbol();function Kw(e){if(null===e)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function Qw(e,t,n,i,r){let o=n.localName;if(n.repeated){if(Qk("map"!=n.kind),null===t)return;if(!Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Kw(t)));const s=e[o];for(const e of t){if(null===e)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Kw(e)));switch(n.kind){case"message":s.push(n.T.fromJson(e,i));break;case"enum":const t=Jw(n.T,e,i.ignoreUnknownFields,!0);t!==Gw&&s.push(t);break;case"scalar":try{s.push(Yw(n.T,e,n.L,!0))}catch(WU){let i="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Kw(e));throw WU instanceof Error&&WU.message.length>0&&(i+=": ".concat(WU.message)),new Error(i)}}}}else if("map"==n.kind){if(null===t)return;if("object"!=typeof t||Array.isArray(t))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Kw(t)));const s=e[o];for(const[e,o]of Object.entries(t)){if(null===o)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let a;try{a=Xw(n.K,e)}catch(WU){let i="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Kw(t));throw WU instanceof Error&&WU.message.length>0&&(i+=": ".concat(WU.message)),new Error(i)}switch(n.V.kind){case"message":s[a]=n.V.T.fromJson(o,i);break;case"enum":const e=Jw(n.V.T,o,i.ignoreUnknownFields,!0);e!==Gw&&(s[a]=e);break;case"scalar":try{s[a]=Yw(n.V.T,o,Sw.BIGINT,!0)}catch(WU){let i="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Kw(t));throw WU instanceof Error&&WU.message.length>0&&(i+=": ".concat(WU.message)),new Error(i)}}}}else switch(n.oneof&&(e=e[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const s=n.T;if(null===t&&"google.protobuf.Value"!=s.typeName)return;let a=e[o];Uw(a)?a.fromJson(t,i):(e[o]=a=s.fromJson(t,i),s.fieldWrapper&&!n.oneof&&(e[o]=s.fieldWrapper.unwrapField(a)));break;case"enum":const l=Jw(n.T,t,i.ignoreUnknownFields,!1);switch(l){case Ww:Bw(n,e);break;case Gw:break;default:e[o]=l}break;case"scalar":try{const i=Yw(n.T,t,n.L,!1);if(i===Ww)Bw(n,e);else e[o]=i}catch(WU){let i="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(Kw(t));throw WU instanceof Error&&WU.message.length>0&&(i+=": ".concat(WU.message)),new Error(i)}}}function Xw(e,t){if(e===ww.BOOL)switch(t){case"true":t=!0;break;case"false":t=!1}return Yw(e,t,Sw.BIGINT,!0).toString()}function Yw(e,t,n,i){if(null===t)return i?Ew(e,n):Ww;switch(e){case ww.DOUBLE:case ww.FLOAT:if("NaN"===t)return Number.NaN;if("Infinity"===t)return Number.POSITIVE_INFINITY;if("-Infinity"===t)return Number.NEGATIVE_INFINITY;if(""===t)break;if("string"==typeof t&&t.trim().length!==t.length)break;if("string"!=typeof t&&"number"!=typeof t)break;const i=Number(t);if(Number.isNaN(i))break;if(!Number.isFinite(i))break;return e==ww.FLOAT&&iw(i),i;case ww.INT32:case ww.FIXED32:case ww.SFIXED32:case ww.SINT32:case ww.UINT32:let r;if("number"==typeof t?r=t:"string"==typeof t&&t.length>0&&t.trim().length===t.length&&(r=Number(t)),void 0===r)break;return e==ww.UINT32||e==ww.FIXED32?nw(r):tw(r),r;case ww.INT64:case ww.SFIXED64:case ww.SINT64:if("number"!=typeof t&&"string"!=typeof t)break;const o=kw.parse(t);return n?o.toString():o;case ww.FIXED64:case ww.UINT64:if("number"!=typeof t&&"string"!=typeof t)break;const s=kw.uParse(t);return n?s.toString():s;case ww.BOOL:if("boolean"!==typeof t)break;return t;case ww.STRING:if("string"!==typeof t)break;try{encodeURIComponent(t)}catch(WU){throw new Error("invalid UTF8")}return t;case ww.BYTES:if(""===t)return new Uint8Array(0);if("string"!==typeof t)break;return Mw.dec(t)}throw new Error}function Jw(e,t,n,i){if(null===t)return"google.protobuf.NullValue"==e.typeName?0:i?e.values[0].no:Ww;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const i=e.findName(t);if(void 0!==i)return i.no;if(n)return Gw}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(Kw(t)))}function Zw(e){return!(!e.repeated&&"map"!=e.kind)||!e.oneof&&("message"!=e.kind&&(!e.opt&&!e.req))}function eS(e,t,n){if("map"==e.kind){Qk("object"==typeof t&&null!=t);const i={},r=Object.entries(t);switch(e.V.kind){case"scalar":for(const[n,o]of r)i[n.toString()]=nS(e.V.T,o);break;case"message":for(const[e,o]of r)i[e.toString()]=o.toJson(n);break;case"enum":const t=e.V.T;for(const[e,o]of r)i[e.toString()]=tS(t,o,n.enumAsInteger)}return n.emitDefaultValues||r.length>0?i:void 0}if(e.repeated){Qk(Array.isArray(t));const i=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++)i.push(nS(e.T,t[n]));break;case"enum":for(let r=0;r<t.length;r++)i.push(tS(e.T,t[r],n.enumAsInteger));break;case"message":for(let e=0;e<t.length;e++)i.push(t[e].toJson(n))}return n.emitDefaultValues||i.length>0?i:void 0}switch(e.kind){case"scalar":return nS(e.T,t);case"enum":return tS(e.T,t,n.enumAsInteger);case"message":return $w(e.T,t).toJson(n)}}function tS(e,t,n){var i;if(Qk("number"==typeof t),"google.protobuf.NullValue"==e.typeName)return null;if(n)return t;const r=e.findNumber(t);return null!==(i=null===r||void 0===r?void 0:r.name)&&void 0!==i?i:t}function nS(e,t){switch(e){case ww.INT32:case ww.SFIXED32:case ww.SINT32:case ww.FIXED32:case ww.UINT32:return Qk("number"==typeof t),t;case ww.FLOAT:case ww.DOUBLE:return Qk("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case ww.STRING:return Qk("string"==typeof t),t;case ww.BOOL:return Qk("boolean"==typeof t),t;case ww.UINT64:case ww.FIXED64:case ww.INT64:case ww.SFIXED64:case ww.SINT64:return Qk("bigint"==typeof t||"string"==typeof t||"number"==typeof t),t.toString();case ww.BYTES:return Qk(t instanceof Uint8Array),Mw.enc(t)}}const iS=Symbol("@bufbuild/protobuf/unknown-fields"),rS={readUnknownFields:!0,readerFactory:e=>new Rw(e)},oS={writeUnknownFields:!0,writerFactory:()=>new Iw};function sS(e){return e?Object.assign(Object.assign({},rS),e):rS}function aS(e){return e?Object.assign(Object.assign({},oS),e):oS}function lS(e,t,n,i,r){let{repeated:o,localName:s}=n;switch(n.oneof&&((e=e[n.oneof.localName]).case!=s&&delete e.value,e.case=s,s="value"),n.kind){case"scalar":case"enum":const a="enum"==n.kind?ww.INT32:n.T;let l=dS;if("scalar"==n.kind&&n.L>0&&(l=uS),o){let n=e[s];if(i==Cw.LengthDelimited&&a!=ww.STRING&&a!=ww.BYTES){let e=t.uint32()+t.pos;for(;t.pos<e;)n.push(l(t,a))}else n.push(l(t,a))}else e[s]=l(t,a);break;case"message":const c=n.T;o?e[s].push(cS(t,new c,r,n)):Uw(e[s])?cS(t,e[s],r,n):(e[s]=cS(t,new c,r,n),!c.fieldWrapper||n.oneof||n.repeated||(e[s]=c.fieldWrapper.unwrapField(e[s])));break;case"map":let[u,d]=function(e,t,n){const i=t.uint32(),r=t.pos+i;let o,s;for(;t.pos<r;){const[i]=t.tag();switch(i){case 1:o=dS(t,e.K);break;case 2:switch(e.V.kind){case"scalar":s=dS(t,e.V.T);break;case"enum":s=t.int32();break;case"message":s=cS(t,new e.V.T,n,void 0)}}}void 0===o&&(o=Ew(e.K,Sw.BIGINT));"string"!=typeof o&&"number"!=typeof o&&(o=o.toString());if(void 0===s)switch(e.V.kind){case"scalar":s=Ew(e.V.T,Sw.BIGINT);break;case"enum":s=e.V.T.values[0].no;break;case"message":s=new e.V.T}return[o,s]}(n,t,r);e[s][u]=d}}function cS(e,t,n,i){const r=t.getType().runtime.bin,o=null===i||void 0===i?void 0:i.delimited;return r.readMessage(t,e,o?i.no:e.uint32(),n,o),t}function uS(e,t){const n=dS(e,t);return"bigint"==typeof n?n.toString():n}function dS(e,t){switch(t){case ww.STRING:return e.string();case ww.BOOL:return e.bool();case ww.DOUBLE:return e.double();case ww.FLOAT:return e.float();case ww.INT32:return e.int32();case ww.INT64:return e.int64();case ww.UINT64:return e.uint64();case ww.FIXED64:return e.fixed64();case ww.BYTES:return e.bytes();case ww.FIXED32:return e.fixed32();case ww.SFIXED32:return e.sfixed32();case ww.SFIXED64:return e.sfixed64();case ww.SINT64:return e.sint64();case ww.UINT32:return e.uint32();case ww.SINT32:return e.sint32()}}function hS(e,t,n,i){Qk(void 0!==t);const r=e.repeated;switch(e.kind){case"scalar":case"enum":let o="enum"==e.kind?ww.INT32:e.T;if(r)if(Qk(Array.isArray(t)),e.packed)!function(e,t,n,i){if(!i.length)return;e.tag(n,Cw.LengthDelimited).fork();let[,r]=gS(t);for(let o=0;o<i.length;o++)e[r](i[o]);e.join()}(n,o,e.no,t);else for(const i of t)mS(n,o,e.no,i);else mS(n,o,e.no,t);break;case"message":if(r){Qk(Array.isArray(t));for(const r of t)fS(n,i,e,r)}else fS(n,i,e,t);break;case"map":Qk("object"==typeof t&&null!=t);for(const[r,s]of Object.entries(t))pS(n,i,e,r,s)}}function pS(e,t,n,i,r){e.tag(n.no,Cw.LengthDelimited),e.fork();let o=i;switch(n.K){case ww.INT32:case ww.FIXED32:case ww.UINT32:case ww.SFIXED32:case ww.SINT32:o=Number.parseInt(i);break;case ww.BOOL:Qk("true"==i||"false"==i),o="true"==i}switch(mS(e,n.K,1,o),n.V.kind){case"scalar":mS(e,n.V.T,2,r);break;case"enum":mS(e,ww.INT32,2,r);break;case"message":Qk(void 0!==r),e.tag(2,Cw.LengthDelimited).bytes(r.toBinary(t))}e.join()}function fS(e,t,n,i){const r=$w(n.T,i);n.delimited?e.tag(n.no,Cw.StartGroup).raw(r.toBinary(t)).tag(n.no,Cw.EndGroup):e.tag(n.no,Cw.LengthDelimited).bytes(r.toBinary(t))}function mS(e,t,n,i){Qk(void 0!==i);let[r,o]=gS(t);e.tag(n,r)[o](i)}function gS(e){let t=Cw.Varint;switch(e){case ww.BYTES:case ww.STRING:t=Cw.LengthDelimited;break;case ww.DOUBLE:case ww.FIXED64:case ww.SFIXED64:t=Cw.Bit64;break;case ww.FIXED32:case ww.SFIXED32:case ww.FLOAT:t=Cw.Bit32}return[t,ww[e].toLowerCase()]}function vS(e){if(void 0===e)return e;if(Uw(e))return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function bS(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class yS{constructor(e,t){this._fields=e,this._normalizer=t}findJsonName(e){if(!this.jsonNames){const e={};for(const t of this.list())e[t.jsonName]=e[t.name]=t;this.jsonNames=e}return this.jsonNames[e]}find(e){if(!this.numbers){const e={};for(const t of this.list())e[t.no]=t;this.numbers=e}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort(((e,t)=>e.no-t.no))),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let t;for(const n of this.list())n.oneof?n.oneof!==t&&(t=n.oneof,e.push(t)):e.push(n)}return this.members}}function xS(e,t){const n=wS(e);return t?n:_S(ES(n))}const kS=wS;function wS(e){let t=!1;const n=[];for(let i=0;i<e.length;i++){let r=e.charAt(i);switch(r){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),t=!1;break;default:t&&(t=!1,r=r.toUpperCase()),n.push(r)}}return n.join("")}const SS=new Set(["constructor","toString","toJSON","valueOf"]),CS=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),TS=e=>"".concat(e,"$"),ES=e=>CS.has(e)?TS(e):e,_S=e=>SS.has(e)?TS(e):e;class IS{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=xS(e,!1)}addField(e){Qk(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let e=0;e<this.fields.length;e++)this._lookup[this.fields[e].localName]=this.fields[e]}return this._lookup[e]}}const RS=(PS=e=>new yS(e,(e=>function(e,t){var n,i,r,o,s,a;const l=[];let c;for(const u of"function"==typeof e?e():e){const e=u;if(e.localName=xS(u.name,void 0!==u.oneof),e.jsonName=null!==(n=u.jsonName)&&void 0!==n?n:kS(u.name),e.repeated=null!==(i=u.repeated)&&void 0!==i&&i,"scalar"==u.kind&&(e.L=null!==(r=u.L)&&void 0!==r?r:Sw.BIGINT),e.delimited=null!==(o=u.delimited)&&void 0!==o&&o,e.req=null!==(s=u.req)&&void 0!==s&&s,e.opt=null!==(a=u.opt)&&void 0!==a&&a,void 0===u.packed&&(e.packed="enum"==u.kind||"scalar"==u.kind&&u.T!=ww.BYTES&&u.T!=ww.STRING),void 0!==u.oneof){const t="string"==typeof u.oneof?u.oneof:u.oneof.name;c&&c.name==t||(c=new IS(t)),e.oneof=c,c.addField(e)}l.push(e)}return l}(e))),AS=e=>{for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,i=e;if(t.repeated)i[n]=[];else switch(t.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Ew(t.T,t.L)}}},{syntax:"proto3",json:{makeReadOptions:Hw,makeWriteOptions:qw,readMessage(e,t,n,i){if(null==t||Array.isArray(t)||"object"!=typeof t)throw new Error("cannot decode message ".concat(e.typeName," from JSON: ").concat(Kw(t)));i=null!==i&&void 0!==i?i:new e;const r=new Map,o=n.typeRegistry;for(const[s,a]of Object.entries(t)){const t=e.fields.findJsonName(s);if(t){if(t.oneof){if(null===a&&"scalar"==t.kind)continue;const n=r.get(t.oneof);if(void 0!==n)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: multiple keys for oneof "').concat(t.oneof.name,'" present: "').concat(n,'", "').concat(s,'"'));r.set(t.oneof,s)}Qw(i,a,t,n,e)}else{let t=!1;if((null===o||void 0===o?void 0:o.findExtension)&&s.startsWith("[")&&s.endsWith("]")){const r=o.findExtension(s.substring(1,s.length-1));if(r&&r.extendee.typeName==e.typeName){t=!0;const[e,o]=Pw(r);Qw(e,a,r.field,n,r),Dw(i,r,o(),n)}}if(!t&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(e.typeName,' from JSON: key "').concat(s,'" is unknown'))}}return i},writeMessage(e,t){const n=e.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!Fw(r,e)){if(r.req)throw"required field not set";if(!t.emitDefaultValues)continue;if(!Zw(r))continue}const n=eS(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t);void 0!==n&&(i[t.useProtoFieldName?r.name:r.jsonName]=n)}const o=t.typeRegistry;if(null===o||void 0===o?void 0:o.findExtensionFor)for(const r of n.runtime.bin.listUnknownFields(e)){const s=o.findExtensionFor(n.typeName,r.no);if(s&&jw(e,s)){const n=Nw(e,s,t),r=eS(s.field,n,t);void 0!==r&&(i[s.field.jsonName]=r)}}}catch(WU){const t=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),i=WU instanceof Error?WU.message:String(WU);throw new Error(t+(i.length>0?": ".concat(i):""))}return i},readScalar:(e,t,n)=>Yw(e,t,null!==n&&void 0!==n?n:Sw.BIGINT,!0),writeScalar(e,t,n){if(void 0!==t)return n||_w(e,t)?nS(e,t):void 0},debug:Kw},bin:{makeReadOptions:sS,makeWriteOptions:aS,listUnknownFields(e){var t;return null!==(t=e[iS])&&void 0!==t?t:[]},discardUnknownFields(e){delete e[iS]},writeUnknownFields(e,t){const n=e[iS];if(n)for(const i of n)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,i){const r=e;Array.isArray(r[iS])||(r[iS]=[]),r[iS].push({no:t,wireType:n,data:i})},readMessage(e,t,n,i,r){const o=e.getType(),s=r?t.len:t.pos+n;let a,l;for(;t.pos<s&&([a,l]=t.tag(),!0!==r||l!=Cw.EndGroup);){const n=o.fields.find(a);if(n)lS(e,t,n,l,i);else{const n=t.skip(l,a);i.readUnknownFields&&this.onUnknownField(e,a,l,n)}}if(r&&(l!=Cw.EndGroup||a!==n))throw new Error("invalid end group tag")},readField:lS,writeMessage(e,t,n){const i=e.getType();for(const r of i.fields.byNumber())if(Fw(r,e))hS(r,r.oneof?e[r.oneof.localName].value:e[r.localName],t,n);else if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));return n.writeUnknownFields&&this.writeUnknownFields(e,t),t},writeField(e,t,n,i){void 0!==t&&hS(e,t,n,i)}},util:Object.assign(Object.assign({},{setEnumType:sw,initPartial(e,t){if(void 0===e)return;const n=t.getType();for(const i of n.fields.byMember()){const n=i.localName,r=t,o=e;if(null!=o[n])switch(i.kind){case"oneof":const e=o[n].case;if(void 0===e)continue;const t=i.findField(e);let s=o[n].value;t&&"message"==t.kind&&!Uw(s,t.T)?s=new t.T(s):t&&"scalar"===t.kind&&t.T===ww.BYTES&&(s=bS(s)),r[n]={case:e,value:s};break;case"scalar":case"enum":let a=o[n];i.T===ww.BYTES&&(a=i.repeated?a.map(bS):bS(a)),r[n]=a;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===ww.BYTES)for(const[t,i]of Object.entries(o[n]))r[n][t]=bS(i);else Object.assign(r[n],o[n]);break;case"message":const e=i.V.T;for(const t of Object.keys(o[n])){let i=o[n][t];e.fieldWrapper||(i=new e(i)),r[n][t]=i}}break;case"message":const l=i.T;if(i.repeated)r[n]=o[n].map((e=>Uw(e,l)?e:new l(e)));else{const e=o[n];l.fieldWrapper?"google.protobuf.BytesValue"===l.typeName?r[n]=bS(e):r[n]=e:r[n]=Uw(e,l)?e:new l(e)}}}},equals:(e,t,n)=>t===n||!(!t||!n)&&e.fields.byMember().every((e=>{const i=t[e.localName],r=n[e.localName];if(e.repeated){if(i.length!==r.length)return!1;switch(e.kind){case"message":return i.every(((t,n)=>e.T.equals(t,r[n])));case"scalar":return i.every(((t,n)=>Tw(e.T,t,r[n])));case"enum":return i.every(((e,t)=>Tw(ww.INT32,e,r[t])))}throw new Error("repeated cannot contain ".concat(e.kind))}switch(e.kind){case"message":return e.T.equals(i,r);case"enum":return Tw(ww.INT32,i,r);case"scalar":return Tw(e.T,i,r);case"oneof":if(i.case!==r.case)return!1;const t=e.findField(i.case);if(void 0===t)return!0;switch(t.kind){case"message":return t.T.equals(i.value,r.value);case"enum":return Tw(ww.INT32,i.value,r.value);case"scalar":return Tw(t.T,i.value,r.value)}throw new Error("oneof cannot contain ".concat(t.kind));case"map":const n=Object.keys(i).concat(Object.keys(r));switch(e.V.kind){case"message":const t=e.V.T;return n.every((e=>t.equals(i[e],r[e])));case"enum":return n.every((e=>Tw(ww.INT32,i[e],r[e])));case"scalar":const o=e.V.T;return n.every((e=>Tw(o,i[e],r[e])))}}})),clone(e){const t=e.getType(),n=new t,i=n;for(const r of t.fields.byMember()){const t=e[r.localName];let n;if(r.repeated)n=t.map(vS);else if("map"==r.kind){n=i[r.localName];for(const[e,i]of Object.entries(t))n[e]=vS(i)}else n="oneof"==r.kind?r.findField(t.case)?{case:t.case,value:vS(t.value)}:{case:void 0}:vS(t);i[r.localName]=n}for(const r of t.runtime.bin.listUnknownFields(e))t.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}),{newFieldList:PS,initFields:AS}),makeMessageType(e,t,n){return function(e,t,n,i){var r;const o=null!==(r=null===i||void 0===i?void 0:i.localName)&&void 0!==r?r:t.substring(t.lastIndexOf(".")+1),s={[o]:function(t){e.util.initFields(this),e.util.initPartial(t,this)}}[o];return Object.setPrototypeOf(s.prototype,new uw),Object.assign(s,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary:(e,t)=>(new s).fromBinary(e,t),fromJson:(e,t)=>(new s).fromJson(e,t),fromJsonString:(e,t)=>(new s).fromJsonString(e,t),equals:(t,n)=>e.util.equals(s,t,n)}),s}(this,e,t,n)},makeEnum:lw,makeEnumType:aw,getEnumType:ow,makeExtension(e,t,n){return function(e,t,n,i){let r;return{typeName:t,extendee:n,get field(){if(!r){const n="function"==typeof i?i():i;n.name=t.split(".").pop(),n.jsonName="[".concat(t,"]"),r=e.util.newFieldList([n]).list()[0]}return r},runtime:e}}(this,e,t,n)}});var PS,AS;class OS extends uw{constructor(e){super(),this.seconds=kw.zero,this.nanos=0,RS.util.initPartial(e,this)}fromJson(e,t){if("string"!==typeof e)throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(RS.json.debug(e)));const n=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=kw.parse(i/1e3),this.nanos=0,n[7]&&(this.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9),this}toJson(e){const t=1e3*Number(this.seconds);if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let n="Z";if(this.nanos>0){const e=(this.nanos+1e9).toString().substring(1);n="000000"===e.substring(3)?"."+e.substring(0,3)+"Z":"000"===e.substring(6)?"."+e.substring(0,6)+"Z":"."+e+"Z"}return new Date(t).toISOString().replace(".000Z",n)}toDate(){return new Date(1e3*Number(this.seconds)+Math.ceil(this.nanos/1e6))}static now(){return OS.fromDate(new Date)}static fromDate(e){const t=e.getTime();return new OS({seconds:kw.parse(Math.floor(t/1e3)),nanos:t%1e3*1e6})}static fromBinary(e,t){return(new OS).fromBinary(e,t)}static fromJson(e,t){return(new OS).fromJson(e,t)}static fromJsonString(e,t){return(new OS).fromJsonString(e,t)}static equals(e,t){return RS.util.equals(OS,e,t)}}OS.runtime=RS,OS.typeName="google.protobuf.Timestamp",OS.fields=RS.util.newFieldList((()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]));const MS=RS.makeMessageType("livekit.MetricsBatch",(()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:OS},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:NS,repeated:!0},{no:5,name:"events",kind:"message",T:jS,repeated:!0}])),NS=RS.makeMessageType("livekit.TimeSeriesMetric",(()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:DS,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}])),DS=RS.makeMessageType("livekit.MetricSample",(()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:OS},{no:3,name:"value",kind:"scalar",T:2}])),jS=RS.makeMessageType("livekit.EventMetric",(()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:OS},{no:7,name:"normalized_end_timestamp",kind:"message",T:OS,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}])),LS=RS.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),FS=RS.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),BS=RS.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),US=RS.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),$S=RS.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),zS=RS.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),VS=RS.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"}]),HS=RS.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),qS=RS.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),WS=RS.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"}]),GS=RS.makeMessageType("livekit.Room",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:KS,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:TC}])),KS=RS.makeMessageType("livekit.Codec",(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}])),QS=RS.makeMessageType("livekit.ParticipantPermission",(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:RS.getEnumType(BS),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}])),XS=RS.makeMessageType("livekit.ParticipantInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:RS.getEnumType(YS)},{no:4,name:"tracks",kind:"message",T:nC,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:QS},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:RS.getEnumType(JS)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:RS.getEnumType(VS)},{no:18,name:"kind_details",kind:"enum",T:RS.getEnumType(ZS),repeated:!0}])),YS=RS.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),JS=RS.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"}]),ZS=RS.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),eC=RS.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),tC=RS.makeMessageType("livekit.SimulcastCodecInfo",(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:iC,repeated:!0}])),nC=RS.makeMessageType("livekit.TrackInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:RS.getEnumType(FS)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:RS.getEnumType(BS)},{no:10,name:"layers",kind:"message",T:iC,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:tC,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:RS.getEnumType(eC)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:TC},{no:19,name:"audio_features",kind:"enum",T:RS.getEnumType(WS),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:RS.getEnumType(LS)}])),iC=RS.makeMessageType("livekit.VideoLayer",(()=>[{no:1,name:"quality",kind:"enum",T:RS.getEnumType(US)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}])),rC=RS.makeMessageType("livekit.DataPacket",(()=>[{no:1,name:"kind",kind:"enum",T:RS.getEnumType(oC)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:lC,oneof:"value"},{no:3,name:"speaker",kind:"message",T:sC,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:cC,oneof:"value"},{no:7,name:"transcription",kind:"message",T:uC,oneof:"value"},{no:8,name:"metrics",kind:"message",T:MS,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:hC,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:pC,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:fC,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:mC,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:RC,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:PC,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:AC,oneof:"value"}])),oC=RS.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),sC=RS.makeMessageType("livekit.ActiveSpeakerUpdate",(()=>[{no:1,name:"speakers",kind:"message",T:aC,repeated:!0}])),aC=RS.makeMessageType("livekit.SpeakerInfo",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}])),lC=RS.makeMessageType("livekit.UserPacket",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}])),cC=RS.makeMessageType("livekit.SipDTMF",(()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}])),uC=RS.makeMessageType("livekit.Transcription",(()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:dC,repeated:!0}])),dC=RS.makeMessageType("livekit.TranscriptionSegment",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}])),hC=RS.makeMessageType("livekit.ChatMessage",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}])),pC=RS.makeMessageType("livekit.RpcRequest",(()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}])),fC=RS.makeMessageType("livekit.RpcAck",(()=>[{no:1,name:"request_id",kind:"scalar",T:9}])),mC=RS.makeMessageType("livekit.RpcResponse",(()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:gC,oneof:"value"}])),gC=RS.makeMessageType("livekit.RpcError",(()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}])),vC=RS.makeMessageType("livekit.ParticipantTracks",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}])),bC=RS.makeMessageType("livekit.ServerInfo",(()=>[{no:1,name:"edition",kind:"enum",T:RS.getEnumType(yC)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}])),yC=RS.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),xC=RS.makeMessageType("livekit.ClientInfo",(()=>[{no:1,name:"sdk",kind:"enum",T:RS.getEnumType(kC)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}])),kC=RS.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"}]),wC=RS.makeMessageType("livekit.ClientConfiguration",(()=>[{no:1,name:"video",kind:"message",T:SC},{no:2,name:"screen",kind:"message",T:SC},{no:3,name:"resume_connection",kind:"enum",T:RS.getEnumType(zS)},{no:4,name:"disabled_codecs",kind:"message",T:CC},{no:5,name:"force_relay",kind:"enum",T:RS.getEnumType(zS)}])),SC=RS.makeMessageType("livekit.VideoConfiguration",(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:RS.getEnumType(zS)}])),CC=RS.makeMessageType("livekit.DisabledCodecs",(()=>[{no:1,name:"codecs",kind:"message",T:KS,repeated:!0},{no:2,name:"publish",kind:"message",T:KS,repeated:!0}])),TC=RS.makeMessageType("livekit.TimedVersion",(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}])),EC=RS.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),_C=RS.makeMessageType("livekit.DataStream.TextHeader",(()=>[{no:1,name:"operation_type",kind:"enum",T:RS.getEnumType(EC)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}]),{localName:"DataStream_TextHeader"}),IC=RS.makeMessageType("livekit.DataStream.ByteHeader",(()=>[{no:1,name:"name",kind:"scalar",T:9}]),{localName:"DataStream_ByteHeader"}),RC=RS.makeMessageType("livekit.DataStream.Header",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:RS.getEnumType(eC)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:_C,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:IC,oneof:"content_header"}]),{localName:"DataStream_Header"}),PC=RS.makeMessageType("livekit.DataStream.Chunk",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}]),{localName:"DataStream_Chunk"}),AC=RS.makeMessageType("livekit.DataStream.Trailer",(()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}]),{localName:"DataStream_Trailer"}),OC=RS.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),MC=RS.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),NC=RS.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),DC=RS.makeMessageType("livekit.SignalRequest",(()=>[{no:1,name:"offer",kind:"message",T:qC,oneof:"message"},{no:2,name:"answer",kind:"message",T:qC,oneof:"message"},{no:3,name:"trickle",kind:"message",T:BC,oneof:"message"},{no:4,name:"add_track",kind:"message",T:FC,oneof:"message"},{no:5,name:"mute",kind:"message",T:UC,oneof:"message"},{no:6,name:"subscription",kind:"message",T:GC,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:KC,oneof:"message"},{no:8,name:"leave",kind:"message",T:YC,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:ZC,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:hT,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:fT,oneof:"message"},{no:13,name:"simulate",kind:"message",T:gT,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:eT,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:vT,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:QC,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:XC,oneof:"message"}])),jC=RS.makeMessageType("livekit.SignalResponse",(()=>[{no:1,name:"join",kind:"message",T:$C,oneof:"message"},{no:2,name:"answer",kind:"message",T:qC,oneof:"message"},{no:3,name:"offer",kind:"message",T:qC,oneof:"message"},{no:4,name:"trickle",kind:"message",T:BC,oneof:"message"},{no:5,name:"update",kind:"message",T:WC,oneof:"message"},{no:6,name:"track_published",kind:"message",T:VC,oneof:"message"},{no:8,name:"leave",kind:"message",T:YC,oneof:"message"},{no:9,name:"mute",kind:"message",T:UC,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:nT,oneof:"message"},{no:11,name:"room_update",kind:"message",T:iT,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:oT,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:aT,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:uT,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:pT,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:HC,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:zC,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:bT,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:kT,oneof:"message"},{no:22,name:"request_response",kind:"message",T:wT,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:CT,oneof:"message"}])),LC=RS.makeMessageType("livekit.SimulcastCodec",(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}])),FC=RS.makeMessageType("livekit.AddTrackRequest",(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:RS.getEnumType(FS)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:RS.getEnumType(BS)},{no:9,name:"layers",kind:"message",T:iC,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:LC,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:RS.getEnumType(eC)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:RS.getEnumType(LS)}])),BC=RS.makeMessageType("livekit.TrickleRequest",(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:RS.getEnumType(OC)},{no:3,name:"final",kind:"scalar",T:8}])),UC=RS.makeMessageType("livekit.MuteTrackRequest",(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}])),$C=RS.makeMessageType("livekit.JoinResponse",(()=>[{no:1,name:"room",kind:"message",T:GS},{no:2,name:"participant",kind:"message",T:XS},{no:3,name:"other_participants",kind:"message",T:XS,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:tT,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:wC},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:bC},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:KS,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}])),zC=RS.makeMessageType("livekit.ReconnectResponse",(()=>[{no:1,name:"ice_servers",kind:"message",T:tT,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:wC}])),VC=RS.makeMessageType("livekit.TrackPublishedResponse",(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:nC}])),HC=RS.makeMessageType("livekit.TrackUnpublishedResponse",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}])),qC=RS.makeMessageType("livekit.SessionDescription",(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}])),WC=RS.makeMessageType("livekit.ParticipantUpdate",(()=>[{no:1,name:"participants",kind:"message",T:XS,repeated:!0}])),GC=RS.makeMessageType("livekit.UpdateSubscription",(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:vC,repeated:!0}])),KC=RS.makeMessageType("livekit.UpdateTrackSettings",(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:RS.getEnumType(US)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}])),QC=RS.makeMessageType("livekit.UpdateLocalAudioTrack",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:RS.getEnumType(WS),repeated:!0}])),XC=RS.makeMessageType("livekit.UpdateLocalVideoTrack",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}])),YC=RS.makeMessageType("livekit.LeaveRequest",(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:RS.getEnumType(VS)},{no:3,name:"action",kind:"enum",T:RS.getEnumType(JC)},{no:4,name:"regions",kind:"message",T:yT}])),JC=RS.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),ZC=RS.makeMessageType("livekit.UpdateVideoLayers",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:iC,repeated:!0}])),eT=RS.makeMessageType("livekit.UpdateParticipantMetadata",(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}])),tT=RS.makeMessageType("livekit.ICEServer",(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}])),nT=RS.makeMessageType("livekit.SpeakersChanged",(()=>[{no:1,name:"speakers",kind:"message",T:aC,repeated:!0}])),iT=RS.makeMessageType("livekit.RoomUpdate",(()=>[{no:1,name:"room",kind:"message",T:GS}])),rT=RS.makeMessageType("livekit.ConnectionQualityInfo",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:RS.getEnumType($S)},{no:3,name:"score",kind:"scalar",T:2}])),oT=RS.makeMessageType("livekit.ConnectionQualityUpdate",(()=>[{no:1,name:"updates",kind:"message",T:rT,repeated:!0}])),sT=RS.makeMessageType("livekit.StreamStateInfo",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:RS.getEnumType(MC)}])),aT=RS.makeMessageType("livekit.StreamStateUpdate",(()=>[{no:1,name:"stream_states",kind:"message",T:sT,repeated:!0}])),lT=RS.makeMessageType("livekit.SubscribedQuality",(()=>[{no:1,name:"quality",kind:"enum",T:RS.getEnumType(US)},{no:2,name:"enabled",kind:"scalar",T:8}])),cT=RS.makeMessageType("livekit.SubscribedCodec",(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:lT,repeated:!0}])),uT=RS.makeMessageType("livekit.SubscribedQualityUpdate",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:lT,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:cT,repeated:!0}])),dT=RS.makeMessageType("livekit.TrackPermission",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}])),hT=RS.makeMessageType("livekit.SubscriptionPermission",(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:dT,repeated:!0}])),pT=RS.makeMessageType("livekit.SubscriptionPermissionUpdate",(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}])),fT=RS.makeMessageType("livekit.SyncState",(()=>[{no:1,name:"answer",kind:"message",T:qC},{no:2,name:"subscription",kind:"message",T:GC},{no:3,name:"publish_tracks",kind:"message",T:VC,repeated:!0},{no:4,name:"data_channels",kind:"message",T:mT,repeated:!0},{no:5,name:"offer",kind:"message",T:qC},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0}])),mT=RS.makeMessageType("livekit.DataChannelInfo",(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:RS.getEnumType(OC)}])),gT=RS.makeMessageType("livekit.SimulateScenario",(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:RS.getEnumType(NC),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}])),vT=RS.makeMessageType("livekit.Ping",(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}])),bT=RS.makeMessageType("livekit.Pong",(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}])),yT=RS.makeMessageType("livekit.RegionSettings",(()=>[{no:1,name:"regions",kind:"message",T:xT,repeated:!0}])),xT=RS.makeMessageType("livekit.RegionInfo",(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}])),kT=RS.makeMessageType("livekit.SubscriptionResponse",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:RS.getEnumType(qS)}])),wT=RS.makeMessageType("livekit.RequestResponse",(()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:RS.getEnumType(ST)},{no:3,name:"message",kind:"scalar",T:9}])),ST=RS.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"}]),CT=RS.makeMessageType("livekit.TrackSubscribed",(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]));function TT(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ET,_T={exports:{}},IT=_T.exports;var RT,PT,AT=function(){return ET||(ET=1,e=_T,function(t,n){e.exports?e.exports=n():t.log=n()}(IT,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],r={},o=null;function s(e,t){var n=e[t];if("function"===typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(WU){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var n=this.getLevel(),r=0;r<i.length;r++){var o=i[r];this[o]=r<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(i,r,o){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?a:void 0!==console[i]?s(console,i):void 0!==console.log?s(console,"log"):e)}(i)||c.apply(this,arguments)}function d(e,n){var s,a,c,d=this,h="loglevel";function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(ge){}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(h),r=n.indexOf(i+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+i.length+1))[1])}catch(ge){}return void 0===d.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"===typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"===typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"===typeof e?h+=":"+e:"symbol"===typeof e&&(h=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return null!=c?c:null!=a?a:s},d.setLevel=function(e,n){return c=f(e),!1!==n&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=n)}catch(ge){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(ge){}}}(c),l.call(d)},d.setDefaultLevel=function(e){a=f(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(ge){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(ge){}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(s=f(o.getLevel())),l.call(d),o===d)for(var e in r)r[e].rebuild()},s=f(o?o.getLevel():"WARN");var m=p();null!=m&&(c=f(m)),l.call(d)}(o=new d).getLogger=function(e){if("symbol"!==typeof e&&"string"!==typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new d(e,o.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return r},o.default=o,o}))),_T.exports;var e}();!function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"}(RT||(RT={})),function(e){e.Default="livekit",e.Room="livekit-room",e.Participant="livekit-participant",e.Track="livekit-track",e.Publication="livekit-track-publication",e.Engine="livekit-engine",e.Signal="livekit-signal",e.PCManager="livekit-pc-manager",e.PCTransport="livekit-pc-transport",e.E2EE="lk-e2ee"}(PT||(PT={}));let OT=AT.getLogger("livekit");Object.values(PT).map((e=>AT.getLogger(e)));function MT(e){const t=AT.getLogger(e);return t.setDefaultLevel(OT.getLevel()),t}OT.setDefaultLevel(RT.info);const NT=AT.getLogger("lk-e2ee"),DT=7e3,jT=[0,300,1200,2700,4800,DT,DT,DT,DT,DT];function LT(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(WU){o(WU)}}function a(e){try{l(i.throw(e))}catch(WU){o(WU)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function FT(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function BT(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=FT(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}"function"===typeof SuppressedError&&SuppressedError;var UT,$T={exports:{}};var zT=function(){if(UT)return $T.exports;UT=1;var e,t="object"===typeof Reflect?Reflect:null,n=t&&"function"===typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};e=t&&"function"===typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!==e};function r(){r.init.call(this)}$T.exports=r,$T.exports.once=function(e,t){return new Promise((function(n,i){function r(n){e.removeListener(t,o),i(n)}function o(){"function"===typeof e.removeListener&&e.removeListener("error",r),n([].slice.call(arguments))}f(e,t,o,{once:!0}),"error"!==t&&function(e,t,n){"function"===typeof e.on&&f(e,"error",t,n)}(e,r,{once:!0})}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var o=10;function s(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function a(e){return void 0===e._maxListeners?r.defaultMaxListeners:e._maxListeners}function l(e,t,n,i){var r,o,l;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),l=o[t]),void 0===l)l=o[t]=n,++e._eventsCount;else if("function"===typeof l?l=o[t]=i?[n,l]:[l,n]:i?l.unshift(n):l.push(n),(r=a(e))>0&&l.length>r&&!l.warned){l.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+l.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=l.length,function(e){console&&console.warn&&console.warn(e)}(c)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},r=c.bind(i);return r.listener=n,i.wrapFn=r,r}function d(e,t,n){var i=e._events;if(void 0===i)return[];var r=i[t];return void 0===r?[]:"function"===typeof r?n?[r.listener||r]:[r]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(r):p(r,r.length)}function h(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"===typeof n)return 1;if(void 0!==n)return n.length}return 0}function p(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function f(e,t,n,i){if("function"===typeof e.on)i.once?e.once(t,n):e.on(t,n);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function r(o){i.once&&e.removeEventListener(t,r),n(o)}))}}return Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");o=e}}),r.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},r.prototype.getMaxListeners=function(){return a(this)},r.prototype.emit=function(e){for(var t=[],i=1;i<arguments.length;i++)t.push(arguments[i]);var r="error"===e,o=this._events;if(void 0!==o)r=r&&void 0===o.error;else if(!r)return!1;if(r){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(void 0===l)return!1;if("function"===typeof l)n(l,this,t);else{var c=l.length,u=p(l,c);for(i=0;i<c;++i)n(u[i],this,t)}return!0},r.prototype.addListener=function(e,t){return l(this,e,t,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(e,t){return l(this,e,t,!0)},r.prototype.once=function(e,t){return s(t),this.on(e,u(this,e,t)),this},r.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,u(this,e,t)),this},r.prototype.removeListener=function(e,t){var n,i,r,o,a;if(s(t),void 0===(i=this._events))return this;if(void 0===(n=i[e]))return this;if(n===t||n.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!==typeof n){for(r=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,r=o;break}if(r<0)return this;0===r?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,r),1===n.length&&(i[e]=n[0]),void 0!==i.removeListener&&this.emit("removeListener",e,a||t)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(e){var t,n,i;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var r,o=Object.keys(n);for(i=0;i<o.length;++i)"removeListener"!==(r=o[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},r.prototype.listeners=function(e){return d(this,e,!0)},r.prototype.rawListeners=function(e){return d(this,e,!1)},r.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},r.prototype.listenerCount=h,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]},$T.exports}();let VT=!0,HT=!0;function qT(e,t,n){const i=e.match(t);return i&&i.length>=n&&parseInt(i[n],10)}function WT(e,t,n){if(!e.RTCPeerConnection)return;const i=e.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(e,i){if(e!==t)return r.apply(this,arguments);const o=e=>{const t=n(e);t&&(i.handleEvent?i.handleEvent(t):i(t))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(i,o),r.apply(this,[e,o])};const o=i.removeEventListener;i.removeEventListener=function(e,n){if(e!==t||!this._eventMap||!this._eventMap[t])return o.apply(this,arguments);if(!this._eventMap[t].has(n))return o.apply(this,arguments);const i=this._eventMap[t].get(n);return this._eventMap[t].delete(n),0===this._eventMap[t].size&&delete this._eventMap[t],0===Object.keys(this._eventMap).length&&delete this._eventMap,o.apply(this,[e,i])},Object.defineProperty(i,"on"+t,{get(){return this["_on"+t]},set(e){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),e&&this.addEventListener(t,this["_on"+t]=e)},enumerable:!0,configurable:!0})}function GT(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(VT=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function KT(e){return"boolean"!==typeof e?new Error("Argument type: "+typeof e+". Please use a boolean."):(HT=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function QT(){if("object"===typeof window){if(VT)return;"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)}}function XT(e,t){HT&&console.warn(e+" is deprecated, please use "+t+" instead.")}function YT(e){return"[object Object]"===Object.prototype.toString.call(e)}function JT(e){return YT(e)?Object.keys(e).reduce((function(t,n){const i=YT(e[n]),r=i?JT(e[n]):e[n],o=i&&!Object.keys(r).length;return void 0===r||o?t:Object.assign(t,{[n]:r})}),{}):e}function ZT(e,t,n){t&&!n.has(t.id)&&(n.set(t.id,t),Object.keys(t).forEach((i=>{i.endsWith("Id")?ZT(e,e.get(t[i]),n):i.endsWith("Ids")&&t[i].forEach((t=>{ZT(e,e.get(t),n)}))})))}function eE(e,t,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(null===t)return r;const o=[];return e.forEach((e=>{"track"===e.type&&e.trackIdentifier===t.id&&o.push(e)})),o.forEach((t=>{e.forEach((n=>{n.type===i&&n.trackId===t.id&&ZT(e,n,r)}))})),r}const tE=QT;function nE(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const i=function(e){if("object"!==typeof e||e.mandatory||e.optional)return e;const t={};return Object.keys(e).forEach((n=>{if("require"===n||"advanced"===n||"mediaSource"===n)return;const i="object"===typeof e[n]?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"===typeof i.exact&&(i.min=i.max=i.exact);const r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];let e={};"number"===typeof i.ideal?(e[r("min",n)]=i.ideal,t.optional.push(e),e={},e[r("max",n)]=i.ideal,t.optional.push(e)):(e[r("",n)]=i.ideal,t.optional.push(e))}void 0!==i.exact&&"number"!==typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach((e=>{void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])}))})),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t},r=function(e,r){if(t.version>=61)return r(e);if((e=JSON.parse(JSON.stringify(e)))&&"object"===typeof e.audio){const t=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])};t((e=JSON.parse(JSON.stringify(e))).audio,"autoGainControl","googAutoGainControl"),t(e.audio,"noiseSuppression","googNoiseSuppression"),e.audio=i(e.audio)}if(e&&"object"===typeof e.video){let o=e.video.facingMode;o=o&&("object"===typeof o?o:{ideal:o});const s=t.version<66;if(o&&("user"===o.exact||"environment"===o.exact||"user"===o.ideal||"environment"===o.ideal)&&(!n.mediaDevices.getSupportedConstraints||!n.mediaDevices.getSupportedConstraints().facingMode||s)){let t;if(delete e.video.facingMode,"environment"===o.exact||"environment"===o.ideal?t=["back","rear"]:"user"!==o.exact&&"user"!==o.ideal||(t=["front"]),t)return n.mediaDevices.enumerateDevices().then((n=>{let s=(n=n.filter((e=>"videoinput"===e.kind))).find((e=>t.some((t=>e.label.toLowerCase().includes(t)))));return!s&&n.length&&t.includes("back")&&(s=n[n.length-1]),s&&(e.video.deviceId=o.exact?{exact:s.deviceId}:{ideal:s.deviceId}),e.video=i(e.video),tE("chrome: "+JSON.stringify(e)),r(e)}))}e.video=i(e.video)}return tE("chrome: "+JSON.stringify(e)),r(e)},o=function(e){return t.version>=64?e:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[e.name]||e.name,message:e.message,constraint:e.constraint||e.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}};if(n.getUserMedia=function(e,t,i){r(e,(e=>{n.webkitGetUserMedia(e,t,(e=>{i&&i(o(e))}))}))}.bind(n),n.mediaDevices.getUserMedia){const e=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(t){return r(t,(t=>e(t).then((e=>{if(t.audio&&!e.getAudioTracks().length||t.video&&!e.getVideoTracks().length)throw e.getTracks().forEach((e=>{e.stop()})),new DOMException("","NotFoundError");return e}),(e=>Promise.reject(o(e))))))}}}function iE(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function rE(e){if("object"===typeof e&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(e){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=e)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=t=>{t.stream.addEventListener("addtrack",(n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.track.id)):{track:n.track};const r=new Event("track");r.track=n.track,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)})),t.stream.getTracks().forEach((n=>{let i;i=e.RTCPeerConnection.prototype.getReceivers?this.getReceivers().find((e=>e.track&&e.track.id===n.id)):{track:n};const r=new Event("track");r.track=n,r.receiver=i,r.transceiver={receiver:i},r.streams=[t.stream],this.dispatchEvent(r)}))},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else WT(e,"track",(e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e)))}function oE(e){if("object"===typeof e&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(e,t){return{track:t,get dtmf(){return void 0===this._dtmf&&("audio"===t.kind?this._dtmf=e.createDTMFSender(t):this._dtmf=null),this._dtmf},_pc:e}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const n=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,i){let r=n.apply(this,arguments);return r||(r=t(this,e),this._senders.push(r)),r};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){i.apply(this,arguments);const t=this._senders.indexOf(e);-1!==t&&this._senders.splice(t,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._senders=this._senders||[],n.apply(this,[e]),e.getTracks().forEach((e=>{this._senders.push(t(this,e))}))};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){this._senders=this._senders||[],i.apply(this,[e]),e.getTracks().forEach((e=>{const t=this._senders.find((t=>t.track===e));t&&this._senders.splice(this._senders.indexOf(t),1)}))}}else if("object"===typeof e&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return void 0===this._dtmf&&("audio"===this.track.kind?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function sE(e){if(!("object"===typeof e&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>eE(t,e.track,!0)))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),WT(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){const e=this;return this._pc.getStats().then((t=>eE(t,e.track,!1)))}}if(!("getStats"in e.RTCRtpSender.prototype)||!("getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const e=arguments[0];let t,n,i;return this.getSenders().forEach((n=>{n.track===e&&(t?i=!0:t=n)})),this.getReceivers().forEach((t=>(t.track===e&&(n?i=!0:n=t),t.track===e))),i||t&&n?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):t?t.getStats():n?n.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function aE(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map((e=>this._shimmedLocalStreams[e][0]))};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(e,n){if(!n)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const i=t.apply(this,arguments);return this._shimmedLocalStreams[n.id]?-1===this._shimmedLocalStreams[n.id].indexOf(i)&&this._shimmedLocalStreams[n.id].push(i):this._shimmedLocalStreams[n.id]=[n,i],i};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(e){this._shimmedLocalStreams=this._shimmedLocalStreams||{},e.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")}));const t=this.getSenders();n.apply(this,arguments);const i=this.getSenders().filter((e=>-1===t.indexOf(e)));this._shimmedLocalStreams[e.id]=[e].concat(i)};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[e.id],i.apply(this,arguments)};const r=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(e){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},e&&Object.keys(this._shimmedLocalStreams).forEach((t=>{const n=this._shimmedLocalStreams[t].indexOf(e);-1!==n&&this._shimmedLocalStreams[t].splice(n,1),1===this._shimmedLocalStreams[t].length&&delete this._shimmedLocalStreams[t]})),r.apply(this,arguments)}}function lE(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return aE(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const e=n.apply(this);return this._reverseStreams=this._reverseStreams||{},e.map((e=>this._reverseStreams[e.id]))};const i=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(t){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},t.getTracks().forEach((e=>{if(this.getSenders().find((t=>t.track===e)))throw new DOMException("Track already exists.","InvalidAccessError")})),!this._reverseStreams[t.id]){const n=new e.MediaStream(t.getTracks());this._streams[t.id]=n,this._reverseStreams[n.id]=t,t=n}i.apply(this,[t])};const r=e.RTCPeerConnection.prototype.removeStream;function o(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(r.id,"g"),i.id)})),new RTCSessionDescription({type:t.type,sdp:n})}e.RTCPeerConnection.prototype.removeStream=function(e){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[e.id]||e]),delete this._reverseStreams[this._streams[e.id]?this._streams[e.id].id:e.id],delete this._streams[e.id]},e.RTCPeerConnection.prototype.addTrack=function(t,n){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const i=[].slice.call(arguments,1);if(1!==i.length||!i[0].getTracks().find((e=>e===t)))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find((e=>e.track===t)))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const r=this._streams[n.id];if(r)r.addTrack(t),Promise.resolve().then((()=>{this.dispatchEvent(new Event("negotiationneeded"))}));else{const i=new e.MediaStream([t]);this._streams[n.id]=i,this._reverseStreams[i.id]=n,this.addStream(i)}return this.getSenders().find((e=>e.track===t))},["createOffer","createAnswer"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){const e=arguments;return arguments.length&&"function"===typeof arguments[0]?n.apply(this,[t=>{const n=o(this,t);e[0].apply(null,[n])},t=>{e[1]&&e[1].apply(null,t)},arguments[2]]):n.apply(this,arguments).then((e=>o(this,e)))}};e.RTCPeerConnection.prototype[t]=i[t]}));const s=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return arguments.length&&arguments[0].type?(arguments[0]=function(e,t){let n=t.sdp;return Object.keys(e._reverseStreams||[]).forEach((t=>{const i=e._reverseStreams[t],r=e._streams[i.id];n=n.replace(new RegExp(i.id,"g"),r.id)})),new RTCSessionDescription({type:t.type,sdp:n})}(this,arguments[0]),s.apply(this,arguments)):s.apply(this,arguments)};const a=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const e=a.get.apply(this);return""===e.type?e:o(this,e)}}),e.RTCPeerConnection.prototype.removeTrack=function(e){if("closed"===this.signalingState)throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!e._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(e._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");let t;this._streams=this._streams||{},Object.keys(this._streams).forEach((n=>{this._streams[n].getTracks().find((t=>e.track===t))&&(t=this._streams[n])})),t&&(1===t.getTracks().length?this.removeStream(this._reverseStreams[t.id]):t.removeTrack(e.track),this.dispatchEvent(new Event("negotiationneeded")))}}function cE(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}))}function uE(e,t){WT(e,"negotiationneeded",(e=>{const n=e.target;if(!(t.version<72||n.getConfiguration&&"plan-b"===n.getConfiguration().sdpSemantics)||"stable"===n.signalingState)return e}))}var dE=Object.freeze({__proto__:null,fixNegotiationNeeded:uE,shimAddTrackRemoveTrack:lE,shimAddTrackRemoveTrackWithNative:aE,shimGetSendersWithDtmf:oE,shimGetUserMedia:nE,shimMediaStream:iE,shimOnTrack:rE,shimPeerConnection:cE,shimSenderReceiverGetStats:sE});function hE(e,t){const n=e&&e.navigator,i=e&&e.MediaStreamTrack;if(n.getUserMedia=function(e,t,i){XT("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(e).then(t,i)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const e=function(e,t,n){t in e&&!(n in e)&&(e[n]=e[t],delete e[t])},t=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(n){return"object"===typeof n&&"object"===typeof n.audio&&(n=JSON.parse(JSON.stringify(n)),e(n.audio,"autoGainControl","mozAutoGainControl"),e(n.audio,"noiseSuppression","mozNoiseSuppression")),t(n)},i&&i.prototype.getSettings){const t=i.prototype.getSettings;i.prototype.getSettings=function(){const n=t.apply(this,arguments);return e(n,"mozAutoGainControl","autoGainControl"),e(n,"mozNoiseSuppression","noiseSuppression"),n}}if(i&&i.prototype.applyConstraints){const t=i.prototype.applyConstraints;i.prototype.applyConstraints=function(n){return"audio"===this.kind&&"object"===typeof n&&(n=JSON.parse(JSON.stringify(n)),e(n,"autoGainControl","mozAutoGainControl"),e(n,"noiseSuppression","mozNoiseSuppression")),t.apply(this,[n])}}}}function pE(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fE(e,t){if("object"!==typeof e||!e.RTCPeerConnection&&!e.mozRTCPeerConnection)return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach((function(t){const n=e.RTCPeerConnection.prototype[t],i={[t](){return arguments[0]=new("addIceCandidate"===t?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),n.apply(this,arguments)}};e.RTCPeerConnection.prototype[t]=i[t]}));const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[e,r,o]=arguments;return i.apply(this,[e||null]).then((e=>{if(t.version<53&&!r)try{e.forEach((e=>{e.type=n[e.type]||e.type}))}catch(WU){if("TypeError"!==WU.name)throw WU;e.forEach(((t,i)=>{e.set(i,Object.assign({},t,{type:n[t.type]||t.type}))}))}return e})).then(r,o)}}function mE(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const e=n.apply(this,arguments);return e._pc=this,e}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function gE(e){if("object"!==typeof e||!e.RTCPeerConnection||!e.RTCRtpSender)return;if(e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const e=t.apply(this,[]);return e.forEach((e=>e._pc=this)),e}),WT(e,"track",(e=>(e.receiver._pc=e.srcElement,e))),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function vE(e){e.RTCPeerConnection&&!("removeStream"in e.RTCPeerConnection.prototype)&&(e.RTCPeerConnection.prototype.removeStream=function(e){XT("removeStream","removeTrack"),this.getSenders().forEach((t=>{t.track&&e.getTracks().includes(t.track)&&this.removeTrack(t)}))})}function bE(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function yE(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let e=arguments[1]&&arguments[1].sendEncodings;void 0===e&&(e=[]),e=[...e];const n=e.length>0;n&&e.forEach((e=>{if("rid"in e){if(!/^[a-z0-9]{0,16}$/i.test(e.rid))throw new TypeError("Invalid RID value provided.")}if("scaleResolutionDownBy"in e&&!(parseFloat(e.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in e&&!(parseFloat(e.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")}));const i=t.apply(this,arguments);if(n){const{sender:t}=i,n=t.getParameters();(!("encodings"in n)||1===n.encodings.length&&0===Object.keys(n.encodings[0]).length)&&(n.encodings=e,t.sendEncodings=e,this.setParametersPromises.push(t.setParameters(n).then((()=>{delete t.sendEncodings})).catch((()=>{delete t.sendEncodings}))))}return i})}function xE(e){if("object"!==typeof e||!e.RTCRtpSender)return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const e=t.apply(this,arguments);return"encodings"in e||(e.encodings=[].concat(this.sendEncodings||[{}])),e})}function kE(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}function wE(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then((()=>t.apply(this,arguments))).finally((()=>{this.setParametersPromises=[]})):t.apply(this,arguments)}}var SE=Object.freeze({__proto__:null,shimAddTransceiver:yE,shimCreateAnswer:wE,shimCreateOffer:kE,shimGetDisplayMedia:function(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(n){if(!n||!n.video){const e=new DOMException("getDisplayMedia without video constraints is undefined");return e.name="NotFoundError",e.code=8,Promise.reject(e)}return!0===n.video?n.video={mediaSource:t}:n.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(n)})},shimGetParameters:xE,shimGetUserMedia:hE,shimOnTrack:pE,shimPeerConnection:fE,shimRTCDataChannel:bE,shimReceiverGetStats:gE,shimRemoveStream:vE,shimSenderGetStats:mE});function CE(e){if("object"===typeof e&&e.RTCPeerConnection){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(e){this._localStreams||(this._localStreams=[]),this._localStreams.includes(e)||this._localStreams.push(e),e.getAudioTracks().forEach((n=>t.call(this,n,e))),e.getVideoTracks().forEach((n=>t.call(this,n,e)))},e.RTCPeerConnection.prototype.addTrack=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i&&i.forEach((e=>{this._localStreams?this._localStreams.includes(e)||this._localStreams.push(e):this._localStreams=[e]})),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(e){this._localStreams||(this._localStreams=[]);const t=this._localStreams.indexOf(e);if(-1===t)return;this._localStreams.splice(t,1);const n=e.getTracks();this.getSenders().forEach((e=>{n.includes(e.track)&&this.removeTrack(e)}))})}}function TE(e){if("object"===typeof e&&e.RTCPeerConnection&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(e){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=e),this.addEventListener("track",this._onaddstreampoly=e=>{e.streams.forEach((e=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(e))return;this._remoteStreams.push(e);const t=new Event("addstream");t.stream=e,this.dispatchEvent(t)}))})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const e=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(t){t.streams.forEach((t=>{if(e._remoteStreams||(e._remoteStreams=[]),e._remoteStreams.indexOf(t)>=0)return;e._remoteStreams.push(t);const n=new Event("addstream");n.stream=t,e.dispatchEvent(n)}))}),t.apply(e,arguments)}}}function EE(e){if("object"!==typeof e||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,i=t.createAnswer,r=t.setLocalDescription,o=t.setRemoteDescription,s=t.addIceCandidate;t.createOffer=function(e,t){const i=arguments.length>=2?arguments[2]:arguments[0],r=n.apply(this,[i]);return t?(r.then(e,t),Promise.resolve()):r},t.createAnswer=function(e,t){const n=arguments.length>=2?arguments[2]:arguments[0],r=i.apply(this,[n]);return t?(r.then(e,t),Promise.resolve()):r};let a=function(e,t,n){const i=r.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i};t.setLocalDescription=a,a=function(e,t,n){const i=o.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.setRemoteDescription=a,a=function(e,t,n){const i=s.apply(this,[e]);return n?(i.then(t,n),Promise.resolve()):i},t.addIceCandidate=a}function _E(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const e=t.mediaDevices,n=e.getUserMedia.bind(e);t.mediaDevices.getUserMedia=e=>n(IE(e))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=function(e,n,i){t.mediaDevices.getUserMedia(e).then(n,i)}.bind(t))}function IE(e){return e&&void 0!==e.video?Object.assign({},e,{video:JT(e.video)}):e}function RE(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(e,n){if(e&&e.iceServers){const t=[];for(let n=0;n<e.iceServers.length;n++){let i=e.iceServers[n];void 0===i.urls&&i.url?(XT("RTCIceServer.url","RTCIceServer.urls"),i=JSON.parse(JSON.stringify(i)),i.urls=i.url,delete i.url,t.push(i)):t.push(e.iceServers[n])}e.iceServers=t}return new t(e,n)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get:()=>t.generateCertificate})}function PE(e){"object"===typeof e&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function AE(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(e){if(e){"undefined"!==typeof e.offerToReceiveAudio&&(e.offerToReceiveAudio=!!e.offerToReceiveAudio);const t=this.getTransceivers().find((e=>"audio"===e.receiver.track.kind));!1===e.offerToReceiveAudio&&t?"sendrecv"===t.direction?t.setDirection?t.setDirection("sendonly"):t.direction="sendonly":"recvonly"===t.direction&&(t.setDirection?t.setDirection("inactive"):t.direction="inactive"):!0!==e.offerToReceiveAudio||t||this.addTransceiver("audio",{direction:"recvonly"}),"undefined"!==typeof e.offerToReceiveVideo&&(e.offerToReceiveVideo=!!e.offerToReceiveVideo);const n=this.getTransceivers().find((e=>"video"===e.receiver.track.kind));!1===e.offerToReceiveVideo&&n?"sendrecv"===n.direction?n.setDirection?n.setDirection("sendonly"):n.direction="sendonly":"recvonly"===n.direction&&(n.setDirection?n.setDirection("inactive"):n.direction="inactive"):!0!==e.offerToReceiveVideo||n||this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function OE(e){"object"!==typeof e||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var ME,NE=Object.freeze({__proto__:null,shimAudioContext:OE,shimCallbacksAPI:EE,shimConstraints:IE,shimCreateOfferLegacy:AE,shimGetUserMedia:_E,shimLocalStreamsAPI:CE,shimRTCIceServerUrls:RE,shimRemoteStreamsAPI:TE,shimTrackEventTransceiver:PE}),DE={exports:{}};var jE=(ME||(ME=1,function(e){const t={generateIdentifier:function(){return Math.random().toString(36).substring(2,12)}};t.localCName=t.generateIdentifier(),t.splitLines=function(e){return e.trim().split("\n").map((e=>e.trim()))},t.splitSections=function(e){return e.split("\nm=").map(((e,t)=>(t>0?"m="+e:e).trim()+"\r\n"))},t.getDescription=function(e){const n=t.splitSections(e);return n&&n[0]},t.getMediaSections=function(e){const n=t.splitSections(e);return n.shift(),n},t.matchPrefix=function(e,n){return t.splitLines(e).filter((e=>0===e.indexOf(n)))},t.parseCandidate=function(e){let t;t=0===e.indexOf("a=candidate:")?e.substring(12).split(" "):e.substring(10).split(" ");const n={foundation:t[0],component:{1:"rtp",2:"rtcp"}[t[1]]||t[1],protocol:t[2].toLowerCase(),priority:parseInt(t[3],10),ip:t[4],address:t[4],port:parseInt(t[5],10),type:t[7]};for(let i=8;i<t.length;i+=2)switch(t[i]){case"raddr":n.relatedAddress=t[i+1];break;case"rport":n.relatedPort=parseInt(t[i+1],10);break;case"tcptype":n.tcpType=t[i+1];break;case"ufrag":n.ufrag=t[i+1],n.usernameFragment=t[i+1];break;default:void 0===n[t[i]]&&(n[t[i]]=t[i+1])}return n},t.writeCandidate=function(e){const t=[];t.push(e.foundation);const n=e.component;"rtp"===n?t.push(1):"rtcp"===n?t.push(2):t.push(n),t.push(e.protocol.toUpperCase()),t.push(e.priority),t.push(e.address||e.ip),t.push(e.port);const i=e.type;return t.push("typ"),t.push(i),"host"!==i&&e.relatedAddress&&e.relatedPort&&(t.push("raddr"),t.push(e.relatedAddress),t.push("rport"),t.push(e.relatedPort)),e.tcpType&&"tcp"===e.protocol.toLowerCase()&&(t.push("tcptype"),t.push(e.tcpType)),(e.usernameFragment||e.ufrag)&&(t.push("ufrag"),t.push(e.usernameFragment||e.ufrag)),"candidate:"+t.join(" ")},t.parseIceOptions=function(e){return e.substring(14).split(" ")},t.parseRtpMap=function(e){let t=e.substring(9).split(" ");const n={payloadType:parseInt(t.shift(),10)};return t=t[0].split("/"),n.name=t[0],n.clockRate=parseInt(t[1],10),n.channels=3===t.length?parseInt(t[2],10):1,n.numChannels=n.channels,n},t.writeRtpMap=function(e){let t=e.payloadType;void 0!==e.preferredPayloadType&&(t=e.preferredPayloadType);const n=e.channels||e.numChannels||1;return"a=rtpmap:"+t+" "+e.name+"/"+e.clockRate+(1!==n?"/"+n:"")+"\r\n"},t.parseExtmap=function(e){const t=e.substring(9).split(" ");return{id:parseInt(t[0],10),direction:t[0].indexOf("/")>0?t[0].split("/")[1]:"sendrecv",uri:t[1],attributes:t.slice(2).join(" ")}},t.writeExtmap=function(e){return"a=extmap:"+(e.id||e.preferredId)+(e.direction&&"sendrecv"!==e.direction?"/"+e.direction:"")+" "+e.uri+(e.attributes?" "+e.attributes:"")+"\r\n"},t.parseFmtp=function(e){const t={};let n;const i=e.substring(e.indexOf(" ")+1).split(";");for(let r=0;r<i.length;r++)n=i[r].trim().split("="),t[n[0].trim()]=n[1];return t},t.writeFmtp=function(e){let t="",n=e.payloadType;if(void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.parameters&&Object.keys(e.parameters).length){const i=[];Object.keys(e.parameters).forEach((t=>{void 0!==e.parameters[t]?i.push(t+"="+e.parameters[t]):i.push(t)})),t+="a=fmtp:"+n+" "+i.join(";")+"\r\n"}return t},t.parseRtcpFb=function(e){const t=e.substring(e.indexOf(" ")+1).split(" ");return{type:t.shift(),parameter:t.join(" ")}},t.writeRtcpFb=function(e){let t="",n=e.payloadType;return void 0!==e.preferredPayloadType&&(n=e.preferredPayloadType),e.rtcpFeedback&&e.rtcpFeedback.length&&e.rtcpFeedback.forEach((e=>{t+="a=rtcp-fb:"+n+" "+e.type+(e.parameter&&e.parameter.length?" "+e.parameter:"")+"\r\n"})),t},t.parseSsrcMedia=function(e){const t=e.indexOf(" "),n={ssrc:parseInt(e.substring(7,t),10)},i=e.indexOf(":",t);return i>-1?(n.attribute=e.substring(t+1,i),n.value=e.substring(i+1)):n.attribute=e.substring(t+1),n},t.parseSsrcGroup=function(e){const t=e.substring(13).split(" ");return{semantics:t.shift(),ssrcs:t.map((e=>parseInt(e,10)))}},t.getMid=function(e){const n=t.matchPrefix(e,"a=mid:")[0];if(n)return n.substring(6)},t.parseFingerprint=function(e){const t=e.substring(14).split(" ");return{algorithm:t[0].toLowerCase(),value:t[1].toUpperCase()}},t.getDtlsParameters=function(e,n){return{role:"auto",fingerprints:t.matchPrefix(e+n,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(e,t){let n="a=setup:"+t+"\r\n";return e.fingerprints.forEach((e=>{n+="a=fingerprint:"+e.algorithm+" "+e.value+"\r\n"})),n},t.parseCryptoLine=function(e){const t=e.substring(9).split(" ");return{tag:parseInt(t[0],10),cryptoSuite:t[1],keyParams:t[2],sessionParams:t.slice(3)}},t.writeCryptoLine=function(e){return"a=crypto:"+e.tag+" "+e.cryptoSuite+" "+("object"===typeof e.keyParams?t.writeCryptoKeyParams(e.keyParams):e.keyParams)+(e.sessionParams?" "+e.sessionParams.join(" "):"")+"\r\n"},t.parseCryptoKeyParams=function(e){if(0!==e.indexOf("inline:"))return null;const t=e.substring(7).split("|");return{keyMethod:"inline",keySalt:t[0],lifeTime:t[1],mkiValue:t[2]?t[2].split(":")[0]:void 0,mkiLength:t[2]?t[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(e){return e.keyMethod+":"+e.keySalt+(e.lifeTime?"|"+e.lifeTime:"")+(e.mkiValue&&e.mkiLength?"|"+e.mkiValue+":"+e.mkiLength:"")},t.getCryptoParameters=function(e,n){return t.matchPrefix(e+n,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(e,n){const i=t.matchPrefix(e+n,"a=ice-ufrag:")[0],r=t.matchPrefix(e+n,"a=ice-pwd:")[0];return i&&r?{usernameFragment:i.substring(12),password:r.substring(10)}:null},t.writeIceParameters=function(e){let t="a=ice-ufrag:"+e.usernameFragment+"\r\na=ice-pwd:"+e.password+"\r\n";return e.iceLite&&(t+="a=ice-lite\r\n"),t},t.parseRtpParameters=function(e){const n={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=t.splitLines(e)[0].split(" ");n.profile=i[2];for(let o=3;o<i.length;o++){const r=i[o],s=t.matchPrefix(e,"a=rtpmap:"+r+" ")[0];if(s){const i=t.parseRtpMap(s),o=t.matchPrefix(e,"a=fmtp:"+r+" ");switch(i.parameters=o.length?t.parseFmtp(o[0]):{},i.rtcpFeedback=t.matchPrefix(e,"a=rtcp-fb:"+r+" ").map(t.parseRtcpFb),n.codecs.push(i),i.name.toUpperCase()){case"RED":case"ULPFEC":n.fecMechanisms.push(i.name.toUpperCase())}}}t.matchPrefix(e,"a=extmap:").forEach((e=>{n.headerExtensions.push(t.parseExtmap(e))}));const r=t.matchPrefix(e,"a=rtcp-fb:* ").map(t.parseRtcpFb);return n.codecs.forEach((e=>{r.forEach((t=>{e.rtcpFeedback.find((e=>e.type===t.type&&e.parameter===t.parameter))||e.rtcpFeedback.push(t)}))})),n},t.writeRtpDescription=function(e,n){let i="";i+="m="+e+" ",i+=n.codecs.length>0?"9":"0",i+=" "+(n.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=n.codecs.map((e=>void 0!==e.preferredPayloadType?e.preferredPayloadType:e.payloadType)).join(" ")+"\r\n",i+="c=IN IP4 0.0.0.0\r\n",i+="a=rtcp:9 IN IP4 0.0.0.0\r\n",n.codecs.forEach((e=>{i+=t.writeRtpMap(e),i+=t.writeFmtp(e),i+=t.writeRtcpFb(e)}));let r=0;return n.codecs.forEach((e=>{e.maxptime>r&&(r=e.maxptime)})),r>0&&(i+="a=maxptime:"+r+"\r\n"),n.headerExtensions&&n.headerExtensions.forEach((e=>{i+=t.writeExtmap(e)})),i},t.parseRtpEncodingParameters=function(e){const n=[],i=t.parseRtpParameters(e),r=-1!==i.fecMechanisms.indexOf("RED"),o=-1!==i.fecMechanisms.indexOf("ULPFEC"),s=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute)),a=s.length>0&&s[0].ssrc;let l;const c=t.matchPrefix(e,"a=ssrc-group:FID").map((e=>e.substring(17).split(" ").map((e=>parseInt(e,10)))));c.length>0&&c[0].length>1&&c[0][0]===a&&(l=c[0][1]),i.codecs.forEach((e=>{if("RTX"===e.name.toUpperCase()&&e.parameters.apt){let t={ssrc:a,codecPayloadType:parseInt(e.parameters.apt,10)};a&&l&&(t.rtx={ssrc:l}),n.push(t),r&&(t=JSON.parse(JSON.stringify(t)),t.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},n.push(t))}})),0===n.length&&a&&n.push({ssrc:a});let u=t.matchPrefix(e,"b=");return u.length&&(u=0===u[0].indexOf("b=TIAS:")?parseInt(u[0].substring(7),10):0===u[0].indexOf("b=AS:")?1e3*parseInt(u[0].substring(5),10)*.95-16e3:void 0,n.forEach((e=>{e.maxBitrate=u}))),n},t.parseRtcpParameters=function(e){const n={},i=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"cname"===e.attribute))[0];i&&(n.cname=i.value,n.ssrc=i.ssrc);const r=t.matchPrefix(e,"a=rtcp-rsize");n.reducedSize=r.length>0,n.compound=0===r.length;const o=t.matchPrefix(e,"a=rtcp-mux");return n.mux=o.length>0,n},t.writeRtcpParameters=function(e){let t="";return e.reducedSize&&(t+="a=rtcp-rsize\r\n"),e.mux&&(t+="a=rtcp-mux\r\n"),void 0!==e.ssrc&&e.cname&&(t+="a=ssrc:"+e.ssrc+" cname:"+e.cname+"\r\n"),t},t.parseMsid=function(e){let n;const i=t.matchPrefix(e,"a=msid:");if(1===i.length)return n=i[0].substring(7).split(" "),{stream:n[0],track:n[1]};const r=t.matchPrefix(e,"a=ssrc:").map((e=>t.parseSsrcMedia(e))).filter((e=>"msid"===e.attribute));return r.length>0?(n=r[0].value.split(" "),{stream:n[0],track:n[1]}):void 0},t.parseSctpDescription=function(e){const n=t.parseMLine(e),i=t.matchPrefix(e,"a=max-message-size:");let r;i.length>0&&(r=parseInt(i[0].substring(19),10)),isNaN(r)&&(r=65536);const o=t.matchPrefix(e,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:n.fmt,maxMessageSize:r};const s=t.matchPrefix(e,"a=sctpmap:");if(s.length>0){const e=s[0].substring(10).split(" ");return{port:parseInt(e[0],10),protocol:e[1],maxMessageSize:r}}},t.writeSctpDescription=function(e,t){let n=[];return n="DTLS/SCTP"!==e.protocol?["m="+e.kind+" 9 "+e.protocol+" "+t.protocol+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctp-port:"+t.port+"\r\n"]:["m="+e.kind+" 9 "+e.protocol+" "+t.port+"\r\n","c=IN IP4 0.0.0.0\r\n","a=sctpmap:"+t.port+" "+t.protocol+" 65535\r\n"],void 0!==t.maxMessageSize&&n.push("a=max-message-size:"+t.maxMessageSize+"\r\n"),n.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(e,n,i){let r;const o=void 0!==n?n:2;return r=e||t.generateSessionId(),"v=0\r\no="+(i||"thisisadapterortc")+" "+r+" "+o+" IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"},t.getDirection=function(e,n){const i=t.splitLines(e);for(let t=0;t<i.length;t++)switch(i[t]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[t].substring(2)}return n?t.getDirection(n):"sendrecv"},t.getKind=function(e){return t.splitLines(e)[0].split(" ")[0].substring(2)},t.isRejected=function(e){return"0"===e.split(" ",2)[1]},t.parseMLine=function(e){const n=t.splitLines(e)[0].substring(2).split(" ");return{kind:n[0],port:parseInt(n[1],10),protocol:n[2],fmt:n.slice(3).join(" ")}},t.parseOLine=function(e){const n=t.matchPrefix(e,"o=")[0].substring(2).split(" ");return{username:n[0],sessionId:n[1],sessionVersion:parseInt(n[2],10),netType:n[3],addressType:n[4],address:n[5]}},t.isValidSDP=function(e){if("string"!==typeof e||0===e.length)return!1;const n=t.splitLines(e);for(let t=0;t<n.length;t++)if(n[t].length<2||"="!==n[t].charAt(1))return!1;return!0},e.exports=t}(DE)),DE.exports),LE=TT(jE),FE=qk({__proto__:null,default:LE},[jE]);function BE(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(e){if("object"===typeof e&&e.candidate&&0===e.candidate.indexOf("a=")&&((e=JSON.parse(JSON.stringify(e))).candidate=e.candidate.substring(2)),e.candidate&&e.candidate.length){const n=new t(e),i=LE.parseCandidate(e.candidate);for(const e in i)e in n||Object.defineProperty(n,e,{value:i[e]});return n.toJSON=function(){return{candidate:n.candidate,sdpMid:n.sdpMid,sdpMLineIndex:n.sdpMLineIndex,usernameFragment:n.usernameFragment}},n}return new t(e)},e.RTCIceCandidate.prototype=t.prototype,WT(e,"icecandidate",(t=>(t.candidate&&Object.defineProperty(t,"candidate",{value:new e.RTCIceCandidate(t.candidate),writable:"false"}),t)))}function UE(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||WT(e,"icecandidate",(e=>{if(e.candidate){const t=LE.parseCandidate(e.candidate.candidate);"relay"===t.type&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[t.priority>>24])}return e}))}function $E(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp}});const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,"chrome"===t.browser&&t.version>=76){const{sdpSemantics:e}=this.getConfiguration();"plan-b"===e&&Object.defineProperty(this,"sctp",{get(){return"undefined"===typeof this._sctp?null:this._sctp},enumerable:!0,configurable:!0})}if(function(e){if(!e||!e.sdp)return!1;const t=LE.splitSections(e.sdp);return t.shift(),t.some((e=>{const t=LE.parseMLine(e);return t&&"application"===t.kind&&-1!==t.protocol.indexOf("SCTP")}))}(arguments[0])){const e=function(e){const t=e.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(null===t||t.length<2)return-1;const n=parseInt(t[1],10);return n!==n?-1:n}(arguments[0]),n=function(e){let n=65536;return"firefox"===t.browser&&(n=t.version<57?-1===e?16384:2147483637:t.version<60?57===t.version?65535:65536:2147483637),n}(e),i=function(e,n){let i=65536;"firefox"===t.browser&&57===t.version&&(i=65535);const r=LE.matchPrefix(e.sdp,"a=max-message-size:");return r.length>0?i=parseInt(r[0].substring(19),10):"firefox"===t.browser&&-1!==n&&(i=2147483637),i}(arguments[0],e);let r;r=0===n&&0===i?Number.POSITIVE_INFINITY:0===n||0===i?Math.max(n,i):Math.min(n,i);const o={};Object.defineProperty(o,"maxMessageSize",{get:()=>r}),this._sctp=o}return n.apply(this,arguments)}}function zE(e){if(!e.RTCPeerConnection||!("createDataChannel"in e.RTCPeerConnection.prototype))return;function t(e,t){const n=e.send;e.send=function(){const i=arguments[0],r=i.length||i.size||i.byteLength;if("open"===e.readyState&&t.sctp&&r>t.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+t.sctp.maxMessageSize+" bytes)");return n.apply(e,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const e=n.apply(this,arguments);return t(e,this),e},WT(e,"datachannel",(e=>(t(e.channel,e.target),e)))}function VE(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(e){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),e&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=e)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach((e=>{const n=t[e];t[e]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=e=>{const t=e.target;if(t._lastConnectionState!==t.connectionState){t._lastConnectionState=t.connectionState;const n=new Event("connectionstatechange",e);t.dispatchEvent(n)}return e},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),n.apply(this,arguments)}}))}function HE(e,t){if(!e.RTCPeerConnection)return;if("chrome"===t.browser&&t.version>=71)return;if("safari"===t.browser&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(t){if(t&&t.sdp&&-1!==t.sdp.indexOf("\na=extmap-allow-mixed")){const n=t.sdp.split("\n").filter((e=>"a=extmap-allow-mixed"!==e.trim())).join("\n");e.RTCSessionDescription&&t instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:t.type,sdp:n}):t.sdp=n}return n.apply(this,arguments)}}function qE(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.addIceCandidate;n&&0!==n.length&&(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?("chrome"===t.browser&&t.version<78||"firefox"===t.browser&&t.version<68||"safari"===t.browser)&&arguments[0]&&""===arguments[0].candidate?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function WE(e,t){if(!e.RTCPeerConnection||!e.RTCPeerConnection.prototype)return;const n=e.RTCPeerConnection.prototype.setLocalDescription;n&&0!==n.length&&(e.RTCPeerConnection.prototype.setLocalDescription=function(){let e=arguments[0]||{};if("object"!==typeof e||e.type&&e.sdp)return n.apply(this,arguments);if(e={type:e.type,sdp:e.sdp},!e.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":e.type="offer";break;default:e.type="answer"}if(e.sdp||"offer"!==e.type&&"answer"!==e.type)return n.apply(this,[e]);return("offer"===e.type?this.createOffer:this.createAnswer).apply(this).then((e=>n.apply(this,[e])))})}var GE=Object.freeze({__proto__:null,removeExtmapAllowMixed:HE,shimAddIceCandidateNullOrEmpty:qE,shimConnectionState:VE,shimMaxMessageSize:$E,shimParameterlessSetLocalDescription:WE,shimRTCIceCandidate:BE,shimRTCIceCandidateRelayProtocol:UE,shimSendThrowTypeError:zE});!function(){let{window:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=QT,i=function(e){const t={browser:null,version:null};if("undefined"===typeof e||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.userAgentData&&n.userAgentData.brands){const e=n.userAgentData.brands.find((e=>"Chromium"===e.brand));if(e)return{browser:"chrome",version:parseInt(e.version,10)}}if(n.mozGetUserMedia)t.browser="firefox",t.version=qT(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||!1===e.isSecureContext&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=qT(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else{if(!e.RTCPeerConnection||!n.userAgent.match(/AppleWebKit\/(\d+)\./))return t.browser="Not a supported browser.",t;t.browser="safari",t.version=qT(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype}return t}(e),r={browserDetails:i,commonShim:GE,extractVersion:qT,disableLog:GT,disableWarnings:KT,sdp:FE};switch(i.browser){case"chrome":if(!dE||!cE||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(null===i.version)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=dE,qE(e,i),WE(e),nE(e,i),iE(e),cE(e,i),rE(e),lE(e,i),oE(e),sE(e),uE(e,i),BE(e),UE(e),VE(e),$E(e,i),zE(e),HE(e,i);break;case"firefox":if(!SE||!fE||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=SE,qE(e,i),WE(e),hE(e,i),fE(e,i),pE(e),vE(e),mE(e),gE(e),bE(e),yE(e),xE(e),kE(e),wE(e),BE(e),VE(e),$E(e,i),zE(e);break;case"safari":if(!NE||!t.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=NE,qE(e,i),WE(e),RE(e),AE(e),EE(e),CE(e),TE(e),PE(e),_E(e),OE(e),BE(e),UE(e),$E(e,i),zE(e),HE(e,i);break;default:n("Unsupported browser!")}}({window:"undefined"===typeof window?void 0:window});const KE="lk_e2ee";var QE,XE,YE,JE;function ZE(){return"undefined"!==typeof window.RTCRtpSender&&"undefined"!==typeof window.RTCRtpSender.prototype.createEncodedStreams||e_()}function e_(){return"undefined"!==typeof window.RTCRtpScriptTransform}!function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"}(QE||(QE={})),function(e){e.KeyRatcheted="keyRatcheted"}(XE||(XE={})),function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"}(YE||(YE={})),function(e){e.Error="cryptorError"}(JE||(JE={}));zT.EventEmitter;class t_ extends Error{constructor(e,t){super(t||"an error has occured"),this.name="LiveKitError",this.code=e}}var n_,i_,r_,o_,s_,a_,l_;!function(e){e[e.NotAllowed=0]="NotAllowed",e[e.ServerUnreachable=1]="ServerUnreachable",e[e.InternalError=2]="InternalError",e[e.Cancelled=3]="Cancelled",e[e.LeaveRequest=4]="LeaveRequest"}(n_||(n_={}));class c_ extends t_{constructor(e,t,n,i){super(1,e),this.name="ConnectionError",this.status=n,this.reason=t,this.context=i,this.reasonName=n_[t]}}class u_ extends t_{constructor(e){super(21,null!==e&&void 0!==e?e:"device is unsupported"),this.name="DeviceUnsupportedError"}}class d_ extends t_{constructor(e){super(20,null!==e&&void 0!==e?e:"track is invalid"),this.name="TrackInvalidError"}}class h_ extends t_{constructor(e){super(10,null!==e&&void 0!==e?e:"unsupported server"),this.name="UnsupportedServer"}}class p_ extends t_{constructor(e){super(12,null!==e&&void 0!==e?e:"unexpected connection state"),this.name="UnexpectedConnectionState"}}class f_ extends t_{constructor(e){super(13,null!==e&&void 0!==e?e:"unable to negotiate"),this.name="NegotiationError"}}class m_ extends t_{constructor(e,t){super(15,e),this.name="PublishTrackError",this.status=t}}class g_ extends t_{constructor(e,t){super(15,e),this.reason=t,this.reasonName="string"===typeof t?t:ST[t]}}!function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"}(i_||(i_={})),function(e){e.getFailure=function(t){if(t&&"name"in t)return"NotFoundError"===t.name||"DevicesNotFoundError"===t.name?e.NotFound:"NotAllowedError"===t.name||"PermissionDeniedError"===t.name?e.PermissionDenied:"NotReadableError"===t.name||"TrackStartError"===t.name?e.DeviceInUse:e.Other}}(i_||(i_={})),function(e){e[e.InvalidKey=0]="InvalidKey",e[e.MissingKey=1]="MissingKey",e[e.InternalError=2]="InternalError"}(r_||(r_={}));function v_(e){return"undefined"===typeof e?e:"function"===typeof structuredClone?structuredClone(e):JSON.parse(JSON.stringify(e))}!function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.ParticipantAttributesChanged="participantAttributesChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged",e.ChatMessage="chatMessage",e.LocalTrackSubscribed="localTrackSubscribed",e.MetricsReceived="metricsReceived"}(o_||(o_={})),function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.SipDTMFReceived="sipDTMFReceived",e.TranscriptionReceived="transcriptionReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded",e.AttributesChanged="attributesChanged",e.LocalTrackSubscribed="localTrackSubscribed",e.ChatMessage="chatMessage"}(s_||(s_={})),function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalTrackSubscribed="localTrackSubscribed",e.Offline="offline",e.SignalRequestResponse="signalRequestResponse",e.SignalConnected="signalConnected"}(a_||(a_={})),function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed",e.TrackProcessorUpdate="trackProcessorUpdate",e.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",e.TranscriptionReceived="transcriptionReceived",e.TimeSyncUpdate="timeSyncUpdate"}(l_||(l_={}));const b_=/version\/(\d+(\.?_?\d+)+)/i;let y_;function x_(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("undefined"===typeof e&&"undefined"===typeof navigator)return;const n=(null!==e&&void 0!==e?e:navigator.userAgent).toLowerCase();if(void 0===y_||t){const e=k_.find((e=>{let{test:t}=e;return t.test(n)}));y_=null===e||void 0===e?void 0:e.describe(n)}return y_}const k_=[{test:/firefox|iceweasel|fxios/i,describe:e=>({name:"Firefox",version:w_(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:S_(e)})},{test:/chrom|crios|crmo/i,describe:e=>({name:"Chrome",version:w_(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0,osVersion:S_(e)})},{test:/safari|applewebkit/i,describe:e=>({name:"Safari",version:w_(b_,e),os:e.includes("mobile/")?"iOS":"macOS",osVersion:S_(e)})}];function w_(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const i=t.match(e);return i&&i.length>=n&&i[n]||""}function S_(e){return e.includes("mac os")?w_(/\(.+?(\d+_\d+(:?_\d+)?)/,e,1).replace(/_/g,"."):void 0}class C_{}C_.setTimeout=function(){return setTimeout(...arguments)},C_.setInterval=function(){return setInterval(...arguments)},C_.clearTimeout=function(){return clearTimeout(...arguments)},C_.clearInterval=function(){return clearInterval(...arguments)};const T_=[];var E_;!function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH"}(E_||(E_={}));class __ extends zT.EventEmitter{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=__.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=OT,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),"hidden"===document.visibilityState?this.backgroundTimeout=setTimeout((()=>this.handleAppVisibilityChanged()),5e3):this.handleAppVisibilityChanged()},this.log=MT(null!==(i=n.loggerName)&&void 0!==i?i:PT.Track),this.loggerContextCb=n.loggerContextCb,this.setMaxListeners(100),this.kind=t,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=__.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this)),DI(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let t="audio";this.kind===__.Kind.Video&&(t="video"),0===this.attachedElements.length&&this.kind===__.Kind.Video&&this.addAppVisibilityListener(),e||("audio"===t&&(T_.forEach((t=>{null!==t.parentElement||e||(e=t)})),e&&T_.splice(T_.indexOf(e),1)),e||(e=document.createElement(t))),this.attachedElements.includes(e)||this.attachedElements.push(e),I_(this.mediaStreamTrack,e);const n=e.srcObject.getTracks(),i=n.some((e=>"audio"===e.kind));return e.play().then((()=>{this.emit(i?l_.AudioPlaybackStarted:l_.VideoPlaybackStarted)})).catch((t=>{"NotAllowedError"===t.name?this.emit(i?l_.AudioPlaybackFailed:l_.VideoPlaybackFailed,t):"AbortError"===t.name?OT.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):OT.warn("could not playback ".concat(i?"audio":"video"),t),i&&e&&n.some((e=>"video"===e.kind))&&"NotAllowedError"===t.name&&(e.muted=!0,e.play().catch((()=>{})))})),this.emit(l_.ElementAttached,e),e}detach(e){try{if(e){R_(this.mediaStreamTrack,e);const t=this.attachedElements.indexOf(e);return t>=0&&(this.attachedElements.splice(t,1),this.recycleElement(e),this.emit(l_.ElementDetached,e)),e}const t=[];return this.attachedElements.forEach((e=>{R_(this.mediaStreamTrack,e),t.push(e),this.recycleElement(e),this.emit(l_.ElementDetached,e)})),this.attachedElements=[],t}finally{0===this.attachedElements.length&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=MT(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let t=!0;e.pause(),T_.forEach((e=>{e.parentElement||(t=!1)})),t&&T_.push(e)}}handleAppVisibilityChanged(){return LT(this,void 0,void 0,(function*(){this.isInBackground="hidden"===document.visibilityState,this.isInBackground||this.kind!==__.Kind.Video||setTimeout((()=>this.attachedElements.forEach((e=>e.play().catch((()=>{}))))),0)}))}addAppVisibilityListener(){Q_()?(this.isInBackground="hidden"===document.visibilityState,document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Q_()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function I_(e,t){let n,i;n=t.srcObject instanceof MediaStream?t.srcObject:new MediaStream,i="audio"===e.kind?n.getAudioTracks():n.getVideoTracks(),i.includes(e)||(i.forEach((e=>{n.removeTrack(e)})),n.addTrack(e)),W_()&&t instanceof HTMLVideoElement||(t.autoplay=!0),t.muted=0===n.getAudioTracks().length,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(W_()||q_())&&t instanceof HTMLVideoElement&&setTimeout((()=>{t.srcObject=n,t.play().catch((()=>{}))}),0))}function R_(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}!function(e){let t,n,i;!function(e){e.Audio="audio",e.Video="video",e.Unknown="unknown"}(t=e.Kind||(e.Kind={})),function(e){e.Camera="camera",e.Microphone="microphone",e.ScreenShare="screen_share",e.ScreenShareAudio="screen_share_audio",e.Unknown="unknown"}(n=e.Source||(e.Source={})),function(e){e.Active="active",e.Paused="paused",e.Unknown="unknown"}(i=e.StreamState||(e.StreamState={})),e.kindToProto=function(e){switch(e){case t.Audio:return FS.AUDIO;case t.Video:return FS.VIDEO;default:return FS.DATA}},e.kindFromProto=function(e){switch(e){case FS.AUDIO:return t.Audio;case FS.VIDEO:return t.Video;default:return t.Unknown}},e.sourceToProto=function(e){switch(e){case n.Camera:return BS.CAMERA;case n.Microphone:return BS.MICROPHONE;case n.ScreenShare:return BS.SCREEN_SHARE;case n.ScreenShareAudio:return BS.SCREEN_SHARE_AUDIO;default:return BS.UNKNOWN}},e.sourceFromProto=function(e){switch(e){case BS.CAMERA:return n.Camera;case BS.MICROPHONE:return n.Microphone;case BS.SCREEN_SHARE:return n.ScreenShare;case BS.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}},e.streamStateFromProto=function(e){switch(e){case MC.ACTIVE:return i.Active;case MC.PAUSED:return i.Paused;default:return i.Unknown}}}(__||(__={}));class P_{constructor(e,t,n,i,r){if("object"===typeof e)this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else{if(void 0===t||void 0===n)throw new TypeError("Unsupported options: provide at least width, height and maxBitrate");this.width=e,this.height=t,this.aspectRatio=e/t,this.encoding={maxBitrate:n,maxFramerate:i,priority:r}}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const A_=["vp8","h264"],O_=["vp8","h264","vp9","av1"];function M_(e){return!!A_.find((t=>t===e))}var N_,D_;!function(e){e[e.PREFER_REGRESSION=0]="PREFER_REGRESSION",e[e.SIMULCAST=1]="SIMULCAST",e[e.REGRESSION=2]="REGRESSION"}(N_||(N_={})),function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:24e3},e.music={maxBitrate:48e3},e.musicStereo={maxBitrate:64e3},e.musicHighQuality={maxBitrate:96e3},e.musicHighQualityStereo={maxBitrate:128e3}}(D_||(D_={}));const j_={h90:new P_(160,90,9e4,20),h180:new P_(320,180,16e4,20),h216:new P_(384,216,18e4,20),h360:new P_(640,360,45e4,20),h540:new P_(960,540,8e5,25),h720:new P_(1280,720,17e5,30),h1080:new P_(1920,1080,3e6,30),h1440:new P_(2560,1440,5e6,30),h2160:new P_(3840,2160,8e6,30)},L_={h120:new P_(160,120,7e4,20),h180:new P_(240,180,125e3,20),h240:new P_(320,240,14e4,20),h360:new P_(480,360,33e4,20),h480:new P_(640,480,5e5,20),h540:new P_(720,540,6e5,25),h720:new P_(960,720,13e5,30),h1080:new P_(1440,1080,23e5,30),h1440:new P_(1920,1440,38e5,30)},F_={h360fps3:new P_(640,360,2e5,3,"medium"),h360fps15:new P_(640,360,4e5,15,"medium"),h720fps5:new P_(1280,720,8e5,5,"medium"),h720fps15:new P_(1280,720,15e5,15,"medium"),h720fps30:new P_(1280,720,2e6,30,"medium"),h1080fps15:new P_(1920,1080,25e5,15,"medium"),h1080fps30:new P_(1920,1080,5e6,30,"medium"),original:new P_(0,0,7e6,30,"medium")},B_="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function U_(e){return LT(this,void 0,void 0,(function*(){return new Promise((t=>C_.setTimeout(t,e)))}))}function $_(){return"addTransceiver"in RTCPeerConnection.prototype}function z_(){return"addTrack"in RTCPeerConnection.prototype}function V_(e){return"av1"===e||"vp9"===e}function H_(e){return!!document&&(e||(e=document.createElement("audio")),"setSinkId"in e)}function q_(){var e;return"Firefox"===(null===(e=x_())||void 0===e?void 0:e.name)}function W_(){var e;return"Safari"===(null===(e=x_())||void 0===e?void 0:e.name)}function G_(){const e=x_();return"Safari"===(null===e||void 0===e?void 0:e.name)&&e.version.startsWith("17.")}function K_(){var e,t;return!!Q_()&&(null!==(t=null===(e=navigator.userAgentData)||void 0===e?void 0:e.mobile)&&void 0!==t?t:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent))}function Q_(){return"undefined"!==typeof document}function X_(){return"ReactNative"==navigator.product}function Y_(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function J_(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function Z_(){if(!X_())return;let e=J_();return e?e.platform:void 0}function eI(){if(Q_())return window.devicePixelRatio;if(X_()){let e=J_();if(e)return e.devicePixelRatio}return 1}function tI(e,t){const n=e.split("."),i=t.split("."),r=Math.min(n.length,i.length);for(let o=0;o<r;++o){const e=parseInt(n[o],10),t=parseInt(i[o],10);if(e>t)return 1;if(e<t)return-1;if(o===r-1&&e===t)return 0}return""===e&&""!==t?-1:""===t?1:n.length==i.length?0:n.length<i.length?-1:1}function nI(e){for(const t of e)t.target.handleResize(t)}function iI(e){for(const t of e)t.target.handleVisibilityChanged(t)}let rI=null;const oI=()=>(rI||(rI=new ResizeObserver(nI)),rI);let sI=null;const aI=()=>(sI||(sI=new IntersectionObserver(iI,{root:null,rootMargin:"0px"})),sI);let lI;function cI(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=document.createElement("canvas");r.width=e,r.height=t;const o=r.getContext("2d");null===o||void 0===o||o.fillRect(0,0,r.width,r.height),i&&o&&(o.beginPath(),o.arc(e/2,t/2,50,0,2*Math.PI,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=r.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}function uI(){if(!lI){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const i=e.createMediaStreamDestination();if(t.connect(n),n.connect(i),t.start(),[lI]=i.stream.getAudioTracks(),!lI)throw Error("Could not get empty media stream audio track");lI.enabled=!1}return lI.clone()}class dI{constructor(e,t){this.onFinally=t,this.promise=new Promise(((t,n)=>LT(this,void 0,void 0,(function*(){this.resolve=t,this.reject=n,e&&(yield e(t,n))})))).finally((()=>{var e;return null===(e=this.onFinally)||void 0===e?void 0:e.call(this)}))}}function hI(e){if("string"===typeof e||"number"===typeof e)return e;if(Array.isArray(e))return e[0];if(e.exact)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function pI(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}function fI(e){switch(e.reason){case n_.LeaveRequest:return e.context;case n_.Cancelled:return VS.CLIENT_INITIATED;case n_.NotAllowed:return VS.USER_REJECTED;case n_.ServerUnreachable:return VS.JOIN_FAILURE;default:return VS.UNKNOWN_REASON}}function mI(e){return void 0!==e?Number(e):void 0}function gI(e){return void 0!==e?BigInt(e):void 0}function vI(e){return!!e&&!(e instanceof MediaStreamTrack)&&e.isLocal}function bI(e){return!!e&&e.kind==__.Kind.Audio}function yI(e){return!!e&&e.kind==__.Kind.Video}function xI(e){return vI(e)&&yI(e)}function kI(e){return vI(e)&&bI(e)}function wI(e){return!!e&&!e.isLocal}function SI(e){return!!e&&!e.isLocal}function CI(e){return wI(e)&&yI(e)}function TI(e,t,n){var i,r,o,s;const{optionsWithoutProcessor:a,audioProcessor:l,videoProcessor:c}=jI(null!==e&&void 0!==e?e:{}),u=null===t||void 0===t?void 0:t.processor,d=null===n||void 0===n?void 0:n.processor,h=null!==a&&void 0!==a?a:{};return!0===h.audio&&(h.audio={}),!0===h.video&&(h.video={}),h.audio&&(EI(h.audio,t),null!==(i=(o=h.audio).deviceId)&&void 0!==i||(o.deviceId={ideal:"default"}),(l||u)&&(h.audio.processor=null!==l&&void 0!==l?l:u)),h.video&&(EI(h.video,n),null!==(r=(s=h.video).deviceId)&&void 0!==r||(s.deviceId={ideal:"default"}),(c||d)&&(h.video.processor=null!==c&&void 0!==c?c:d)),h}function EI(e,t){return Object.keys(t).forEach((n=>{void 0===e[n]&&(e[n]=t[n])})),e}function _I(e){var t,n,i,r;const o={};if(e.video)if("object"===typeof e.video){const n={},r=n,s=e.video;Object.keys(s).forEach((e=>{if("resolution"===e)EI(r,s.resolution);else r[e]=s[e]})),o.video=n,null!==(t=(i=o.video).deviceId)&&void 0!==t||(i.deviceId={ideal:"default"})}else o.video=!!e.video&&{deviceId:{ideal:"default"}};else o.video=!1;return e.audio?"object"===typeof e.audio?(o.audio=e.audio,null!==(n=(r=o.audio).deviceId)&&void 0!==n||(r.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function II(e){return LT(this,arguments,void 0,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200;return function*(){const n=RI();if(n){const i=n.createAnalyser();i.fftSize=2048;const r=i.frequencyBinCount,o=new Uint8Array(r);n.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(i),yield U_(t),i.getByteTimeDomainData(o);const s=o.some((e=>128!==e&&0!==e));return n.close(),!s}return!1}()}))}function RI(){var e;const t="undefined"!==typeof window&&(window.AudioContext||window.webkitAudioContext);if(t){const n=new t({latencyHint:"interactive"});if("suspended"===n.state&&"undefined"!==typeof window&&(null===(e=window.document)||void 0===e?void 0:e.body)){const e=()=>LT(this,void 0,void 0,(function*(){var t;try{"suspended"===n.state&&(yield n.resume())}catch(WU){console.warn("Error trying to auto-resume audio context",WU)}null===(t=window.document.body)||void 0===t||t.removeEventListener("click",e)}));window.document.body.addEventListener("click",e)}return n}}function PI(e){return"audioinput"===e?__.Source.Microphone:"videoinput"===e?__.Source.Camera:__.Source.Unknown}function AI(e){return e===__.Source.Microphone?"audioinput":e===__.Source.Camera?"videoinput":void 0}function OI(e){var t,n;let i=null===(t=e.video)||void 0===t||t;return e.resolution&&e.resolution.width>0&&e.resolution.height>0&&(i="boolean"===typeof i?{}:i,i=W_()?Object.assign(Object.assign({},i),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):Object.assign(Object.assign({},i),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:null!==(n=e.audio)&&void 0!==n&&n,video:i,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio,preferCurrentTab:e.preferCurrentTab}}function MI(e){return e.split("/")[1].toLowerCase()}function NI(e){const t=[];return e.forEach((e=>{void 0!==e.track&&t.push(new VC({cid:e.track.mediaStreamID,track:e.trackInfo}))})),t}function DI(e){return"mediaStreamTrack"in e?{trackID:e.sid,source:e.source,muted:e.isMuted,enabled:e.mediaStreamTrack.enabled,kind:e.kind,streamID:e.mediaStreamID,streamTrackID:e.mediaStreamTrack.id}:{trackID:e.trackSid,enabled:e.isEnabled,muted:e.isMuted,trackInfo:Object.assign({mimeType:e.mimeType,name:e.trackName,encrypted:e.isEncrypted,kind:e.kind,source:e.source},e.track?DI(e.track):{})}}function jI(e){const t=Object.assign({},e);let n,i;return"object"===typeof t.audio&&t.audio.processor&&(n=t.audio.processor,t.audio=Object.assign(Object.assign({},t.audio),{processor:void 0})),"object"===typeof t.video&&t.video.processor&&(i=t.video.processor,t.video=Object.assign(Object.assign({},t.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:v_(t)}}class LI extends zT.EventEmitter{constructor(e){super(),this.onWorkerMessage=e=>{var t,n;const{kind:i,data:r}=e.data;switch(i){case"error":OT.error(r.error.message),this.emit(YE.EncryptionError,r.error);break;case"initAck":r.enabled&&this.keyProvider.getKeys().forEach((e=>{this.postKey(e)}));break;case"enable":if(r.enabled&&this.keyProvider.getKeys().forEach((e=>{this.postKey(e)})),this.encryptionEnabled!==r.enabled&&r.participantIdentity===(null===(t=this.room)||void 0===t?void 0:t.localParticipant.identity))this.emit(YE.ParticipantEncryptionStatusChanged,r.enabled,this.room.localParticipant),this.encryptionEnabled=r.enabled;else if(r.participantIdentity){const e=null===(n=this.room)||void 0===n?void 0:n.getParticipantByIdentity(r.participantIdentity);if(!e)throw TypeError("couldn't set encryption status, participant not found".concat(r.participantIdentity));this.emit(YE.ParticipantEncryptionStatusChanged,r.enabled,e)}break;case"ratchetKey":this.keyProvider.emit(QE.KeyRatcheted,r.material,r.keyIndex)}},this.onWorkerError=e=>{OT.error("e2ee worker encountered an error:",{error:e.error}),this.emit(YE.EncryptionError,e.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!ZE())throw new u_("tried to setup end-to-end encryption on an unsupported browser");if(OT.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const t={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:NT.getLevel()}};this.worker&&(OT.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(t))}}setParticipantCryptorEnabled(e,t){OT.debug("set e2ee to ".concat(e," for participant ").concat(t)),this.postEnable(e,t)}setSifTrailer(e){e&&0!==e.length?this.postSifTrailer(e):OT.warn("ignoring server sent trailer as it's empty")}setupEngine(e){e.on(a_.RTPVideoMapUpdate,(e=>{this.postRTPMap(e)}))}setupEventListeners(e,t){e.on(o_.TrackPublished,((e,t)=>this.setParticipantCryptorEnabled(e.trackInfo.encryption!==eC.NONE,t.identity))),e.on(o_.ConnectionStateChanged,(t=>{t===vP.Connected&&e.remoteParticipants.forEach((e=>{e.trackPublications.forEach((t=>{this.setParticipantCryptorEnabled(t.trackInfo.encryption!==eC.NONE,e.identity)}))}))})).on(o_.TrackUnsubscribed,((e,t,n)=>{var i;const r={kind:"removeTransform",data:{participantIdentity:n.identity,trackId:e.mediaStreamID}};null===(i=this.worker)||void 0===i||i.postMessage(r)})).on(o_.TrackSubscribed,((e,t,n)=>{this.setupE2EEReceiver(e,n.identity,t.trackInfo)})).on(o_.SignalConnected,(()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");t.getKeys().forEach((e=>{this.postKey(e)})),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)})),e.localParticipant.on(s_.LocalTrackPublished,(e=>LT(this,void 0,void 0,(function*(){this.setupE2EESender(e.track,e.track.sender)})))),t.on(QE.SetKey,(e=>this.postKey(e))).on(QE.RatchetRequest,((e,t)=>this.postRatchetRequest(e,t)))}postRatchetRequest(e,t){if(!this.worker)throw Error("could not ratchet key, worker is missing");const n={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:t}};this.worker.postMessage(n)}postKey(e){let{key:t,participantIdentity:n,keyIndex:i}=e;var r;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:n,isPublisher:n===(null===(r=this.room)||void 0===r?void 0:r.localParticipant.identity),key:t,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,t){if(!this.worker)throw new ReferenceError("failed to enable e2ee, worker is not ready");{const n={kind:"enable",data:{enabled:e,participantIdentity:t}};this.worker.postMessage(n)}}postRTPMap(e){var t;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(null===(t=this.room)||void 0===t?void 0:t.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const n={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(n)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const t={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(t)}setupE2EEReceiver(e,t,n){if(e.receiver){if(!(null===n||void 0===n?void 0:n.mimeType)||""===n.mimeType)throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,t,"video"===e.kind?MI(n.mimeType):void 0)}}setupE2EESender(e,t){vI(e)&&t?this.handleSender(t,e.mediaStreamID,void 0):t||OT.warn("early return because sender is not ready")}handleReceiver(e,t,n,i){return LT(this,void 0,void 0,(function*(){if(this.worker){if(e_()){const r={kind:"decode",participantIdentity:n,trackId:t,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,r)}else{if(KE in e&&i){const e={kind:"updateCodec",data:{trackId:t,codec:i,participantIdentity:n}};return void this.worker.postMessage(e)}let r=e.writableStream,o=e.readableStream;if(!r||!o){const t=e.createEncodedStreams();e.writableStream=t.writable,r=t.writable,e.readableStream=t.readable,o=t.readable}const s={kind:"decode",data:{readableStream:o,writableStream:r,trackId:t,codec:i,participantIdentity:n}};this.worker.postMessage(s,[o,r])}e[KE]=!0}}))}handleSender(e,t,n){var i;if(!(KE in e)&&this.worker){if(!(null===(i=this.room)||void 0===i?void 0:i.localParticipant.identity)||""===this.room.localParticipant.identity)throw TypeError("local identity needs to be known in order to set up encrypted sender");if(e_()){OT.info("initialize script transform");const i={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:t,codec:n};e.transform=new RTCRtpScriptTransform(this.worker,i)}else{OT.info("initialize encoded streams");const i=e.createEncodedStreams(),r={kind:"encode",data:{readableStream:i.readable,writableStream:i.writable,codec:n,trackId:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r,[i.readable,i.writable])}e[KE]=!0}}}const FI="default";class BI{constructor(){this._previousDevices=[]}static getInstance(){return void 0===this.instance&&(this.instance=new BI),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return LT(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var i;if((null===(i=BI.userMediaPromiseMap)||void 0===i?void 0:i.size)>0){OT.debug("awaiting getUserMedia promise");try{e?yield BI.userMediaPromiseMap.get(e):yield Promise.all(BI.userMediaPromiseMap.values())}catch(WU){OT.warn("error waiting for media permissons")}}let r=yield navigator.mediaDevices.enumerateDevices();if(n&&(!W_()||!t.hasDeviceInUse(e))){if(0===r.filter((t=>t.kind===e)).length||r.some((t=>{const n=""===t.label,i=!e||t.kind===e;return n&&i}))){const t={video:"audioinput"!==e&&"audiooutput"!==e,audio:"videoinput"!==e&&{deviceId:{ideal:"default"}}},n=yield navigator.mediaDevices.getUserMedia(t);r=yield navigator.mediaDevices.enumerateDevices(),n.getTracks().forEach((e=>{e.stop()}))}}return t._previousDevices=r,e&&(r=r.filter((t=>t.kind===e))),r}()}))}normalizeDeviceId(e,t,n){return LT(this,void 0,void 0,(function*(){if(t!==FI)return t;const i=yield this.getDevices(e),r=i.find((e=>e.deviceId===FI));if(!r)return void OT.warn("could not reliably determine default device");const o=i.find((e=>e.deviceId!==FI&&e.groupId===(null!==n&&void 0!==n?n:r.groupId)));if(o)return null===o||void 0===o?void 0:o.deviceId;OT.warn("could not reliably determine default device")}))}hasDeviceInUse(e){return e?BI.userMediaPromiseMap.has(e):BI.userMediaPromiseMap.size>0}}var UI;BI.mediaDeviceKinds=["audioinput","audiooutput","videoinput"],BI.userMediaPromiseMap=new Map,function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"}(UI||(UI={}));class $I{constructor(){this.pendingTasks=new Map,this.taskMutex=new Kk,this.nextTaskIndex=0}run(e){return LT(this,void 0,void 0,(function*(){const t={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:UI.WAITING};this.pendingTasks.set(t.id,t);const n=yield this.taskMutex.lock();try{return t.executedAt=Date.now(),t.status=UI.RUNNING,yield e()}finally{t.status=UI.COMPLETED,this.pendingTasks.delete(t.id),n()}}))}flush(){return LT(this,void 0,void 0,(function*(){return this.run((()=>LT(this,void 0,void 0,(function*(){}))))}))}snapshot(){return Array.from(this.pendingTasks.values())}}function zI(e,t){return e.pathname="".concat(function(e){return e.endsWith("/")?e:"".concat(e,"/")}(e.pathname)).concat(t),e.toString()}const VI=["syncState","trickle","offer","answer","simulate","leave"];var HI;!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"}(HI||(HI={}));class qI{get currentState(){return this.state}get isDisconnected(){return this.state===HI.DISCONNECTING||this.state===HI.DISCONNECTED}get isEstablishingConnection(){return this.state===HI.CONNECTING||this.state===HI.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;this.rtt=0,this.state=HI.DISCONNECTED,this.log=OT,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=MT(null!==(n=t.loggerName)&&void 0!==n?n:PT.Signal),this.loggerContextCb=t.loggerContextCb,this.useJSON=e,this.requestQueue=new $I,this.queuedRequests=[],this.closingLock=new Kk,this.connectionLock=new Kk,this.state=HI.DISCONNECTED}get logContext(){var e,t;return null!==(t=null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this))&&void 0!==t?t:{}}join(e,t,n,i){return LT(this,void 0,void 0,(function*(){this.state=HI.CONNECTING,this.options=n;return yield this.connect(e,t,n,i)}))}reconnect(e,t,n,i){return LT(this,void 0,void 0,(function*(){if(!this.options)return void this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);this.state=HI.RECONNECTING,this.clearPingInterval();return yield this.connect(e,t,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:n,reconnectReason:i}))}))}connect(e,t,n,i){this.connectOptions=n;const r=function(e,t,n){var i;const r=new URLSearchParams;r.set("access_token",e),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid));r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",X_()?"reactnative":"js"),r.set("version",t.version),r.set("protocol",t.protocol.toString()),t.deviceModel&&r.set("device_model",t.deviceModel);t.os&&r.set("os",t.os);t.osVersion&&r.set("os_version",t.osVersion);t.browser&&r.set("browser",t.browser);t.browserVersion&&r.set("browser_version",t.browserVersion);n.adaptiveStream&&r.set("adaptive_stream","1");n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString());(null===(i=navigator.connection)||void 0===i?void 0:i.type)&&r.set("network",navigator.connection.type);return r}(t,function(){var e;const t=new xC({sdk:kC.JS,protocol:15,version:"2.11.4"});return X_()&&(t.os=null!==(e=Z_())&&void 0!==e?e:""),t}(),n),o=function(e,t){const n=new URL(function(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}(e));return t.forEach(((e,t)=>{n.searchParams.set(t,e)})),zI(n,"rtc")}(e,r),s=zI(new URL(pI(o)),"validate");return new Promise(((e,t)=>LT(this,void 0,void 0,(function*(){const r=yield this.connectionLock.lock();try{const r=()=>LT(this,void 0,void 0,(function*(){this.close(),clearTimeout(a),t(new c_("room connection has been cancelled (signal)",n_.Cancelled))})),a=setTimeout((()=>{this.close(),t(new c_("room connection has timed out (signal)",n_.ServerUnreachable))}),n.websocketTimeout);(null===i||void 0===i?void 0:i.aborted)&&r(),null===i||void 0===i||i.addEventListener("abort",r);const l=new URL(o);l.searchParams.has("access_token")&&l.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(l),Object.assign({reconnect:n.reconnect,reconnectReason:n.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(a)},this.ws.onerror=e=>LT(this,void 0,void 0,(function*(){if(this.state===HI.CONNECTED)this.handleWSError(e);else{this.state=HI.DISCONNECTED,clearTimeout(a);try{const n=yield fetch(s);if(n.status.toFixed(0).startsWith("4")){const e=yield n.text();t(new c_(e,n_.NotAllowed,n.status))}else t(new c_("Encountered unknown websocket error during connection: ".concat(e.toString()),n_.InternalError,n.status))}catch(WU){t(new c_(WU instanceof Error?WU.message:"server was not reachable",n_.ServerUnreachable))}}})),this.ws.onmessage=o=>LT(this,void 0,void 0,(function*(){var s,a,l;let c;if("string"===typeof o.data){const e=JSON.parse(o.data);c=jC.fromJson(e,{ignoreUnknownFields:!0})}else{if(!(o.data instanceof ArrayBuffer))return void this.log.error("could not decode websocket message: ".concat(typeof o.data),this.logContext);c=jC.fromBinary(new Uint8Array(o.data))}if(this.state!==HI.CONNECTED){let o=!1;if("join"===(null===(s=c.message)||void 0===s?void 0:s.case)?(this.state=HI.CONNECTED,null===i||void 0===i||i.removeEventListener("abort",r),this.pingTimeoutDuration=c.message.value.pingTimeout,this.pingIntervalDuration=c.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),e(c.message.value)):this.state===HI.RECONNECTING&&"leave"!==c.message.case?(this.state=HI.CONNECTED,null===i||void 0===i||i.removeEventListener("abort",r),this.startPingInterval(),"reconnect"===(null===(a=c.message)||void 0===a?void 0:a.case)?e(c.message.value):(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),e(void 0),o=!0)):this.isEstablishingConnection&&"leave"===c.message.case?t(new c_("Received leave request while trying to (re)connect",n_.LeaveRequest,void 0,c.message.value.reason)):n.reconnect||t(new c_("did not receive join response, got ".concat(null===(l=c.message)||void 0===l?void 0:l.case," instead"),n_.InternalError)),!o)return}this.signalLatency&&(yield U_(this.signalLatency)),this.handleSignalResponse(c)})),this.ws.onclose=e=>{this.isEstablishingConnection&&t(new c_("Websocket got closed during a (re)connection attempt",n_.InternalError)),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:e.reason,code:e.code,wasClean:e.wasClean,state:this.state})),this.handleOnClose(e.reason)}}finally{r()}}))))}close(){return LT(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){const n=yield e.closingLock.lock();try{if(e.clearPingInterval(),t&&(e.state=HI.DISCONNECTING),e.ws){e.ws.onmessage=null,e.ws.onopen=null,e.ws.onclose=null;const t=new Promise((t=>{e.ws?e.ws.onclose=()=>{t()}:t()}));e.ws.readyState<e.ws.CLOSING&&(e.ws.close(),yield Promise.race([t,U_(250)])),e.ws=void 0}}finally{t&&(e.state=HI.DISCONNECTED),n()}}()}))}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:GI(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:GI(e)})}sendIceCandidate(e,t){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new BC({candidateInit:JSON.stringify(e),target:t})})}sendMuteTrack(e,t){return this.sendRequest({case:"mute",value:new UC({sid:e,muted:t})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,t){return LT(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function*(){const r=n.getNextRequestId();return yield n.sendRequest({case:"updateMetadata",value:new eT({requestId:r,metadata:e,name:t,attributes:i})}),r}()}))}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,t){return this.sendRequest({case:"updateLayers",value:new ZC({trackSid:e,layers:t})})}sendUpdateSubscriptionPermissions(e,t){return this.sendRequest({case:"subscriptionPermission",value:new hT({allParticipants:e,trackPermissions:t})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:kw.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new vT({timestamp:kw.parse(Date.now()),rtt:kw.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,t){return this.sendRequest({case:"updateAudioTrack",value:new QC({trackSid:e,features:t})})}sendLeave(){return this.sendRequest({case:"leave",value:new YC({reason:VS.CLIENT_INITIATED,action:JC.DISCONNECT})})}sendRequest(e){return LT(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function*(){const i=!n&&!function(e){const t=VI.indexOf(e.case)>=0;return OT.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}(e);if(i&&t.state===HI.RECONNECTING)return void t.queuedRequests.push((()=>LT(t,void 0,void 0,(function*(){yield this.sendRequest(e,!0)}))));if(n||(yield t.requestQueue.flush()),t.signalLatency&&(yield U_(t.signalLatency)),!t.ws||t.ws.readyState!==t.ws.OPEN)return void t.log.error("cannot send signal request before connected, type: ".concat(null===e||void 0===e?void 0:e.case),t.logContext);const r=new DC({message:e});try{t.useJSON?t.ws.send(r.toJsonString()):t.ws.send(r.toBinary())}catch(WU){t.log.error("error sending signal message",Object.assign(Object.assign({},t.logContext),{error:WU}))}}()}))}handleSignalResponse(e){var t,n;const i=e.message;if(void 0==i)return void this.log.debug("received unsupported message",this.logContext);let r=!1;if("answer"===i.case){const e=WI(i.value);this.onAnswer&&this.onAnswer(e)}else if("offer"===i.case){const e=WI(i.value);this.onOffer&&this.onOffer(e)}else if("trickle"===i.case){const e=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(e,i.value.target)}else"update"===i.case?this.onParticipantUpdate&&this.onParticipantUpdate(null!==(t=i.value.participants)&&void 0!==t?t:[]):"trackPublished"===i.case?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):"speakersChanged"===i.case?this.onSpeakersChanged&&this.onSpeakersChanged(null!==(n=i.value.speakers)&&void 0!==n?n:[]):"leave"===i.case?this.onLeave&&this.onLeave(i.value):"mute"===i.case?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):"roomUpdate"===i.case?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):"connectionQuality"===i.case?this.onConnectionQuality&&this.onConnectionQuality(i.value):"streamStateUpdate"===i.case?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):"subscribedQualityUpdate"===i.case?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):"subscriptionPermissionUpdate"===i.case?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):"refreshToken"===i.case?this.onTokenRefresh&&this.onTokenRefresh(i.value):"trackUnpublished"===i.case?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):"subscriptionResponse"===i.case?this.onSubscriptionError&&this.onSubscriptionError(i.value):"pong"===i.case||("pongResp"===i.case?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),r=!0):"requestResponse"===i.case?this.onRequestResponse&&this.onRequestResponse(i.value):"trackSubscribed"===i.case?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(i.value.trackSid):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));r||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return LT(this,void 0,void 0,(function*(){if(this.state===HI.DISCONNECTED)return;const t=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),t&&t(e)}))}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){this.clearPingTimeout(),this.pingTimeoutDuration?this.pingTimeout=C_.setTimeout((()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-1e3*this.pingTimeoutDuration).toUTCString()),this.logContext),this.handleOnClose("ping timeout")}),1e3*this.pingTimeoutDuration):this.log.warn("ping timeout duration not set",this.logContext)}clearPingTimeout(){this.pingTimeout&&C_.clearTimeout(this.pingTimeout)}startPingInterval(){this.clearPingInterval(),this.resetPingTimeout(),this.pingIntervalDuration?(this.log.debug("start ping interval",this.logContext),this.pingInterval=C_.setInterval((()=>{this.sendPing()}),1e3*this.pingIntervalDuration)):this.log.warn("ping interval duration not set",this.logContext)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&C_.clearInterval(this.pingInterval)}}function WI(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type}return t}function GI(e){return new qC({sdp:e.sdp,type:e.type})}var KI,QI,XI,YI,JI,ZI={},eR={},tR={exports:{}};function nR(){if(KI)return tR.exports;KI=1;var e=tR.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=null!=e.raddr?" raddr %s rport %d":"%v%v",t+=null!=e.tcptype?" tcptype %s":"%v",null!=e.generation&&(t+=" generation %d"),t+=null!=e["network-id"]?" network-id %d":"%v",t+=null!=e["network-cost"]?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=null!=e.id?"id=%s %s":"%v%s",t+=null!=e.mediaClockValue?"=%s":"",t+=null!=e.rateNumerator?" rate=%s":"",t+=null!=e.rateDenominator?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(e).forEach((function(t){e[t].forEach((function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")}))})),tR.exports}function iR(){return QI||(QI=1,function(e){var t=function(e){return String(Number(e))===e?Number(e):e},n=function(e,n,i){var r=e.name&&e.names;e.push&&!n[e.push]?n[e.push]=[]:r&&!n[e.name]&&(n[e.name]={});var o=e.push?{}:r?n[e.name]:n;!function(e,n,i,r){if(r&&!i)n[r]=t(e[1]);else for(var o=0;o<i.length;o+=1)null!=e[o+1]&&(n[i[o]]=t(e[o+1]))}(i.match(e.reg),o,e.names,e.name),e.push&&n[e.push].push(o)},i=nR(),r=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(e){var t={},o=[],s=t;return e.split(/(\r\n|\r|\n)/).filter(r).forEach((function(e){var t=e[0],r=e.slice(2);"m"===t&&(o.push({rtp:[],fmtp:[]}),s=o[o.length-1]);for(var a=0;a<(i[t]||[]).length;a+=1){var l=i[t][a];if(l.reg.test(r))return n(l,s,r)}})),t.media=o,t};var o=function(e,n){var i=n.split(/=(.+)/,2);return 2===i.length?e[i[0]]=t(i[1]):1===i.length&&n.length>1&&(e[i[0]]=void 0),e};e.parseParams=function(e){return e.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(e){return e.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(e){for(var n=[],i=e.split(" ").map(t),r=0;r<i.length;r+=3)n.push({component:i[r],ip:i[r+1],port:i[r+2]});return n},e.parseImageAttributes=function(e){return e.split(" ").map((function(e){return e.substring(1,e.length-1).split(",").reduce(o,{})}))},e.parseSimulcastStreamList=function(e){return e.split(";").map((function(e){return e.split(",").map((function(e){var n,i=!1;return"~"!==e[0]?n=t(e):(n=t(e.substring(1,e.length)),i=!0),{scid:n,paused:i}}))}))}}(eR)),eR}function rR(){if(YI)return XI;YI=1;var e=nR(),t=/%[sdv%]/g,n=function(e){var n=1,i=arguments,r=i.length;return e.replace(t,(function(e){if(n>=r)return e;var t=i[n];switch(n+=1,e){case"%%":return"%";case"%s":return String(t);case"%d":return Number(t);case"%v":return""}}))},i=function(e,t,i){var r=[e+"="+(t.format instanceof Function?t.format(t.push?i:i[t.name]):t.format)];if(t.names)for(var o=0;o<t.names.length;o+=1){var s=t.names[o];t.name?r.push(i[t.name][s]):r.push(i[t.names[o]])}else r.push(i[t.name]);return n.apply(null,r)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return XI=function(t,n){n=n||{},null==t.version&&(t.version=0),null==t.name&&(t.name=" "),t.media.forEach((function(e){null==e.payloads&&(e.payloads="")}));var s=n.outerOrder||r,a=n.innerOrder||o,l=[];return s.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?l.push(i(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){l.push(i(n,e,t))}))}))})),t.media.forEach((function(t){l.push(i("m",e.m[0],t)),a.forEach((function(n){e[n].forEach((function(e){e.name in t&&null!=t[e.name]?l.push(i(n,e,t)):e.push in t&&null!=t[e.push]&&t[e.push].forEach((function(t){l.push(i(n,e,t))}))}))}))})),l.join("\r\n")+"\r\n"},XI}var oR=function(){if(JI)return ZI;JI=1;var e=iR(),t=rR(),n=nR();return ZI.grammar=n,ZI.write=t,ZI.parse=e.parse,ZI.parseParams=e.parseParams,ZI.parseFmtpConfig=e.parseFmtpConfig,ZI.parsePayloads=e.parsePayloads,ZI.parseRemoteCandidates=e.parseRemoteCandidates,ZI.parseImageAttributes=e.parseImageAttributes,ZI.parseSimulcastStreamList=e.parseSimulcastStreamList,ZI}();function sR(e,t,n){var i,r,o;void 0===t&&(t=50),void 0===n&&(n={});var s=null!=(i=n.isImmediate)&&i,a=null!=(r=n.callback)&&r,l=n.maxWait,c=Date.now(),u=[];function d(){if(void 0!==l){var e=Date.now()-c;if(e+t>=l)return l-e}return t}var h=function(){var t=[].slice.call(arguments),n=this;return new Promise((function(i,r){var l=s&&void 0===o;if(void 0!==o&&clearTimeout(o),o=setTimeout((function(){if(o=void 0,c=Date.now(),!s){var i=e.apply(n,t);a&&a(i),u.forEach((function(e){return(0,e.resolve)(i)})),u=[]}}),d()),l){var h=e.apply(n,t);return a&&a(h),i(h)}u.push({resolve:i,reject:r})}))};return h.cancel=function(e){void 0!==o&&clearTimeout(o),u.forEach((function(t){return(0,t.reject)(e)})),u=[]},h}const aR="negotiationStarted",lR="negotiationComplete",cR="rtpVideoPayloadTypes";class uR extends zT.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;super(),this.log=OT,this.ddExtID=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=sR((e=>LT(this,void 0,void 0,(function*(){this.emit(aR);try{yield this.createAndSendOffer()}catch(WU){if(!e)throw WU;e(WU)}}))),20),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=MT(null!==(n=t.loggerName)&&void 0!==n?n:PT.PCTransport),this.loggerOptions=t,this.config=e,this._pc=this.createPC()}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=e=>{var t;e.candidate&&(null===(t=this.onIceCandidate)||void 0===t||t.call(this,e.candidate))},e.onicecandidateerror=e=>{var t;null===(t=this.onIceCandidateError)||void 0===t||t.call(this,e)},e.oniceconnectionstatechange=()=>{var t;null===(t=this.onIceConnectionStateChange)||void 0===t||t.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var t;null===(t=this.onSignalingStatechange)||void 0===t||t.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var t;null===(t=this.onConnectionStateChange)||void 0===t||t.call(this,e.connectionState)},e.ondatachannel=e=>{var t;null===(t=this.onDataChannel)||void 0===t||t.call(this,e)},e.ontrack=e=>{var t;null===(t=this.onTrack)||void 0===t||t.call(this,e)},e}get logContext(){var e,t;return Object.assign({},null===(t=(e=this.loggerOptions).loggerContextCb)||void 0===t?void 0:t.call(e))}get isICEConnected(){return null!==this._pc&&("connected"===this.pc.iceConnectionState||"completed"===this.pc.iceConnectionState)}addIceCandidate(e){return LT(this,void 0,void 0,(function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)}))}setRemoteDescription(e){return LT(this,void 0,void 0,(function*(){var t;let n;if("offer"===e.type){let{stereoMids:t,nackMids:n}=function(e){var t;const n=[],i=[],r=oR.parse(null!==(t=e.sdp)&&void 0!==t?t:"");let o=0;return r.media.forEach((e=>{var t;"audio"===e.type&&(e.rtp.some((e=>"opus"===e.codec&&(o=e.payload,!0))),(null===(t=e.rtcpFb)||void 0===t?void 0:t.some((e=>e.payload===o&&"nack"===e.type)))&&i.push(e.mid),e.fmtp.some((t=>t.payload===o&&(t.config.includes("sprop-stereo=1")&&n.push(e.mid),!0))))})),{stereoMids:n,nackMids:i}}(e);this.remoteStereoMids=t,this.remoteNackMids=n}else if("answer"===e.type){const i=oR.parse(null!==(t=e.sdp)&&void 0!==t?t:"");i.media.forEach((e=>{"audio"===e.type&&this.trackBitrates.some((t=>{if(!t.transceiver||e.mid!=t.transceiver.mid)return!1;let n=0;if(e.rtp.some((e=>e.codec.toUpperCase()===t.codec.toUpperCase()&&(n=e.payload,!0))),0===n)return!0;let i=!1;for(const r of e.fmtp)if(r.payload===n){r.config=r.config.split(";").filter((e=>!e.includes("maxaveragebitrate"))).join(";"),t.maxbr>0&&(r.config+=";maxaveragebitrate=".concat(1e3*t.maxbr)),i=!0;break}return i||t.maxbr>0&&e.fmtp.push({payload:n,config:"maxaveragebitrate=".concat(1e3*t.maxbr)}),!0}))})),n=oR.write(i)}if(yield this.setMungedSDP(e,n,!0),this.pendingCandidates.forEach((e=>{this.pc.addIceCandidate(e)})),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate)this.renegotiate=!1,yield this.createAndSendOffer();else if("answer"===e.type&&(this.emit(lR),e.sdp)){oR.parse(e.sdp).media.forEach((e=>{"video"===e.type&&this.emit(cR,e.rtp)}))}}))}createAndSendOffer(e){return LT(this,void 0,void 0,(function*(){var t;if(void 0===this.onOffer)return;if((null===e||void 0===e?void 0:e.iceRestart)&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&"have-local-offer"===this._pc.signalingState){const t=this._pc.remoteDescription;if(!(null===e||void 0===e?void 0:e.iceRestart)||!t)return void(this.renegotiate=!0);yield this._pc.setRemoteDescription(t)}else if(!this._pc||"closed"===this._pc.signalingState)return void this.log.warn("could not createOffer with closed peer connection",this.logContext);this.log.debug("starting to negotiate",this.logContext);const n=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:n.sdp},this.logContext));const i=oR.parse(null!==(t=n.sdp)&&void 0!==t?t:"");i.media.forEach((e=>{hR(e),"audio"===e.type?dR(e,[],[]):"video"===e.type&&this.trackBitrates.some((t=>{if(!e.msid||!t.cid||!e.msid.includes(t.cid))return!1;let n=0;if(e.rtp.some((e=>e.codec.toUpperCase()===t.codec.toUpperCase()&&(n=e.payload,!0))),0===n)return!0;if(V_(t.codec)&&this.ensureVideoDDExtensionForSVC(e,i),"av1"!==t.codec)return!0;const r=Math.round(.7*t.maxbr);for(const i of e.fmtp)if(i.payload===n){i.config.includes("x-google-start-bitrate")||(i.config+=";x-google-start-bitrate=".concat(r));break}return!0}))})),yield this.setMungedSDP(n,oR.write(i)),this.onOffer(n)}))}createAndSetAnswer(){return LT(this,void 0,void 0,(function*(){var e;const t=yield this.pc.createAnswer(),n=oR.parse(null!==(e=t.sdp)&&void 0!==e?e:"");return n.media.forEach((e=>{hR(e),"audio"===e.type&&dR(e,this.remoteStereoMids,this.remoteNackMids)})),yield this.setMungedSDP(t,oR.write(n)),t}))}createDataChannel(e,t){return this.pc.createDataChannel(e,t)}addTransceiver(e,t){return this.pc.addTransceiver(e,t)}addTrack(e){if(!this._pc)throw new p_("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var t;if(!this._pc)throw new p_("PC closed, cannot configure");return null===(t=this._pc)||void 0===t?void 0:t.setConfiguration(e)}canRemoveTrack(){var e;return!!(null===(e=this._pc)||void 0===e?void 0:e.removeTrack)}removeTrack(e){var t;return null===(t=this._pc)||void 0===t?void 0:t.removeTrack(e)}getConnectionState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.connectionState)&&void 0!==t?t:"closed"}getICEConnectionState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.iceConnectionState)&&void 0!==t?t:"closed"}getSignallingState(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.signalingState)&&void 0!==t?t:"closed"}getTransceivers(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.getTransceivers())&&void 0!==t?t:[]}getSenders(){var e,t;return null!==(t=null===(e=this._pc)||void 0===e?void 0:e.getSenders())&&void 0!==t?t:[]}getLocalDescription(){var e;return null===(e=this._pc)||void 0===e?void 0:e.localDescription}getRemoteDescription(){var e;return null===(e=this.pc)||void 0===e?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return LT(this,void 0,void 0,(function*(){var e;if(!this._pc)return;let t="";const n=new Map,i=new Map;if((yield this._pc.getStats()).forEach((e=>{switch(e.type){case"transport":t=e.selectedCandidatePairId;break;case"candidate-pair":""===t&&e.selected&&(t=e.id),n.set(e.id,e);break;case"remote-candidate":i.set(e.id,"".concat(e.address,":").concat(e.port))}})),""===t)return;const r=null===(e=n.get(t))||void 0===e?void 0:e.remoteCandidateId;return void 0!==r?i.get(r):void 0}))}setMungedSDP(e,t,n){return LT(this,void 0,void 0,(function*(){if(t){const i=e.sdp;e.sdp=t;try{return this.log.debug("setting munged ".concat(n?"remote":"local"," description"),this.logContext),void(n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e))}catch(WU){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:WU,sdp:t})),e.sdp=i}}try{n?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(WU){let i="unknown error";WU instanceof Error?i=WU.message:"string"===typeof WU&&(i=WU);const r={error:i,sdp:e.sdp};throw!n&&this.pc.remoteDescription&&(r.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:r})),new f_(i)}}))}ensureVideoDDExtensionForSVC(e,t){var n,i;if(!(null===(n=e.ext)||void 0===n?void 0:n.some((e=>e.uri===B_)))){if(0===this.ddExtID){let e=0;t.media.forEach((t=>{var n;"video"===t.type&&(null===(n=t.ext)||void 0===n||n.forEach((t=>{t.value>e&&(e=t.value)})))})),this.ddExtID=e+1}null===(i=e.ext)||void 0===i||i.push({value:this.ddExtID,uri:B_})}}}function dR(e,t,n){let i=0;e.rtp.some((e=>"opus"===e.codec&&(i=e.payload,!0))),i>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some((e=>e.payload===i&&"nack"===e.type))&&e.rtcpFb.push({payload:i,type:"nack"}),t.includes(e.mid)&&e.fmtp.some((e=>e.payload===i&&(e.config.includes("stereo=1")||(e.config+=";stereo=1"),!0))))}function hR(e){if(e.connection){const t=e.connection.ip.indexOf(":")>=0;(4===e.connection.version&&t||6===e.connection.version&&!t)&&(e.connection.ip="0.0.0.0",e.connection.version=4)}}const pR="vp8",fR={audioPreset:D_.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:F_.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:pR,backupCodec:!0},mR={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},gR={deviceId:{ideal:"default"},resolution:j_.h720.resolution},vR={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new class{constructor(e){this._retryDelays=void 0!==e?[...e]:jT}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const t=this._retryDelays[e.retryCount];return e.retryCount<=1?t:t+1e3*Math.random()}},disconnectOnPageLeave:!0,webAudioMix:!1},bR={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var yR;!function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"}(yR||(yR={}));class xR{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,t,n){var i;this.peerConnectionTimeout=bR.peerConnectionTimeout,this.log=OT,this.updateState=()=>{var e;const t=this.state,n=this.requiredTransports.map((e=>e.getConnectionState()));n.every((e=>"connected"===e))?this.state=yR.CONNECTED:n.some((e=>"failed"===e))?this.state=yR.FAILED:n.some((e=>"connecting"===e))?this.state=yR.CONNECTING:n.every((e=>"closed"===e))?this.state=yR.CLOSED:n.some((e=>"closed"===e))?this.state=yR.CLOSING:n.every((e=>"new"===e))&&(this.state=yR.NEW),t!==this.state&&(this.log.debug("pc state change: from ".concat(yR[t]," to ").concat(yR[this.state]),this.logContext),null===(e=this.onStateChange)||void 0===e||e.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=MT(null!==(i=n.loggerName)&&void 0!==i?i:PT.PCManager),this.loggerOptions=n,this.isPublisherConnectionRequired=!t,this.isSubscriberConnectionRequired=t,this.publisher=new uR(e,n),this.subscriber=new uR(e,n),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=e=>{var t;null===(t=this.onIceCandidate)||void 0===t||t.call(this,e,OC.PUBLISHER)},this.subscriber.onIceCandidate=e=>{var t;null===(t=this.onIceCandidate)||void 0===t||t.call(this,e,OC.SUBSCRIBER)},this.subscriber.onDataChannel=e=>{var t;null===(t=this.onDataChannel)||void 0===t||t.call(this,e)},this.subscriber.onTrack=e=>{var t;null===(t=this.onTrack)||void 0===t||t.call(this,e)},this.publisher.onOffer=e=>{var t;null===(t=this.onPublisherOffer)||void 0===t||t.call(this,e)},this.state=yR.NEW,this.connectionLock=new Kk,this.remoteOfferLock=new Kk}get logContext(){var e,t;return Object.assign({},null===(t=(e=this.loggerOptions).loggerContextCb)||void 0===t?void 0:t.call(e))}requirePublisher(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return LT(this,void 0,void 0,(function*(){if(this.publisher&&"closed"!==this.publisher.getSignallingState()){const e=this.publisher;for(const t of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(t)}catch(WU){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:WU}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()}))}triggerIceRestart(){return LT(this,void 0,void 0,(function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))}))}addIceCandidate(e,t){return LT(this,void 0,void 0,(function*(){t===OC.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)}))}createSubscriberAnswerFromOffer(e){return LT(this,void 0,void 0,(function*(){this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()}));const t=yield this.remoteOfferLock.lock();try{yield this.subscriber.setRemoteDescription(e);return yield this.subscriber.createAndSetAnswer()}finally{t()}}))}updateConfiguration(e,t){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),t&&this.triggerIceRestart()}ensurePCTransportConnection(e,t){return LT(this,void 0,void 0,(function*(){var n;const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&"connected"!==this.publisher.getConnectionState()&&"connecting"!==this.publisher.getConnectionState()&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all(null===(n=this.requiredTransports)||void 0===n?void 0:n.map((n=>this.ensureTransportConnected(n,e,t))))}finally{i()}}))}negotiate(e){return LT(this,void 0,void 0,(function*(){return new Promise(((t,n)=>LT(this,void 0,void 0,(function*(){const i=setTimeout((()=>{n("negotiation timed out")}),this.peerConnectionTimeout);e.signal.addEventListener("abort",(()=>{clearTimeout(i),n("negotiation aborted")})),this.publisher.once(aR,(()=>{e.signal.aborted||this.publisher.once(lR,(()=>{clearTimeout(i),t()}))})),yield this.publisher.negotiate((e=>{clearTimeout(i),n(e)}))}))))}))}addPublisherTransceiver(e,t){return this.publisher.addTransceiver(e,t)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,t){return this.publisher.createDataChannel(e,t)}getConnectedAddress(e){return e===OC.PUBLISHER||e===OC.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,t){return LT(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.peerConnectionTimeout;return function*(){if("connected"!==e.getConnectionState())return new Promise(((e,r)=>LT(n,void 0,void 0,(function*(){const n=()=>{this.log.warn("abort transport connection",this.logContext),C_.clearTimeout(o),r(new c_("room connection has been cancelled",n_.Cancelled))};(null===t||void 0===t?void 0:t.signal.aborted)&&n(),null===t||void 0===t||t.signal.addEventListener("abort",n);const o=C_.setTimeout((()=>{null===t||void 0===t||t.signal.removeEventListener("abort",n),r(new c_("could not establish pc connection",n_.InternalError))}),i);for(;this.state!==yR.CONNECTED;)if(yield U_(50),null===t||void 0===t?void 0:t.signal.aborted)return void r(new c_("room connection has been cancelled",n_.Cancelled));C_.clearTimeout(o),null===t||void 0===t||t.signal.removeEventListener("abort",n),e()}))))}()}))}}class kR extends Error{constructor(e,t,n){super(t),this.code=e,this.message=SR(t,kR.MAX_MESSAGE_BYTES),this.data=n?SR(n,kR.MAX_DATA_BYTES):void 0}static fromProto(e){return new kR(e.code,e.message,e.data)}toProto(){return new gC({code:this.code,message:this.message,data:this.data})}static builtIn(e,t){return new kR(kR.ErrorCode[e],kR.ErrorMessage[e],t)}}kR.MAX_MESSAGE_BYTES=256,kR.MAX_DATA_BYTES=15360,kR.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404},kR.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};function wR(e){return(new TextEncoder).encode(e).length}function SR(e,t){if(wR(e)<=t)return e;let n=0,i=e.length;const r=new TextEncoder;for(;n<i;){const o=Math.floor((n+i+1)/2);r.encode(e.slice(0,o)).length<=t?n=o:i=o-1}return e.slice(0,n)}const CR=2e3;function TR(e,t){if(!t)return 0;let n,i;return"bytesReceived"in e?(n=e.bytesReceived,i=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,i=t.bytesSent),void 0===n||void 0===i||void 0===e.timestamp||void 0===t.timestamp?0:8*(n-i)*1e3/(e.timestamp-t.timestamp)}class ER extends __{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(e,t,arguments.length>4?arguments[4]:void 0),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch((()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext))),this.debouncedTrackMuteHandler=sR((()=>LT(this,void 0,void 0,(function*(){yield this.pauseUpstream()}))),5e3),this.handleTrackUnmuteEvent=()=>LT(this,void 0,void 0,(function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()})),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(l_.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Kk,this.pauseUpstreamLock=new Kk,this.processorLock=new Kk,this.restartLock=new Kk,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),n&&(this._constraints=n)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==__.Kind.Video)return;const{width:e,height:t}=this._mediaStreamTrack.getSettings();return e&&t?{width:e,height:t}:void 0}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,t;return null!==(t=null===(e=this.processor)||void 0===e?void 0:e.processedTrack)&&void 0!==t?t:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,t){return LT(this,void 0,void 0,(function*(){var n;if(e===this._mediaStreamTrack&&!t)return;let i;if(this._mediaStreamTrack&&(this.attachedElements.forEach((e=>{R_(this._mediaStreamTrack,e)})),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints()),this.processor&&e){const t=yield this.processorLock.lock();try{if(this.log.debug("restarting processor",this.logContext),"unknown"===this.kind)throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(I_(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),i=this.processor.processedTrack}finally{t()}}this.sender&&"closed"!==(null===(n=this.sender.transport)||void 0===n?void 0:n.state)&&(yield this.sender.replaceTrack(null!==i&&void 0!==i?i:e)),this.providedByUser||this._mediaStreamTrack===e||this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach((t=>{I_(null!==i&&void 0!==i?i:e,t)})))}))}waitForDimensions(){return LT(this,arguments,void 0,(function(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return function*(){var n;if(e.kind===__.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");"iOS"===(null===(n=x_())||void 0===n?void 0:n.os)&&(yield U_(10));const i=Date.now();for(;Date.now()-i<t;){const t=e.dimensions;if(t)return t;yield U_(50)}throw new d_("unable to get track dimensions after timeout")}()}))}setDeviceId(e){return LT(this,void 0,void 0,(function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===hI(e)||(this._constraints.deviceId=e,!!this.isMuted||(yield this.restartTrack(),hI(e)===this._mediaStreamTrack.getSettings().deviceId))}))}getDeviceId(){return LT(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){if(e.source===__.Source.ScreenShare)return;const{deviceId:n,groupId:i}=e._mediaStreamTrack.getSettings(),r=e.kind===__.Kind.Audio?"audioinput":"videoinput";return t?BI.getInstance().normalizeDeviceId(r,n,i):n}()}))}mute(){return LT(this,void 0,void 0,(function*(){return this.setTrackMuted(!0),this}))}unmute(){return LT(this,void 0,void 0,(function*(){return this.setTrackMuted(!1),this}))}replaceTrack(e,t){return LT(this,void 0,void 0,(function*(){if(!this.sender)throw new d_("unable to replace an unpublished track");let n,i;return"boolean"===typeof t?n=t:void 0!==t&&(n=t.userProvidedTrack,i=t.stopProcessor),this.providedByUser=null===n||void 0===n||n,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),i&&this.processor&&(yield this.stopProcessor()),this}))}restart(e){return LT(this,void 0,void 0,(function*(){this.manuallyStopped=!1;const t=yield this.restartLock.lock();try{e||(e=this._constraints);const{deviceId:t,facingMode:n}=e,i=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const r={audio:!1,video:!1};this.kind===__.Kind.Video?r.video=!t&&!n||{deviceId:t,facingMode:n}:r.audio=!t||{deviceId:t},this.attachedElements.forEach((e=>{R_(this.mediaStreamTrack,e)})),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const o=(yield navigator.mediaDevices.getUserMedia(r)).getTracks()[0];return yield o.applyConstraints(i),o.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(o),this._constraints=e,this.emit(l_.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{t()}}))}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),this.isMuted===e&&this._mediaStreamTrack.enabled!==e||(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?l_.Muted:l_.Unmuted,this))}get needsReAcquisition(){return"live"!==this._mediaStreamTrack.readyState||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return LT(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),K_()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),this.isInBackground||!this.needsReAcquisition||this.isUserProvided||this.isMuted||(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))}))}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),null===(e=this.processor)||void 0===e||e.destroy(),this.processor=void 0}pauseUpstream(){return LT(this,void 0,void 0,(function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(!0===this._isUpstreamPaused)return;if(!this.sender)return void this.log.warn("unable to pause upstream for an unpublished track",this.logContext);this._isUpstreamPaused=!0,this.emit(l_.UpstreamPaused,this);const t=x_();if("Safari"===(null===t||void 0===t?void 0:t.name)&&tI(t.version,"12.0")<0)throw new u_("pauseUpstream is not supported on Safari < 12.");"closed"!==(null===(e=this.sender.transport)||void 0===e?void 0:e.state)&&(yield this.sender.replaceTrack(null))}finally{t()}}))}resumeUpstream(){return LT(this,void 0,void 0,(function*(){var e;const t=yield this.pauseUpstreamLock.lock();try{if(!1===this._isUpstreamPaused)return;if(!this.sender)return void this.log.warn("unable to resume upstream for an unpublished track",this.logContext);this._isUpstreamPaused=!1,this.emit(l_.UpstreamResumed,this),"closed"!==(null===(e=this.sender.transport)||void 0===e?void 0:e.state)&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{t()}}))}getRTCStatsReport(){return LT(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return;return yield this.sender.getStats()}))}setProcessor(e){return LT(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var i;const r=yield t.processorLock.lock();try{t.log.debug("setting up processor",t.logContext);const r=document.createElement(t.kind),o={kind:t.kind,track:t._mediaStreamTrack,element:r,audioContext:t.audioContext};if(yield e.init(o),t.log.debug("processor initialized",t.logContext),t.processor&&(yield t.stopProcessor()),"unknown"===t.kind)throw TypeError("cannot set processor on track of unknown kind");if(I_(t._mediaStreamTrack,r),r.muted=!0,r.play().catch((e=>t.log.error("failed to play processor element",Object.assign(Object.assign({},t.logContext),{error:e})))),t.processor=e,t.processorElement=r,t.processor.processedTrack){for(const e of t.attachedElements)e!==t.processorElement&&n&&(R_(t._mediaStreamTrack,e),I_(t.processor.processedTrack,e));yield null===(i=t.sender)||void 0===i?void 0:i.replaceTrack(t.processor.processedTrack)}t.emit(l_.TrackProcessorUpdate,t.processor)}finally{r()}}()}))}getProcessor(){return this.processor}stopProcessor(){return LT(this,arguments,void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){var n,i;e.processor&&(e.log.debug("stopping processor",e.logContext),null===(n=e.processor.processedTrack)||void 0===n||n.stop(),yield e.processor.destroy(),e.processor=void 0,t||(null===(i=e.processorElement)||void 0===i||i.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(l_.TrackProcessorUpdate))}()}))}}class _R extends ER{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;super(e,__.Kind.Audio,t,n,r),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>LT(this,void 0,void 0,(function*(){if(!this.sender)return void(this._currentBitrate=0);let e;try{e=yield this.getSenderStats()}catch(WU){return void this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:WU}))}e&&this.prevStats&&(this._currentBitrate=TR(e,this.prevStats)),this.prevStats=e})),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(l_.AudioTrackFeatureUpdate,this,WS.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(l_.AudioTrackFeatureUpdate,this,WS.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=i,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return LT(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===__.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}}))}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return LT(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const t=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==hI(this._constraints.deviceId);return this.source!==__.Source.Microphone||!this.stopOnMute&&"ended"!==this._mediaStreamTrack.readyState&&!t||this.isUserProvided||(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{t()}}))}restartTrack(e){return LT(this,void 0,void 0,(function*(){let t;if(e){const n=_I({audio:e});"boolean"!==typeof n.audio&&(t=n.audio)}yield this.restart(t)}))}restart(e){const t=Object.create(null,{restart:{get:()=>super.restart}});return LT(this,void 0,void 0,(function*(){const n=yield t.restart.call(this,e);return this.checkForSilence(),n}))}startMonitor(){Q_()&&(this.monitorInterval||(this.monitorInterval=setInterval((()=>{this.monitorSender()}),CR)))}setProcessor(e){return LT(this,void 0,void 0,(function*(){var t;const n=yield this.processorLock.lock();try{if(!X_()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.stopProcessor());const n={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(n),this.processor=e,this.processor.processedTrack&&(yield null===(t=this.sender)||void 0===t?void 0:t.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(l_.TrackProcessorUpdate,this.processor)}finally{n()}}))}setAudioContext(e){this.audioContext=e}getSenderStats(){return LT(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return;let t;return(yield this.sender.getStats()).forEach((e=>{"outbound-rtp"===e.type&&(t={type:"audio",streamId:e.id,packetsSent:e.packetsSent,packetsLost:e.packetsLost,bytesSent:e.bytesSent,timestamp:e.timestamp,roundTripTime:e.roundTripTime,jitter:e.jitter})})),t}))}checkForSilence(){return LT(this,void 0,void 0,(function*(){const e=yield II(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(l_.AudioSilenceDetected)),e}))}}const IR=Object.values(j_),RR=Object.values(L_),PR=Object.values(F_),AR=[j_.h180,j_.h360],OR=[L_.h180,L_.h360],MR=e=>[{scaleResolutionDownBy:2,fps:e.encoding.maxFramerate}].map((t=>{var n,i;return new P_(Math.floor(e.width/t.scaleResolutionDownBy),Math.floor(e.height/t.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(t.scaleResolutionDownBy,2)*((null!==(n=e.encoding.maxFramerate)&&void 0!==n?n:30)/(null!==(i=t.fps)&&void 0!==i?i:30))))),t.fps,e.encoding.priority)})),NR=["q","h","f"];function DR(e,t,n,i){var r,o;let s=null===i||void 0===i?void 0:i.videoEncoding;e&&(s=null===i||void 0===i?void 0:i.screenShareEncoding);const a=null===i||void 0===i?void 0:i.simulcast,l=null===i||void 0===i?void 0:i.scalabilityMode,c=null===i||void 0===i?void 0:i.videoCodec;if(!s&&!a&&!l||!t||!n)return[{}];s||(s=function(e,t,n,i){const r=function(e,t,n){if(e)return PR;const i=t>n?t/n:n/t;if(Math.abs(i-16/9)<Math.abs(i-4/3))return IR;return RR}(e,t,n);let{encoding:o}=r[0];const s=Math.max(t,n);for(let a=0;a<r.length;a+=1){const e=r[a];if(o=e.encoding,e.width>=s)break}if(i)switch(i){case"av1":o=Object.assign({},o),o.maxBitrate=.7*o.maxBitrate;break;case"vp9":o=Object.assign({},o),o.maxBitrate=.85*o.maxBitrate}return o}(e,t,n,c),OT.debug("using video encoding",s));const u=s.maxFramerate,d=new P_(t,n,s.maxBitrate,s.maxFramerate,s.priority);if(l&&V_(c)){const e=new BR(l),t=[];if(e.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));const n=x_();if(W_()||X_()||"Chrome"===(null===n||void 0===n?void 0:n.name)&&tI(null===n||void 0===n?void 0:n.version,"113")<0){const n="h"==e.suffix?2:3;for(let i=0;i<e.spatial;i+=1)t.push({rid:NR[2-i],maxBitrate:s.maxBitrate/Math.pow(n,i),maxFramerate:d.encoding.maxFramerate});t[0].scalabilityMode=l}else t.push({maxBitrate:s.maxBitrate,maxFramerate:d.encoding.maxFramerate,scalabilityMode:l});return d.encoding.priority&&(t[0].priority=d.encoding.priority,t[0].networkPriority=d.encoding.priority),OT.debug("using svc encoding",{encodings:t}),t}if(!a)return[s];let h,p=[];if(p=e?null!==(r=FR(null===i||void 0===i?void 0:i.screenShareSimulcastLayers))&&void 0!==r?r:jR(e,d):null!==(o=FR(null===i||void 0===i?void 0:i.videoSimulcastLayers))&&void 0!==o?o:jR(e,d),p.length>0){const e=p[0];p.length>1&&([,h]=p);const i=Math.max(t,n);if(i>=960&&h)return LR(t,n,[e,h,d],u);if(i>=480)return LR(t,n,[e,d],u)}return LR(t,n,[d])}function jR(e,t){if(e)return MR(t);const{width:n,height:i}=t,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?AR:OR}function LR(e,t,n,i){const r=[];if(n.forEach(((n,o)=>{if(o>=NR.length)return;const s=Math.min(e,t),a={rid:NR[o],scaleResolutionDownBy:Math.max(1,s/Math.min(n.width,n.height)),maxBitrate:n.encoding.maxBitrate},l=i&&n.encoding.maxFramerate?Math.min(i,n.encoding.maxFramerate):n.encoding.maxFramerate;l&&(a.maxFramerate=l);const c=q_()||0===o;n.encoding.priority&&c&&(a.priority=n.encoding.priority,a.networkPriority=n.encoding.priority),r.push(a)})),X_()&&"ios"===Z_()){let e;r.forEach((t=>{e?t.maxFramerate&&t.maxFramerate>e&&(e=t.maxFramerate):e=t.maxFramerate}));let t=!0;r.forEach((n=>{var i;n.maxFramerate!=e&&(t&&(t=!1,OT.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),OT.info('Setting framerate of encoding "'.concat(null!==(i=n.rid)&&void 0!==i?i:"",'" to ').concat(e)),n.maxFramerate=e)}))}return r}function FR(e){if(e)return e.sort(((e,t)=>{const{encoding:n}=e,{encoding:i}=t;return n.maxBitrate>i.maxBitrate?1:n.maxBitrate<i.maxBitrate?-1:n.maxBitrate===i.maxBitrate&&n.maxFramerate&&i.maxFramerate?n.maxFramerate>i.maxFramerate?1:-1:0}))}class BR{constructor(e){const t=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!t)throw new Error("invalid scalability mode");if(this.spatial=parseInt(t[1]),this.temporal=parseInt(t[2]),t.length>3)switch(t[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=t[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat(null!==(e=this.suffix)&&void 0!==e?e:"")}}class UR extends ER{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3?arguments[3]:void 0;super(e,__.Kind.Video,t,n,i),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.monitorSender=()=>LT(this,void 0,void 0,(function*(){if(!this.sender)return void(this._currentBitrate=0);let e;try{e=yield this.getSenderStats()}catch(WU){return void this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:WU}))}const t=new Map(e.map((e=>[e.rid,e])));if(this.prevStats){let e=0;t.forEach(((t,n)=>{var i;const r=null===(i=this.prevStats)||void 0===i?void 0:i.get(n);e+=TR(t,r)})),this._currentBitrate=e}this.prevStats=t})),this.senderLock=new Kk}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var t;if(this.signalClient=e,!Q_())return;const n=null===(t=this.sender)||void 0===t?void 0:t.getParameters();n&&(this.encodings=n.encodings),this.monitorInterval||(this.monitorInterval=setInterval((()=>{this.monitorSender()}),CR))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach((e=>{e.mediaStreamTrack.stop()})),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return LT(this,void 0,void 0,(function*(){var t,n,i,r,o;yield e.pauseUpstream.call(this);try{for(var s,a=!0,l=BT(this.simulcastCodecs.values());!(t=(s=yield l.next()).done);a=!0){r=s.value,a=!1;const e=r;yield null===(o=e.sender)||void 0===o?void 0:o.replaceTrack(null)}}catch(c){n={error:c}}finally{try{a||t||!(i=l.return)||(yield i.call(l))}finally{if(n)throw n.error}}}))}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return LT(this,void 0,void 0,(function*(){var t,n,i,r,o;yield e.resumeUpstream.call(this);try{for(var s,a=!0,l=BT(this.simulcastCodecs.values());!(t=(s=yield l.next()).done);a=!0){r=s.value,a=!1;const e=r;yield null===(o=e.sender)||void 0===o?void 0:o.replaceTrack(e.mediaStreamTrack)}}catch(c){n={error:c}}finally{try{a||t||!(i=l.return)||(yield i.call(l))}finally{if(n)throw n.error}}}))}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return LT(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source!==__.Source.Camera||this.isUserProvided||(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{t()}}))}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return LT(this,void 0,void 0,(function*(){const t=yield this.muteLock.lock();try{return this.isMuted?(this.source!==__.Source.Camera||this.isUserProvided||(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{t()}}))}setTrackMuted(e){super.setTrackMuted(e);for(const t of this.simulcastCodecs.values())t.mediaStreamTrack.enabled=!e}getSenderStats(){return LT(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.sender)||void 0===e?void 0:e.getStats))return[];const t=[],n=yield this.sender.getStats();return n.forEach((e=>{var i;if("outbound-rtp"===e.type){const r={type:"video",streamId:e.id,frameHeight:e.frameHeight,frameWidth:e.frameWidth,framesPerSecond:e.framesPerSecond,framesSent:e.framesSent,firCount:e.firCount,pliCount:e.pliCount,nackCount:e.nackCount,packetsSent:e.packetsSent,bytesSent:e.bytesSent,qualityLimitationReason:e.qualityLimitationReason,qualityLimitationDurations:e.qualityLimitationDurations,qualityLimitationResolutionChanges:e.qualityLimitationResolutionChanges,rid:null!==(i=e.rid)&&void 0!==i?i:e.id,retransmittedPacketsSent:e.retransmittedPacketsSent,targetBitrate:e.targetBitrate,timestamp:e.timestamp},o=n.get(e.remoteId);o&&(r.jitter=o.jitter,r.packetsLost=o.packetsLost,r.roundTripTime=o.roundTripTime),t.push(r)}})),t.sort(((e,t)=>{var n,i;return(null!==(n=t.frameWidth)&&void 0!==n?n:0)-(null!==(i=e.frameWidth)&&void 0!==i?i:0)})),t}))}setPublishingQuality(e){const t=[];for(let n=E_.LOW;n<=E_.HIGH;n+=1)t.push(new lT({quality:n,enabled:n<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(t)}restartTrack(e){return LT(this,void 0,void 0,(function*(){var t,n,i,r,o;let s;if(e){const t=_I({video:e});"boolean"!==typeof t.video&&(s=t.video)}yield this.restart(s);try{for(var a,l=!0,c=BT(this.simulcastCodecs.values());!(t=(a=yield c.next()).done);l=!0){r=a.value,l=!1;const e=r;e.sender&&"closed"!==(null===(o=e.sender.transport)||void 0===o?void 0:o.state)&&(e.mediaStreamTrack=this.mediaStreamTrack.clone(),yield e.sender.replaceTrack(e.mediaStreamTrack))}}catch(u){n={error:u}}finally{try{l||t||!(i=c.return)||(yield i.call(c))}finally{if(n)throw n.error}}}))}setProcessor(e){const t=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return LT(this,arguments,void 0,(function(e){var n=this;let i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){var r,o,s,a,l,c;if(yield t.setProcessor.call(n,e,i),null===(l=n.processor)||void 0===l?void 0:l.processedTrack)try{for(var u,d=!0,h=BT(n.simulcastCodecs.values());!(r=(u=yield h.next()).done);d=!0){a=u.value,d=!1;const e=a;yield null===(c=e.sender)||void 0===c?void 0:c.replaceTrack(n.processor.processedTrack)}}catch(p){o={error:p}}finally{try{d||r||!(s=h.return)||(yield s.call(h))}finally{if(o)throw o.error}}}()}))}setDegradationPreference(e){return LT(this,void 0,void 0,(function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const t=this.sender.getParameters();t.degradationPreference=e,this.sender.setParameters(t)}catch(WU){this.log.warn("failed to set degradationPreference",Object.assign({error:WU},this.logContext))}}))}addSimulcastTrack(e,t){if(this.simulcastCodecs.has(e))return void this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);const n={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:t};return this.simulcastCodecs.set(e,n),n}setSimulcastTrackSender(e,t){const n=this.simulcastCodecs.get(e);n&&(n.sender=t,setTimeout((()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)}),5e3))}setPublishingCodecs(e){return LT(this,void 0,void 0,(function*(){var t,n,i,r,o,s,a;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(t=!0,n=BT(e);!(r=(i=yield n.next()).done);t=!0){a=i.value,t=!1;const e=a;if(this.codec&&this.codec!==e.codec){const t=this.simulcastCodecs.get(e.codec);if(this.log.debug("try setPublishingCodec for ".concat(e.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:t})),t&&t.sender)t.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(e.codec),this.logContext),yield $R(t.sender,t.encodings,e.qualities,this.senderLock,this.log,this.logContext));else for(const n of e.qualities)if(n.enabled){l.push(e.codec);break}}else yield this.setPublishingLayers(e.qualities)}}catch(c){o={error:c}}finally{try{t||r||!(s=n.return)||(yield s.call(n))}finally{if(o)throw o.error}}return l}))}setPublishingLayers(e){return LT(this,void 0,void 0,(function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),this.sender&&this.encodings&&(yield $R(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))}))}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return LT(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),K_()&&this.isInBackground&&this.source===__.Source.Camera&&(this._mediaStreamTrack.enabled=!1)}))}}function $R(e,t,n,i,r,o){return LT(this,void 0,void 0,(function*(){const s=yield i.lock();r.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:e,qualities:n,senderEncodings:t}));try{const i=e.getParameters(),{encodings:s}=i;if(!s)return;if(s.length!==t.length)return void r.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},o),{encodings:s,senderEncodings:t}));let a=!1;const l=x_();if("Chrome"===(null===l||void 0===l?void 0:l.name)&&tI(null===l||void 0===l?void 0:l.version,"133")>0&&s[0].scalabilityMode){const e=s[0],i=new BR(e.scalabilityMode);let r=US.OFF;if(n.forEach((e=>{e.enabled&&(r===US.OFF||e.quality>r)&&(r=e.quality)})),r===US.OFF)e.active&&(e.active=!1,a=!0);else if(!e.active||i.spatial!==r+1){a=!0,e.active=!0;const n=new BR(t[0].scalabilityMode);i.spatial=r+1,i.suffix=n.suffix,1===i.spatial&&(i.suffix=void 0),e.scalabilityMode=i.toString(),e.scaleResolutionDownBy=Math.pow(2,2-r),t[0].maxBitrate&&(e.maxBitrate=t[0].maxBitrate/(e.scaleResolutionDownBy*e.scaleResolutionDownBy))}}else s.forEach(((e,i)=>{var s;let l=null!==(s=e.rid)&&void 0!==s?s:"";""===l&&(l="q");const c=zR(l),u=n.find((e=>e.quality===c));u&&e.active!==u.enabled&&(a=!0,e.active=u.enabled,r.debug("setting layer ".concat(u.quality," to ").concat(e.active?"enabled":"disabled"),o),q_()&&(u.enabled?(e.scaleResolutionDownBy=t[i].scaleResolutionDownBy,e.maxBitrate=t[i].maxBitrate,e.maxFrameRate=t[i].maxFrameRate):(e.scaleResolutionDownBy=4,e.maxBitrate=10,e.maxFrameRate=2)))}));a&&(i.encodings=s,r.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:i.encodings})),yield e.setParameters(i))}finally{s()}}))}function zR(e){switch(e){case"f":default:return E_.HIGH;case"h":return E_.MEDIUM;case"q":return E_.LOW}}function VR(e,t,n,i){if(!n)return[new iC({quality:E_.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(i){const i=n[0].scalabilityMode,r=new BR(i),o=[],s="h"==r.suffix?1.5:2,a="h"==r.suffix?2:3;for(let l=0;l<r.spatial;l+=1)o.push(new iC({quality:Math.min(E_.HIGH,r.spatial-1)-l,width:Math.ceil(e/Math.pow(s,l)),height:Math.ceil(t/Math.pow(s,l)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(a,l)):0,ssrc:0}));return o}return n.map((n=>{var i,r,o;const s=null!==(i=n.scaleResolutionDownBy)&&void 0!==i?i:1;let a=zR(null!==(r=n.rid)&&void 0!==r?r:"");return new iC({quality:a,width:Math.ceil(e/s),height:Math.ceil(t/s),bitrate:null!==(o=n.maxBitrate)&&void 0!==o?o:0,ssrc:0})}))}const HR="_lossy",qR="_reliable",WR="leave-reconnect";var GR;!function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"}(GR||(GR={}));class KR extends zT.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var t;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=bR.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=GR.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=OT,this.handleDataChannel=e=>LT(this,[e],void 0,(function(e){var t=this;let{channel:n}=e;return function*(){if(n){if(n.label===qR)t.reliableDCSub=n;else{if(n.label!==HR)return;t.lossyDCSub=n}t.log.debug("on data channel ".concat(n.id,", ").concat(n.label),t.logContext),n.onmessage=t.handleDataMessage}}()})),this.handleDataMessage=e=>LT(this,void 0,void 0,(function*(){var t,n;const i=yield this.dataProcessLock.lock();try{let i;if(e.data instanceof ArrayBuffer)i=e.data;else{if(!(e.data instanceof Blob))return void this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:e.data}));i=yield e.data.arrayBuffer()}const r=rC.fromBinary(new Uint8Array(i));"speaker"===(null===(t=r.value)||void 0===t?void 0:t.case)?this.emit(a_.ActiveSpeakersUpdate,r.value.value.speakers):("user"===(null===(n=r.value)||void 0===n?void 0:n.case)&&function(e,t){const n=e.participantIdentity?e.participantIdentity:t.participantIdentity;e.participantIdentity=n,t.participantIdentity=n;const i=0!==e.destinationIdentities.length?e.destinationIdentities:t.destinationIdentities;e.destinationIdentities=i,t.destinationIdentities=i}(r,r.value.value),this.emit(a_.DataPacketReceived,r))}finally{i()}})),this.handleDataError=e=>{const t=0===e.currentTarget.maxRetransmits?"lossy":"reliable";if(e instanceof ErrorEvent&&e.error){const{error:n}=e.error;this.log.error("DataChannel error on ".concat(t,": ").concat(e.message),Object.assign(Object.assign({},this.logContext),{error:n}))}else this.log.error("Unknown DataChannel error on ".concat(t),Object.assign(Object.assign({},this.logContext),{event:e}))},this.handleBufferedAmountLow=e=>{const t=0===e.currentTarget.maxRetransmits?oC.LOSSY:oC.RELIABLE;this.updateAndEmitDCBufferStatus(t)},this.handleDisconnect=(e,t)=>{if(this._isClosed)return;this.log.warn("".concat(e," disconnected"),this.logContext),0===this.reconnectAttempts&&(this.reconnectStart=Date.now());const n=e=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(e,"ms. giving up"),this.logContext),this.emit(a_.Disconnected),this.close()},i=Date.now()-this.reconnectStart;let r=this.getNextRetryDelay({elapsedMs:i,retryCount:this.reconnectAttempts});null!==r?(e===WR&&(r=0),this.log.debug("reconnecting in ".concat(r,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=C_.setTimeout((()=>this.attemptReconnect(t).finally((()=>this.reconnectTimeout=void 0))),r)):n(i)},this.waitForRestarted=()=>new Promise(((e,t)=>{this.pcState===GR.Connected&&e();const n=()=>{this.off(a_.Disconnected,i),e()},i=()=>{this.off(a_.Restarted,n),t()};this.once(a_.Restarted,n),this.once(a_.Disconnected,i)})),this.updateAndEmitDCBufferStatus=e=>{const t=this.isBufferStatusLow(e);"undefined"!==typeof t&&t!==this.dcBufferStatus.get(e)&&(this.dcBufferStatus.set(e,t),this.emit(a_.DCBufferStatusChanged,t,e))},this.isBufferStatusLow=e=>{const t=this.dataChannelForKind(e);if(t)return t.bufferedAmount<=t.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===HI.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(HS.RR_SIGNAL_DISCONNECTED))},this.log=MT(null!==(t=e.loggerName)&&void 0!==t?t:PT.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new qI(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Kk,this.dataProcessLock=new Kk,this.dcBufferStatus=new Map([[oC.LOSSY,!0],[oC.RELIABLE,!0]]),this.client.onParticipantUpdate=e=>this.emit(a_.ParticipantUpdate,e),this.client.onConnectionQuality=e=>this.emit(a_.ConnectionQualityUpdate,e),this.client.onRoomUpdate=e=>this.emit(a_.RoomUpdate,e),this.client.onSubscriptionError=e=>this.emit(a_.SubscriptionError,e),this.client.onSubscriptionPermissionUpdate=e=>this.emit(a_.SubscriptionPermissionUpdate,e),this.client.onSpeakersChanged=e=>this.emit(a_.SpeakersChanged,e),this.client.onStreamStateUpdate=e=>this.emit(a_.StreamStateChanged,e),this.client.onRequestResponse=e=>this.emit(a_.SignalRequestResponse,e)}get logContext(){var e,t,n,i,r,o,s,a;return{room:null===(t=null===(e=this.latestJoinResponse)||void 0===e?void 0:e.room)||void 0===t?void 0:t.name,roomID:null===(i=null===(n=this.latestJoinResponse)||void 0===n?void 0:n.room)||void 0===i?void 0:i.sid,participant:null===(o=null===(r=this.latestJoinResponse)||void 0===r?void 0:r.participant)||void 0===o?void 0:o.identity,pID:null===(a=null===(s=this.latestJoinResponse)||void 0===s?void 0:s.participant)||void 0===a?void 0:a.sid}}join(e,t,n,i){return LT(this,void 0,void 0,(function*(){this.url=e,this.token=t,this.signalOpts=n,this.maxJoinAttempts=n.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const r=yield this.client.join(e,t,n,i);return this._isClosed=!1,this.latestJoinResponse=r,this.subscriberPrimary=r.subscriberPrimary,this.pcManager||(yield this.configure(r)),this.subscriberPrimary&&!r.fastPublish||this.negotiate(),this.clientConfiguration=r.clientConfiguration,setTimeout((()=>{this.emit(a_.SignalConnected)}),10),r}catch(WU){if(WU instanceof c_&&WU.reason===n_.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,t,n,i);throw WU}}))}close(){return LT(this,void 0,void 0,(function*(){const e=yield this.closingLock.lock();if(this.isClosed)e();else try{this._isClosed=!0,this.joinAttempts=0,this.emit(a_.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}}))}cleanupPeerConnections(){return LT(this,void 0,void 0,(function*(){var e;yield null===(e=this.pcManager)||void 0===e?void 0:e.close(),this.pcManager=void 0;const t=e=>{e&&(e.close(),e.onbufferedamountlow=null,e.onclose=null,e.onclosing=null,e.onerror=null,e.onmessage=null,e.onopen=null)};t(this.lossyDC),t(this.lossyDCSub),t(this.reliableDC),t(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0}))}cleanupClient(){return LT(this,void 0,void 0,(function*(){yield this.client.close(),this.client.resetCallbacks()}))}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new d_("a track with the same ID has already been published");return new Promise(((t,n)=>{const i=setTimeout((()=>{delete this.pendingTrackResolvers[e.cid],n(new c_("publication of local track timed out, no response from server",n_.InternalError))}),1e4);this.pendingTrackResolvers[e.cid]={resolve:e=>{clearTimeout(i),t(e)},reject:()=>{clearTimeout(i),n(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)}))}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:t}=this.pendingTrackResolvers[e.track.id];t&&t(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(WU){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:WU}))}return!1}updateMuteStatus(e,t){this.client.sendMuteTrack(e,t)}get dataSubscriberReadyState(){var e;return null===(e=this.reliableDCSub)||void 0===e?void 0:e.readyState}getConnectedServerAddress(){return LT(this,void 0,void 0,(function*(){var e;return null===(e=this.pcManager)||void 0===e?void 0:e.getConnectedAddress()}))}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return LT(this,void 0,void 0,(function*(){var t,n;if(this.pcManager&&this.pcManager.currentState!==yR.NEW)return;this.participantSid=null===(t=e.participant)||void 0===t?void 0:t.sid;const i=this.makeRTCConfiguration(e);this.pcManager=new xR(i,e.subscriberPrimary,this.loggerOptions),this.emit(a_.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(e,t)=>{this.client.sendIceCandidate(e,t)},this.pcManager.onPublisherOffer=e=>{this.client.sendOffer(e)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(t,n,i)=>LT(this,void 0,void 0,(function*(){if(this.log.debug("primary PC state changed ".concat(t),this.logContext),["closed","disconnected","failed"].includes(n)&&(this.publisherConnectionPromise=void 0),t===yR.CONNECTED){const t=this.pcState===GR.New;this.pcState=GR.Connected,t&&this.emit(a_.Connected,e)}else t===yR.FAILED&&this.pcState===GR.Connected&&(this.pcState=GR.Disconnected,this.handleDisconnect("peerconnection failed","failed"===i?HS.RR_SUBSCRIBER_FAILED:HS.RR_PUBLISHER_FAILED));const r=this.client.isDisconnected||this.client.currentState===HI.RECONNECTING,o=[yR.FAILED,yR.CLOSING,yR.CLOSED].includes(t);r&&o&&!this._isClosed&&this.emit(a_.Offline)})),this.pcManager.onTrack=e=>{this.emit(a_.MediaTrackAdded,e.track,e.streams[0],e.receiver)},function(e){return void 0!==e&&e>13}(null===(n=e.serverInfo)||void 0===n?void 0:n.protocol)||this.createDataChannels()}))}setupSignalClientCallbacks(){this.client.onAnswer=e=>LT(this,void 0,void 0,(function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))})),this.client.onTrickle=(e,t)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:t})),this.pcManager.addIceCandidate(e,t))},this.client.onOffer=e=>LT(this,void 0,void 0,(function*(){if(!this.pcManager)return;const t=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(t)})),this.client.onLocalTrackPublished=e=>{var t;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:null===(t=e.track)||void 0===t?void 0:t.sid})),!this.pendingTrackResolvers[e.cid])return void this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));const{resolve:n}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],n(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(a_.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(a_.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,t)=>{this.emit(a_.RemoteMute,e,t)},this.client.onSubscribedQualityUpdate=e=>{this.emit(a_.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",HS.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:null===e||void 0===e?void 0:e.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions(e.regions)),e.action){case JC.DISCONNECT:this.emit(a_.Disconnected,null===e||void 0===e?void 0:e.reason),this.close();break;case JC.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(WR);break;case JC.RESUME:this.handleDisconnect(WR)}}}makeRTCConfiguration(e){var t;const n=Object.assign({},this.rtcConfig);if((null===(t=this.signalOpts)||void 0===t?void 0:t.e2eeEnabled)&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),n.encodedInsertableStreams=!0),e.iceServers&&!n.iceServers){const t=[];e.iceServers.forEach((e=>{const n={urls:e.urls};e.username&&(n.username=e.username),e.credential&&(n.credential=e.credential),t.push(n)})),n.iceServers=t}return e.clientConfiguration&&e.clientConfiguration.forceRelay===zS.ENABLED&&(n.iceTransportPolicy="relay"),n.sdpSemantics="unified-plan",n.continualGatheringPolicy="gather_continually",n}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(HR,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(qR,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,t,n){return LT(this,void 0,void 0,(function*(){if($_()){return yield this.createTransceiverRTCRtpSender(e,t,n)}if(z_()){this.log.warn("using add-track fallback",this.logContext);return yield this.createRTCRtpSender(e.mediaStreamTrack)}throw new p_("Required webRTC APIs not supported on this device")}))}createSimulcastSender(e,t,n,i){return LT(this,void 0,void 0,(function*(){if($_())return this.createSimulcastTransceiverSender(e,t,n,i);if(z_())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new p_("Cannot stream on this device")}))}createTransceiverRTCRtpSender(e,t,n){return LT(this,void 0,void 0,(function*(){if(!this.pcManager)throw new p_("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream),yI(e)&&(e.codec=t.videoCodec);const r={direction:"sendonly",streams:i};n&&(r.sendEncodings=n);return(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,r)).sender}))}createSimulcastTransceiverSender(e,t,n,i){return LT(this,void 0,void 0,(function*(){if(!this.pcManager)throw new p_("publisher is closed");const r={direction:"sendonly"};i&&(r.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,r);if(n.videoCodec)return e.setSimulcastTrackSender(n.videoCodec,o.sender),o.sender}))}createRTCRtpSender(e){return LT(this,void 0,void 0,(function*(){if(!this.pcManager)throw new p_("publisher is closed");return this.pcManager.addPublisherTrack(e)}))}attemptReconnect(e){return LT(this,void 0,void 0,(function*(){var t,n,i;if(!this._isClosed)if(this.attemptingReconnect)OT.warn("already attempting reconnect, returning early",this.logContext);else{(null===(t=this.clientConfiguration)||void 0===t?void 0:t.resumeConnection)!==zS.DISABLED&&(null!==(i=null===(n=this.pcManager)||void 0===n?void 0:n.currentState)&&void 0!==i?i:yR.NEW)!==yR.NEW||(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(WU){this.reconnectAttempts+=1;let t=!0;WU instanceof p_?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:WU})),t=!1):WU instanceof QR||(this.fullReconnectOnNext=!0),t?this.handleDisconnect("reconnect",HS.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(a_.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}}))}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(WU){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:WU}))}return null}restartConnection(e){return LT(this,void 0,void 0,(function*(){var t,n,i;try{if(!this.url||!this.token)throw new p_("could not reconnect, url or token not saved");let n;this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(a_.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new QR;n=yield this.join(null!==e&&void 0!==e?e:this.url,this.token,this.signalOpts)}catch(WU){if(WU instanceof c_&&WU.reason===n_.NotAllowed)throw new p_("could not reconnect, token might be expired");throw new QR}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(a_.SignalRestarted,n),yield this.waitForPCReconnected(),this.client.currentState!==HI.CONNECTED)throw new QR("Signal connection got severed during reconnect");null===(t=this.regionUrlProvider)||void 0===t||t.resetAttempts(),this.emit(a_.Restarted)}catch(r){const e=yield null===(n=this.regionUrlProvider)||void 0===n?void 0:n.getNextBestRegionUrl();if(e)return void(yield this.restartConnection(e));throw null===(i=this.regionUrlProvider)||void 0===i||i.resetAttempts(),r}}))}resumeConnection(e){return LT(this,void 0,void 0,(function*(){var t;if(!this.url||!this.token)throw new p_("could not reconnect, url or token not saved");if(!this.pcManager)throw new p_("publisher and subscriber connections unset");let n;this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(a_.Resuming);try{this.setupSignalClientCallbacks(),n=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(i){let e="";if(i instanceof Error&&(e=i.message,this.log.error(i.message,Object.assign(Object.assign({},this.logContext),{error:i}))),i instanceof c_&&i.reason===n_.NotAllowed)throw new p_("could not reconnect, token might be expired");if(i instanceof c_&&i.reason===n_.LeaveRequest)throw i;throw new QR(e)}if(this.emit(a_.SignalResumed),n){const e=this.makeRTCConfiguration(n);this.pcManager.updateConfiguration(e)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==HI.CONNECTED)throw new QR("Signal connection got severed during reconnect");this.client.setReconnected(),"open"===(null===(t=this.reliableDC)||void 0===t?void 0:t.readyState)&&null===this.reliableDC.id&&this.createDataChannels(),this.emit(a_.Resumed)}))}waitForPCInitialConnection(e,t){return LT(this,void 0,void 0,(function*(){if(!this.pcManager)throw new p_("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(t,e)}))}waitForPCReconnected(){return LT(this,void 0,void 0,(function*(){this.pcState=GR.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield U_(2e3),!this.pcManager)throw new p_("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=GR.Connected}catch(WU){throw this.pcState=GR.Disconnected,new c_("could not establish PC connection, ".concat(WU.message),n_.InternalError)}}))}publishRpcResponse(e,t,n,i){return LT(this,void 0,void 0,(function*(){const r=new rC({destinationIdentities:[e],kind:oC.RELIABLE,value:{case:"rpcResponse",value:new mC({requestId:t,value:i?{case:"error",value:i.toProto()}:{case:"payload",value:null!==n&&void 0!==n?n:""}})}});yield this.sendDataPacket(r,oC.RELIABLE)}))}publishRpcAck(e,t){return LT(this,void 0,void 0,(function*(){const n=new rC({destinationIdentities:[e],kind:oC.RELIABLE,value:{case:"rpcAck",value:new fC({requestId:t})}});yield this.sendDataPacket(n,oC.RELIABLE)}))}sendDataPacket(e,t){return LT(this,void 0,void 0,(function*(){const n=e.toBinary();yield this.ensurePublisherConnected(t);const i=this.dataChannelForKind(t);i&&i.send(n),this.updateAndEmitDCBufferStatus(t)}))}waitForBufferStatusLow(e){return new Promise(((t,n)=>LT(this,void 0,void 0,(function*(){if(this.isBufferStatusLow(e))t();else{const i=()=>n("Engine closed");for(this.once(a_.Closing,i);!this.dcBufferStatus.get(e);)yield U_(10);this.off(a_.Closing,i),t()}}))))}ensureDataTransportConnected(e){return LT(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.subscriberPrimary;return function*(){var i;if(!t.pcManager)throw new p_("PC manager is closed");const r=n?t.pcManager.subscriber:t.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!r)throw new c_("".concat(o," connection not set"),n_.InternalError);let s=!1;n||t.dataChannelForKind(e,n)||(t.createDataChannels(),s=!0),s||n||t.pcManager.publisher.isICEConnected||"checking"===t.pcManager.publisher.getICEConnectionState()||(s=!0),s&&t.negotiate();const a=t.dataChannelForKind(e,n);if("open"===(null===a||void 0===a?void 0:a.readyState))return;const l=(new Date).getTime()+t.peerConnectionTimeout;for(;(new Date).getTime()<l;){if(r.isICEConnected&&"open"===(null===(i=t.dataChannelForKind(e,n))||void 0===i?void 0:i.readyState))return;yield U_(50)}throw new c_("could not establish ".concat(o," connection, state: ").concat(r.getICEConnectionState()),n_.InternalError)}()}))}ensurePublisherConnected(e){return LT(this,void 0,void 0,(function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise}))}verifyTransport(){return!!this.pcManager&&(this.pcManager.currentState===yR.CONNECTED&&!(!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED))}negotiate(){return LT(this,void 0,void 0,(function*(){return new Promise(((e,t)=>LT(this,void 0,void 0,(function*(){if(!this.pcManager)return void t(new f_("PC manager is closed"));this.pcManager.requirePublisher(),0!=this.pcManager.publisher.getTransceivers().length||this.lossyDC||this.reliableDC||this.createDataChannels();const n=new AbortController,i=()=>{n.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&t("cannot negotiate on closed engine"),this.on(a_.Closing,i),this.pcManager.publisher.once(cR,(e=>{const t=new Map;e.forEach((e=>{const n=e.codec.toLowerCase();var i;i=n,O_.includes(i)&&t.set(e.payload,n)})),this.emit(a_.RTPVideoMapUpdate,t)}));try{yield this.pcManager.negotiate(n),e()}catch(WU){WU instanceof f_&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",HS.RR_UNKNOWN),t(WU)}finally{this.off(a_.Closing,i)}}))))}))}dataChannelForKind(e,t){if(t){if(e===oC.LOSSY)return this.lossyDCSub;if(e===oC.RELIABLE)return this.reliableDCSub}else{if(e===oC.LOSSY)return this.lossyDC;if(e===oC.RELIABLE)return this.reliableDC}}sendSyncState(e,t){var n,i;if(!this.pcManager)return void this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);const r=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),s=null===(i=null===(n=this.signalOpts)||void 0===n?void 0:n.autoSubscribe)||void 0===i||i,a=new Array,l=new Array;e.forEach((e=>{e.isDesired!==s&&a.push(e.trackSid),e.isEnabled||l.push(e.trackSid)})),this.client.sendSyncState(new fT({answer:r?GI({sdp:r.sdp,type:r.type}):void 0,offer:o?GI({sdp:o.sdp,type:o.type}):void 0,subscription:new GC({trackSids:a,subscribe:!s,participantTracks:[]}),publishTracks:NI(t),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:l}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],t=(t,n)=>{void 0!==(null===t||void 0===t?void 0:t.id)&&null!==t.id&&e.push(new mT({label:t.label,id:t.id,target:n}))};return t(this.dataChannelForKind(oC.LOSSY),OC.PUBLISHER),t(this.dataChannelForKind(oC.RELIABLE),OC.PUBLISHER),t(this.dataChannelForKind(oC.LOSSY,!0),OC.SUBSCRIBER),t(this.dataChannelForKind(oC.RELIABLE,!0),OC.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&C_.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Q_()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Q_()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class QR extends Error{}class XR{constructor(e,t){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=t}updateToken(e){this.token=e}isCloud(){return Y_(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return LT(this,void 0,void 0,(function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const t=this.regionSettings.regions.filter((e=>!this.attemptedRegions.find((t=>t.url===e.url))));if(t.length>0){const e=t[0];return this.attemptedRegions.push(e),OT.debug("next region: ".concat(e.region)),e.url}return null}))}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return LT(this,void 0,void 0,(function*(){const t=yield fetch("".concat((n=this.serverUrl,"".concat(n.protocol.replace("ws","http"),"//").concat(n.host,"/settings")),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});var n;if(t.ok){const e=yield t.json();return this.lastUpdateAt=Date.now(),e}throw new c_("Could not fetch region settings: ".concat(t.statusText),401===t.status?n_.NotAllowed:n_.InternalError,t.status)}))}setServerReportedRegions(e){this.regionSettings=e,this.lastUpdateAt=Date.now()}}class YR{get info(){return this._info}constructor(e,t,n){this.reader=t,this.totalByteSize=n,this._info=e,this.bytesReceived=0}}class JR extends YR{handleChunkReceived(e){var t;this.bytesReceived+=e.content.byteLength;const n=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;null===(t=this.onProgress)||void 0===t||t.call(this,n)}[Symbol.asyncIterator](){const e=this.reader.getReader();return{next:()=>LT(this,void 0,void 0,(function*(){try{const{done:t,value:n}=yield e.read();return t?{done:!0,value:void 0}:(this.handleChunkReceived(n),{done:!1,value:n.content})}catch(t){return{done:!0,value:void 0}}})),return(){return LT(this,void 0,void 0,(function*(){return e.releaseLock(),{done:!0,value:void 0}}))}}}readAll(){return LT(this,void 0,void 0,(function*(){var e,t,n,i;let r=new Set;try{for(var o,s=!0,a=BT(this);!(e=(o=yield a.next()).done);s=!0){i=o.value,s=!1;const e=i;r.add(e)}}catch(l){t={error:l}}finally{try{s||e||!(n=a.return)||(yield n.call(a))}finally{if(t)throw t.error}}return Array.from(r)}))}}class ZR extends YR{constructor(e,t,n){super(e,t,n),this.receivedChunks=new Map}handleChunkReceived(e){var t;const n=mI(e.chunkIndex),i=this.receivedChunks.get(n);if(i&&i.version>e.version)return;this.receivedChunks.set(n,e),this.bytesReceived+=e.content.byteLength;const r=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;null===(t=this.onProgress)||void 0===t||t.call(this,r)}[Symbol.asyncIterator](){const e=this.reader.getReader(),t=new TextDecoder;return{next:()=>LT(this,void 0,void 0,(function*(){try{const{done:n,value:i}=yield e.read();return n?{done:!0,value:void 0}:(this.handleChunkReceived(i),{done:!1,value:t.decode(i.content)})}catch(n){return{done:!0,value:void 0}}})),return(){return LT(this,void 0,void 0,(function*(){return e.releaseLock(),{done:!0,value:void 0}}))}}}readAll(){return LT(this,void 0,void 0,(function*(){var e,t,n,i;let r="";try{for(var o,s=!0,a=BT(this);!(e=(o=yield a.next()).done);s=!0){i=o.value,s=!1;r+=i}}catch(l){t={error:l}}finally{try{s||e||!(n=a.return)||(yield n.call(a))}finally{if(t)throw t.error}}return r}))}}class eP{constructor(e,t,n){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=n,this.info=t}write(e){return this.defaultWriter.write(e)}close(){return LT(this,void 0,void 0,(function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),null===(e=this.onClose)||void 0===e||e.call(this)}))}}class tP extends eP{}class nP extends eP{}class iP extends __{constructor(e,t,n,i,r){super(e,n,r),this.sid=t,this.receiver=i}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?l_.Muted:l_.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const t=n=>{n.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",t),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(l_.Ended,this))};e.addEventListener("removetrack",t)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return LT(this,void 0,void 0,(function*(){var e;if(!(null===(e=this.receiver)||void 0===e?void 0:e.getStats))return;return yield this.receiver.getStats()}))}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval((()=>this.monitorReceiver()),CR)),"undefined"!==typeof RTCRtpReceiver&&"getSynchronizationSources"in RTCRtpReceiver&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var t;this.timeSyncHandle=requestAnimationFrame((()=>e()));const n=null===(t=this.receiver)||void 0===t?void 0:t.getSynchronizationSources()[0];if(n){const{timestamp:e,rtpTimestamp:t}=n;t&&this.rtpTimestamp!==t&&(this.emit(l_.TimeSyncUpdate,{timestamp:e,rtpTimestamp:t}),this.rtpTimestamp=t)}};e()}}class rP extends iP{constructor(e,t,n,i,r,o){super(e,t,__.Kind.Audio,n,o),this.monitorReceiver=()=>LT(this,void 0,void 0,(function*(){if(!this.receiver)return void(this._currentBitrate=0);const e=yield this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=TR(e,this.prevStats)),this.prevStats=e})),this.audioContext=i,this.webAudioPluginNodes=[],r&&(this.sinkId=r.deviceId)}setVolume(e){var t;for(const n of this.attachedElements)this.audioContext?null===(t=this.gainNode)||void 0===t||t.gain.setTargetAtTime(e,0,.1):n.volume=e;X_()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(X_())return 1;let e=0;return this.attachedElements.forEach((t=>{t.volume>e&&(e=t.volume)})),e}setSinkId(e){return LT(this,void 0,void 0,(function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map((t=>{if(H_(t))return t.setSinkId(e)})))}))}attach(e){const t=0===this.attachedElements.length;return e?super.attach(e):e=super.attach(),this.sinkId&&H_(e)&&e.setSinkId(this.sinkId),this.audioContext&&t&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let t;return e?(t=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(t=super.detach(),this.disconnectWebAudio()),t}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,t){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(t.srcObject);let n=this.sourceNode;this.webAudioPluginNodes.forEach((e=>{n.connect(e),n=e})),this.gainNode=e.createGain(),n.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),"running"!==e.state&&e.resume().then((()=>{"running"!==e.state&&this.emit(l_.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))})).catch((e=>{this.emit(l_.AudioPlaybackFailed,e)}))}disconnectWebAudio(){var e,t;null===(e=this.gainNode)||void 0===e||e.disconnect(),null===(t=this.sourceNode)||void 0===t||t.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return LT(this,void 0,void 0,(function*(){if(!this.receiver||!this.receiver.getStats)return;let e;return(yield this.receiver.getStats()).forEach((t=>{"inbound-rtp"===t.type&&(e={type:"audio",streamId:t.id,timestamp:t.timestamp,jitter:t.jitter,bytesReceived:t.bytesReceived,concealedSamples:t.concealedSamples,concealmentEvents:t.concealmentEvents,silentConcealedSamples:t.silentConcealedSamples,silentConcealmentEvents:t.silentConcealmentEvents,totalAudioEnergy:t.totalAudioEnergy,totalSamplesDuration:t.totalSamplesDuration})})),e}))}}class oP extends iP{constructor(e,t,n,i,r){super(e,t,__.Kind.Video,n,r),this.elementInfos=[],this.monitorReceiver=()=>LT(this,void 0,void 0,(function*(){if(!this.receiver)return void(this._currentBitrate=0);const e=yield this.getReceiverStats();e&&this.prevStats&&this.receiver&&(this._currentBitrate=TR(e,this.prevStats)),this.prevStats=e})),this.debouncedHandleResize=sR((()=>{this.updateDimensions()}),100),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return void 0!==this.adaptiveStreamSettings}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach((t=>{e?R_(this._mediaStreamTrack,t):I_(this._mediaStreamTrack,t)}))}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&void 0===this.elementInfos.find((t=>t.element===e))){const t=new sP(e);this.observeElementInfo(t)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&void 0===this.elementInfos.find((t=>t===e))?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream)return void this.log.warn("stopObservingElementInfo ignored",this.logContext);const t=this.elementInfos.filter((t=>t===e));for(const n of t)n.stopObserving();this.elementInfos=this.elementInfos.filter((t=>t!==e)),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let t=[];if(e)return this.stopObservingElement(e),super.detach(e);t=super.detach();for(const n of t)this.stopObservingElement(n);return t}getDecoderImplementation(){var e;return null===(e=this.prevStats)||void 0===e?void 0:e.decoderImplementation}getReceiverStats(){return LT(this,void 0,void 0,(function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let t,n="",i=new Map;return e.forEach((e=>{"inbound-rtp"===e.type?(n=e.codecId,t={type:"video",streamId:e.id,framesDecoded:e.framesDecoded,framesDropped:e.framesDropped,framesReceived:e.framesReceived,packetsReceived:e.packetsReceived,packetsLost:e.packetsLost,frameWidth:e.frameWidth,frameHeight:e.frameHeight,pliCount:e.pliCount,firCount:e.firCount,nackCount:e.nackCount,jitter:e.jitter,timestamp:e.timestamp,bytesReceived:e.bytesReceived,decoderImplementation:e.decoderImplementation}):"codec"===e.type&&i.set(e.id,e)})),t&&""!==n&&i.get(n)&&(t.mimeType=i.get(n).mimeType),t}))}stopObservingElement(e){const t=this.elementInfos.filter((t=>t.element===e));for(const n of t)this.stopObservingElementInfo(n)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return LT(this,void 0,void 0,(function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()}))}updateVisibility(){var e,t;const n=this.elementInfos.reduce(((e,t)=>Math.max(e,t.visibilityChangedAt||0)),0),i=!(null!==(t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pauseVideoInBackground)&&void 0!==t&&!t)&&this.isInBackground,r=this.elementInfos.some((e=>e.pictureInPicture)),o=this.elementInfos.some((e=>e.visible))&&!i||r;this.lastVisible!==o&&(!o&&Date.now()-n<100?C_.setTimeout((()=>{this.updateVisibility()}),100):(this.lastVisible=o,this.emit(l_.VisibilityChanged,o,this)))}updateDimensions(){var e,t;let n=0,i=0;const r=this.getPixelDensity();for(const o of this.elementInfos){const e=o.width()*r,t=o.height()*r;e+t>n+i&&(n=e,i=t)}(null===(e=this.lastDimensions)||void 0===e?void 0:e.width)===n&&(null===(t=this.lastDimensions)||void 0===t?void 0:t.height)===i||(this.lastDimensions={width:n,height:i},this.emit(l_.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const t=null===(e=this.adaptiveStreamSettings)||void 0===e?void 0:e.pixelDensity;if("screen"===t)return eI();if(!t){return eI()>2?2:1}return t}}class sP{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,t){this.onVisibilityChanged=e=>{var t;const{target:n,isIntersecting:i}=e;n===this.element&&(this.isIntersecting=i,this.isPiP=aP(this.element),this.visibilityChangedAt=Date.now(),null===(t=this.handleVisibilityChanged)||void 0===t||t.call(this))},this.onEnterPiP=()=>{var e,t,n;null===(t=null===(e=window.documentPictureInPicture)||void 0===e?void 0:e.window)||void 0===t||t.addEventListener("pagehide",this.onLeavePiP),this.isPiP=aP(this.element),null===(n=this.handleVisibilityChanged)||void 0===n||n.call(this)},this.onLeavePiP=()=>{var e;this.isPiP=aP(this.element),null===(e=this.handleVisibilityChanged)||void 0===e||e.call(this)},this.element=e,this.isIntersecting=null!==t&&void 0!==t?t:lP(e),this.isPiP=Q_()&&aP(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,t,n;this.isIntersecting=lP(this.element),this.isPiP=aP(this.element),this.element.handleResize=()=>{var e;null===(e=this.handleResize)||void 0===e||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,aI().observe(this.element),oI().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),null===(e=window.documentPictureInPicture)||void 0===e||e.addEventListener("enter",this.onEnterPiP),null===(n=null===(t=window.documentPictureInPicture)||void 0===t?void 0:t.window)||void 0===n||n.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,t,n,i,r;null===(e=aI())||void 0===e||e.unobserve(this.element),null===(t=oI())||void 0===t||t.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),null===(n=window.documentPictureInPicture)||void 0===n||n.removeEventListener("enter",this.onEnterPiP),null===(r=null===(i=window.documentPictureInPicture)||void 0===i?void 0:i.window)||void 0===r||r.removeEventListener("pagehide",this.onLeavePiP)}}function aP(e){var t,n;return document.pictureInPictureElement===e||!!(null===(t=window.documentPictureInPicture)||void 0===t?void 0:t.window)&&lP(e,null===(n=window.documentPictureInPicture)||void 0===n?void 0:n.window)}function lP(e,t){const n=t||window;let i=e.offsetTop,r=e.offsetLeft;const o=e.offsetWidth,s=e.offsetHeight,{hidden:a}=e,{display:l}=getComputedStyle(e);for(;e.offsetParent;)i+=(e=e.offsetParent).offsetTop,r+=e.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+s>n.pageYOffset&&r+o>n.pageXOffset&&!a&&"none"!==l}class cP extends zT.EventEmitter{constructor(e,t,n,i){var r;super(),this.metadataMuted=!1,this.encryption=eC.NONE,this.log=OT,this.handleMuted=()=>{this.emit(l_.Muted)},this.handleUnmuted=()=>{this.emit(l_.Unmuted)},this.log=MT(null!==(r=null===i||void 0===i?void 0:i.loggerName)&&void 0!==r?r:PT.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=t,this.trackName=n,this.source=__.Source.Unknown}setTrack(e){this.track&&(this.track.off(l_.Muted,this.handleMuted),this.track.off(l_.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(l_.Muted,this.handleMuted),e.on(l_.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},null===(e=this.loggerContextCb)||void 0===e?void 0:e.call(this)),DI(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return void 0!==this.track}get isEncrypted(){return this.encryption!==eC.NONE}get audioTrack(){if(bI(this.track))return this.track}get videoTrack(){if(yI(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=__.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===__.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}!function(e){var t,n;(t=e.SubscriptionStatus||(e.SubscriptionStatus={})).Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",(n=e.PermissionStatus||(e.PermissionStatus={})).Allowed="allowed",n.NotAllowed="not_allowed"}(cP||(cP={}));class uP extends cP{get isUpstreamPaused(){var e;return null===(e=this.track)||void 0===e?void 0:e.isUpstreamPaused}constructor(e,t,n,i){super(e,t.sid,t.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(l_.Ended)},this.updateInfo(t),this.setTrack(n)}setTrack(e){this.track&&this.track.off(l_.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(l_.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return LT(this,void 0,void 0,(function*(){var e;return null===(e=this.track)||void 0===e?void 0:e.mute()}))}unmute(){return LT(this,void 0,void 0,(function*(){var e;return null===(e=this.track)||void 0===e?void 0:e.unmute()}))}pauseUpstream(){return LT(this,void 0,void 0,(function*(){var e;yield null===(e=this.track)||void 0===e?void 0:e.pauseUpstream()}))}resumeUpstream(){return LT(this,void 0,void 0,(function*(){var e;yield null===(e=this.track)||void 0===e?void 0:e.resumeUpstream()}))}getTrackFeatures(){var e;if(bI(this.track)){const t=this.track.getSourceTrackSettings(),n=new Set;return t.autoGainControl&&n.add(WS.TF_AUTO_GAIN_CONTROL),t.echoCancellation&&n.add(WS.TF_ECHO_CANCELLATION),t.noiseSuppression&&n.add(WS.TF_NOISE_SUPPRESSION),t.channelCount&&t.channelCount>1&&n.add(WS.TF_STEREO),(null===(e=this.options)||void 0===e?void 0:e.dtx)||n.add(WS.TF_NO_DTX),this.track.enhancedNoiseCancellation&&n.add(WS.TF_ENHANCED_NOISE_CANCELLATION),Array.from(n.values())}return[]}}function dP(e,t){return LT(this,void 0,void 0,(function*(){null!==e&&void 0!==e||(e={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:o}=jI(e);let s=o.audio,a=o.video;if(i&&"object"===typeof o.audio&&(o.audio.processor=i),r&&"object"===typeof o.video&&(o.video.processor=r),e.audio&&"object"===typeof o.audio&&"string"===typeof o.audio.deviceId){const e=o.audio.deviceId;o.audio.deviceId={exact:e},n=!0,s=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:e}})}if(o.video&&"object"===typeof o.video&&"string"===typeof o.video.deviceId){const e=o.video.deviceId;o.video.deviceId={exact:e},n=!0,a=Object.assign(Object.assign({},o.video),{deviceId:{ideal:e}})}(!0===o.audio||"object"===typeof o.audio&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),(!0===o.video||"object"===typeof o.video&&!o.video.deviceId)&&(o.video={deviceId:"default"});const l=TI(o,mR,gR),c=_I(l),u=navigator.mediaDevices.getUserMedia(c);o.audio&&(BI.userMediaPromiseMap.set("audioinput",u),u.catch((()=>BI.userMediaPromiseMap.delete("audioinput")))),o.video&&(BI.userMediaPromiseMap.set("videoinput",u),u.catch((()=>BI.userMediaPromiseMap.delete("videoinput"))));try{const e=yield u;return yield Promise.all(e.getTracks().map((n=>LT(this,void 0,void 0,(function*(){const o="audio"===n.kind;let s,a=o?l.audio:l.video;"boolean"!==typeof a&&a||(a={});const u=o?c.audio:c.video;"boolean"!==typeof u&&(s=u);const d=n.getSettings().deviceId;(null===s||void 0===s?void 0:s.deviceId)&&hI(s.deviceId)!==d?s.deviceId=d:s||(s={deviceId:d});const h=function(e,t,n){switch(e.kind){case"audio":return new _R(e,t,!1,void 0,n);case"video":return new UR(e,t,!1,n);default:throw new d_("unsupported track type: ".concat(e.kind))}}(n,s,t);return h.kind===__.Kind.Video?h.source=__.Source.Camera:h.kind===__.Kind.Audio&&(h.source=__.Source.Microphone),h.mediaStream=e,bI(h)&&i?yield h.setProcessor(i):yI(h)&&r&&(yield h.setProcessor(r)),h})))))}catch(WU){if(!n)throw WU;return dP(Object.assign(Object.assign({},e),{audio:s,video:a}),t)}}))}var hP;!function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"}(hP||(hP={}));class pP extends zT.EventEmitter{get logContext(){var e,t;return Object.assign({},null===(t=null===(e=this.loggerOptions)||void 0===e?void 0:e.loggerContextCb)||void 0===t?void 0:t.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every((e=>e.isEncrypted))}get isAgent(){var e;return(null===(e=this.permissions)||void 0===e?void 0:e.agent)||this.kind===JS.AGENT}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,t,n,i,r,o){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:JS.STANDARD;var a;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=hP.Unknown,this.log=OT,this.log=MT(null!==(a=null===o||void 0===o?void 0:o.loggerName)&&void 0!==a?a:PT.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=t,this.name=n,this.metadata=i,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=s,this._attributes=null!==r&&void 0!==r?r:{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,t]of this.trackPublications)if(t.source===e)return t}getTrackPublicationByName(e){for(const[,t]of this.trackPublications)if(t.trackName===e)return t}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const t=this.getTrackPublication(__.Source.Camera);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}get isMicrophoneEnabled(){var e;const t=this.getTrackPublication(__.Source.Microphone);return!(null===(e=null===t||void 0===t?void 0:t.isMuted)||void 0===e||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(__.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(1e3*Number.parseInt(this.participantInfo.joinedAt.toString())):new Date}updateInfo(e){return!(this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version)&&(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const t=this.metadata!==e,n=this.metadata;this.metadata=e,t&&this.emit(s_.ParticipantMetadataChanged,n)}_setName(e){const t=this.name!==e;this.name=e,t&&this.emit(s_.ParticipantNameChanged,e)}_setAttributes(e){const t=function(e,t){var n;void 0===e&&(e={}),void 0===t&&(t={});const i=[...Object.keys(t),...Object.keys(e)],r={};for(const o of i)e[o]!==t[o]&&(r[o]=null!==(n=t[o])&&void 0!==n?n:"");return r}(this.attributes,e);this._attributes=e,Object.keys(t).length>0&&this.emit(s_.AttributesChanged,t)}setPermissions(e){var t,n,i,r,o,s;const a=this.permissions,l=e.canPublish!==(null===(t=this.permissions)||void 0===t?void 0:t.canPublish)||e.canSubscribe!==(null===(n=this.permissions)||void 0===n?void 0:n.canSubscribe)||e.canPublishData!==(null===(i=this.permissions)||void 0===i?void 0:i.canPublishData)||e.hidden!==(null===(r=this.permissions)||void 0===r?void 0:r.hidden)||e.recorder!==(null===(o=this.permissions)||void 0===o?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some(((e,t)=>{var n;return e!==(null===(n=this.permissions)||void 0===n?void 0:n.canPublishSources[t])}))||e.canSubscribeMetrics!==(null===(s=this.permissions)||void 0===s?void 0:s.canSubscribeMetrics);return this.permissions=e,l&&this.emit(s_.ParticipantPermissionsChanged,a),l}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(s_.IsSpeakingChanged,e))}setConnectionQuality(e){const t=this._connectionQuality;this._connectionQuality=function(e){switch(e){case $S.EXCELLENT:return hP.Excellent;case $S.GOOD:return hP.Good;case $S.POOR:return hP.Poor;case $S.LOST:return hP.Lost;default:return hP.Unknown}}(e),t!==this._connectionQuality&&this.emit(s_.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach((t=>bI(t.track)&&t.track.setAudioContext(e)))}addTrackPublication(e){e.on(l_.Muted,(()=>{this.emit(s_.TrackMuted,e)})),e.on(l_.Unmuted,(()=>{this.emit(s_.TrackUnmuted,e)}));const t=e;switch(t.track&&(t.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case __.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case __.Kind.Video:this.videoTrackPublications.set(e.trackSid,e)}}}class fP extends pP{constructor(e,t,n,i,r){super(e,t,void 0,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=eC.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new dI)},this.handleReconnected=()=>{var e,t;null===(t=null===(e=this.reconnectFuture)||void 0===e?void 0:e.resolve)||void 0===t||t.call(e),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var e,t;this.reconnectFuture&&(this.reconnectFuture.promise.catch((e=>this.log.warn(e.message,this.logContext))),null===(t=null===(e=this.reconnectFuture)||void 0===e?void 0:e.reject)||void 0===t||t.call(e,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.handleSignalRequestResponse=e=>{const{requestId:t,reason:n,message:i}=e,r=this.pendingSignalRequests.get(t);r&&(n!==ST.OK&&r.reject(new g_(i,n)),this.pendingSignalRequests.delete(t))},this.handleDataPacket=e=>{switch(e.value.case){case"rpcResponse":let t=e.value.value,n=null,i=null;"payload"===t.value.case?n=t.value.value:"error"===t.value.case&&(i=kR.fromProto(t.value.value)),this.handleIncomingRpcResponse(t.requestId,n,i);break;case"rpcAck":let r=e.value.value;this.handleIncomingRpcAck(r.requestId)}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map((e=>function(e){var t,n,i;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new dT({participantIdentity:null!==(t=e.participantIdentity)&&void 0!==t?t:"",participantSid:null!==(n=e.participantSid)&&void 0!==n?n:"",allTracks:null!==(i=e.allowAll)&&void 0!==i&&i,trackSids:e.allowedTrackSids||[]})}(e))))},this.onTrackUnmuted=e=>{this.onTrackMuted(e,e.isUpstreamPaused)},this.onTrackMuted=(e,t)=>{void 0===t&&(t=!0),e.sid?this.engine.updateMuteStatus(e.sid,t):this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),DI(e)))},this.onTrackUpstreamPaused=e=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),DI(e))),this.onTrackMuted(e,!0)},this.onTrackUpstreamResumed=e=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),DI(e))),this.onTrackMuted(e,e.isMuted)},this.onTrackFeatureUpdate=e=>{const t=this.audioTrackPublications.get(e.sid);t?this.engine.client.sendUpdateLocalAudioTrack(t.trackSid,t.getTrackFeatures()):this.log.warn("Could not update local audio track settings, missing publication for track ".concat(e.sid),this.logContext)},this.handleSubscribedQualityUpdate=e=>LT(this,void 0,void 0,(function*(){var t,n,i,r,o,s;if(!(null===(o=this.roomOptions)||void 0===o?void 0:o.dynacast))return;const a=this.videoTrackPublications.get(e.trackSid);if(a)if(e.subscribedCodecs.length>0){if(!a.videoTrack)return;const o=yield a.videoTrack.setPublishingCodecs(e.subscribedCodecs);try{for(var l,c=!0,u=BT(o);!(t=(l=yield u.next()).done);c=!0){r=l.value,c=!1;const e=r;M_(e)&&(this.log.debug("publish ".concat(e," for ").concat(a.videoTrack.sid),Object.assign(Object.assign({},this.logContext),DI(a))),yield this.publishAdditionalCodecForTrack(a.videoTrack,e,a.options))}}catch(d){n={error:d}}finally{try{c||t||!(i=u.return)||(yield i.call(u))}finally{if(n)throw n.error}}}else e.subscribedQualities.length>0&&(yield null===(s=a.videoTrack)||void 0===s?void 0:s.setPublishingLayers(e.subscribedQualities));else this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:e.trackSid}))})),this.handleLocalTrackUnpublished=e=>{const t=this.trackPublications.get(e.trackSid);t?this.unpublishTrack(t.track):this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:e.trackSid}))},this.handleTrackEnded=e=>LT(this,void 0,void 0,(function*(){if(e.source===__.Source.ScreenShare||e.source===__.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),DI(e))),this.unpublishTrack(e);else if(e.isUserProvided)yield e.mute();else if(kI(e)||xI(e))try{if(Q_())try{const t=yield null===navigator||void 0===navigator?void 0:navigator.permissions.query({name:e.source===__.Source.Camera?"camera":"microphone"});if(t&&"denied"===t.state)throw this.log.warn("user has revoked access to ".concat(e.source),Object.assign(Object.assign({},this.logContext),DI(e))),t.onchange=()=>{"denied"!==t.state&&(e.isMuted||e.restartTrack(),t.onchange=null)},new Error("GetUserMedia Permission denied")}catch(WU){}e.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),DI(e))),kI(e)?yield e.restartTrack({deviceId:"default"}):yield e.restartTrack())}catch(WU){this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),DI(e))),yield e.mute()}})),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=n,this.roomOptions=i,this.setupEngine(n),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=r}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==eC.NONE}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setupEngine(e){this.engine=e,this.engine.on(a_.RemoteMute,((e,t)=>{const n=this.trackPublications.get(e);n&&n.track&&(t?n.mute():n.unmute())})),this.engine.on(a_.Connected,this.handleReconnected).on(a_.SignalRestarted,this.handleReconnected).on(a_.SignalResumed,this.handleReconnected).on(a_.Restarting,this.handleReconnecting).on(a_.Resuming,this.handleReconnecting).on(a_.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(a_.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(a_.Disconnected,this.handleDisconnected).on(a_.SignalRequestResponse,this.handleSignalRequestResponse).on(a_.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return LT(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({metadata:e})}))}setName(e){return LT(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({name:e})}))}setAttributes(e){return LT(this,void 0,void 0,(function*(){yield this.requestMetadataUpdate({attributes:e})}))}requestMetadataUpdate(e){return LT(this,arguments,void 0,(function(e){var t=this;let{metadata:n,name:i,attributes:r}=e;return function*(){return new Promise(((e,o)=>LT(t,void 0,void 0,(function*(){var t,s;try{let a=!1;const l=yield this.engine.client.sendUpdateLocalMetadata(null!==(t=null!==n&&void 0!==n?n:this.metadata)&&void 0!==t?t:"",null!==(s=null!==i&&void 0!==i?i:this.name)&&void 0!==s?s:"",r),c=performance.now();for(this.pendingSignalRequests.set(l,{resolve:e,reject:e=>{o(e),a=!0},values:{name:i,metadata:n,attributes:r}});performance.now()-c<5e3&&!a;){if((!i||this.name===i)&&(!n||this.metadata===n)&&(!r||Object.entries(r).every((e=>{let[t,n]=e;return this.attributes[t]===n||""===n&&!this.attributes[t]}))))return this.pendingSignalRequests.delete(l),void e();yield U_(50)}o(new g_("Request to update local metadata timed out","TimeoutError"))}catch(WU){WU instanceof Error&&o(WU)}}))))}()}))}setCameraEnabled(e,t,n){return this.setTrackEnabled(__.Source.Camera,e,t,n)}setMicrophoneEnabled(e,t,n){return this.setTrackEnabled(__.Source.Microphone,e,t,n)}setScreenShareEnabled(e,t,n){return this.setTrackEnabled(__.Source.ScreenShare,e,t,n)}setPermissions(e){const t=this.permissions,n=super.setPermissions(e);return n&&t&&this.emit(s_.ParticipantPermissionsChanged,t),n}setE2EEEnabled(e){return LT(this,void 0,void 0,(function*(){this.encryptionType=e?eC.GCM:eC.NONE,yield this.republishAllTracks(void 0,!1)}))}setTrackEnabled(e,t,n,i){return LT(this,void 0,void 0,(function*(){var r,o;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:t})),this.republishPromise&&(yield this.republishPromise);let s=this.getTrackPublication(e);if(t)if(s)yield s.unmute();else{let t;if(this.pendingPublishing.has(e)){const t=yield this.waitForPendingPublicationOfSource(e);return t||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield null===t||void 0===t?void 0:t.unmute(),t}this.pendingPublishing.add(e);try{switch(e){case __.Source.Camera:t=yield this.createTracks({video:null===(r=n)||void 0===r||r});break;case __.Source.Microphone:t=yield this.createTracks({audio:null===(o=n)||void 0===o||o});break;case __.Source.ScreenShare:t=yield this.createScreenTracks(Object.assign({},n));break;default:throw new d_(e)}}catch(WU){throw null===t||void 0===t||t.forEach((e=>{e.stop()})),WU instanceof Error&&this.emit(s_.MediaDevicesError,WU),this.pendingPublishing.delete(e),WU}try{const e=[];for(const r of t)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),DI(r))),e.push(this.publishTrack(r,i));const n=yield Promise.all(e);[s]=n}catch(WU){throw null===t||void 0===t||t.forEach((e=>{e.stop()})),WU}finally{this.pendingPublishing.delete(e)}}else if(!(null===s||void 0===s?void 0:s.track)&&this.pendingPublishing.has(e)&&(s=yield this.waitForPendingPublicationOfSource(e),s||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),s&&s.track)if(e===__.Source.ScreenShare){s=yield this.unpublishTrack(s.track);const e=this.getTrackPublication(__.Source.ScreenShareAudio);e&&e.track&&this.unpublishTrack(e.track)}else yield s.mute();return s}))}enableCameraAndMicrophone(){return LT(this,void 0,void 0,(function*(){if(!this.pendingPublishing.has(__.Source.Camera)&&!this.pendingPublishing.has(__.Source.Microphone)){this.pendingPublishing.add(__.Source.Camera),this.pendingPublishing.add(__.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map((e=>this.publishTrack(e))))}finally{this.pendingPublishing.delete(__.Source.Camera),this.pendingPublishing.delete(__.Source.Microphone)}}}))}createTracks(e){return LT(this,void 0,void 0,(function*(){var t,n;null!==e&&void 0!==e||(e={});const i=TI(e,null===(t=this.roomOptions)||void 0===t?void 0:t.audioCaptureDefaults,null===(n=this.roomOptions)||void 0===n?void 0:n.videoCaptureDefaults);try{const e=yield dP(i,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return e.map((e=>(bI(e)&&(this.microphoneError=void 0,e.setAudioContext(this.audioContext),e.source=__.Source.Microphone,this.emit(s_.AudioStreamAcquired)),yI(e)&&(this.cameraError=void 0,e.source=__.Source.Camera),e)))}catch(GU){throw GU instanceof Error&&(e.audio&&(this.microphoneError=GU),e.video&&(this.cameraError=GU)),GU}}))}createScreenTracks(e){return LT(this,void 0,void 0,(function*(){if(void 0===e&&(e={}),void 0===navigator.mediaDevices.getDisplayMedia)throw new u_("getDisplayMedia not supported");void 0!==e.resolution||G_()||(e.resolution=F_.h1080fps30.resolution);const t=OI(e),n=yield navigator.mediaDevices.getDisplayMedia(t),i=n.getVideoTracks();if(0===i.length)throw new d_("no video track found");const r=new UR(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});r.source=__.Source.ScreenShare,e.contentHint&&(r.mediaStreamTrack.contentHint=e.contentHint);const o=[r];if(n.getAudioTracks().length>0){this.emit(s_.AudioStreamAcquired);const e=new _R(n.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e.source=__.Source.ScreenShareAudio,o.push(e)}return o}))}publishTrack(e,t){return LT(this,void 0,void 0,(function*(){return this.publishOrRepublishTrack(e,t)}))}publishOrRepublishTrack(e,t){return LT(this,arguments,void 0,(function(e,t){var n=this;let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function*(){var r,o,s,a;let l,c;if(kI(e)&&e.setAudioContext(n.audioContext),yield null===(r=n.reconnectFuture)||void 0===r?void 0:r.promise,n.republishPromise&&!i&&(yield n.republishPromise),vI(e)&&n.pendingPublishPromises.has(e)&&(yield n.pendingPublishPromises.get(e)),e instanceof MediaStreamTrack)l=e.getConstraints();else{let t;switch(l=e.constraints,e.source){case __.Source.Microphone:t="audioinput";break;case __.Source.Camera:t="videoinput"}t&&n.activeDeviceMap.has(t)&&(l=Object.assign(Object.assign({},l),{deviceId:n.activeDeviceMap.get(t)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new _R(e,l,!0,n.audioContext,{loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});break;case"video":e=new UR(e,l,!0,{loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});break;default:throw new d_("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:n.roomOptions.loggerName,loggerContextCb:()=>n.logContext});if(n.trackPublications.forEach((t=>{t.track&&t.track===e&&(c=t)})),c)return n.log.warn("track has already been published, skipping",Object.assign(Object.assign({},n.logContext),DI(c))),c;const u="channelCount"in e.mediaStreamTrack.getSettings()&&2===e.mediaStreamTrack.getSettings().channelCount||2===e.mediaStreamTrack.getConstraints().channelCount,d=null!==(o=null===t||void 0===t?void 0:t.forceStereo)&&void 0!==o?o:u;d&&(t||(t={}),void 0===t.dtx&&n.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},n.logContext),DI(e))),void 0===t.red&&n.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),null!==(s=t.dtx)&&void 0!==s||(t.dtx=!1),null!==(a=t.red)&&void 0!==a||(t.red=!1));const h=Object.assign(Object.assign({},n.roomOptions.publishDefaults),t);!function(){const e=x_(),t="17.2";if(e)return"Safari"!==e.name&&"iOS"!==e.os||!!("iOS"===e.os&&e.osVersion&&tI(t,e.osVersion)>=0)||"Safari"===e.name&&tI(t,e.version)>=0}()&&n.roomOptions.e2ee&&(n.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},n.logContext)),h.simulcast=!1),h.source&&(e.source=h.source);const p=new Promise(((t,i)=>LT(n,void 0,void 0,(function*(){try{if(this.engine.client.currentState!==HI.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:DI(e)}));const n=()=>LT(this,void 0,void 0,(function*(){try{const n=yield this.publish(e,h,d);t(n)}catch(WU){i(WU)}}));setTimeout((()=>{this.engine.off(a_.SignalConnected,n),i(new m_("publishing rejected as engine not connected within timeout",408))}),15e3),this.engine.once(a_.SignalConnected,n),this.engine.on(a_.Closing,(()=>{this.engine.off(a_.SignalConnected,n),i(new m_("publishing rejected as engine closed",499))}))}else try{const n=yield this.publish(e,h,d);t(n)}catch(WU){i(WU)}}catch(WU){i(WU)}}))));n.pendingPublishPromises.set(e,p);try{return yield p}catch(WU){throw WU}finally{n.pendingPublishPromises.delete(e)}}()}))}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),DI(e))),!1;const{canPublish:t,canPublishSources:n}=this.permissions;return!(!t||0!==n.length&&!n.map((e=>function(e){switch(e){case BS.CAMERA:return __.Source.Camera;case BS.MICROPHONE:return __.Source.Microphone;case BS.SCREEN_SHARE:return __.Source.ScreenShare;case BS.SCREEN_SHARE_AUDIO:return __.Source.ScreenShareAudio;default:return __.Source.Unknown}}(e))).includes(e.source))||(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),DI(e))),!1)}publish(e,t,n){return LT(this,void 0,void 0,(function*(){var i,r,o,s,a,l,c,u,d,h;if(!this.hasPermissionsToPublish(e))throw new m_("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find((t=>vI(e)&&t.source===e.source))&&e.source!==__.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),DI(e))),t.stopMicTrackOnMute&&bI(e)&&(e.stopOnMute=!0),e.source===__.Source.ScreenShare&&q_()&&(t.simulcast=!1),"av1"!==t.videoCodec||function(){if(!("getCapabilities"in RTCRtpSender))return!1;if(W_())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e)for(const n of e.codecs)if("video/AV1"===n.mimeType){t=!0;break}return t}()||(t.videoCodec=void 0),"vp9"!==t.videoCodec||function(){if(!("getCapabilities"in RTCRtpSender))return!1;if(q_())return!1;if(W_()){const e=x_();if((null===e||void 0===e?void 0:e.version)&&tI(e.version,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e)for(const n of e.codecs)if("video/VP9"===n.mimeType){t=!0;break}return t}()||(t.videoCodec=void 0),void 0===t.videoCodec&&(t.videoCodec=pR),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some((e=>t.videoCodec===MI(e.mime)))||(t.videoCodec=MI(this.enabledPublishVideoCodecs[0].mime)));const p=t.videoCodec;e.on(l_.Muted,this.onTrackMuted),e.on(l_.Unmuted,this.onTrackUnmuted),e.on(l_.Ended,this.handleTrackEnded),e.on(l_.UpstreamPaused,this.onTrackUpstreamPaused),e.on(l_.UpstreamResumed,this.onTrackUpstreamResumed),e.on(l_.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const f=new FC({cid:e.mediaStreamTrack.id,name:t.name,type:__.kindToProto(e.kind),muted:e.isMuted,source:__.sourceToProto(e.source),disableDtx:!(null===(i=t.dtx)||void 0===i||i),encryption:this.encryptionType,stereo:n,disableRed:this.isE2EEEnabled||!(null===(r=t.red)||void 0===r||r),stream:null===t||void 0===t?void 0:t.stream,backupCodecPolicy:null===t||void 0===t?void 0:t.backupCodecPolicy});let m;if(e.kind===__.Kind.Video){let n={width:0,height:0};try{n=yield e.waitForDimensions()}catch(WU){const i=null!==(s=null===(o=this.roomOptions.videoCaptureDefaults)||void 0===o?void 0:o.resolution)&&void 0!==s?s:j_.h720.resolution;n={width:i.width,height:i.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),DI(e)),{dims:n}))}f.width=n.width,f.height=n.height,xI(e)&&(V_(p)&&(e.source===__.Source.ScreenShare&&(t.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),DI(e))))),t.scalabilityMode=null!==(a=t.scalabilityMode)&&void 0!==a?a:"L3T3_KEY"),f.simulcastCodecs=[new LC({codec:p,cid:e.mediaStreamTrack.id})],!0===t.backupCodec&&(t.backupCodec={codec:pR}),t.backupCodec&&p!==t.backupCodec.codec&&f.encryption===eC.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),f.simulcastCodecs.push(new LC({codec:t.backupCodec.codec,cid:""})))),m=DR(e.source===__.Source.ScreenShare,f.width,f.height,t),f.layers=VR(f.width,f.height,m,V_(t.videoCodec))}else e.kind===__.Kind.Audio&&(m=[{maxBitrate:null===(l=t.audioPreset)||void 0===l?void 0:l.maxBitrate,priority:null!==(u=null===(c=t.audioPreset)||void 0===c?void 0:c.priority)&&void 0!==u?u:"high",networkPriority:null!==(h=null===(d=t.audioPreset)||void 0===d?void 0:d.priority)&&void 0!==h?h:"high"}]);if(!this.engine||this.engine.isClosed)throw new p_("cannot publish track when not connected");const g=()=>LT(this,void 0,void 0,(function*(){var n,i,r;if(!this.engine.pcManager)throw new p_("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,t,m),xI(e)&&(null!==(n=t.degradationPreference)&&void 0!==n||(t.degradationPreference=function(e){return e.source===__.Source.ScreenShare||e.constraints.height&&hI(e.constraints.height)>=1080?"maintain-resolution":"balanced"}(e)),e.setDegradationPreference(t.degradationPreference)),m)if(q_()&&e.kind===__.Kind.Audio){let t;for(const n of this.engine.pcManager.publisher.getTransceivers())if(n.sender===e.sender){t=n;break}t&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:t,codec:"opus",maxbr:(null===(i=m[0])||void 0===i?void 0:i.maxBitrate)?m[0].maxBitrate/1e3:0})}else e.codec&&V_(e.codec)&&(null===(r=m[0])||void 0===r?void 0:r.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:f.cid,codec:e.codec,maxbr:m[0].maxBitrate/1e3});yield this.engine.negotiate()}));let v;if(this.enabledPublishVideoCodecs.length>0){v=(yield Promise.all([this.engine.addTrack(f),g()]))[0]}else{let n;if(v=yield this.engine.addTrack(f),v.codecs.forEach((e=>{void 0===n&&(n=e.mimeType)})),n&&e.kind===__.Kind.Video){const i=MI(n);i!==p&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),DI(e)),{codec:i})),t.videoCodec=i,m=DR(e.source===__.Source.ScreenShare,f.width,f.height,t))}yield g()}const b=new uP(e.kind,v,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return b.options=t,e.sid=v.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:m,trackInfo:v})),xI(e)?e.startMonitor(this.engine.client):kI(e)&&e.startMonitor(),this.addTrackPublication(b),this.emit(s_.LocalTrackPublished,b),b}))}get isLocal(){return!0}publishAdditionalCodecForTrack(e,t,n){return LT(this,void 0,void 0,(function*(){var i;if(this.encryptionType!==eC.NONE)return;let r;if(this.trackPublications.forEach((t=>{t.track&&t.track===e&&(r=t)})),!r)throw new d_("track is not published");if(!xI(e))throw new d_("track is not a video track");const o=Object.assign(Object.assign({},null===(i=this.roomOptions)||void 0===i?void 0:i.publishDefaults),n),s=function(e,t,n){var i,r,o,s;if(!n.backupCodec||!0===n.backupCodec||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&OT.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const a=e.mediaStreamTrack.getSettings(),l=null!==(i=a.width)&&void 0!==i?i:null===(r=e.dimensions)||void 0===r?void 0:r.width,c=null!==(o=a.height)&&void 0!==o?o:null===(s=e.dimensions)||void 0===s?void 0:s.height;return e.source===__.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),DR(e.source===__.Source.ScreenShare,l,c,n)}(e,t,o);if(!s)return void this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),DI(e)));const a=e.addSimulcastTrack(t,s);if(!a)return;const l=new FC({cid:a.mediaStreamTrack.id,type:__.kindToProto(e.kind),muted:e.isMuted,source:__.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:a.mediaStreamTrack.id}]});if(l.layers=VR(l.width,l.height,s),!this.engine||this.engine.isClosed)throw new p_("cannot publish track when not connected");const c=(yield Promise.all([this.engine.addTrack(l),(()=>LT(this,void 0,void 0,(function*(){yield this.engine.createSimulcastSender(e,a,o,s),yield this.engine.negotiate()})))()]))[0];this.log.debug("published ".concat(t," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:s,trackInfo:c}))}))}unpublishTrack(e,t){return LT(this,void 0,void 0,(function*(){var n,i;if(vI(e)){const t=this.pendingPublishPromises.get(e);t&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),DI(e))),yield t)}const r=this.getPublicationForTrack(e),o=r?DI(r):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!r||!r.track)return void this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));(e=r.track).off(l_.Muted,this.onTrackMuted),e.off(l_.Unmuted,this.onTrackUnmuted),e.off(l_.Ended,this.handleTrackEnded),e.off(l_.UpstreamPaused,this.onTrackUpstreamPaused),e.off(l_.UpstreamResumed,this.onTrackUpstreamResumed),e.off(l_.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),void 0===t&&(t=null===(i=null===(n=this.roomOptions)||void 0===n?void 0:n.stopLocalTrackOnUnpublish)||void 0===i||i),t?e.stop():e.stopMonitor();let s=!1;const a=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<yR.FAILED&&a)try{for(const e of this.engine.pcManager.publisher.getTransceivers())e.sender===a&&(e.direction="inactive",s=!0);if(this.engine.removeTrack(a)&&(s=!0),xI(e)){for(const[,t]of e.simulcastCodecs)t.sender&&(this.engine.removeTrack(t.sender)&&(s=!0),t.sender=void 0);e.simulcastCodecs.clear()}}catch(WU){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:WU}))}switch(this.trackPublications.delete(r.trackSid),r.kind){case __.Kind.Audio:this.audioTrackPublications.delete(r.trackSid);break;case __.Kind.Video:this.videoTrackPublications.delete(r.trackSid)}return this.emit(s_.LocalTrackUnpublished,r),r.setTrack(void 0),s&&(yield this.engine.negotiate()),r}))}unpublishTracks(e){return LT(this,void 0,void 0,(function*(){return(yield Promise.all(e.map((e=>this.unpublishTrack(e))))).filter((e=>!!e))}))}republishAllTracks(e){return LT(this,arguments,void 0,(function(e){var t=this;let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function*(){t.republishPromise&&(yield t.republishPromise),t.republishPromise=new Promise(((i,r)=>LT(t,void 0,void 0,(function*(){try{const t=[];this.trackPublications.forEach((n=>{n.track&&(e&&(n.options=Object.assign(Object.assign({},n.options),e)),t.push(n))})),yield Promise.all(t.map((e=>LT(this,void 0,void 0,(function*(){const t=e.track;yield this.unpublishTrack(t,!1),!n||t.isMuted||t.source===__.Source.ScreenShare||t.source===__.Source.ScreenShareAudio||!kI(t)&&!xI(t)||t.isUserProvided||(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:e.trackSid})),yield t.restartTrack()),yield this.publishOrRepublishTrack(t,e.options,!0)}))))),i()}catch(t){r(t)}finally{this.republishPromise=void 0}})))),yield t.republishPromise}()}))}publishData(e){return LT(this,arguments,void 0,(function(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function*(){const i=n.reliable?oC.RELIABLE:oC.LOSSY,r=n.destinationIdentities,o=n.topic,s=new rC({kind:i,value:{case:"user",value:new lC({participantIdentity:t.identity,payload:e,destinationIdentities:r,topic:o})}});yield t.engine.sendDataPacket(s,i)}()}))}publishDtmf(e,t){return LT(this,void 0,void 0,(function*(){const n=new rC({kind:oC.RELIABLE,value:{case:"sipDtmf",value:new cC({code:e,digit:t})}});yield this.engine.sendDataPacket(n,oC.RELIABLE)}))}sendChatMessage(e,t){return LT(this,void 0,void 0,(function*(){const n={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:null===t||void 0===t?void 0:t.attachments},i=new rC({value:{case:"chatMessage",value:new hC(Object.assign(Object.assign({},n),{timestamp:kw.parse(n.timestamp)}))}});return yield this.engine.sendDataPacket(i,oC.RELIABLE),this.emit(s_.ChatMessage,n),n}))}editChatMessage(e,t){return LT(this,void 0,void 0,(function*(){const n=Object.assign(Object.assign({},t),{message:e,editTimestamp:Date.now()}),i=new rC({value:{case:"chatMessage",value:new hC(Object.assign(Object.assign({},n),{timestamp:kw.parse(n.timestamp),editTimestamp:kw.parse(n.editTimestamp)}))}});return yield this.engine.sendDataPacket(i,oC.RELIABLE),this.emit(s_.ChatMessage,n),n}))}sendText(e,t){return LT(this,void 0,void 0,(function*(){var n;const i=crypto.randomUUID(),r=(new TextEncoder).encode(e).byteLength,o=null===(n=null===t||void 0===t?void 0:t.attachments)||void 0===n?void 0:n.map((()=>crypto.randomUUID())),s=new Array(o?o.length+1:1).fill(0),a=(e,n)=>{var i;s[n]=e;const r=s.reduce(((e,t)=>e+t),0);null===(i=null===t||void 0===t?void 0:t.onProgress)||void 0===i||i.call(t,r)},l=yield this.streamText({streamId:i,totalSize:r,destinationIdentities:null===t||void 0===t?void 0:t.destinationIdentities,topic:null===t||void 0===t?void 0:t.topic,attachedStreamIds:o,attributes:null===t||void 0===t?void 0:t.attributes});return yield l.write(e),a(1,0),yield l.close(),(null===t||void 0===t?void 0:t.attachments)&&o&&(yield Promise.all(t.attachments.map(((e,n)=>LT(this,void 0,void 0,(function*(){return this._sendFile(o[n],e,{topic:t.topic,mimeType:e.type,onProgress:e=>{a(e,n+1)}})})))))),l.info}))}streamText(e){return LT(this,void 0,void 0,(function*(){var t,n;const i=null!==(t=null===e||void 0===e?void 0:e.streamId)&&void 0!==t?t:crypto.randomUUID(),r={id:i,mimeType:"text/plain",timestamp:Date.now(),topic:null!==(n=null===e||void 0===e?void 0:e.topic)&&void 0!==n?n:"",size:null===e||void 0===e?void 0:e.totalSize,attributes:null===e||void 0===e?void 0:e.attributes},o=new RC({streamId:i,mimeType:r.mimeType,topic:r.topic,timestamp:gI(r.timestamp),totalLength:gI(null===e||void 0===e?void 0:e.totalSize),attributes:r.attributes,contentHeader:{case:"textHeader",value:new _C({version:null===e||void 0===e?void 0:e.version,attachedStreamIds:null===e||void 0===e?void 0:e.attachedStreamIds,replyToStreamId:null===e||void 0===e?void 0:e.replyToStreamId,operationType:"update"===(null===e||void 0===e?void 0:e.type)?EC.UPDATE:EC.CREATE})}}),s=null===e||void 0===e?void 0:e.destinationIdentities,a=new rC({destinationIdentities:s,value:{case:"streamHeader",value:o}});yield this.engine.sendDataPacket(a,oC.RELIABLE);let l=0;const c=this,u=new WritableStream({write(e){return LT(this,void 0,void 0,(function*(){for(const t of function(e,t){const n=[];let i=(new TextEncoder).encode(e);for(;i.length>t;){let e=t;for(;e>0;){const t=i[e];if(void 0!==t&&128!==(192&t))break;e--}n.push(i.slice(0,e)),i=i.slice(e)}return i.length>0&&n.push(i),n}(e,15e3)){yield c.engine.waitForBufferStatusLow(oC.RELIABLE);const e=new PC({content:t,streamId:i,chunkIndex:gI(l)}),n=new rC({destinationIdentities:s,value:{case:"streamChunk",value:e}});yield c.engine.sendDataPacket(n,oC.RELIABLE),l+=1}}))},close(){return LT(this,void 0,void 0,(function*(){const e=new AC({streamId:i}),t=new rC({destinationIdentities:s,value:{case:"streamTrailer",value:e}});yield c.engine.sendDataPacket(t,oC.RELIABLE)}))},abort(e){console.log("Sink error:",e)}});let d=()=>LT(this,void 0,void 0,(function*(){yield h.close()}));c.engine.once(a_.Closing,d);const h=new tP(u,r,(()=>this.engine.off(a_.Closing,d)));return h}))}sendFile(e,t){return LT(this,void 0,void 0,(function*(){const n=crypto.randomUUID();return yield this._sendFile(n,e,t),{id:n}}))}_sendFile(e,t,n){return LT(this,void 0,void 0,(function*(){var i;const r=yield this.streamBytes({streamId:e,totalSize:t.size,name:t.name,mimeType:null!==(i=null===n||void 0===n?void 0:n.mimeType)&&void 0!==i?i:t.type,topic:null===n||void 0===n?void 0:n.topic,destinationIdentities:null===n||void 0===n?void 0:n.destinationIdentities}),o=t.stream().getReader();for(;;){const{done:e,value:t}=yield o.read();if(e)break;yield r.write(t)}return yield r.close(),r.info}))}streamBytes(e){return LT(this,void 0,void 0,(function*(){var t,n,i,r,o;const s=null!==(t=null===e||void 0===e?void 0:e.streamId)&&void 0!==t?t:crypto.randomUUID(),a=null===e||void 0===e?void 0:e.destinationIdentities,l={id:s,mimeType:null!==(n=null===e||void 0===e?void 0:e.mimeType)&&void 0!==n?n:"application/octet-stream",topic:null!==(i=null===e||void 0===e?void 0:e.topic)&&void 0!==i?i:"",timestamp:Date.now(),attributes:null===e||void 0===e?void 0:e.attributes,size:null===e||void 0===e?void 0:e.totalSize,name:null!==(r=null===e||void 0===e?void 0:e.name)&&void 0!==r?r:"unknown"},c=new RC({totalLength:gI(null!==(o=l.size)&&void 0!==o?o:0),mimeType:l.mimeType,streamId:s,topic:l.topic,timestamp:gI(Date.now()),contentHeader:{case:"byteHeader",value:new IC({name:l.name})}}),u=new rC({destinationIdentities:a,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(u,oC.RELIABLE);let d=0;const h=new Kk,p=this.engine,f=this.log,m=new WritableStream({write(e){return LT(this,void 0,void 0,(function*(){const t=yield h.lock();let n=0;try{for(;n<e.byteLength;){const t=e.slice(n,n+15e3);yield p.waitForBufferStatusLow(oC.RELIABLE);const i=new rC({destinationIdentities:a,value:{case:"streamChunk",value:new PC({content:t,streamId:s,chunkIndex:gI(d)})}});yield p.sendDataPacket(i,oC.RELIABLE),d+=1,n+=t.byteLength}}finally{t()}}))},close(){return LT(this,void 0,void 0,(function*(){const e=new AC({streamId:s}),t=new rC({destinationIdentities:a,value:{case:"streamTrailer",value:e}});yield p.sendDataPacket(t,oC.RELIABLE)}))},abort(e){f.error("Sink error:",e)}});return new nP(m,l)}))}performRpc(e){return LT(this,arguments,void 0,(function(e){var t=this;let{destinationIdentity:n,method:i,payload:r,responseTimeout:o=1e4}=e;return function*(){return new Promise(((e,s)=>LT(t,void 0,void 0,(function*(){var t,a,l,c;if(wR(r)>15360)return void s(kR.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));if((null===(a=null===(t=this.engine.latestJoinResponse)||void 0===t?void 0:t.serverInfo)||void 0===a?void 0:a.version)&&tI(null===(c=null===(l=this.engine.latestJoinResponse)||void 0===l?void 0:l.serverInfo)||void 0===c?void 0:c.version,"1.8.0")<0)return void s(kR.builtIn("UNSUPPORTED_SERVER"));const u=crypto.randomUUID();yield this.publishRpcRequest(n,u,i,r,o-2e3);const d=setTimeout((()=>{this.pendingAcks.delete(u),s(kR.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(u),clearTimeout(h)}),2e3);this.pendingAcks.set(u,{resolve:()=>{clearTimeout(d)},participantIdentity:n});const h=setTimeout((()=>{this.pendingResponses.delete(u),s(kR.builtIn("RESPONSE_TIMEOUT"))}),o);this.pendingResponses.set(u,{resolve:(t,n)=>{clearTimeout(h),this.pendingAcks.has(u)&&(console.warn("RPC response received before ack",u),this.pendingAcks.delete(u),clearTimeout(d)),n?s(n):e(null!==t&&void 0!==t?t:"")},participantIdentity:n})}))))}()}))}registerRpcMethod(e,t){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.participantTrackPermissions=t,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const t=this.pendingAcks.get(e);t?(t.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,t,n){const i=this.pendingResponses.get(e);i?(i.resolve(t,n),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,t,n,i,r){return LT(this,void 0,void 0,(function*(){const o=new rC({destinationIdentities:[e],kind:oC.RELIABLE,value:{case:"rpcRequest",value:new pC({id:t,method:n,payload:i,responseTimeoutMs:r,version:1})}});yield this.engine.sendDataPacket(o,oC.RELIABLE)}))}handleParticipantDisconnected(e){for(const[t,{participantIdentity:n}]of this.pendingAcks)n===e&&this.pendingAcks.delete(t);for(const[t,{participantIdentity:n,resolve:i}]of this.pendingResponses)n===e&&(i(null,kR.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(t))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter((e=>"video"===e.mime.split("/")[0].toLowerCase()))}updateInfo(e){return e.sid===this.sid&&(!!super.updateInfo(e)&&(e.tracks.forEach((e=>{var t,n;const i=this.trackPublications.get(e.sid);if(i){const r=i.isMuted||null!==(n=null===(t=i.track)||void 0===t?void 0:t.isUpstreamPaused)&&void 0!==n&&n;r!==e.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),DI(i)),{mutedOnServer:r})),this.engine.client.sendMuteTrack(e.sid,r))}})),!0))}getPublicationForTrack(e){let t;return this.trackPublications.forEach((n=>{const i=n.track;i&&(e instanceof MediaStreamTrack?(kI(i)||xI(i))&&i.mediaStreamTrack===e&&(t=n):e===i&&(t=n))})),t}waitForPendingPublicationOfSource(e){return LT(this,void 0,void 0,(function*(){const t=Date.now();for(;Date.now()<t+1e4;){const t=Array.from(this.pendingPublishPromises.entries()).find((t=>{let[n]=t;return n.source===e}));if(t)return t[1];yield U_(20)}}))}}class mP extends cP{constructor(e,t,n,i){super(e,t.sid,t.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=E_.HIGH,this.handleEnded=e=>{this.setTrack(void 0),this.emit(l_.Ended,e)},this.handleVisibilityChange=e=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(e),this.logContext),this.disabled=!e,this.emitTrackUpdate()},this.handleVideoDimensionsChange=e=>{this.log.debug("adaptivestream video dimensions ".concat(e.width,"x").concat(e.height),this.logContext),this.videoDimensions=e,this.emitTrackUpdate()},this.subscribed=n,this.updateInfo(t)}setSubscribed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new GC({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new vC({participantSid:"",trackSids:[this.trackSid]})]});this.emit(l_.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(t),this.emitPermissionUpdateIfChanged(n)}get subscriptionStatus(){return!1===this.subscribed?cP.SubscriptionStatus.Unsubscribed:super.isSubscribed?cP.SubscriptionStatus.Subscribed:cP.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?cP.PermissionStatus.Allowed:cP.PermissionStatus.NotAllowed}get isSubscribed(){return!1!==this.subscribed&&super.isSubscribed}get isDesired(){return!1!==this.subscribed}get isEnabled(){return!this.disabled}get isLocal(){return!1}setEnabled(e){this.isManualOperationAllowed()&&this.disabled!==!e&&(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){this.isManualOperationAllowed()&&this.currentVideoQuality!==e&&(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var t,n;this.isManualOperationAllowed()&&((null===(t=this.videoDimensions)||void 0===t?void 0:t.width)===e.width&&(null===(n=this.videoDimensions)||void 0===n?void 0:n.height)===e.height||(CI(this.track)&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&CI(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const t=this.subscriptionStatus,n=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(l_.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(l_.VisibilityChanged,this.handleVisibilityChange),i.off(l_.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(l_.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(l_.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(l_.VisibilityChanged,this.handleVisibilityChange),e.on(l_.Ended,this.handleEnded),this.emit(l_.Subscribed,e)),this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t))}setAllowed(e){const t=this.subscriptionStatus,n=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(n),this.emitSubscriptionUpdateIfChanged(t)}setSubscriptionError(e){this.emit(l_.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const t=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):t!==e.muted&&this.emit(e.muted?l_.Muted:l_.Unmuted)}emitSubscriptionUpdateIfChanged(e){const t=this.subscriptionStatus;e!==t&&this.emit(l_.SubscriptionStatusChanged,t,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(l_.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===__.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):!!this.isDesired||(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return CI(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new KC({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):void 0!==this.currentVideoQuality?e.quality=this.currentVideoQuality:e.quality=E_.HIGH,this.emit(l_.UpdateSettings,e)}}class gP extends pP{static fromParticipantInfo(e,t,n){return new gP(e,t.sid,t.identity,t.name,t.metadata,t.attributes,n,t.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,t,n,i,r,o,s){super(t,n||"",i,r,o,s,arguments.length>7&&void 0!==arguments[7]?arguments[7]:JS.STANDARD),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(l_.UpdateSettings,(t=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),DI(e))),this.signalClient.sendUpdateTrackSettings(t)})),e.on(l_.UpdateSubscription,(e=>{e.participantTracks.forEach((e=>{e.participantSid=this.sid})),this.signalClient.sendUpdateSubscription(e)})),e.on(l_.SubscriptionPermissionChanged,(t=>{this.emit(s_.TrackSubscriptionPermissionChanged,e,t)})),e.on(l_.SubscriptionStatusChanged,(t=>{this.emit(s_.TrackSubscriptionStatusChanged,e,t)})),e.on(l_.Subscribed,(t=>{this.emit(s_.TrackSubscribed,t,e)})),e.on(l_.Unsubscribed,(t=>{this.emit(s_.TrackUnsubscribed,t,e)})),e.on(l_.SubscriptionFailed,(t=>{this.emit(s_.TrackSubscriptionFailed,e.trackSid,t)}))}getTrackPublication(e){const t=super.getTrackPublication(e);if(t)return t}getTrackPublicationByName(e){const t=super.getTrackPublicationByName(e);if(t)return t}setVolume(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:__.Source.Microphone;this.volumeMap.set(t,e);const n=this.getTrackPublication(t);n&&n.track&&n.track.setVolume(e)}getVolume(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:__.Source.Microphone;const t=this.getTrackPublication(e);return t&&t.track?t.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,t,n,i,r,o){let s=this.getTrackPublicationBySid(t);if(s||t.startsWith("TR")||this.trackPublications.forEach((t=>{s||e.kind!==t.kind.toString()||(s=t)})),!s)return 0===o?(this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:t})),void this.emit(s_.TrackSubscriptionFailed,t)):(void 0===o&&(o=20),void setTimeout((()=>{this.addSubscribedMediaTrack(e,t,n,i,r,o-1)}),150));if("ended"===e.readyState)return this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),DI(s))),void this.emit(s_.TrackSubscriptionFailed,t);let a;return a="video"===e.kind?new oP(e,t,i,r):new rP(e,t,i,this.audioContext,this.audioOutput),a.source=s.source,a.isMuted=s.isMuted,a.setMediaStream(n),a.start(),s.setTrack(a),this.volumeMap.has(s.source)&&wI(a)&&bI(a)&&a.setVolume(this.volumeMap.get(s.source)),s}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const t=new Map,n=new Map;return e.tracks.forEach((e=>{var i,r;let o=this.getTrackPublicationBySid(e.sid);if(o)o.updateInfo(e);else{const t=__.kindFromProto(e.type);if(!t)return;o=new mP(t,e,null===(i=this.signalClient.connectOptions)||void 0===i?void 0:i.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:null===(r=this.loggerOptions)||void 0===r?void 0:r.loggerName}),o.updateInfo(e),n.set(e.sid,o);const s=Array.from(this.trackPublications.values()).find((e=>e.source===(null===o||void 0===o?void 0:o.source)));s&&o.source!==__.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),Object.assign(Object.assign({},this.logContext),{oldTrack:DI(s),newTrack:DI(o)})),this.addTrackPublication(o)}t.set(e.sid,o)})),this.trackPublications.forEach((e=>{t.has(e.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),DI(e))),this.unpublishTrack(e.trackSid,!0))})),n.forEach((e=>{this.emit(s_.TrackPublished,e)})),!0}unpublishTrack(e,t){const n=this.trackPublications.get(e);if(!n)return;const{track:i}=n;switch(i&&(i.stop(),n.setTrack(void 0)),this.trackPublications.delete(e),n.kind){case __.Kind.Audio:this.audioTrackPublications.delete(e);break;case __.Kind.Video:this.videoTrackPublications.delete(e)}t&&this.emit(s_.TrackUnpublished,n)}setAudioOutput(e){return LT(this,void 0,void 0,(function*(){this.audioOutput=e;const t=[];this.audioTrackPublications.forEach((n=>{var i;bI(n.track)&&wI(n.track)&&t.push(n.track.setSinkId(null!==(i=e.deviceId)&&void 0!==i?i:"default"))})),yield Promise.all(t)}))}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:n})),super.emit(e,...n)}}var vP;!function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting",e.SignalReconnecting="signalReconnecting"}(vP||(vP={}));class bP extends zT.EventEmitter{constructor(e){var t,n,i,r;if(super(),t=this,this.state=vP.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=OT,this.bufferedEvents=[],this.isResuming=!1,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map,this.rpcHandlers=new Map,this.connect=(e,t,n)=>LT(this,void 0,void 0,(function*(){var i;if("undefined"===typeof RTCPeerConnection||!$_()&&!z_())throw X_()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const r=yield this.disconnectLock.lock();if(this.state===vP.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),r(),Promise.resolve();if(this.connectFuture)return r(),this.connectFuture.promise;this.setAndEmitConnectionState(vP.Connecting),(null===(i=this.regionUrlProvider)||void 0===i?void 0:i.getServerUrl().toString())!==e&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Y_(new URL(e))&&(void 0===this.regionUrlProvider?this.regionUrlProvider=new XR(e,t):this.regionUrlProvider.updateToken(t),this.regionUrlProvider.fetchRegionSettings().then((e=>{var t;null===(t=this.regionUrlProvider)||void 0===t||t.setServerReportedRegions(e)})).catch((e=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:e}))})));const o=(i,s,a)=>LT(this,void 0,void 0,(function*(){var l,c;this.abortController&&this.abortController.abort();const u=new AbortController;this.abortController=u,null===r||void 0===r||r();try{yield this.attemptConnection(null!==a&&void 0!==a?a:e,t,n,u),this.abortController=void 0,i()}catch(WU){if(this.regionUrlProvider&&WU instanceof c_&&WU.reason!==n_.Cancelled&&WU.reason!==n_.NotAllowed){let t=null;try{t=yield this.regionUrlProvider.getNextBestRegionUrl(null===(l=this.abortController)||void 0===l?void 0:l.signal)}catch(d){if(d instanceof c_&&(401===d.status||d.reason===n_.Cancelled))return this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),void s(d)}t&&!(null===(c=this.abortController)||void 0===c?void 0:c.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(WU.message,". Retrying with another region: ").concat(t),this.logContext),this.recreateEngine(),yield o(i,s,t)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,fI(WU)),s(WU))}else{let t=VS.UNKNOWN_REASON;WU instanceof c_&&(t=fI(WU)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t),s(WU)}}})),s=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new dI(((e,t)=>{o(e,t,s)}),(()=>{this.clearConnectionFutures()})),this.connectFuture.promise})),this.connectSignal=(e,t,n,i,r,o)=>LT(this,void 0,void 0,(function*(){var s,a,l;const c=yield n.join(e,t,{autoSubscribe:i.autoSubscribe,adaptiveStream:"object"===typeof r.adaptiveStream||r.adaptiveStream,maxRetries:i.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:i.websocketTimeout},o.signal);let u=c.serverInfo;if(u||(u={version:c.serverVersion,region:c.serverRegion}),this.serverInfo=u,this.log.debug("connected to Livekit Server ".concat(Object.entries(u).map((e=>{let[t,n]=e;return"".concat(t,": ").concat(n)})).join(", ")),{room:null===(s=c.room)||void 0===s?void 0:s.name,roomSid:null===(a=c.room)||void 0===a?void 0:a.sid,identity:null===(l=c.participant)||void 0===l?void 0:l.identity}),!u.version)throw new h_("unknown server version");return"0.15.1"===u.version&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),r.dynacast=!1),c})),this.applyJoinResponse=e=>{const t=e.participant;if(this.localParticipant.sid=t.sid,this.localParticipant.identity=t.identity,this.localParticipant.setEnabledPublishCodecs(e.enabledPublishCodecs),this.options.e2ee&&this.e2eeManager)try{this.e2eeManager.setSifTrailer(e.sifTrailer)}catch(WU){this.log.error(WU instanceof Error?WU.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:WU}))}this.handleParticipantUpdates([t,...e.otherParticipants]),e.room&&this.handleRoomUpdate(e.room)},this.attemptConnection=(e,t,n,i)=>LT(this,void 0,void 0,(function*(){var r,o;this.state===vP.Reconnecting||this.isResuming||(null===(r=this.engine)||void 0===r?void 0:r.pendingReconnect)?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),(null===(o=this.regionUrlProvider)||void 0===o?void 0:o.isCloud())&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},bR),n),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const n=yield this.connectSignal(e,t,this.engine,this.connOptions,this.options,i);this.applyJoinResponse(n),this.setupLocalParticipantEvents(),this.emit(o_.SignalConnected)}catch(GU){yield this.engine.close(),this.recreateEngine();const t=new c_("could not establish signal connection",n_.ServerUnreachable);throw GU instanceof Error&&(t.message="".concat(t.message,": ").concat(GU.message)),GU instanceof c_&&(t.reason=GU.reason,t.status=GU.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:GU})),t}if(i.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new c_("Connection attempt aborted",n_.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,i)}catch(WU){throw yield this.engine.close(),this.recreateEngine(),WU}Q_()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Q_()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(vP.Connected),this.emit(o_.Connected),this.registerConnectionReconcile()})),this.disconnect=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return LT(t,[...n],void 0,(function(){var e=this;let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function*(){var n,i,r,o;const s=yield e.disconnectLock.lock();try{if(e.state===vP.Disconnected)return void e.log.debug("already disconnected",e.logContext);e.log.info("disconnect from room",Object.assign({},e.logContext)),(e.state===vP.Connecting||e.state===vP.Reconnecting||e.isResuming)&&(e.log.warn("abort connection attempt",e.logContext),null===(n=e.abortController)||void 0===n||n.abort(),null===(r=null===(i=e.connectFuture)||void 0===i?void 0:i.reject)||void 0===r||r.call(i,new c_("Client initiated disconnect",n_.Cancelled)),e.connectFuture=void 0),(null===(o=e.engine)||void 0===o?void 0:o.client.isDisconnected)||(yield e.engine.client.sendLeave()),e.engine&&(yield e.engine.close()),e.handleDisconnect(t,VS.CLIENT_INITIATED),e.engine=void 0}finally{s()}}()}))},this.onPageLeave=()=>LT(this,void 0,void 0,(function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()})),this.startAudio=()=>LT(this,void 0,void 0,(function*(){const e=[],t=x_();if(t&&"iOS"===t.os){const t="livekit-dummy-audio-el";let n=document.getElementById(t);if(!n){n=document.createElement("audio"),n.id=t,n.autoplay=!0,n.hidden=!0;const e=uI();e.enabled=!0;const i=new MediaStream([e]);n.srcObject=i,document.addEventListener("visibilitychange",(()=>{n&&(n.srcObject=document.hidden?null:i,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))})),document.body.append(n),this.once(o_.Disconnected,(()=>{null===n||void 0===n||n.remove(),n=null}))}e.push(n)}this.remoteParticipants.forEach((t=>{t.audioTrackPublications.forEach((t=>{t.track&&t.track.attachedElements.forEach((t=>{e.push(t)}))}))}));try{yield Promise.all([this.acquireAudioContext(),...e.map((e=>(e.muted=!1,e.play())))]),this.handleAudioPlaybackStarted()}catch(GU){throw this.handleAudioPlaybackFailed(GU),GU}})),this.startVideo=()=>LT(this,void 0,void 0,(function*(){const e=[];for(const t of this.remoteParticipants.values())t.videoTrackPublications.forEach((t=>{var n;null===(n=t.track)||void 0===n||n.attachedElements.forEach((t=>{e.includes(t)||e.push(t)}))}));yield Promise.all(e.map((e=>e.play()))).then((()=>{this.handleVideoPlaybackStarted()})).catch((e=>{"NotAllowedError"===e.name?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)}))})),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const e of this.remoteParticipants.values())this.handleParticipantDisconnected(e.identity,e);this.setAndEmitConnectionState(vP.Reconnecting)&&this.emit(o_.Reconnecting)},this.handleSignalRestarted=e=>LT(this,void 0,void 0,(function*(){this.log.debug("signal reconnected to server, region ".concat(e.serverRegion),Object.assign(Object.assign({},this.logContext),{region:e.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(e);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(t){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:t}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:e.serverRegion}))}catch(n){return}this.setAndEmitConnectionState(vP.Connected),this.emit(o_.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()})),this.handleParticipantUpdates=e=>{e.forEach((e=>{var t;if(e.identity===this.localParticipant.identity)return void this.localParticipant.updateInfo(e);""===e.identity&&(e.identity=null!==(t=this.sidToIdentity.get(e.sid))&&void 0!==t?t:"");let n=this.remoteParticipants.get(e.identity);e.state===YS.DISCONNECTED?this.handleParticipantDisconnected(e.identity,n):n=this.getOrCreateParticipant(e.identity,e)}))},this.handleActiveSpeakersUpdate=e=>{const t=[],n={};e.forEach((e=>{if(n[e.sid]=!0,e.sid===this.localParticipant.sid)this.localParticipant.audioLevel=e.level,this.localParticipant.setIsSpeaking(!0),t.push(this.localParticipant);else{const n=this.getRemoteParticipantBySid(e.sid);n&&(n.audioLevel=e.level,n.setIsSpeaking(!0),t.push(n))}})),n[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach((e=>{n[e.sid]||(e.audioLevel=0,e.setIsSpeaking(!1))})),this.activeSpeakers=t,this.emitWhenConnected(o_.ActiveSpeakersChanged,t)},this.handleSpeakersChanged=e=>{const t=new Map;this.activeSpeakers.forEach((e=>{const n=this.remoteParticipants.get(e.identity);n&&n.sid!==e.sid||t.set(e.sid,e)})),e.forEach((e=>{let n=this.getRemoteParticipantBySid(e.sid);e.sid===this.localParticipant.sid&&(n=this.localParticipant),n&&(n.audioLevel=e.level,n.setIsSpeaking(e.active),e.active?t.set(e.sid,n):t.delete(e.sid))}));const n=Array.from(t.values());n.sort(((e,t)=>t.audioLevel-e.audioLevel)),this.activeSpeakers=n,this.emitWhenConnected(o_.ActiveSpeakersChanged,n)},this.handleStreamStateUpdate=e=>{e.streamStates.forEach((e=>{const t=this.getRemoteParticipantBySid(e.participantSid);if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);if(!n||!n.track)return;const i=__.streamStateFromProto(e.state);i!==n.track.streamState&&(n.track.streamState=i,t.emit(s_.TrackStreamStateChanged,n,n.track.streamState),this.emitWhenConnected(o_.TrackStreamStateChanged,n,n.track.streamState,t))}))},this.handleSubscriptionPermissionUpdate=e=>{const t=this.getRemoteParticipantBySid(e.participantSid);if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);n&&n.setAllowed(e.allowed)},this.handleSubscriptionError=e=>{const t=Array.from(this.remoteParticipants.values()).find((t=>t.trackPublications.has(e.trackSid)));if(!t)return;const n=t.getTrackPublicationBySid(e.trackSid);n&&n.setSubscriptionError(e.err)},this.handleDataPacket=e=>{const t=this.remoteParticipants.get(e.participantIdentity);if("user"===e.value.case)this.handleUserPacket(t,e.value.value,e.kind);else if("transcription"===e.value.case)this.handleTranscription(t,e.value.value);else if("sipDtmf"===e.value.case)this.handleSipDtmf(t,e.value.value);else if("chatMessage"===e.value.case)this.handleChatMessage(t,e.value.value);else if("metrics"===e.value.case)this.handleMetrics(e.value.value,t);else if("streamHeader"===e.value.case)this.handleStreamHeader(e.value.value,e.participantIdentity);else if("streamChunk"===e.value.case)this.handleStreamChunk(e.value.value);else if("streamTrailer"===e.value.case)this.handleStreamTrailer(e.value.value);else if("rpcRequest"===e.value.case){const t=e.value.value;this.handleIncomingRpcRequest(e.participantIdentity,t.id,t.method,t.payload,t.responseTimeoutMs,t.version)}},this.handleUserPacket=(e,t,n)=>{this.emit(o_.DataReceived,t.payload,e,n,t.topic),null===e||void 0===e||e.emit(s_.DataReceived,t.payload,n)},this.handleSipDtmf=(e,t)=>{this.emit(o_.SipDTMFReceived,t,e),null===e||void 0===e||e.emit(s_.SipDTMFReceived,t)},this.bufferedSegments=new Map,this.handleTranscription=(e,t)=>{const n=t.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(t.transcribedParticipantIdentity),i=null===n||void 0===n?void 0:n.trackPublications.get(t.trackId),r=function(e,t){return e.segments.map((e=>{let{id:n,text:i,language:r,startTime:o,endTime:s,final:a}=e;var l;const c=null!==(l=t.get(n))&&void 0!==l?l:Date.now(),u=Date.now();return a?t.delete(n):t.set(n,c),{id:n,text:i,startTime:Number.parseInt(o.toString()),endTime:Number.parseInt(s.toString()),final:a,language:r,firstReceivedTime:c,lastReceivedTime:u}}))}(t,this.transcriptionReceivedTimes);null===i||void 0===i||i.emit(l_.TranscriptionReceived,r),null===n||void 0===n||n.emit(s_.TranscriptionReceived,r,i),this.emit(o_.TranscriptionReceived,r,n,i)},this.handleChatMessage=(e,t)=>{const n=function(e){const{id:t,timestamp:n,message:i,editTimestamp:r}=e;return{id:t,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}(t);this.emit(o_.ChatMessage,n,e)},this.handleMetrics=(e,t)=>{this.emit(o_.MetricsReceived,e,t)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(o_.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=e=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:e})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(o_.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(o_.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(o_.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>LT(this,void 0,void 0,(function*(){var e,t,n;const i=BI.getInstance().previousDevices,r=yield BI.getInstance().getDevices(void 0,!1),o=x_();if("Chrome"===(null===o||void 0===o?void 0:o.name)&&"iOS"!==o.os)for(let a of r){const e=i.find((e=>e.deviceId===a.deviceId));e&&""!==e.label&&e.kind===a.kind&&e.label!==a.label&&"default"===this.getActiveDevice(a.kind)&&this.emit(o_.ActiveDeviceChanged,a.kind,a.deviceId)}const s=["audiooutput","audioinput","videoinput"];for(let a of s){const o=PI(a),s=this.localParticipant.getTrackPublication(o);if(s&&(null===(e=s.track)||void 0===e?void 0:e.isUserProvided))continue;const l=r.filter((e=>e.kind===a)),c=this.getActiveDevice(a);c===(null===(t=i.filter((e=>e.kind===a))[0])||void 0===t?void 0:t.deviceId)&&l.length>0&&(null===(n=l[0])||void 0===n?void 0:n.deviceId)!==c?yield this.switchActiveDevice(a,l[0].deviceId):"audioinput"===a&&!W_()||"videoinput"===a||l.length>0&&!l.find((e=>e.deviceId===this.getActiveDevice(a)))&&(yield this.switchActiveDevice(a,l[0].deviceId))}this.emit(o_.MediaDevicesChanged)})),this.handleRoomUpdate=e=>{const t=this.roomInfo;this.roomInfo=e,t&&t.metadata!==e.metadata&&this.emitWhenConnected(o_.RoomMetadataChanged,e.metadata),(null===t||void 0===t?void 0:t.activeRecording)!==e.activeRecording&&this.emitWhenConnected(o_.RecordingStatusChanged,e.activeRecording)},this.handleConnectionQualityUpdate=e=>{e.updates.forEach((e=>{if(e.participantSid===this.localParticipant.sid)return void this.localParticipant.setConnectionQuality(e.quality);const t=this.getRemoteParticipantBySid(e.participantSid);t&&t.setConnectionQuality(e.quality)}))},this.onLocalParticipantMetadataChanged=e=>{this.emit(o_.ParticipantMetadataChanged,e,this.localParticipant)},this.onLocalParticipantNameChanged=e=>{this.emit(o_.ParticipantNameChanged,e,this.localParticipant)},this.onLocalAttributesChanged=e=>{this.emit(o_.ParticipantAttributesChanged,e,this.localParticipant)},this.onLocalTrackMuted=e=>{this.emit(o_.TrackMuted,e,this.localParticipant)},this.onLocalTrackUnmuted=e=>{this.emit(o_.TrackUnmuted,e,this.localParticipant)},this.onTrackProcessorUpdate=e=>{var t;null===(t=null===e||void 0===e?void 0:e.onPublish)||void 0===t||t.call(e,this)},this.onLocalTrackPublished=e=>LT(this,void 0,void 0,(function*(){var t,n,i,r,o,s;if(null===(t=e.track)||void 0===t||t.on(l_.TrackProcessorUpdate,this.onTrackProcessorUpdate),null===(n=e.track)||void 0===n||n.on(l_.Restarted,this.onLocalTrackRestarted),null===(o=null===(r=null===(i=e.track)||void 0===i?void 0:i.getProcessor())||void 0===r?void 0:r.onPublish)||void 0===o||o.call(r,this),this.emit(o_.LocalTrackPublished,e,this.localParticipant),kI(e.track)){(yield e.track.checkForSilence())&&this.emit(o_.LocalAudioSilenceDetected,e)}const a=yield null===(s=e.track)||void 0===s?void 0:s.getDeviceId(!1),l=AI(e.source);l&&a&&a!==this.localParticipant.activeDeviceMap.get(l)&&(this.localParticipant.activeDeviceMap.set(l,a),this.emit(o_.ActiveDeviceChanged,l,a))})),this.onLocalTrackUnpublished=e=>{var t,n;null===(t=e.track)||void 0===t||t.off(l_.TrackProcessorUpdate,this.onTrackProcessorUpdate),null===(n=e.track)||void 0===n||n.off(l_.Restarted,this.onLocalTrackRestarted),this.emit(o_.LocalTrackUnpublished,e,this.localParticipant)},this.onLocalTrackRestarted=e=>LT(this,void 0,void 0,(function*(){const t=yield e.getDeviceId(!1),n=AI(e.source);n&&t&&t!==this.localParticipant.activeDeviceMap.get(n)&&(this.log.debug("local track restarted, setting ".concat(n," ").concat(t," active"),this.logContext),this.localParticipant.activeDeviceMap.set(n,t),this.emit(o_.ActiveDeviceChanged,n,t))})),this.onLocalConnectionQualityChanged=e=>{this.emit(o_.ConnectionQualityChanged,e,this.localParticipant)},this.onMediaDevicesError=e=>{this.emit(o_.MediaDevicesError,e)},this.onLocalParticipantPermissionsChanged=e=>{this.emit(o_.ParticipantPermissionsChanged,e,this.localParticipant)},this.onLocalChatMessageSent=e=>{this.emit(o_.ChatMessage,e,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},vR),e),this.log=MT(null!==(n=this.options.loggerName)&&void 0!==n?n:PT.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},mR),null===e||void 0===e?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},gR),null===e||void 0===e?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},fR),null===e||void 0===e?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Kk,this.localParticipant=new fP("","",this.engine,this.options,this.rpcHandlers),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",hI(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",hI(this.options.audioCaptureDefaults.deviceId)),(null===(i=this.options.audioOutput)||void 0===i?void 0:i.deviceId)&&this.switchActiveDevice("audiooutput",hI(this.options.audioOutput.deviceId)).catch((e=>this.log.warn("Could not set audio output: ".concat(e.message),this.logContext))),this.options.e2ee&&this.setupE2EE(),Q_()){const e=new AbortController;null===(r=navigator.mediaDevices)||void 0===r||r.addEventListener("devicechange",this.handleDeviceChange,{signal:e.signal}),bP.cleanupRegistry&&bP.cleanupRegistry.register(this,(()=>{e.abort()}))}}registerTextStreamHandler(e,t){if(this.textStreamHandlers.has(e))throw new TypeError('A text stream handler for topic "'.concat(e,'" has already been set.'));this.textStreamHandlers.set(e,t)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,t){if(this.byteStreamHandlers.has(e))throw new TypeError('A byte stream handler for topic "'.concat(e,'" has already been set.'));this.byteStreamHandlers.set(e,t)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}registerRpcMethod(e,t){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,t)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}handleIncomingRpcRequest(e,t,n,i,r,o){return LT(this,void 0,void 0,(function*(){if(yield this.engine.publishRpcAck(e,t),1!==o)return void(yield this.engine.publishRpcResponse(e,t,null,kR.builtIn("UNSUPPORTED_VERSION")));const s=this.rpcHandlers.get(n);if(!s)return void(yield this.engine.publishRpcResponse(e,t,null,kR.builtIn("UNSUPPORTED_METHOD")));let a=null,l=null;try{const o=yield s({requestId:t,callerIdentity:e,payload:i,responseTimeout:r});wR(o)>15360?(a=kR.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(n))):l=o}catch(c){c instanceof kR?a=c:(console.warn("Uncaught error returned by RPC handler for ".concat(n,". Returning APPLICATION_ERROR instead."),c),a=kR.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,t,l,a)}))}setE2EEEnabled(e){return LT(this,void 0,void 0,(function*(){if(!this.e2eeManager)throw Error("e2ee not configured, please set e2ee settings within the room options");yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),""!==this.localParticipant.identity&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity)}))}setupE2EE(){var e;this.options.e2ee&&("e2eeManager"in this.options.e2ee?this.e2eeManager=this.options.e2ee.e2eeManager:this.e2eeManager=new LI(this.options.e2ee),this.e2eeManager.on(YE.ParticipantEncryptionStatusChanged,((e,t)=>{(function(e){return e.isLocal})(t)&&(this.isE2EEEnabled=e),this.emit(o_.ParticipantEncryptionStatusChanged,e,t)})),this.e2eeManager.on(YE.EncryptionError,(e=>this.emit(o_.EncryptionError,e))),null===(e=this.e2eeManager)||void 0===e||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:null===(e=this.roomInfo)||void 0===e?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.activeRecording)&&void 0!==t&&t}getSid(){return LT(this,void 0,void 0,(function*(){return this.state===vP.Disconnected?"":this.roomInfo&&""!==this.roomInfo.sid?this.roomInfo.sid:new Promise(((e,t)=>{const n=t=>{""!==t.sid&&(this.engine.off(a_.RoomUpdate,n),e(t.sid))};this.engine.on(a_.RoomUpdate,n),this.once(o_.Disconnected,(()=>{this.engine.off(a_.RoomUpdate,n),t("Room disconnected before room server id was available")}))}))}))}get name(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.name)&&void 0!==t?t:""}get metadata(){var e;return null===(e=this.roomInfo)||void 0===e?void 0:e.metadata}get numParticipants(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numParticipants)&&void 0!==t?t:0}get numPublishers(){var e,t;return null!==(t=null===(e=this.roomInfo)||void 0===e?void 0:e.numPublishers)&&void 0!==t?t:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new KR(this.options),this.engine.on(a_.ParticipantUpdate,this.handleParticipantUpdates).on(a_.RoomUpdate,this.handleRoomUpdate).on(a_.SpeakersChanged,this.handleSpeakersChanged).on(a_.StreamStateChanged,this.handleStreamStateUpdate).on(a_.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(a_.SubscriptionError,this.handleSubscriptionError).on(a_.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(a_.MediaTrackAdded,((e,t,n)=>{this.onTrackAdded(e,t,n)})).on(a_.Disconnected,(e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)})).on(a_.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(a_.DataPacketReceived,this.handleDataPacket).on(a_.Resuming,(()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(vP.SignalReconnecting)&&this.emit(o_.SignalReconnecting)})).on(a_.Resumed,(()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(vP.Connected)&&this.emit(o_.Reconnected)})).on(a_.SignalResumed,(()=>{this.bufferedEvents=[],(this.state===vP.Reconnecting||this.isResuming)&&this.sendSyncState()})).on(a_.Restarting,this.handleRestarting).on(a_.SignalRestarted,this.handleSignalRestarted).on(a_.Offline,(()=>{this.setAndEmitConnectionState(vP.Reconnecting)&&this.emit(o_.Reconnecting)})).on(a_.DCBufferStatusChanged,((e,t)=>{this.emit(o_.DCBufferStatusChanged,e,t)})).on(a_.LocalTrackSubscribed,(e=>{const t=this.localParticipant.getTrackPublications().find((t=>{let{trackSid:n}=t;return n===e}));t?(this.localParticipant.emit(s_.LocalTrackSubscribed,t),this.emitWhenConnected(o_.LocalTrackSubscribed,t,this.localParticipant)):this.log.warn("could not find local track subscription for subscribed event",this.logContext)})),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return BI.getInstance().getDevices(e,t)}prepareConnection(e,t){return LT(this,void 0,void 0,(function*(){if(this.state===vP.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Y_(new URL(e))&&t){this.regionUrlProvider=new XR(e,t);const n=yield this.regionUrlProvider.getNextBestRegionUrl();n&&this.state===vP.Disconnected&&(this.regionUrl=n,yield fetch(pI(n),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(n),this.logContext))}else yield fetch(pI(e),{method:"HEAD"})}catch(WU){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:WU}))}}}))}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,t){return LT(this,void 0,void 0,(function*(){let n,i=()=>{};switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":n=new gT({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":n=new gT({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":n=new gT({scenario:{case:"serverLeave",value:!0}});break;case"migration":n=new gT({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>LT(this,void 0,void 0,(function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")})),n=new gT({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>LT(this,void 0,void 0,(function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")})),n=new gT({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":n=new gT({scenario:{case:"switchCandidateProtocol",value:"force-tls"===e?2:1}}),i=()=>LT(this,void 0,void 0,(function*(){const e=this.engine.client.onLeave;e&&e(new YC({reason:VS.CLIENT_INITIATED,action:JC.RECONNECT}))}));break;case"subscriber-bandwidth":if(void 0===t||"number"!==typeof t)throw new Error("subscriber-bandwidth requires a number as argument");n=new gT({scenario:{case:"subscriberBandwidth",value:gI(t)}});break;case"leave-full-reconnect":n=new gT({scenario:{case:"leaveRequestFullReconnect",value:!0}})}n&&(yield this.engine.client.sendSimulateScenario(n),yield i())}))}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,t){return LT(this,arguments,void 0,(function(e,t){var n=this;let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function*(){var r,o,s,a,l,c,u,d;let h=!0,p=!1;const f=i?{exact:t}:t;if("audioinput"===e){p=0===n.localParticipant.audioTrackPublications.size;const t=null!==(r=n.getActiveDevice(e))&&void 0!==r?r:n.options.audioCaptureDefaults.deviceId;n.options.audioCaptureDefaults.deviceId=f;const i=Array.from(n.localParticipant.audioTrackPublications.values()).filter((e=>e.source===__.Source.Microphone));try{h=(yield Promise.all(i.map((e=>{var t;return null===(t=e.audioTrack)||void 0===t?void 0:t.setDeviceId(f)})))).every((e=>!0===e))}catch(WU){throw n.options.audioCaptureDefaults.deviceId=t,WU}}else if("videoinput"===e){p=0===n.localParticipant.videoTrackPublications.size;const t=null!==(o=n.getActiveDevice(e))&&void 0!==o?o:n.options.videoCaptureDefaults.deviceId;n.options.videoCaptureDefaults.deviceId=f;const i=Array.from(n.localParticipant.videoTrackPublications.values()).filter((e=>e.source===__.Source.Camera));try{h=(yield Promise.all(i.map((e=>{var t;return null===(t=e.videoTrack)||void 0===t?void 0:t.setDeviceId(f)})))).every((e=>!0===e))}catch(WU){throw n.options.videoCaptureDefaults.deviceId=t,WU}}else if("audiooutput"===e){if(!H_()&&!n.options.webAudioMix||n.options.webAudioMix&&n.audioContext&&!("setSinkId"in n.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");n.options.webAudioMix&&(t=null!==(s=yield BI.getInstance().normalizeDeviceId("audiooutput",t))&&void 0!==s?s:""),null!==(a=(d=n.options).audioOutput)&&void 0!==a||(d.audioOutput={});const i=null!==(l=n.getActiveDevice(e))&&void 0!==l?l:n.options.audioOutput.deviceId;n.options.audioOutput.deviceId=t;try{n.options.webAudioMix&&(null===(c=n.audioContext)||void 0===c||c.setSinkId(t)),yield Promise.all(Array.from(n.remoteParticipants.values()).map((e=>e.setAudioOutput({deviceId:t}))))}catch(WU){throw n.options.audioOutput.deviceId=i,WU}}return(p||"audiooutput"===e)&&(n.localParticipant.activeDeviceMap.set(e,"audiooutput"===e&&(null===(u=n.options.audioOutput)||void 0===u?void 0:u.deviceId)||t),n.emit(o_.ActiveDeviceChanged,e,t)),h}()}))}setupLocalParticipantEvents(){this.localParticipant.on(s_.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(s_.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(s_.AttributesChanged,this.onLocalAttributesChanged).on(s_.TrackMuted,this.onLocalTrackMuted).on(s_.TrackUnmuted,this.onLocalTrackUnmuted).on(s_.LocalTrackPublished,this.onLocalTrackPublished).on(s_.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(s_.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(s_.MediaDevicesError,this.onMediaDevicesError).on(s_.AudioStreamAcquired,this.startAudio).on(s_.ChatMessage,this.onLocalChatMessageSent).on(s_.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;null===(e=this.engine)||void 0===e||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,t,n){if(this.state===vP.Connecting||this.state===vP.Reconnecting){const i=()=>{this.onTrackAdded(e,t,n),r()},r=()=>{this.off(o_.Reconnected,i),this.off(o_.Connected,i),this.off(o_.Disconnected,r)};return this.once(o_.Reconnected,i),this.once(o_.Connected,i),void this.once(o_.Disconnected,r)}if(this.state===vP.Disconnected)return void this.log.warn("skipping incoming track after Room disconnected",this.logContext);if("ended"===e.readyState)return void this.log.info("skipping incoming track as it already ended",this.logContext);const i=function(e){const t=e.split("|");return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}(t.id),r=i[0];let o=i[1],s=e.id;if(o&&o.startsWith("TR")&&(s=o),r===this.localParticipant.sid)return void this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);const a=Array.from(this.remoteParticipants.values()).find((e=>e.sid===r));if(!a)return void this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(r),this.logContext);let l;this.options.adaptiveStream&&(l="object"===typeof this.options.adaptiveStream?this.options.adaptiveStream:{}),a.addSubscribedMediaTrack(e,s,t,n,l)}handleDisconnect(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0;var n;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.state!==vP.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach((e=>{e.trackPublications.forEach((t=>{e.unpublishTrack(t.trackSid)}))})),this.localParticipant.trackPublications.forEach((t=>{var n,i,r;t.track&&this.localParticipant.unpublishTrack(t.track,e),e?(null===(n=t.track)||void 0===n||n.detach(),null===(i=t.track)||void 0===i||i.stop()):null===(r=t.track)||void 0===r||r.stopMonitor()})),this.localParticipant.off(s_.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(s_.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(s_.AttributesChanged,this.onLocalAttributesChanged).off(s_.TrackMuted,this.onLocalTrackMuted).off(s_.TrackUnmuted,this.onLocalTrackUnmuted).off(s_.LocalTrackPublished,this.onLocalTrackPublished).off(s_.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(s_.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(s_.MediaDevicesError,this.onMediaDevicesError).off(s_.AudioStreamAcquired,this.startAudio).off(s_.ChatMessage,this.onLocalChatMessageSent).off(s_.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&"boolean"===typeof this.options.webAudioMix&&(this.audioContext.close(),this.audioContext=void 0),Q_()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),null===(n=navigator.mediaDevices)||void 0===n||n.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(vP.Disconnected),this.emit(o_.Disconnected,t)}}}handleParticipantDisconnected(e,t){var n;this.remoteParticipants.delete(e),t&&(t.trackPublications.forEach((e=>{t.unpublishTrack(e.trackSid,!0)})),this.emit(o_.ParticipantDisconnected,t),null===(n=this.localParticipant)||void 0===n||n.handleParticipantDisconnected(t.identity))}handleStreamHeader(e,t){return LT(this,void 0,void 0,(function*(){var n;if("byteHeader"===e.contentHeader.case){const i=this.byteStreamHandlers.get(e.topic);if(!i)return void this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);let r;const o={id:e.streamId,name:null!==(n=e.contentHeader.value.name)&&void 0!==n?n:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:mI(e.timestamp),attributes:e.attributes},s=new ReadableStream({start:t=>{r=t,this.byteStreamControllers.set(e.streamId,{info:o,controller:r,startTime:Date.now()})}});i(new JR(o,s,mI(e.totalLength)),{identity:t})}else if("textHeader"===e.contentHeader.case){const n=this.textStreamHandlers.get(e.topic);if(!n)return void this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);let i;const r={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes},o=new ReadableStream({start:t=>{i=t,this.textStreamControllers.set(e.streamId,{info:r,controller:i,startTime:Date.now()})}});n(new ZR(r,o,mI(e.totalLength)),{identity:t})}}))}handleStreamChunk(e){const t=this.byteStreamControllers.get(e.streamId);t&&e.content.length>0&&t.controller.enqueue(e);const n=this.textStreamControllers.get(e.streamId);n&&e.content.length>0&&n.controller.enqueue(e)}handleStreamTrailer(e){const t=this.textStreamControllers.get(e.streamId);t&&(t.info.attributes=Object.assign(Object.assign({},t.info.attributes),e.attributes),t.controller.close(),this.textStreamControllers.delete(e.streamId));const n=this.byteStreamControllers.get(e.streamId);n&&(n.info.attributes=Object.assign(Object.assign({},n.info.attributes),e.attributes),n.controller.close(),this.byteStreamControllers.delete(e.streamId))}acquireAudioContext(){return LT(this,void 0,void 0,(function*(){var e,t;if("boolean"!==typeof this.options.webAudioMix&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:this.audioContext&&"closed"!==this.audioContext.state||(this.audioContext=null!==(e=RI())&&void 0!==e?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach((e=>e.setAudioContext(this.audioContext))),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&"suspended"===this.audioContext.state)try{yield Promise.race([this.audioContext.resume(),U_(200)])}catch(WU){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:WU}))}const n="running"===(null===(t=this.audioContext)||void 0===t?void 0:t.state);n!==this.canPlaybackAudio&&(this.audioEnabled=n,this.emit(o_.AudioPlaybackStatusChanged,n))}))}createParticipant(e,t){var n;let i;return i=t?gP.fromParticipantInfo(this.engine.client,t,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):new gP(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&i.setAudioContext(this.audioContext),(null===(n=this.options.audioOutput)||void 0===n?void 0:n.deviceId)&&i.setAudioOutput(this.options.audioOutput).catch((e=>this.log.warn("Could not set audio output: ".concat(e.message),this.logContext))),i}getOrCreateParticipant(e,t){if(this.remoteParticipants.has(e)){const n=this.remoteParticipants.get(e);if(t){n.updateInfo(t)&&this.sidToIdentity.set(t.sid,t.identity)}return n}const n=this.createParticipant(e,t);return this.remoteParticipants.set(e,n),this.sidToIdentity.set(t.sid,t.identity),this.emitWhenConnected(o_.ParticipantConnected,n),n.on(s_.TrackPublished,(e=>{this.emitWhenConnected(o_.TrackPublished,e,n)})).on(s_.TrackSubscribed,((e,t)=>{e.kind===__.Kind.Audio?(e.on(l_.AudioPlaybackStarted,this.handleAudioPlaybackStarted),e.on(l_.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):e.kind===__.Kind.Video&&(e.on(l_.VideoPlaybackFailed,this.handleVideoPlaybackFailed),e.on(l_.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(o_.TrackSubscribed,e,t,n)})).on(s_.TrackUnpublished,(e=>{this.emit(o_.TrackUnpublished,e,n)})).on(s_.TrackUnsubscribed,((e,t)=>{this.emit(o_.TrackUnsubscribed,e,t,n)})).on(s_.TrackMuted,(e=>{this.emitWhenConnected(o_.TrackMuted,e,n)})).on(s_.TrackUnmuted,(e=>{this.emitWhenConnected(o_.TrackUnmuted,e,n)})).on(s_.ParticipantMetadataChanged,(e=>{this.emitWhenConnected(o_.ParticipantMetadataChanged,e,n)})).on(s_.ParticipantNameChanged,(e=>{this.emitWhenConnected(o_.ParticipantNameChanged,e,n)})).on(s_.AttributesChanged,(e=>{this.emitWhenConnected(o_.ParticipantAttributesChanged,e,n)})).on(s_.ConnectionQualityChanged,(e=>{this.emitWhenConnected(o_.ConnectionQualityChanged,e,n)})).on(s_.ParticipantPermissionsChanged,(e=>{this.emitWhenConnected(o_.ParticipantPermissionsChanged,e,n)})).on(s_.TrackSubscriptionStatusChanged,((e,t)=>{this.emitWhenConnected(o_.TrackSubscriptionStatusChanged,e,t,n)})).on(s_.TrackSubscriptionFailed,((e,t)=>{this.emit(o_.TrackSubscriptionFailed,e,n,t)})).on(s_.TrackSubscriptionPermissionChanged,((e,t)=>{this.emitWhenConnected(o_.TrackSubscriptionPermissionChanged,e,t,n)})),t&&n.updateInfo(t),n}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce(((e,t)=>(e.push(...t.getTrackPublications()),e)),[]),t=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,t)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const t of e.videoTrackPublications.values())t.isSubscribed&&SI(t)&&t.emitTrackUpdate()}getRemoteParticipantBySid(e){const t=this.sidToIdentity.get(e);if(t)return this.remoteParticipants.get(t)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=C_.setInterval((()=>{this.engine&&!this.engine.isClosed&&this.engine.verifyTransport()?e=0:(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,VS.STATE_MISMATCH)))}),4e3)}clearConnectionReconcile(){this.connectionReconcileInterval&&C_.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e!==this.state&&(this.state=e,this.emit(o_.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach((e=>{let[t,n]=e;this.emit(t,...n)})),this.bufferedEvents=[]}emitWhenConnected(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(this.state===vP.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,n]);else if(this.state===vP.Connected)return this.emit(e,...n);return!1}simulateParticipants(e){return LT(this,void 0,void 0,(function*(){var t,n;const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),r=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new GS({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:kw.parse((new Date).getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new XS({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(o_.SignalConnected),this.emit(o_.Connected),this.setAndEmitConnectionState(vP.Connected),i.video){const e=new uP(__.Kind.Video,new nC({source:BS.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:FS.AUDIO,name:"video-dummy"}),new UR(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:cI(160*(null!==(t=r.aspectRatios[0])&&void 0!==t?t:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(e),this.localParticipant.emit(s_.LocalTrackPublished,e)}if(i.audio){const e=new uP(__.Kind.Audio,new nC({source:BS.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:FS.AUDIO}),new _R(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:uI(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(e),this.localParticipant.emit(s_.LocalTrackPublished,e)}for(let e=0;e<r.count-1;e+=1){let t=new XS({sid:Math.floor(1e4*Math.random()).toString(),identity:"simulated-".concat(e),state:YS.ACTIVE,tracks:[],joinedAt:kw.parse(Date.now())});const i=this.getOrCreateParticipant(t.identity,t);if(r.video){const o=cI(160*(null!==(n=r.aspectRatios[e%r.aspectRatios.length])&&void 0!==n?n:1),160,!1,!0),s=new nC({source:BS.CAMERA,sid:Math.floor(1e4*Math.random()).toString(),type:FS.AUDIO});i.addSubscribedMediaTrack(o,s.sid,new MediaStream([o]),new RTCRtpReceiver),t.tracks=[...t.tracks,s]}if(r.audio){const e=uI(),n=new nC({source:BS.MICROPHONE,sid:Math.floor(1e4*Math.random()).toString(),type:FS.AUDIO});i.addSubscribedMediaTrack(e,n.sid,new MediaStream([e]),new RTCRtpReceiver),t.tracks=[...t.tracks,n]}i.updateInfo(t)}}))}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e!==o_.ActiveSpeakersChanged&&e!==o_.TranscriptionReceived){const t=yP(n).filter((e=>void 0!==e));this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:t}))}return super.emit(e,...n)}}function yP(e){return e.map((e=>{if(e)return Array.isArray(e)?yP(e):"object"===typeof e?"logContext"in e?e.logContext:void 0:e}))}var xP;bP.cleanupRegistry="undefined"!==typeof FinalizationRegistry&&new FinalizationRegistry((e=>{e()})),function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"}(xP||(xP={}));zT.EventEmitter;zT.EventEmitter;new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);Math.min,Math.max,Math.round,Math.floor;typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;function kP(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wP,SP={exports:{}},CP=SP.exports;var TP=(wP||(wP=1,function(e){!function(t,n){e.exports?e.exports=n():t.log=n()}(CP,(function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],r={},o=null;function s(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch{return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(){for(var n=this.getLevel(),r=0;r<i.length;r++){var o=i[r];this[o]=r<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function c(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function u(i,r,o){return function(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?a:void 0!==console[i]?s(console,i):void 0!==console.log?s(console,"log"):e)}(i)||c.apply(this,arguments)}function d(e,n){var s,a,c,d=this,h="loglevel";function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch{}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(h),r=n.indexOf(i+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+i.length+1))[1])}catch{}return void 0===d.levels[e]&&(e=void 0),e}}function f(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return c??a??s},d.setLevel=function(e,n){return c=f(e),!1!==n&&function(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=n)}catch{}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch{}}}(c),l.call(d)},d.setDefaultLevel=function(e){a=f(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){c=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch{}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}(),l.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(s=f(o.getLevel())),l.call(d),o===d)for(var e in r)r[e].rebuild()},s=f(o?o.getLevel():"WARN");var m=p();null!=m&&(c=f(m)),l.call(d)}(o=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new d(e,o.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return r},o.default=o,o}))}(SP)),SP.exports);const EP=kP(TP);var _P=function(e,t){return(_P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function IP(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}_P(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function RP(e,t,n,i){return new(n||(n=Promise))((function(r,o){function s(e){try{l(i.next(e))}catch(Sd){o(Sd)}}function a(e){try{l(i.throw(e))}catch(Sd){o(Sd)}}function l(e){e.done?r(e.value):function(e){return e instanceof n?e:new n((function(t){t(e)}))}(e.value).then(s,a)}l((i=i.apply(e,t||[])).next())}))}function PP(e,t){var n,i,r,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(o=0)),o;)try{if(n=1,i&&(r=2&a[0]?i.return:a[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,a[1])).done)return r;switch(i=0,r&&(a=[2&a[0],r.value]),a[0]){case 0:case 1:r=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(r=(r=o.trys).length>0&&r[r.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!r||a[1]>r[0]&&a[1]<r[3])){o.label=a[1];break}if(6===a[0]&&o.label<r[1]){o.label=r[1],r=a;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(a);break}r[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(l){a=[6,l],i=0}finally{n=r=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}function AP(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],i=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function OP(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,r,o=n.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){r={error:a}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function MP(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function NP(e){return this instanceof NP?(this.v=e,this):new NP(e)}function DP(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(e,t||[]),o=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",(function(e){return function(t){return Promise.resolve(t).then(e,c)}})),i[Symbol.asyncIterator]=function(){return this},i;function s(e,t){r[e]&&(i[e]=function(t){return new Promise((function(n,i){o.push([e,t,n,i])>1||a(e,t)}))},t&&(i[e]=t(i[e])))}function a(e,t){try{!function(e){e.value instanceof NP?Promise.resolve(e.value.v).then(l,c):u(o[0][2],e)}(r[e](t))}catch(rm){u(o[0][3],rm)}}function l(e){a("next",e)}function c(e){a("throw",e)}function u(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function jP(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=AP(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(n){t[n]=e[n]&&function(t){return new Promise((function(i,r){(function(e,t,n,i){Promise.resolve(i).then((function(t){e({value:t,done:n})}),t)})(i,r,(t=e[n](t)).done,t.value)}))}}}function LP(e){return"function"==typeof e}function FP(e){var t=e((function(e){Error.call(e),e.stack=(new Error).stack}));return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var BP=FP((function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}}));function UP(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var $P=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,t,n,i,r;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=AP(o),a=s.next();!a.done;a=s.next()){a.value.remove(this)}}catch(rm){e={error:rm}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var l=this.initialTeardown;if(LP(l))try{l()}catch(rm){r=rm instanceof BP?rm.errors:[rm]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var u=AP(c),d=u.next();!d.done;d=u.next()){var h=d.value;try{HP(h)}catch(rm){r=r??[],rm instanceof BP?r=MP(MP([],OP(r)),OP(rm.errors)):r.push(rm)}}}catch(rm){n={error:rm}}finally{try{d&&!d.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}}if(r)throw new BP(r)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)HP(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(t)}},e.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},e.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},e.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&UP(t,e)},e.prototype.remove=function(t){var n=this._finalizers;n&&UP(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),zP=$P.EMPTY;function VP(e){return e instanceof $P||e&&"closed"in e&&LP(e.remove)&&LP(e.add)&&LP(e.unsubscribe)}function HP(e){LP(e)?e():e.unsubscribe()}var qP=void 0,WP={setTimeout:function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setTimeout.apply(void 0,MP([e,t],OP(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function GP(e){WP.setTimeout((function(){throw e}))}function KP(){}function QP(e){e()}var XP=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,VP(t)&&t.add(n)):n.destination=eA,n}return IP(t,e),t.create=function(e,t,n){return new JP(e,t,n)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}($P),YP=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(n){ZP(n)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(n){ZP(n)}else ZP(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(t){ZP(t)}},e}(),JP=function(e){function t(t,n,i){var r,o=e.call(this)||this;return r=LP(t)||!t?{next:t??void 0,error:n??void 0,complete:i??void 0}:t,o.destination=new YP(r),o}return IP(t,e),t}(XP);function ZP(e){GP(e)}var eA={closed:!0,next:KP,error:function(e){throw e},complete:KP},tA="function"==typeof Symbol&&Symbol.observable||"@@observable";function nA(e){return e}var iA=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var i=this,r=function(e){return e&&e instanceof XP||function(e){return e&&LP(e.next)&&LP(e.error)&&LP(e.complete)}(e)&&VP(e)}(e)?e:new JP(e,t,n);return QP((function(){var e=i,t=e.operator,n=e.source;r.add(t?t.call(r,n):n?i._subscribe(r):i._trySubscribe(r))})),r},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=rA(t))((function(t,i){var r=new JP({next:function(t){try{e(t)}catch(n){i(n),r.unsubscribe()}},error:i,complete:t});n.subscribe(r)}))},e.prototype._subscribe=function(e){var t;return null===(t=this.source)||void 0===t?void 0:t.subscribe(e)},e.prototype[tA]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(e){return 0===e.length?nA:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=rA(e))((function(e,n){var i;t.subscribe((function(e){return i=e}),(function(e){return n(e)}),(function(){return e(i)}))}))},e.create=function(t){return new e(t)},e}();function rA(e){var t;return null!==(t=e??qP)&&void 0!==t?t:Promise}function oA(e){return function(t){if(function(e){return LP(null==e?void 0:e.lift)}(t))return t.lift((function(t){try{return e(t,this)}catch(n){this.error(n)}}));throw new TypeError("Unable to lift unknown Observable type")}}function sA(e,t,n,i,r){return new aA(e,t,n,i,r)}var aA=function(e){function t(t,n,i,r,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(i){t.error(i)}}:e.prototype._next,a._error=r?function(e){try{r(e)}catch(n){t.error(n)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return IP(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&(null===(t=this.onFinalize)||void 0===t||t.call(this))}},t}(XP),lA=FP((function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}})),cA=function(e){function t(){var t=e.call(this)||this;return t.closed=!1,t.currentObservers=null,t.observers=[],t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return IP(t,e),t.prototype.lift=function(e){var t=new uA(this,this);return t.operator=e,t},t.prototype._throwIfClosed=function(){if(this.closed)throw new lA},t.prototype.next=function(e){var t=this;QP((function(){var n,i;if(t._throwIfClosed(),!t.isStopped){t.currentObservers||(t.currentObservers=Array.from(t.observers));try{for(var r=AP(t.currentObservers),o=r.next();!o.done;o=r.next()){o.value.next(e)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}}}))},t.prototype.error=function(e){var t=this;QP((function(){if(t._throwIfClosed(),!t.isStopped){t.hasError=t.isStopped=!0,t.thrownError=e;for(var n=t.observers;n.length;)n.shift().error(e)}}))},t.prototype.complete=function(){var e=this;QP((function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var t=e.observers;t.length;)t.shift().complete()}}))},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return(null===(e=this.observers)||void 0===e?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(t){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var t=this,n=this,i=n.hasError,r=n.isStopped,o=n.observers;return i||r?zP:(this.currentObservers=null,o.push(e),new $P((function(){t.currentObservers=null,UP(o,e)})))},t.prototype._checkFinalizedStatuses=function(e){var t=this,n=t.hasError,i=t.thrownError,r=t.isStopped;n?e.error(i):r&&e.complete()},t.prototype.asObservable=function(){var e=new iA;return e.source=this,e},t.create=function(e,t){return new uA(e,t)},t}(iA),uA=function(e){function t(t,n){var i=e.call(this)||this;return i.destination=t,i.source=n,i}return IP(t,e),t.prototype.next=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===n||n.call(t,e)},t.prototype.error=function(e){var t,n;null===(n=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===n||n.call(t,e)},t.prototype.complete=function(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)},t.prototype._subscribe=function(e){var t,n;return null!==(n=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==n?n:zP},t}(cA),dA=(function(e){function t(t){var n=e.call(this)||this;return n._value=t,n}IP(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(t){var n=e.prototype._subscribe.call(this,t);return!n.closed&&t.next(this._value),n},t.prototype.getValue=function(){var e=this,t=e.hasError,n=e.thrownError,i=e._value;if(t)throw n;return this._throwIfClosed(),i},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)}}(cA),function(){return Date.now()}),hA=function(e){function t(t,n){return e.call(this)||this}return IP(t,e),t.prototype.schedule=function(e,t){return this},t}($P),pA=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return setInterval.apply(void 0,MP([e,t],OP(n)))},fA=function(e){return clearInterval(e)},mA=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.scheduler=t,i.work=n,i.pending=!1,i}return IP(t,e),t.prototype.schedule=function(e,t){var n;if(void 0===t&&(t=0),this.closed)return this;this.state=e;var i=this.id,r=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(r,i,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),pA(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&fA(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n,i=!1;try{this.work(e)}catch(r){i=!0,n=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),n},t.prototype.unsubscribe=function(){if(!this.closed){var t=this.id,n=this.scheduler,i=n.actions;this.work=this.state=this.scheduler=null,this.pending=!1,UP(i,this),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(hA),gA=function(){function e(t,n){void 0===n&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.schedulerActionCtor(this,e).schedule(n,t)},e.now=dA,e}();new(function(e){function t(t,n){void 0===n&&(n=gA.now);var i=e.call(this,t,n)||this;return i.actions=[],i._active=!1,i}return IP(t,e),t.prototype.flush=function(e){var t=this.actions;if(this._active)t.push(e);else{var n;this._active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(gA))(mA);function vA(e){return function(e){return e&&LP(e.schedule)}(function(e){return e[e.length-1]}(e))?e.pop():void 0}var bA=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function yA(e){return LP(null==e?void 0:e.then)}function xA(e){return LP(e[tA])}function kA(e){return Symbol.asyncIterator&&LP(null==e?void 0:e[Symbol.asyncIterator])}function wA(e){return new TypeError("You provided "+(null!==e&&"object"==typeof e?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var SA="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function CA(e){return LP(null==e?void 0:e[SA])}function TA(e){return DP(this,arguments,(function(){var t,n,i;return PP(this,(function(r){switch(r.label){case 0:t=e.getReader(),r.label=1;case 1:r.trys.push([1,,9,10]),r.label=2;case 2:return[4,NP(t.read())];case 3:return n=r.sent(),i=n.value,n.done?[4,NP(void 0)]:[3,5];case 4:return[2,r.sent()];case 5:return[4,NP(i)];case 6:return[4,r.sent()];case 7:return r.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}}))}))}function EA(e){return LP(null==e?void 0:e.getReader)}function _A(e){if(e instanceof iA)return e;if(null!=e){if(xA(e))return function(e){return new iA((function(t){var n=e[tA]();if(LP(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")}))}(e);if(bA(e))return function(e){return new iA((function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()}))}(e);if(yA(e))return function(e){return new iA((function(t){e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,GP)}))}(e);if(kA(e))return IA(e);if(CA(e))return function(e){return new iA((function(t){var n,i;try{for(var r=AP(e),o=r.next();!o.done;o=r.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}t.complete()}))}(e);if(EA(e))return function(e){return IA(TA(e))}(e)}throw wA(e)}function IA(e){return new iA((function(t){(function(e,t){var n,i,r,o;return RP(this,void 0,void 0,(function(){var s,a;return PP(this,(function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=jP(e),l.label=1;case 1:return[4,n.next()];case 2:if((i=l.sent()).done)return[3,4];if(s=i.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),r={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),i&&!i.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(r)throw r.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}}))}))})(e,t).catch((function(e){return t.error(e)}))}))}function RA(e,t,n,i,r){void 0===i&&(i=0),void 0===r&&(r=!1);var o=t.schedule((function(){n(),r?e.add(this.schedule(null,i)):this.unsubscribe()}),i);if(e.add(o),!r)return o}function PA(e,t){return void 0===t&&(t=0),oA((function(n,i){n.subscribe(sA(i,(function(n){return RA(i,e,(function(){return i.next(n)}),t)}),(function(){return RA(i,e,(function(){return i.complete()}),t)}),(function(n){return RA(i,e,(function(){return i.error(n)}),t)})))}))}function AA(e,t){return void 0===t&&(t=0),oA((function(n,i){i.add(e.schedule((function(){return n.subscribe(i)}),t))}))}function OA(e,t){if(!e)throw new Error("Iterable cannot be null");return new iA((function(n){RA(n,t,(function(){var i=e[Symbol.asyncIterator]();RA(n,t,(function(){i.next().then((function(e){e.done?n.complete():n.next(e.value)}))}),0,!0)}))}))}function MA(e,t){if(null!=e){if(xA(e))return function(e,t){return _A(e).pipe(AA(t),PA(t))}(e,t);if(bA(e))return function(e,t){return new iA((function(n){var i=0;return t.schedule((function(){i===e.length?n.complete():(n.next(e[i++]),n.closed||this.schedule())}))}))}(e,t);if(yA(e))return function(e,t){return _A(e).pipe(AA(t),PA(t))}(e,t);if(kA(e))return OA(e,t);if(CA(e))return function(e,t){return new iA((function(n){var i;return RA(n,t,(function(){i=e[SA](),RA(n,t,(function(){var e,t,r;try{t=(e=i.next()).value,r=e.done}catch(o){return void n.error(o)}r?n.complete():n.next(t)}),0,!0)})),function(){return LP(null==i?void 0:i.return)&&i.return()}}))}(e,t);if(EA(e))return function(e,t){return OA(TA(e),t)}(e,t)}throw wA(e)}function NA(e,t){return t?MA(e,t):_A(e)}FP((function(e){return function(t){void 0===t&&(t=null),e(this),this.message="Timeout has occurred",this.name="TimeoutError",this.info=t}}));function DA(e,t){return oA((function(n,i){var r=0;n.subscribe(sA(i,(function(n){i.next(e.call(t,n,r++))})))}))}Array.isArray;function jA(e,t,n){return void 0===n&&(n=1/0),LP(t)?jA((function(n,i){return DA((function(e,r){return t(n,e,i,r)}))(_A(e(n,i)))}),n):("number"==typeof t&&(n=t),oA((function(t,i){return function(e,t,n,i,r,o,s,a){var l=[],c=0,u=0,d=!1,h=function(){d&&!l.length&&!c&&t.complete()},p=function(e){c++;var r=!1;_A(n(e,u++)).subscribe(sA(t,(function(e){t.next(e)}),(function(){r=!0}),void 0,(function(){if(r)try{c--;for(var e=function(){var e=l.shift();s||p(e)};l.length&&c<i;)e();h()}catch(n){t.error(n)}})))};return e.subscribe(sA(t,(function(e){return c<i?p(e):l.push(e)}),(function(){d=!0,h()}))),function(){}}(t,i,e,n)})))}function LA(){return function(e){return jA(nA,e)}(1)}function FA(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return LA()(NA(e,vA(e)))}function BA(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=vA(e);return oA((function(t,i){(n?FA(e,t,n):FA(e,t)).subscribe(i)}))}var UA=Object.defineProperty,$A=Object.defineProperties,zA=Object.getOwnPropertyDescriptors,VA=Object.getOwnPropertySymbols,HA=Object.prototype.hasOwnProperty,qA=Object.prototype.propertyIsEnumerable,WA=(e,t,n)=>t in e?UA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,GA=(e,t)=>{for(var n in t||(t={}))HA.call(t,n)&&WA(e,n,t[n]);if(VA)for(var n of VA(t))qA.call(t,n)&&WA(e,n,t[n]);return e},KA=(e,t)=>$A(e,zA(t)),QA="lk";function XA(e){return!(typeof e>"u")&&(function(e){var t;return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof(null==(t=e.publication)?void 0:t.track)<"u")}(e)||function(e){return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u")}(e))}function YA(e){return!!e&&(e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u")}function JA(e){if("string"==typeof e||"number"==typeof e)return`${e}`;if(YA(e))return`${e.participant.identity}_${e.source}_placeholder`;if(XA(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}var ZA=[...[o_.ConnectionStateChanged,o_.RoomMetadataChanged,o_.ActiveSpeakersChanged,o_.ConnectionQualityChanged,o_.ParticipantConnected,o_.ParticipantDisconnected,o_.ParticipantPermissionsChanged,o_.ParticipantMetadataChanged,o_.ParticipantNameChanged,o_.ParticipantAttributesChanged,o_.TrackMuted,o_.TrackUnmuted,o_.TrackPublished,o_.TrackUnpublished,o_.TrackStreamStateChanged,o_.TrackSubscriptionFailed,o_.TrackSubscriptionPermissionChanged,o_.TrackSubscriptionStatusChanged],o_.LocalTrackPublished,o_.LocalTrackUnpublished],eO=[s_.TrackPublished,s_.TrackUnpublished,s_.TrackMuted,s_.TrackUnmuted,s_.TrackStreamStateChanged,s_.TrackSubscribed,s_.TrackUnsubscribed,s_.TrackSubscriptionPermissionChanged,s_.TrackSubscriptionFailed,s_.LocalTrackPublished,s_.LocalTrackUnpublished],tO=(s_.ConnectionQualityChanged,s_.IsSpeakingChanged,s_.ParticipantMetadataChanged,s_.ParticipantPermissionsChanged,s_.TrackMuted,s_.TrackUnmuted,s_.TrackPublished,s_.TrackUnpublished,s_.TrackStreamStateChanged,s_.TrackSubscriptionFailed,s_.TrackSubscriptionPermissionChanged,s_.TrackSubscriptionStatusChanged,s_.LocalTrackPublished,s_.LocalTrackUnpublished,EP.getLogger("lk-components-js"));tO.setDefaultLevel("WARN");function nO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new iA((t=>{const i=()=>{t.next(e)};return n.forEach((t=>{e.on(t,i)})),()=>{n.forEach((t=>{e.off(t,i)}))}})).pipe(BA(e))}function iO(e,t){return new iA((n=>{const i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.next(t)};return e.on(t,i),()=>{e.off(t,i)}}))}function rO(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new iA((t=>{const i=()=>{t.next(e)};return n.forEach((t=>{e.on(t,i)})),()=>{n.forEach((t=>{e.off(t,i)}))}})).pipe(BA(e))}function oO(e,t){return new iA((n=>{const i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.next(t)};return e.on(t,i),()=>{e.off(t,i)}}))}function sO(e){return typeof e>"u"?new iA:oO(e,s_.AttributesChanged).pipe(DA((t=>{let[n]=t;return{changed:n,attributes:e.attributes}})),BA({changed:e.attributes,attributes:e.attributes}))}function aO(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{sources:i,kind:r,name:o}=t;return Array.from(e.trackPublications.values()).filter((e=>(!i||i.includes(e.source))&&(!r||e.kind===r)&&(!o||e.trackName===o)&&(!n||e.track))).map((t=>({participant:e,publication:t,source:t.source})))}function lO(e,t){return new iA((n=>{const i=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];n.next(t)};return e.on(t,i),()=>{e.off(t,i)}}))}var cO=`${QA}-user-choices`,{load:uO,save:dO}=function(e){return{load:()=>function(e){if(typeof localStorage>"u")tO.error("Local storage is not available.");else try{const t=localStorage.getItem(e);return t?JSON.parse(t):void tO.warn(`Item with key ${e} does not exist in local storage.`)}catch(t){return void tO.error(`Error getting item from local storage: ${t}`)}}(e),save:t=>function(e,t){if(typeof localStorage>"u")tO.error("Local storage is not available.");else try{if(t){const n=Object.fromEntries(Object.entries(t).filter((e=>{let[,t]=e;return""!==t})));localStorage.setItem(e,JSON.stringify(n))}}catch(n){tO.error(`Error setting item to local storage: ${n}`)}}(e,t)}}(cO);t.createContext(void 0);t.createContext(void 0);const hO=t.createContext(void 0);function pO(){return t.useContext(hO)}const fO=t.createContext(void 0);function mO(){const e=t.useContext(fO);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function gO(e){const n=t.useContext(fO),i=e??n;if(!i)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return i}t.createContext(void 0);function vO(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const[r,o]=t.useState(n);return t.useEffect((()=>{if(i&&o(n),typeof window>"u"||!e)return;const t=e.subscribe(o);return()=>t.unsubscribe()}),[e,i]),r}function bO(e){const n=gO(e),i=t.useMemo((()=>function(e){return iO(e,o_.ConnectionStateChanged).pipe(DA((e=>{let[t]=e;return t})),BA(e.state))}(n)),[n]);return vO(i,n.state)}function yO(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=gO(e.room),[i,r]=t.useState([]);return t.useEffect((()=>{const t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;let i;const r=new iA((e=>(i=e,()=>s.unsubscribe()))).pipe(BA(Array.from(e.remoteParticipants.values()))),o=null!=(n=t.additionalRoomEvents)?n:ZA,s=nO(e,...Array.from(new Set([o_.ParticipantConnected,o_.ParticipantDisconnected,o_.ConnectionStateChanged,...o]))).subscribe((e=>null==i?void 0:i.next(Array.from(e.remoteParticipants.values()))));return e.remoteParticipants.size>0&&(null==i||i.next(Array.from(e.remoteParticipants.values()))),r}(n,{additionalRoomEvents:e.updateOnlyOn}).subscribe(r);return()=>t.unsubscribe()}),[n,JSON.stringify(e.updateOnlyOn)]),i}function xO(e,n){const i=mO(),r=pO(),o=n?i.getParticipantByIdentity(n):r,s=t.useMemo((()=>o?function(e,t){return rO(e,...eO).pipe(DA((e=>{const n=aO(e,t);return tO.debug(`TrackReference[] was updated. (length ${n.length})`,n),n})),BA(aO(e,t)))}(o,{sources:e}):void 0),[null==o?void 0:o.sid,null==o?void 0:o.identity,JSON.stringify(e)]);return vO(s,[])}function kO(e){var n,i,r;return vO(t.useMemo((()=>{var t;return null!=(t=null==e?void 0:e.publication)&&t.track?function(e){return lO(e,l_.TimeSyncUpdate).pipe(DA((e=>{let[t]=e;return t})))}(null==e?void 0:e.publication.track):void 0}),[null==(n=null==e?void 0:e.publication)?void 0:n.track]),{timestamp:Date.now(),rtpTimestamp:null==(r=null==(i=null==e?void 0:e.publication)?void 0:i.track)?void 0:r.rtpTimestamp})}const wO={bufferSize:100};function SO(e,n){const i={...wO,...n},[r,o]=t.useState([]),s=kO(e),a=e=>{var t;null==(t=i.onTranscription)||t.call(i,e),o((t=>function(e,t,n){return[...e,...t].reduceRight(((e,t)=>(e.find((e=>e.id===t.id))||e.unshift(t),e)),[]).slice(0-n)}(t,e.map((e=>function(e,t){var n;return KA(GA({},e),{receivedAtMediaTimestamp:null!=(n=t.rtpTimestamp)?n:0,receivedAt:t.timestamp})}(e,s))),i.bufferSize)))};return t.useEffect((()=>{if(null==e||!e.publication)return;const t=function(e){return lO(e,l_.TranscriptionReceived)}(e.publication).subscribe((e=>{a(...e)}));return()=>{t.unsubscribe()}}),[e&&JA(e),a]),{segments:r}}const CO="lk.agent.state";function TO(){const e=yO(),n=e.find((e=>e.kind===JS.AGENT&&!("lk.publish_on_behalf"in e.attributes))),i=e.find((e=>e.kind===JS.AGENT&&e.attributes["lk.publish_on_behalf"]===(null==n?void 0:n.identity))),r=xO([__.Source.Microphone,__.Source.Camera],null==n?void 0:n.identity),o=xO([__.Source.Microphone,__.Source.Camera],null==i?void 0:i.identity),s=r.find((e=>e.source===__.Source.Microphone))??o.find((e=>e.source===__.Source.Microphone)),a=r.find((e=>e.source===__.Source.Camera))??o.find((e=>e.source===__.Source.Camera)),{segments:l}=SO(s),c=bO(),{attributes:u}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=pO(),i=e.participant??n;return vO(t.useMemo((()=>sO(i)),[i]),{attributes:null==i?void 0:i.attributes})}({participant:n}),d=t.useMemo((()=>c===vP.Disconnected?"disconnected":c!==vP.Connecting&&n&&null!=u&&u[CO]?u[CO]:"connecting"),[u,n,c]);return{agent:n,state:d,audioTrack:s,videoTrack:a,agentTranscriptions:l,agentAttributes:u}}function EO(e){if("undefined"===typeof Proxy)return e;const t=new Map;return new Proxy((function(){return e(...arguments)}),{get:(n,i)=>"create"===i?e:(t.has(i)||t.set(i,e(i)),t.get(i))})}function _O(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const IO=e=>Array.isArray(e);function RO(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function PO(e){return"string"===typeof e||Array.isArray(e)}function AO(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach(((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()})),t}function OO(e,t,n,i){if("function"===typeof t){const[r,o]=AO(i);t=t(void 0!==n?n:e.custom,r,o)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,o]=AO(i);t=t(void 0!==n?n:e.custom,r,o)}return t}function MO(e,t,n){const i=e.getProps();return OO(i,t,void 0!==n?n:i.custom,e)}const NO=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],DO=["initial",...NO];function jO(e){let t;return()=>(void 0===t&&(t=e()),t)}const LO=jO((()=>void 0!==window.ScrollTimeline));class FO{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map((e=>"finished"in e?e.finished:e)))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e,t){const n=this.animations.map((n=>LO()&&n.attachTimeline?n.attachTimeline(e):"function"===typeof t?t(n):void 0));return()=>{n.forEach(((e,t)=>{e&&e(),this.animations[t].stop()}))}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach((t=>t[e]()))}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class BO extends FO{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function UO(e,t){return e?e[t]||e.default||e:void 0}const $O=2e4;function zO(e){let t=0;let n=e.next(t);for(;!n.done&&t<$O;)t+=50,n=e.next(t);return t>=$O?1/0:t}function VO(e){return"function"===typeof e}function HO(e,t){e.timeline=t,e.onfinish=null}const qO=e=>Array.isArray(e)&&"number"===typeof e[0],WO={linearEasing:void 0};function GO(e,t){const n=jO(e);return()=>{var e;return null!==(e=WO[t])&&void 0!==e?e:n()}}const KO=GO((()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(WU){return!1}return!0}),"linearEasing"),QO=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i},XO=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i="";const r=Math.max(Math.round(t/n),2);for(let o=0;o<r;o++)i+=e(QO(0,r-1,o))+", ";return`linear(${i.substring(0,i.length-2)})`};function YO(e){return Boolean("function"===typeof e&&KO()||!e||"string"===typeof e&&(e in ZO||KO())||qO(e)||Array.isArray(e)&&e.every(YO))}const JO=e=>{let[t,n,i,r]=e;return`cubic-bezier(${t}, ${n}, ${i}, ${r})`},ZO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:JO([0,.65,.55,1]),circOut:JO([.55,0,1,.45]),backIn:JO([.31,.01,.66,-.59]),backOut:JO([.33,1.53,.69,.99])};function eM(e,t){return e?"function"===typeof e&&KO()?XO(e,t):qO(e)?JO(e):Array.isArray(e)?e.map((e=>eM(e,t)||ZO.easeOut)):ZO[e]:void 0}const tM={x:!1,y:!1};function nM(){return tM.x||tM.y}function iM(e,t){const n=function(e,t,n){var i;if(e instanceof Element)return[e];if("string"===typeof e){let r=document;t&&(r=t.current);const o=null!==(i=null===n||void 0===n?void 0:n[e])&&void 0!==i?i:r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}(e),i=new AbortController;return[n,{passive:!0,...t,signal:i.signal},()=>i.abort()]}function rM(e){return t=>{"touch"===t.pointerType||nM()||e(t)}}const oM=(e,t)=>!!t&&(e===t||oM(e,t.parentElement)),sM=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary,aM=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const lM=new WeakSet;function cM(e){return t=>{"Enter"===t.key&&e(t)}}function uM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function dM(e){return sM(e)&&!nM()}function hM(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,r,o]=iM(e,n),s=e=>{const i=e.currentTarget;if(!dM(e)||lM.has(i))return;lM.add(i);const o=t(e),s=(e,t)=>{window.removeEventListener("pointerup",a),window.removeEventListener("pointercancel",l),dM(e)&&lM.has(i)&&(lM.delete(i),"function"===typeof o&&o(e,{success:t}))},a=e=>{s(e,n.useGlobalTarget||oM(i,e.target))},l=e=>{s(e,!1)};window.addEventListener("pointerup",a,r),window.addEventListener("pointercancel",l,r)};return i.forEach((e=>{(function(e){return aM.has(e.tagName)||-1!==e.tabIndex})(e)||null!==e.getAttribute("tabindex")||(e.tabIndex=0);(n.useGlobalTarget?window:e).addEventListener("pointerdown",s,r),e.addEventListener("focus",(e=>((e,t)=>{const n=e.currentTarget;if(!n)return;const i=cM((()=>{if(lM.has(n))return;uM(n,"down");const e=cM((()=>{uM(n,"up")}));n.addEventListener("keyup",e,t),n.addEventListener("blur",(()=>uM(n,"cancel")),t)}));n.addEventListener("keydown",i,t),n.addEventListener("blur",(()=>n.removeEventListener("keydown",i)),t)})(e,r)),r)})),o}const pM=e=>1e3*e,fM=e=>e/1e3,mM=e=>e;const gM=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],vM=new Set(gM),bM=new Set(["width","height","top","left","right","bottom",...gM]),yM=e=>Boolean(e&&"object"===typeof e&&e.mix&&e.toValue),xM=e=>IO(e)?e[e.length-1]||0:e,kM=!1,wM=!1;const SM=["read","resolveKeyframes","update","preRender","render","postRender"];function CM(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,s=SM.reduce(((e,t)=>(e[t]=function(e){let t=new Set,n=new Set,i=!1,r=!1;const o=new WeakSet;let s={delta:0,timestamp:0,isProcessing:!1};function a(t){o.has(t)&&(l.schedule(t),e()),t(s)}const l={schedule:function(e){const r=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),r.has(e)||r.add(e),e},cancel:e=>{n.delete(e),o.delete(e)},process:e=>{s=e,i?r=!0:(i=!0,[t,n]=[n,t],t.forEach(a),t.clear(),i=!1,r&&(r=!1,l.process(e)))}};return l}(o),e)),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:d,postRender:h}=s,p=()=>{const o=wM?r.timestamp:performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(o-r.timestamp,40),1),r.timestamp=o,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),d.process(r),h.process(r),r.isProcessing=!1,n&&t&&(i=!1,e(p))},f=SM.reduce(((t,o)=>{const a=s[o];return t[o]=function(t){let o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,r.isProcessing||e(p)),a.schedule(t,o,s)},t}),{});return{schedule:f,cancel:e=>{for(let t=0;t<SM.length;t++)s[SM[t]].cancel(e)},state:r,steps:s}}const{schedule:TM,cancel:EM,state:_M,steps:IM}=CM("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:mM,!0);let RM;function PM(){RM=void 0}const AM={now:()=>(void 0===RM&&AM.set(_M.isProcessing||wM?_M.timestamp:performance.now()),RM),set:e=>{RM=e,queueMicrotask(PM)}};function OM(e,t){-1===e.indexOf(t)&&e.push(t)}function MM(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class NM{constructor(){this.subscriptions=[]}add(e){return OM(this.subscriptions,e),()=>MM(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){const i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function DM(e,t){return t?e*(1e3/t):0}const jM={current:void 0};class LM{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=AM.now();t.updatedAt!==i&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=AM.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(e=>!isNaN(parseFloat(e)))(this.current))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new NM);const n=this.events[e].add(t);return"change"===e?()=>{n(),TM.read((()=>{this.events.change.getSize()||this.stop()}))}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return jM.current&&jM.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=AM.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return DM(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise((t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()})).then((()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()}))}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function FM(e,t){return new LM(e,t)}function BM(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,FM(n))}const UM=e=>Boolean(e&&e.getVelocity);function $M(e,t){const n=e.getValue("willChange");if(function(e){return Boolean(UM(e)&&e.add)}(n))return n.add(t)}const zM=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),VM="data-"+zM("framerAppearId");function HM(e){return e.props[VM]}const qM=!1,WM=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,GM=1e-7,KM=12;function QM(e,t,n,i){if(e===t&&n===i)return mM;const r=t=>function(e,t,n,i,r){let o,s,a=0;do{s=t+(n-t)/2,o=WM(s,i,r)-e,o>0?n=s:t=s}while(Math.abs(o)>GM&&++a<KM);return s}(t,0,1,e,n);return e=>0===e||1===e?e:WM(r(e),t,i)}const XM=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,YM=e=>t=>1-e(1-t),JM=QM(.33,1.53,.69,.99),ZM=YM(JM),eN=XM(ZM),tN=e=>(e*=2)<1?.5*ZM(e):.5*(2-Math.pow(2,-10*(e-1))),nN=e=>1-Math.sin(Math.acos(e)),iN=YM(nN),rN=XM(nN),oN=e=>/^0[^.\s]+$/u.test(e);function sN(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||oN(e))}const aN=(e,t,n)=>n>t?t:n<e?e:n,lN={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},cN={...lN,transform:e=>aN(0,1,e)},uN={...lN,default:1},dN=e=>Math.round(1e5*e)/1e5,hN=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const pN=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,fN=(e,t)=>n=>Boolean("string"===typeof n&&pN.test(n)&&n.startsWith(e)||t&&!function(e){return null==e}(n)&&Object.prototype.hasOwnProperty.call(n,t)),mN=(e,t,n)=>i=>{if("string"!==typeof i)return i;const[r,o,s,a]=i.match(hN);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(s),alpha:void 0!==a?parseFloat(a):1}},gN={...lN,transform:e=>Math.round((e=>aN(0,255,e))(e))},vN={test:fN("rgb","red"),parse:mN("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:r=1}=e;return"rgba("+gN.transform(t)+", "+gN.transform(n)+", "+gN.transform(i)+", "+dN(cN.transform(r))+")"}};const bN={test:fN("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:vN.transform},yN=e=>({test:t=>"string"===typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),xN=yN("deg"),kN=yN("%"),wN=yN("px"),SN=yN("vh"),CN=yN("vw"),TN={...kN,parse:e=>kN.parse(e)/100,transform:e=>kN.transform(100*e)},EN={test:fN("hsl","hue"),parse:mN("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+kN.transform(dN(n))+", "+kN.transform(dN(i))+", "+dN(cN.transform(r))+")"}},_N={test:e=>vN.test(e)||bN.test(e)||EN.test(e),parse:e=>vN.test(e)?vN.parse(e):EN.test(e)?EN.parse(e):bN.parse(e),transform:e=>"string"===typeof e?e:e.hasOwnProperty("red")?vN.transform(e):EN.transform(e)},IN=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const RN="number",PN="color",AN="var",ON="var(",MN="${}",NN=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function DN(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const s=t.replace(NN,(e=>(_N.test(e)?(i.color.push(o),r.push(PN),n.push(_N.parse(e))):e.startsWith(ON)?(i.var.push(o),r.push(AN),n.push(e)):(i.number.push(o),r.push(RN),n.push(parseFloat(e))),++o,MN))).split(MN);return{values:n,split:s,indexes:i,types:r}}function jN(e){return DN(e).values}function LN(e){const{split:t,types:n}=DN(e),i=t.length;return e=>{let r="";for(let o=0;o<i;o++)if(r+=t[o],void 0!==e[o]){const t=n[o];r+=t===RN?dN(e[o]):t===PN?_N.transform(e[o]):e[o]}return r}}const FN=e=>"number"===typeof e?0:e;const BN={test:function(e){var t,n;return isNaN(e)&&"string"===typeof e&&((null===(t=e.match(hN))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(IN))||void 0===n?void 0:n.length)||0)>0},parse:jN,createTransformer:LN,getAnimatableNone:function(e){const t=jN(e);return LN(e)(t.map(FN))}},UN=new Set(["brightness","contrast","saturate","opacity"]);function $N(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(hN)||[];if(!i)return e;const r=n.replace(i,"");let o=UN.has(t)?1:0;return i!==n&&(o*=100),t+"("+o+r+")"}const zN=/\b([a-z-]*)\(.*?\)/gu,VN={...BN,getAnimatableNone:e=>{const t=e.match(zN);return t?t.map($N).join(" "):e}},HN={borderWidth:wN,borderTopWidth:wN,borderRightWidth:wN,borderBottomWidth:wN,borderLeftWidth:wN,borderRadius:wN,radius:wN,borderTopLeftRadius:wN,borderTopRightRadius:wN,borderBottomRightRadius:wN,borderBottomLeftRadius:wN,width:wN,maxWidth:wN,height:wN,maxHeight:wN,top:wN,right:wN,bottom:wN,left:wN,padding:wN,paddingTop:wN,paddingRight:wN,paddingBottom:wN,paddingLeft:wN,margin:wN,marginTop:wN,marginRight:wN,marginBottom:wN,marginLeft:wN,backgroundPositionX:wN,backgroundPositionY:wN},qN={rotate:xN,rotateX:xN,rotateY:xN,rotateZ:xN,scale:uN,scaleX:uN,scaleY:uN,scaleZ:uN,skew:xN,skewX:xN,skewY:xN,distance:wN,translateX:wN,translateY:wN,translateZ:wN,x:wN,y:wN,z:wN,perspective:wN,transformPerspective:wN,opacity:cN,originX:TN,originY:TN,originZ:wN},WN={...lN,transform:Math.round},GN={...HN,...qN,zIndex:WN,size:wN,fillOpacity:cN,strokeOpacity:cN,numOctaves:WN},KN={...GN,color:_N,backgroundColor:_N,outlineColor:_N,fill:_N,stroke:_N,borderColor:_N,borderTopColor:_N,borderRightColor:_N,borderBottomColor:_N,borderLeftColor:_N,filter:VN,WebkitFilter:VN},QN=e=>KN[e];function XN(e,t){let n=QN(e);return n!==VN&&(n=BN),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const YN=new Set(["auto","none","0"]);const JN=e=>e===lN||e===wN,ZN=(e,t)=>parseFloat(e.split(", ")[t]),eD=(e,t)=>(n,i)=>{let{transform:r}=i;if("none"===r||!r)return 0;const o=r.match(/^matrix3d\((.+)\)$/u);if(o)return ZN(o[1],t);{const t=r.match(/^matrix\((.+)\)$/u);return t?ZN(t[1],e):0}},tD=new Set(["x","y","z"]),nD=gM.filter((e=>!tD.has(e)));const iD={width:(e,t)=>{let{x:n}=e,{paddingLeft:i="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:i="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:i}=t;return parseFloat(i)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:i}=t;return parseFloat(i)+(n.max-n.min)},x:eD(4,13),y:eD(5,14)};iD.translateX=iD.x,iD.translateY=iD.y;const rD=new Set;let oD=!1,sD=!1;function aD(){if(sD){const e=Array.from(rD).filter((e=>e.needsMeasurement)),t=new Set(e.map((e=>e.element))),n=new Map;t.forEach((e=>{const t=function(e){const t=[];return nD.forEach((n=>{const i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))})),t}(e);t.length&&(n.set(e,t),e.render())})),e.forEach((e=>e.measureInitialState())),t.forEach((e=>{e.render();const t=n.get(e);t&&t.forEach((t=>{let[n,i]=t;var r;null===(r=e.getValue(n))||void 0===r||r.set(i)}))})),e.forEach((e=>e.measureEndState())),e.forEach((e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)}))}sD=!1,oD=!1,rD.forEach((e=>e.complete())),rD.clear()}function lD(){rD.forEach((e=>{e.readKeyframes(),e.needsMeasurement&&(sD=!0)}))}class cD{constructor(e,t,n,i,r){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=r,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(rD.add(this),oD||(oD=!0,TM.read(lD),TM.resolveKeyframes(aD))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let r=0;r<e.length;r++)if(null===e[r])if(0===r){const r=null===i||void 0===i?void 0:i.get(),o=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const i=n.readValue(t,o);void 0!==i&&null!==i&&(e[0]=i)}void 0===e[0]&&(e[0]=o),i&&void 0===r&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),rD.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,rD.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}let uD=mM,dD=mM;const hD=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),pD=e=>t=>"string"===typeof t&&t.startsWith(e),fD=pD("--"),mD=pD("var(--"),gD=e=>!!mD(e)&&vD.test(e.split("/*")[0].trim()),vD=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,bD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function yD(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;dD(n<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);const[i,r]=function(e){const t=bD.exec(e);if(!t)return[,];const[,n,i,r]=t;return[`--${null!==n&&void 0!==n?n:i}`,r]}(e);if(!i)return;const o=window.getComputedStyle(t).getPropertyValue(i);if(o){const e=o.trim();return hD(e)?parseFloat(e):e}return gD(r)?yD(r,t,n+1):r}const xD=e=>t=>t.test(e),kD=[lN,wN,kN,xN,CN,SN,{test:e=>"auto"===e,parse:e=>e}],wD=e=>kD.find(xD(e));class SD extends cD{constructor(e,t,n,i,r){super(e,t,n,i,r,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t||!t.current)return;super.readKeyframes();for(let a=0;a<e.length;a++){let n=e[a];if("string"===typeof n&&(n=n.trim(),gD(n))){const i=yD(n,t.current);void 0!==i&&(e[a]=i),a===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!bM.has(n)||2!==e.length)return;const[i,r]=e,o=wD(i),s=wD(r);if(o!==s)if(JN(o)&&JN(s))for(let a=0;a<e.length;a++){const t=e[a];"string"===typeof t&&(e[a]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)sN(e[i])&&n.push(i);n.length&&function(e,t,n){let i,r=0;for(;r<e.length&&!i;){const t=e[r];"string"===typeof t&&!YN.has(t)&&DN(t).values.length&&(i=e[r]),r++}if(i&&n)for(const o of t)e[o]=XN(n,i)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e||!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=iD[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,s=i[o];i[o]=iD[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==s&&void 0===this.finalKeyframe&&(this.finalKeyframe=s),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach((e=>{let[n,i]=e;t.getValue(n).set(i)})),this.resolveNoneKeyframes()}}const CD=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!BN.test(e)&&"0"!==e||e.startsWith("url(")));function TD(e,t,n,i){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const o=e[e.length-1],s=CD(r,t),a=CD(o,t);return uD(s===a,`You are trying to animate ${t} from "${r}" to "${o}". ${r} is not an animatable value - to enable this animation set ${r} to a value animatable to ${o} via the \`style\` property.`),!(!s||!a)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||("spring"===n||VO(n))&&i)}const ED=e=>null!==e;function _D(e,t,n){let{repeat:i,repeatType:r="loop"}=t;const o=e.filter(ED),s=i&&"loop"!==r&&i%2===1?0:o.length-1;return s&&void 0!==n?n:o[s]}class ID{constructor(e){let{autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:s="loop",...a}=e;this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=AM.now(),this.options={autoplay:t,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:s,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt}get resolved(){return this._resolved||this.hasAttemptedResolve||(lD(),aD()),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=AM.now(),this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:r,delay:o,onComplete:s,onUpdate:a,isGenerator:l}=this.options;if(!l&&!TD(e,n,i,r)){if(qM||!o)return a&&a(_D(e,this.options,t)),s&&s(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved={keyframes:e,finalKeyframe:t,...c},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise((e=>{this.resolveFinishedPromise=e}))}}const RD=(e,t,n)=>e+(t-e)*n;function PD(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function AD(e,t){return n=>n>0?t:e}const OD=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},MD=[bN,vN,EN];function ND(e){const t=(e=>MD.find((t=>t.test(e))))(e);if(uD(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`),!Boolean(t))return!1;let n=t.parse(e);return t===EN&&(n=function(e){let{hue:t,saturation:n,lightness:i,alpha:r}=e;t/=360,n/=100,i/=100;let o=0,s=0,a=0;if(n){const e=i<.5?i*(1+n):i+n-i*n,r=2*i-e;o=PD(r,e,t+1/3),s=PD(r,e,t),a=PD(r,e,t-1/3)}else o=s=a=i;return{red:Math.round(255*o),green:Math.round(255*s),blue:Math.round(255*a),alpha:r}}(n)),n}const DD=(e,t)=>{const n=ND(e),i=ND(t);if(!n||!i)return AD(e,t);const r={...n};return e=>(r.red=OD(n.red,i.red,e),r.green=OD(n.green,i.green,e),r.blue=OD(n.blue,i.blue,e),r.alpha=RD(n.alpha,i.alpha,e),vN.transform(r))},jD=(e,t)=>n=>t(e(n)),LD=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(jD)},FD=new Set(["none","hidden"]);function BD(e,t){return n=>RD(e,t,n)}function UD(e){return"number"===typeof e?BD:"string"===typeof e?gD(e)?AD:_N.test(e)?DD:VD:Array.isArray(e)?$D:"object"===typeof e?_N.test(e)?DD:zD:AD}function $D(e,t){const n=[...e],i=n.length,r=e.map(((e,n)=>UD(e)(e,t[n])));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function zD(e,t){const n={...e,...t},i={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=UD(e[r])(e[r],t[r]));return e=>{for(const t in i)n[t]=i[t](e);return n}}const VD=(e,t)=>{const n=BN.createTransformer(t),i=DN(e),r=DN(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?FD.has(e)&&!r.values.length||FD.has(t)&&!i.values.length?function(e,t){return FD.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):LD($D(function(e,t){var n;const i=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const s=t.types[o],a=e.indexes[s][r[s]],l=null!==(n=e.values[a])&&void 0!==n?n:0;i[o]=l,r[s]++}return i}(i,r),r.values),n):(uD(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),AD(e,t))};function HD(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return RD(e,t,n);return UD(e)(e,t)}const qD=5;function WD(e,t,n){const i=Math.max(t-qD,0);return DM(n-e(i),t-i)}const GD={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},KD=.001;function QD(e){let t,n,{duration:i=GD.duration,bounce:r=GD.bounce,velocity:o=GD.velocity,mass:s=GD.mass}=e;uD(i<=pM(GD.maxDuration),"Spring duration must be 10 seconds or less");let a=1-r;a=aN(GD.minDamping,GD.maxDamping,a),i=aN(GD.minDuration,GD.maxDuration,fM(i)),a<1?(t=e=>{const t=e*a,n=t*i,r=t-o,s=YD(e,a),l=Math.exp(-n);return KD-r/s*l},n=e=>{const n=e*a*i,r=n*o+o,s=Math.pow(a,2)*Math.pow(e,2)*i,l=Math.exp(-n),c=YD(Math.pow(e,2),a);return(-t(e)+KD>0?-1:1)*((r-s)*l)/c}):(t=e=>Math.exp(-e*i)*((e-o)*i+1)-KD,n=e=>Math.exp(-e*i)*(i*i*(o-e)));const l=function(e,t,n){let i=n;for(let r=1;r<XD;r++)i-=e(i)/t(i);return i}(t,n,5/i);if(i=pM(i),isNaN(l))return{stiffness:GD.stiffness,damping:GD.damping,duration:i};{const e=Math.pow(l,2)*s;return{stiffness:e,damping:2*a*Math.sqrt(s*e),duration:i}}}const XD=12;function YD(e,t){return e*Math.sqrt(1-t*t)}const JD=["duration","bounce"],ZD=["stiffness","damping","mass"];function ej(e,t){return t.some((t=>void 0!==e[t]))}function tj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GD.visualDuration,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:GD.bounce;const n="object"!==typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],s=n.keyframes[n.keyframes.length-1],a={done:!1,value:o},{stiffness:l,damping:c,mass:u,duration:d,velocity:h,isResolvedFromDuration:p}=function(e){let t={velocity:GD.velocity,stiffness:GD.stiffness,damping:GD.damping,mass:GD.mass,isResolvedFromDuration:!1,...e};if(!ej(e,ZD)&&ej(e,JD))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(1.2*n),r=i*i,o=2*aN(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:GD.mass,stiffness:r,damping:o}}else{const n=QD(e);t={...t,...n,mass:GD.mass},t.isResolvedFromDuration=!0}return t}({...n,velocity:-fM(n.velocity||0)}),f=h||0,m=c/(2*Math.sqrt(l*u)),g=s-o,v=fM(Math.sqrt(l/u)),b=Math.abs(g)<5;let y;if(i||(i=b?GD.restSpeed.granular:GD.restSpeed.default),r||(r=b?GD.restDelta.granular:GD.restDelta.default),m<1){const e=YD(v,m);y=t=>{const n=Math.exp(-m*v*t);return s-n*((f+m*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)y=e=>s-Math.exp(-v*e)*(g+(f+v*g)*e);else{const e=v*Math.sqrt(m*m-1);y=t=>{const n=Math.exp(-m*v*t),i=Math.min(e*t,300);return s-n*((f+m*v*g)*Math.sinh(i)+e*g*Math.cosh(i))/e}}const x={calculatedDuration:p&&d||null,next:e=>{const t=y(e);if(p)a.done=e>=d;else{let n=0;m<1&&(n=0===e?pM(f):WD(y,e,t));const o=Math.abs(n)<=i,l=Math.abs(s-t)<=r;a.done=o&&l}return a.value=a.done?s:t,a},toString:()=>{const e=Math.min(zO(x),$O),t=XO((t=>x.next(e*t).value),e,30);return e+"ms "+t}};return x}function nj(e){let{keyframes:t,velocity:n=0,power:i=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:s=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}=e;const h=t[0],p={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=i*n;const g=h+m,v=void 0===a?g:a(g);v!==g&&(m=v-h);const b=e=>-m*Math.exp(-e/r),y=e=>v+b(e),x=e=>{const t=b(e),n=y(e);p.done=Math.abs(t)<=u,p.value=p.done?v:n};let k,w;const S=e=>{(e=>void 0!==l&&e<l||void 0!==c&&e>c)(p.value)&&(k=e,w=tj({keyframes:[p.value,f(p.value)],velocity:WD(y,e,p.value),damping:o,stiffness:s,restDelta:u,restSpeed:d}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==k||(t=!0,x(e),S(e)),void 0!==k&&e>=k?w.next(e-k):(!t&&x(e),p)}}}const ij=QM(.42,0,1,1),rj=QM(0,0,.58,1),oj=QM(.42,0,.58,1),sj={linear:mM,easeIn:ij,easeInOut:oj,easeOut:rj,circIn:nN,circInOut:rN,circOut:iN,backIn:ZM,backInOut:eN,backOut:JM,anticipate:tN},aj=e=>{if(qO(e)){dD(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,i,r]=e;return QM(t,n,i,r)}return"string"===typeof e?(dD(void 0!==sj[e],`Invalid easing type '${e}'`),sj[e]):e};function lj(e,t){let{clamp:n=!0,ease:i,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=e.length;if(dD(o===t.length,"Both input and output ranges must be the same length"),1===o)return()=>t[0];if(2===o&&t[0]===t[1])return()=>t[1];const s=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const i=[],r=n||HD,o=e.length-1;for(let s=0;s<o;s++){let n=r(e[s],e[s+1]);if(t){const e=Array.isArray(t)?t[s]||mM:t;n=LD(e,n)}i.push(n)}return i}(t,i,r),l=a.length,c=n=>{if(s&&n<e[0])return t[0];let i=0;if(l>1)for(;i<e.length-2&&!(n<e[i+1]);i++);const r=QO(e[i],e[i+1],n);return a[i](r)};return n?t=>c(aN(e[0],e[o-1],t)):c}function cj(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=QO(0,t,i);e.push(RD(n,1,r))}}(t,e.length-1),t}function uj(e){let{duration:t=300,keyframes:n,times:i,ease:r="easeInOut"}=e;const o=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(aj):aj(r),s={done:!1,value:n[0]},a=function(e,t){return e.map((e=>e*t))}(i&&i.length===n.length?i:cj(n),t),l=lj(a,n,{ease:Array.isArray(o)?o:(c=n,u=o,c.map((()=>u||oj)).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(s.value=l(e),s.done=e>=t,s)}}const dj=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>TM.update(t,!0),stop:()=>EM(t),now:()=>_M.isProcessing?_M.timestamp:AM.now()}},hj={decay:nj,inertia:nj,tween:uj,keyframes:uj,spring:tj},pj=e=>e/100;class fj extends ID{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:t,motionValue:n,element:i,keyframes:r}=this.options,o=(null===i||void 0===i?void 0:i.KeyframeResolver)||cD;this.resolver=new o(r,((e,t)=>this.onKeyframesResolved(e,t)),t,n,i),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:o=0}=this.options,s=VO(t)?t:hj[t]||uj;let a,l;s!==uj&&"number"!==typeof e[0]&&(a=LD(pj,HD(e[0],e[1])),e=[0,100]);const c=s({...this.options,keyframes:e});"mirror"===r&&(l=s({...this.options,keyframes:[...e].reverse(),velocity:-o})),null===c.calculatedDuration&&(c.calculatedDuration=zO(c));const{calculatedDuration:u}=c,d=u+i;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:a,calculatedDuration:u,resolvedDuration:d,totalDuration:d*(n+1)-i}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:o,mapPercentToKeyframes:s,keyframes:a,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return r.next(0);const{delay:d,repeat:h,repeatType:p,repeatDelay:f,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-d*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let b=this.currentTime,y=r;if(h){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,h+1);Boolean(t%2)&&("reverse"===p?(n=1-n,f&&(n-=f/u)):"mirror"===p&&(y=o)),b=aN(0,1,n)*u}const x=v?{done:!1,value:a[0]}:y.next(b);s&&(x.value=s(x.value));let{done:k}=x;v||null===l||(k=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&k);return w&&void 0!==i&&(x.value=_D(a,this.options,i)),m&&m(x.value),w&&this.finish(),x}get duration(){const{resolved:e}=this;return e?fM(e.calculatedDuration):0}get time(){return fM(this.currentTime)}set time(e){e=pM(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=fM(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=dj,onPlay:t,startTime:n}=this.options;this.driver||(this.driver=e((e=>this.tick(e)))),t&&t();const i=this.driver.now();null!==this.holdTime?this.startTime=i-this.holdTime:this.startTime?"finished"===this.state&&(this.startTime=i):this.startTime=null!==n&&void 0!==n?n:this.calcStartTime(),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const mj=new Set(["opacity","clipPath","filter","transform"]);const gj=jO((()=>Object.hasOwnProperty.call(Element.prototype,"animate")));const vj={anticipate:tN,backInOut:eN,circInOut:rN};class bj extends ID{constructor(e){super(e);const{name:t,motionValue:n,element:i,keyframes:r}=this.options;this.resolver=new SD(r,((e,t)=>this.onKeyframesResolved(e,t)),t,n,i),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:n=300,times:i,ease:r,type:o,motionValue:s,name:a,startTime:l}=this.options;if(!s.owner||!s.owner.current)return!1;var c;if("string"===typeof r&&KO()&&r in vj&&(r=vj[r]),VO((c=this.options).type)||"spring"===c.type||!YO(c.ease)){const{onComplete:t,onUpdate:s,motionValue:a,element:l,...c}=this.options,u=function(e,t){const n=new fj({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:e[0]};const r=[];let o=0;for(;!i.done&&o<2e4;)i=n.sample(o),r.push(i.value),o+=10;return{times:void 0,keyframes:r,duration:o-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),n=u.duration,i=u.times,r=u.ease,o="keyframes"}const u=function(e,t,n){let{delay:i=0,duration:r=300,repeat:o=0,repeatType:s="loop",ease:a="easeInOut",times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=eM(a,r);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:o+1,direction:"reverse"===s?"alternate":"normal"})}(s.owner.current,a,e,{...this.options,duration:n,times:i,ease:r});return u.startTime=null!==l&&void 0!==l?l:this.calcStartTime(),this.pendingTimeline?(HO(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;s.set(_D(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:n,times:i,type:o,ease:r,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return fM(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return fM(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=pM(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return mM;const{animation:n}=t;HO(n,e)}else this.pendingTimeline=e;return mM}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:i,type:r,ease:o,times:s}=e;if("idle"===t.playState||"finished"===t.playState)return;if(this.time){const{motionValue:e,onUpdate:t,onComplete:a,element:l,...c}=this.options,u=new fj({...c,keyframes:n,duration:i,type:r,ease:o,times:s,isGenerator:!0}),d=pM(this.time);e.setWithVelocity(u.sample(d-10).value,u.sample(d).value,10)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:r,damping:o,type:s}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:a,transformTemplate:l}=t.owner.getProps();return gj()&&n&&mj.has(n)&&!a&&!l&&!i&&"mirror"!==r&&0!==o&&"inertia"!==s}}const yj={type:"spring",stiffness:500,damping:25,restSpeed:10},xj={type:"keyframes",duration:.8},kj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},wj=(e,t)=>{let{keyframes:n}=t;return n.length>2?xj:vM.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:yj:kj};const Sj=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0;return s=>{const a=UO(i,e)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c-=pM(l);let u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...a,delay:-c,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{s(),a.onComplete&&a.onComplete()},name:e,motionValue:t,element:o?void 0:r};(function(e){let{when:t,delay:n,delayChildren:i,staggerChildren:r,staggerDirection:o,repeat:s,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}=e;return!!Object.keys(d).length})(a)||(u={...u,...wj(e,u)}),u.duration&&(u.duration=pM(u.duration)),u.repeatDelay&&(u.repeatDelay=pM(u.repeatDelay)),void 0!==u.from&&(u.keyframes[0]=u.from);let d=!1;if((!1===u.type||0===u.duration&&!u.repeatDelay)&&(u.duration=0,0===u.delay&&(d=!0)),(qM||kM)&&(d=!0,u.duration=0,u.delay=0),d&&!o&&void 0!==t.get()){const e=_D(u.keyframes,a);if(void 0!==e)return TM.update((()=>{u.onUpdate(e),u.onComplete()})),new BO([])}return!o&&bj.supports(u)?new bj(u):new fj(u)}};function Cj(e,t){let{protectedKeys:n,needsAnimating:i}=e;const r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}function Tj(e,t){let{delay:n=0,transitionOverride:i,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var o;let{transition:s=e.getDefaultTransition(),transitionEnd:a,...l}=t;i&&(s=i);const c=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const d in l){const t=e.getValue(d,null!==(o=e.latestValues[d])&&void 0!==o?o:null),i=l[d];if(void 0===i||u&&Cj(u,d))continue;const r={delay:n,...UO(s||{},d)};let a=!1;if(window.MotionHandoffAnimation){const t=HM(e);if(t){const e=window.MotionHandoffAnimation(t,d,TM);null!==e&&(r.startTime=e,a=!0)}}$M(e,d),t.start(Sj(d,t,i,e.shouldReduceMotion&&bM.has(d)?{type:!1}:r,e,a));const h=t.animation;h&&c.push(h)}return a&&Promise.all(c).then((()=>{TM.update((()=>{a&&function(e,t){const n=MO(e,t);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const s in o)BM(e,s,xM(o[s]))}(e,a)}))})),c}function Ej(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;const r=MO(e,t,"exit"===n.type?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const s=r?()=>Promise.all(Tj(e,r,n)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:s,staggerDirection:a}=o;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5?arguments[5]:void 0;const s=[],a=(e.variantChildren.size-1)*i,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(e.variantChildren).sort(_j).forEach(((e,i)=>{e.notify("AnimationStart",t),s.push(Ej(e,t,{...o,delay:n+l(i)}).then((()=>e.notify("AnimationComplete",t))))})),Promise.all(s)}(e,t,r+i,s,a,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[e,t]="beforeChildren"===l?[s,a]:[a,s];return e().then((()=>t()))}return Promise.all([s(),a(n.delay)])}function _j(e,t){return e.sortNodePosition(t)}const Ij=DO.length;function Rj(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&Rj(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let n=0;n<Ij;n++){const i=DO[n],r=e.props[i];(PO(r)||!1===r)&&(t[i]=r)}return t}const Pj=[...NO].reverse(),Aj=NO.length;function Oj(e){return t=>Promise.all(t.map((t=>{let{animation:n,options:i}=t;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map((t=>Ej(e,t,i)));n=Promise.all(r)}else if("string"===typeof t)n=Ej(e,t,i);else{const r="function"===typeof t?MO(e,t,i.custom):t;n=Promise.all(Tj(e,r,i))}return n.then((()=>{e.notify("AnimationComplete",t)}))}(e,n,i)})))}function Mj(e){let t=Oj(e),n=jj(),i=!0;const r=t=>(n,i)=>{var r;const o=MO(e,i,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(o){const{transition:e,transitionEnd:t,...i}=o;n={...n,...i,...t}}return n};function o(o){const{props:s}=e,a=Rj(e.parent)||{},l=[],c=new Set;let u={},d=1/0;for(let t=0;t<Aj;t++){const h=Pj[t],p=n[h],f=void 0!==s[h]?s[h]:a[h],m=PO(f),g=h===o?p.isActive:null;!1===g&&(d=t);let v=f===a[h]&&f!==s[h]&&m;if(v&&i&&e.manuallyAnimateOnMount&&(v=!1),p.protectedKeys={...u},!p.isActive&&null===g||!f&&!p.prevProp||_O(f)||"boolean"===typeof f)continue;const b=Nj(p.prevProp,f);let y=b||h===o&&p.isActive&&!v&&m||t>d&&m,x=!1;const k=Array.isArray(f)?f:[f];let w=k.reduce(r(h),{});!1===g&&(w={});const{prevResolvedValues:S={}}=p,C={...S,...w},T=t=>{y=!0,c.has(t)&&(x=!0,c.delete(t)),p.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in C){const t=w[e],n=S[e];if(u.hasOwnProperty(e))continue;let i=!1;i=IO(t)&&IO(n)?!RO(t,n):t!==n,i?void 0!==t&&null!==t?T(e):c.add(e):void 0!==t&&c.has(e)?T(e):p.protectedKeys[e]=!0}p.prevProp=f,p.prevResolvedValues=w,p.isActive&&(u={...u,...w}),i&&e.blockInitialAnimation&&(y=!1);y&&(!(v&&b)||x)&&l.push(...k.map((e=>({animation:e,options:{type:h}}))))}if(c.size){const t={};c.forEach((n=>{const i=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!==i&&void 0!==i?i:null})),l.push({animation:t})}let h=Boolean(l.length);return!i||!1!==s.initial&&s.initial!==s.animate||e.manuallyAnimateOnMount||(h=!1),i=!1,h?t(l):Promise.resolve()}return{animateChanges:o,setActive:function(t,i){var r;if(n[t].isActive===i)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach((e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)})),n[t].isActive=i;const s=o(t);for(const e in n)n[e].protectedKeys={};return s},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=jj(),i=!0}}}function Nj(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!RO(t,e)}function Dj(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function jj(){return{animate:Dj(!0),whileInView:Dj(),whileHover:Dj(),whileTap:Dj(),whileDrag:Dj(),whileFocus:Dj(),exit:Dj()}}class Lj{constructor(e){this.isMounted=!1,this.node=e}update(){}}let Fj=0;const Bj={animation:{Feature:class extends Lj{constructor(e){super(e),e.animationState||(e.animationState=Mj(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();_O(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Lj{constructor(){super(...arguments),this.id=Fj++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then((()=>t(this.id)))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}};function Uj(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function $j(e){return{point:{x:e.pageX,y:e.pageY}}}function zj(e,t,n,i){return Uj(e,t,(e=>t=>sM(t)&&e(t,$j(t)))(n),i)}const Vj=(e,t)=>Math.abs(e-t);class Hj{constructor(e,t){let{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Gj(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Vj(e.x,t.x),i=Vj(e.y,t.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:i}=e,{timestamp:r}=_M;this.history.push({...i,timestamp:r});const{onStart:o,onMove:s}=this.handlers;t||(o&&o(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),s&&s(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=qj(t,this.transformPagePoint),TM.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const o=Gj("pointercancel"===e.type?this.lastMoveEventInfo:qj(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,o),i&&i(e,o)},!sM(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const o=qj($j(e),this.transformPagePoint),{point:s}=o,{timestamp:a}=_M;this.history=[{...s,timestamp:a}];const{onSessionStart:l}=t;l&&l(e,Gj(o,this.history)),this.removeListeners=LD(zj(this.contextWindow,"pointermove",this.handlePointerMove),zj(this.contextWindow,"pointerup",this.handlePointerUp),zj(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),EM(this.updatePoint)}}function qj(e,t){return t?{point:t(e.point)}:e}function Wj(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gj(e,t){let{point:n}=e;return{point:n,delta:Wj(n,Qj(t)),offset:Wj(n,Kj(t)),velocity:Xj(t,.1)}}function Kj(e){return e[0]}function Qj(e){return e[e.length-1]}function Xj(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=Qj(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>pM(t)));)n--;if(!i)return{x:0,y:0};const o=fM(r.timestamp-i.timestamp);if(0===o)return{x:0,y:0};const s={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return s.x===1/0&&(s.x=0),s.y===1/0&&(s.y=0),s}function Yj(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const Jj=.9999,Zj=1.0001,eL=-.01,tL=.01;function nL(e){return e.max-e.min}function iL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=RD(t.min,t.max,e.origin),e.scale=nL(n)/nL(t),e.translate=RD(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Jj&&e.scale<=Zj||isNaN(e.scale))&&(e.scale=1),(e.translate>=eL&&e.translate<=tL||isNaN(e.translate))&&(e.translate=0)}function rL(e,t,n,i){iL(e.x,t.x,n.x,i?i.originX:void 0),iL(e.y,t.y,n.y,i?i.originY:void 0)}function oL(e,t,n){e.min=n.min+t.min,e.max=e.min+nL(t)}function sL(e,t,n){e.min=t.min-n.min,e.max=e.min+nL(t)}function aL(e,t,n){sL(e.x,t.x,n.x),sL(e.y,t.y,n.y)}function lL(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function cL(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}const uL=.35;function dL(e,t,n){return{min:hL(e,t),max:hL(e,n)}}function hL(e,t){return"number"===typeof e?e:e[t]||0}const pL=()=>({x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}),fL=()=>({x:{min:0,max:0},y:{min:0,max:0}});function mL(e){return[e("x"),e("y")]}function gL(e){let{top:t,left:n,right:i,bottom:r}=e;return{x:{min:n,max:i},y:{min:t,max:r}}}function vL(e){return void 0===e||1===e}function bL(e){let{scale:t,scaleX:n,scaleY:i}=e;return!vL(t)||!vL(n)||!vL(i)}function yL(e){return bL(e)||xL(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function xL(e){return kL(e.x)||kL(e.y)}function kL(e){return e&&"0%"!==e}function wL(e,t,n){return n+t*(e-n)}function SL(e,t,n,i,r){return void 0!==r&&(e=wL(e,r,i)),wL(e,n,i)+t}function CL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=SL(e.min,t,n,i,r),e.max=SL(e.max,t,n,i,r)}function TL(e,t){let{x:n,y:i}=t;CL(e.x,n.translate,n.scale,n.originPoint),CL(e.y,i.translate,i.scale,i.originPoint)}const EL=.999999999999,_L=1.0000000000001;function IL(e,t){e.min=e.min+t,e.max=e.max+t}function RL(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5;CL(e,t,n,RD(e.min,e.max,r),i)}function PL(e,t){RL(e.x,t.x,t.scaleX,t.scale,t.originX),RL(e.y,t.y,t.scaleY,t.scale,t.originY)}function AL(e,t){return gL(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}const OL=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},ML=new WeakMap;class NL{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fL(),this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new Hj(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor($j(e).point)},onStart:(e,t)=>{const{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(o=n)||"y"===o?tM[o]?null:(tM[o]=!0,()=>{tM[o]=!1}):tM.x||tM.y?null:(tM.x=tM.y=!0,()=>{tM.x=tM.y=!1}),!this.openDragLock))return;var o;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),mL((e=>{let t=this.getAxisMotionValue(e).get()||0;if(kN.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[e];if(i){t=nL(i)*(parseFloat(t)/100)}}}this.originPoint[e]=t})),r&&TM.postRender((()=>r(e,t))),$M(this.visualElement,"transform");const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:o}=this.getProps();if(!n&&!this.openDragLock)return;const{offset:s}=t;if(i&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,s),this.updateAxis("y",t.point,s),this.visualElement.render(),o&&o(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>mL((e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())}))},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:OL(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&TM.postRender((()=>r(e,t)))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!DL(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=function(e,t,n){let{min:i,max:r}=t;return void 0!==i&&e<i?e=n?RD(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?RD(r,e,n.max):Math.min(e,r)),e}(o,this.constraints[e],this.elastic[e])),r.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&Yj(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!i)&&function(e,t){let{top:n,left:i,bottom:r,right:o}=t;return{x:lL(e.x,i,o),y:lL(e.y,n,r)}}(i.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:uL;return!1===e?e=0:!0===e&&(e=uL),{x:dL(e,"left","right"),y:dL(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&mL((e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[e],this.constraints[e]))}))}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Yj(e))return!1;const n=e.current;dD(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=function(e,t,n){const i=AL(e,n),{scroll:r}=t;return r&&(IL(i.x,r.offset.x),IL(i.y,r.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let o=function(e,t){return{x:cL(e.x,t.x),y:cL(e.y,t.y)}}(i.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!e,e&&(o=gL(e))}return o}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:o,onDragTransitionEnd:s}=this.getProps(),a=this.constraints||{},l=mL((s=>{if(!DL(s,t,this.currentDirection))return;let l=a&&a[s]||{};o&&(l={min:0,max:0});const c=i?200:1e6,u=i?40:1e7,d={type:"inertia",velocity:n?e[s]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10,...r,...l};return this.startAxisValueAnimation(s,d)}));return Promise.all(l).then(s)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return $M(this.visualElement,e),n.start(Sj(e,n,0,t,this.visualElement,!1))}stopAnimation(){mL((e=>this.getAxisMotionValue(e).stop()))}pauseAnimation(){mL((e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()}))}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){mL((t=>{const{drag:n}=this.getProps();if(!DL(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:n,max:o}=i.layout.layoutBox[t];r.set(e[t]-RD(n,o,.5))}}))}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Yj(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};mL((e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();i[e]=function(e,t){let n=.5;const i=nL(e),r=nL(t);return r>i?n=QO(t.min,t.max-i,e.min):i>r&&(n=QO(e.min,e.max-r,t.min)),aN(0,1,n)}({min:n,max:n},this.constraints[e])}}));const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),mL((t=>{if(!DL(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:o}=this.constraints[t];n.set(RD(r,o,i[t]))}))}addListeners(){if(!this.visualElement.current)return;ML.set(this.visualElement,this);const e=zj(this.visualElement.current,"pointerdown",(e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)})),t=()=>{const{dragConstraints:e}=this.getProps();Yj(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),TM.read(t);const r=Uj(window,"resize",(()=>this.scalePositionWithinConstraints())),o=n.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(mL((e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))})),this.visualElement.render())}));return()=>{r(),e(),i(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:o=uL,dragMomentum:s=!0}=e;return{...e,drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:o,dragMomentum:s}}}function DL(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const jL=e=>(t,n)=>{e&&TM.postRender((()=>e(t,n)))};const LL=(0,t.createContext)(null);const FL=(0,t.createContext)({}),BL=(0,t.createContext)({}),UL={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $L(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zL={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!wN.test(e))return e;e=parseFloat(e)}return`${$L(e,t.target.x)}% ${$L(e,t.target.y)}%`}},VL={correct:(e,t)=>{let{treeScale:n,projectionDelta:i}=t;const r=e,o=BN.parse(e);if(o.length>5)return r;const s=BN.createTransformer(e),a="number"!==typeof o[0]?1:0,l=i.x.scale*n.x,c=i.y.scale*n.y;o[0+a]/=l,o[1+a]/=c;const u=RD(l,c,.5);return"number"===typeof o[2+a]&&(o[2+a]/=u),"number"===typeof o[3+a]&&(o[3+a]/=u),s(o)}},HL={};const{schedule:qL,cancel:WL}=CM(queueMicrotask,!1);class GL extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;var o;o=QL,Object.assign(HL,o),r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",(()=>{this.safeToRemove()})),r.setOptions({...r.options,onExitComplete:()=>this.safeToRemove()})),UL.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,o=n.projection;return o?(o.isPresent=r,i||e.layoutDependency!==t||void 0===t?o.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?o.promote():o.relegate()||TM.postRender((()=>{const e=o.getStack();e&&e.members.length||this.safeToRemove()}))),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qL.postRender((()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()})))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function KL(e){const[n,i]=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const n=(0,t.useContext)(LL);if(null===n)return[!0,null];const{isPresent:i,onExitComplete:r,register:o}=n,s=(0,t.useId)();(0,t.useEffect)((()=>{e&&o(s)}),[e]);const a=(0,t.useCallback)((()=>e&&r&&r(s)),[s,r,e]);return!i&&r?[!1,a]:[!0]}(),r=(0,t.useContext)(FL);return(0,us.jsx)(GL,{...e,layoutGroup:r,switchLayoutGroup:(0,t.useContext)(BL),isPresent:n,safeToRemove:i})}const QL={borderRadius:{...zL,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zL,borderTopRightRadius:zL,borderBottomLeftRadius:zL,borderBottomRightRadius:zL,boxShadow:VL};const XL=(e,t)=>e.depth-t.depth;class YL{constructor(){this.children=[],this.isDirty=!1}add(e){OM(this.children,e),this.isDirty=!0}remove(e){MM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(XL),this.isDirty=!1,this.children.forEach(e)}}function JL(e,t){const n=AM.now(),i=r=>{let{timestamp:o}=r;const s=o-n;s>=t&&(EM(i),e(s-t))};return TM.read(i,!0),()=>EM(i)}function ZL(e){const t=UM(e)?e.get():e;return yM(t)?t.toValue():t}const eF=["TopLeft","TopRight","BottomLeft","BottomRight"],tF=eF.length,nF=e=>"string"===typeof e?parseFloat(e):e,iF=e=>"number"===typeof e||wN.test(e);function rF(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const oF=aF(0,.5,iN),sF=aF(.5,.95,mM);function aF(e,t,n){return i=>i<e?0:i>t?1:n(QO(e,t,i))}function lF(e,t){e.min=t.min,e.max=t.max}function cF(e,t){lF(e.x,t.x),lF(e.y,t.y)}function uF(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function dF(e,t,n,i,r){return e=wL(e-=t,1/n,i),void 0!==r&&(e=wL(e,1/r,i)),e}function hF(e,t,n,i,r){let[o,s,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;kN.test(t)&&(t=parseFloat(t),t=RD(s.min,s.max,t/100)-s.min);if("number"!==typeof t)return;let a=RD(o.min,o.max,i);e===o&&(a-=t),e.min=dF(e.min,t,n,a,r),e.max=dF(e.max,t,n,a,r)}(e,t[o],t[s],t[a],t.scale,i,r)}const pF=["x","scaleX","originX"],fF=["y","scaleY","originY"];function mF(e,t,n,i){hF(e.x,t,pF,n?n.x:void 0,i?i.x:void 0),hF(e.y,t,fF,n?n.y:void 0,i?i.y:void 0)}function gF(e){return 0===e.translate&&1===e.scale}function vF(e){return gF(e.x)&&gF(e.y)}function bF(e,t){return e.min===t.min&&e.max===t.max}function yF(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function xF(e,t){return yF(e.x,t.x)&&yF(e.y,t.y)}function kF(e){return nL(e.x)/nL(e.y)}function wF(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class SF{constructor(){this.members=[]}add(e){OM(this.members,e),e.scheduleRender()}remove(e){if(MM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex((t=>e===t));if(0===t)return!1;let n;for(let i=t;i>=0;i--){const e=this.members[i];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach((e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}scheduleRender(){this.members.forEach((e=>{e.instance&&e.scheduleRender(!1)}))}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const CF={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},TF="undefined"!==typeof window&&void 0!==window.MotionDebug,EF=["","X","Y","Z"],_F={visibility:"hidden"};let IF=0;function RF(e,t,n,i){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function PF(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=HM(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:t,layoutId:i}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",TM,!(t||i))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&PF(i)}function AF(e){let{attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:r,resetTransform:o}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=IF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,TF&&(CF.totalNodes=CF.resolvedTargetDeltas=CF.recalculatedProjection=0),this.nodes.forEach(NF),this.nodes.forEach($F),this.nodes.forEach(zF),this.nodes.forEach(DF),TF&&window.MotionDebug.record(CF)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new YL)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new NM),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t&&t.notify(...i)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;this.isSVG=function(e){return e instanceof SVGElement&&"svg"!==e.tagName}(e),this.instance=e;const{layoutId:i,layout:r,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(r||i)&&(this.isLayoutDirty=!0),t){let n;const i=()=>this.root.updateBlockedByResize=!1;t(e,(()=>{this.root.updateBlockedByResize=!0,n&&n(),n=JL(i,250),UL.hasAnimatedSinceResize&&(UL.hasAnimatedSinceResize=!1,this.nodes.forEach(UF))}))}i&&this.root.registerSharedNode(i,this),!1!==this.options.animate&&o&&(i||r)&&this.addEventListener("didUpdate",(e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:i,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||o.getDefaultTransition()||KF,{onLayoutAnimationStart:a,onLayoutAnimationComplete:l}=o.getProps(),c=!this.targetLayout||!xF(this.targetLayout,r)||i,u=!n&&i;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e={...UO(s,"layout"),onPlay:a,onComplete:l};(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||UF(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r}))}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,EM(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(VF),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&PF(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(LF);this.isUpdating||this.nodes.forEach(FF),this.isUpdating=!1,this.nodes.forEach(BF),this.nodes.forEach(OF),this.nodes.forEach(MF),this.clearAllSnapshots();const e=AM.now();_M.delta=aN(0,1e3/60,e-_M.timestamp),_M.timestamp=e,_M.isProcessing=!0,IM.update.process(_M),IM.preRender.process(_M),IM.render.process(_M),_M.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qL.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jF),this.sharedNodes.forEach(HF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,TM.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){TM.postRender((()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()}))}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fL(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t){const t=r(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!o)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!vF(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,r=i!==this.prevTransformTemplateValue;e&&(t||yL(this.latestValues)||r)&&(o(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var i;return e&&(n=this.removeTransform(n)),YF((i=n).x),YF(i.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){var e;const{visualElement:t}=this.options;if(!t)return fL();const n=t.measureViewportBox();if(!((null===(e=this.scroll)||void 0===e?void 0:e.wasRoot)||this.path.some(ZF))){const{scroll:e}=this.root;e&&(IL(n.x,e.offset.x),IL(n.y,e.offset.y))}return n}removeElementScroll(e){var t;const n=fL();if(cF(n,e),null===(t=this.scroll)||void 0===t?void 0:t.wasRoot)return n;for(let i=0;i<this.path.length;i++){const t=this.path[i],{scroll:r,options:o}=t;t!==this.root&&r&&o.layoutScroll&&(r.wasRoot&&cF(n,e),IL(n.x,r.offset.x),IL(n.y,r.offset.y))}return n}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=fL();cF(n,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&PL(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),yL(e.latestValues)&&PL(n,e.latestValues)}return yL(this.latestValues)&&PL(n,this.latestValues),n}removeTransform(e){const t=fL();cF(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!yL(e.latestValues))continue;bL(e.latestValues)&&e.updateSnapshot();const i=fL();cF(i,e.measurePageBox()),mF(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,i)}return yL(this.latestValues)&&mF(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==_M.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const i=Boolean(this.resumingFrom)||this!==n;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:r,layoutId:o}=this.options;if(this.layout&&(r||o)){if(this.resolvedRelativeTargetAt=_M.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fL(),this.relativeTargetOrigin=fL(),aL(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),cF(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,a,l;if(this.target||(this.target=fL(),this.targetWithTransforms=fL()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,a=this.relativeTarget,l=this.relativeParent.target,oL(s.x,a.x,l.x),oL(s.y,a.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):cF(this.target,this.layout.layoutBox),TL(this.target,this.targetDelta)):cF(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fL(),this.relativeTargetOrigin=fL(),aL(this.relativeTargetOrigin,this.target,e.target),cF(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}TF&&CF.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!bL(this.parent.latestValues)&&!xL(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===_M.timestamp&&(i=!1),i)return;const{layout:r,layoutId:o}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!o)return;cF(this.layoutCorrected,this.layout.layoutBox);const s=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let o,s;t.x=t.y=1;for(let a=0;a<r;a++){o=n[a],s=o.projectionDelta;const{visualElement:r}=o.options;r&&r.props.style&&"contents"===r.props.style.display||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&PL(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,TL(e,s)),i&&yL(o.latestValues)&&PL(e,o.latestValues))}t.x<_L&&t.x>EL&&(t.x=1),t.y<_L&&t.y>EL&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms=fL());const{target:l}=t;l?(this.projectionDelta&&this.prevProjectionDelta?(uF(this.prevProjectionDelta.x,this.projectionDelta.x),uF(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),rL(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.treeScale.x===s&&this.treeScale.y===a&&wF(this.projectionDelta.x,this.prevProjectionDelta.x)&&wF(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),TF&&CF.recalculatedProjection++):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];var t;if(null===(t=this.options.visualElement)||void 0===t||t.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=pL(),this.projectionDelta=pL(),this.projectionDeltaWithTransform=pL()}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,i=n?n.latestValues:{},r={...this.latestValues},o=pL();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const s=fL(),a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(a&&!c&&!0===this.options.crossfade&&!this.path.some(GF));let d;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;qF(o.x,e.x,n),qF(o.y,e.y,n),this.setTargetDelta(o),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(aL(s,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,i){WF(e.x,t.x,n.x,i),WF(e.y,t.y,n.y,i)}(this.relativeTarget,this.relativeTargetOrigin,s,n),d&&function(e,t){return bF(e.x,t.x)&&bF(e.y,t.y)}(this.relativeTarget,d)&&(this.isProjectionDirty=!1),d||(d=fL()),cF(d,this.relativeTarget)),a&&(this.animationValues=r,function(e,t,n,i,r,o){r?(e.opacity=RD(0,void 0!==n.opacity?n.opacity:1,oF(i)),e.opacityExit=RD(void 0!==t.opacity?t.opacity:1,0,sF(i))):o&&(e.opacity=RD(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let s=0;s<tF;s++){const r=`border${eF[s]}Radius`;let o=rF(t,r),a=rF(n,r);void 0===o&&void 0===a||(o||(o=0),a||(a=0),0===o||0===a||iF(o)===iF(a)?(e[r]=Math.max(RD(nF(o),nF(a),i),0),(kN.test(a)||kN.test(o))&&(e[r]+="%")):e[r]=a)}(t.rotate||n.rotate)&&(e.rotate=RD(t.rotate||0,n.rotate||0,i))}(r,i,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(EM(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=TM.update((()=>{UL.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const i=UM(e)?e:FM(e);return i.start(Sj("",i,t,n)),i.animation}(0,1e3,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0}))}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&JF(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||fL();const t=nL(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const i=nL(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}cF(t,n),PL(t,r),rL(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new SF);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const i={};n.z&&RF("z",e,i,this.animationValues);for(let r=0;r<EF.length;r++)RF(`rotate${EF[r]}`,e,i,this.animationValues),RF(`skew${EF[r]}`,e,i,this.animationValues);e.render();for(const r in i)e.setStaticValue(r,i[r]),this.animationValues&&(this.animationValues[r]=i[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return _F;const i={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=ZL(null===e||void 0===e?void 0:e.pointerEvents)||"",i.transform=r?r(this.latestValues,""):"none",i;const o=this.getLead();if(!this.projectionDelta||!this.layout||!o.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=ZL(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!yL(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const s=o.animationValues||o.latestValues;this.applyTransformsToTarget(),i.transform=function(e,t,n){let i="";const r=e.x.translate/t.x,o=e.y.translate/t.y,s=(null===n||void 0===n?void 0:n.z)||0;if((r||o||s)&&(i=`translate3d(${r}px, ${o}px, ${s}px) `),1===t.x&&1===t.y||(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:o,skewX:s,skewY:a}=n;e&&(i=`perspective(${e}px) ${i}`),t&&(i+=`rotate(${t}deg) `),r&&(i+=`rotateX(${r}deg) `),o&&(i+=`rotateY(${o}deg) `),s&&(i+=`skewX(${s}deg) `),a&&(i+=`skewY(${a}deg) `)}const a=e.x.scale*t.x,l=e.y.scale*t.y;return 1===a&&1===l||(i+=`scale(${a}, ${l})`),i||"none"}(this.projectionDeltaWithTransform,this.treeScale,s),r&&(i.transform=r(s,i.transform));const{x:a,y:l}=this.projectionDelta;i.transformOrigin=`${100*a.origin}% ${100*l.origin}% 0`,o.animationValues?i.opacity=o===this?null!==(n=null!==(t=s.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:s.opacityExit:i.opacity=o===this?void 0!==s.opacity?s.opacity:"":void 0!==s.opacityExit?s.opacityExit:0;for(const c in HL){if(void 0===s[c])continue;const{correct:e,applyTo:t}=HL[c],n="none"===i.transform?s[c]:e(s[c],o);if(t){const e=t.length;for(let r=0;r<e;r++)i[t[r]]=n}else i[c]=n}return this.options.layoutId&&(i.pointerEvents=o===this?ZL(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach((e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(LF),this.root.sharedNodes.clear()}}}function OF(e){e.updateLayout()}function MF(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,o=n.source!==e.layout.source;"size"===r?mL((e=>{const i=o?n.measuredBox[e]:n.layoutBox[e],r=nL(i);i.min=t[e].min,i.max=i.min+r})):JF(r,n.layoutBox,t)&&mL((i=>{const r=o?n.measuredBox[i]:n.layoutBox[i],s=nL(t[i]);r.max=r.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+s)}));const s=pL();rL(s,t,n.layoutBox);const a=pL();o?rL(a,e.applyTransform(i,!0),n.measuredBox):rL(a,t,n.layoutBox);const l=!vF(s);let c=!1;if(!e.resumeFrom){const i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:r,layout:o}=i;if(r&&o){const s=fL();aL(s,n.layoutBox,r.layoutBox);const a=fL();aL(a,t,o.layoutBox),xF(s,a)||(c=!0),i.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=s,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function NF(e){TF&&CF.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function DF(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function jF(e){e.clearSnapshot()}function LF(e){e.clearMeasurements()}function FF(e){e.isLayoutDirty=!1}function BF(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function UF(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $F(e){e.resolveTargetDelta()}function zF(e){e.calcProjection()}function VF(e){e.resetSkewAndRotation()}function HF(e){e.removeLeadSnapshot()}function qF(e,t,n){e.translate=RD(t.translate,0,n),e.scale=RD(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function WF(e,t,n,i){e.min=RD(t.min,n.min,i),e.max=RD(t.max,n.max,i)}function GF(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const KF={duration:.45,ease:[.4,0,.1,1]},QF=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XF=QF("applewebkit/")&&!QF("chrome/")?Math.round:mM;function YF(e){e.min=XF(e.min),e.max=XF(e.max)}function JF(e,t,n){return"position"===e||"preserve-aspect"===e&&!function(e,t,n){return Math.abs(e-t)<=n}(kF(t),kF(n),.2)}function ZF(e){var t;return e!==e.root&&(null===(t=e.scroll)||void 0===t?void 0:t.wasRoot)}const eB=AF({attachResizeListener:(e,t)=>Uj(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),tB={current:void 0},nB=AF({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!tB.current){const e=new eB({});e.mount(window),e.setOptions({layoutScroll:!0}),tB.current=e}return tB.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),iB={pan:{Feature:class extends Lj{constructor(){super(...arguments),this.removePointerDownListener=mM}onPointerDown(e){this.session=new Hj(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:OL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:jL(e),onStart:jL(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&TM.postRender((()=>i(e,t)))}}}mount(){this.removePointerDownListener=zj(this.node.current,"pointerdown",(e=>this.onPointerDown(e)))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Lj{constructor(e){super(e),this.removeGroupControls=mM,this.removeListeners=mM,this.controls=new NL(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||mM}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:nB,MeasureLayout:KL}};function rB(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover","Start"===n);const r=i["onHover"+n];r&&TM.postRender((()=>r(t,$j(t))))}function oB(e,t,n){const{props:i}=e;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap","Start"===n);const r=i["onTap"+("End"===n?"":n)];r&&TM.postRender((()=>r(t,$j(t))))}const sB=new WeakMap,aB=new WeakMap,lB=e=>{const t=sB.get(e.target);t&&t(e)},cB=e=>{e.forEach(lB)};function uB(e,t,n){const i=function(e){let{root:t,...n}=e;const i=t||document;aB.has(i)||aB.set(i,{});const r=aB.get(i),o=JSON.stringify(n);return r[o]||(r[o]=new IntersectionObserver(cB,{root:t,...n})),r[o]}(t);return sB.set(e,n),i.observe(e),()=>{sB.delete(e),i.unobserve(e)}}const dB={some:0,all:1};const hB={inView:{Feature:class extends Lj{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:r}=e,o={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof i?i:dB[i]};return uB(this.node.current,o,(e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),o=t?n:i;o&&o(e)}))}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Lj{mount(){const{current:e}=this.node;e&&(this.unmount=hM(e,(e=>(oB(this.node,e,"Start"),(e,t)=>{let{success:n}=t;return oB(this.node,e,n?"End":"Cancel")})),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Lj{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(WU){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=LD(Uj(this.node.current,"focus",(()=>this.onFocus())),Uj(this.node.current,"blur",(()=>this.onBlur())))}unmount(){}}},hover:{Feature:class extends Lj{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const[i,r,o]=iM(e,n),s=rM((e=>{const{target:n}=e,i=t(e);if("function"!==typeof i||!n)return;const o=rM((e=>{i(e),n.removeEventListener("pointerleave",o)}));n.addEventListener("pointerleave",o,r)}));return i.forEach((e=>{e.addEventListener("pointerenter",s,r)})),o}(e,(e=>(rB(this.node,e,"Start"),e=>rB(this.node,e,"End")))))}unmount(){}}}},pB={layout:{ProjectionNode:nB,MeasureLayout:KL}},fB=(0,t.createContext)({strict:!1}),mB=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),gB=(0,t.createContext)({});function vB(e){return _O(e.animate)||DO.some((t=>PO(e[t])))}function bB(e){return Boolean(vB(e)||e.variants)}function yB(e){const{initial:n,animate:i}=function(e,t){if(vB(e)){const{initial:t,animate:n}=e;return{initial:!1===t||PO(t)?t:void 0,animate:PO(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(gB));return(0,t.useMemo)((()=>({initial:n,animate:i})),[xB(n),xB(i)])}function xB(e){return Array.isArray(e)?e.join(" "):e}const kB="undefined"!==typeof window,wB={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},SB={};for(const n in wB)SB[n]={isEnabled:e=>wB[n].some((t=>!!e[t]))};const CB=Symbol.for("motionComponentSymbol");function TB(e,n,i){return(0,t.useCallback)((t=>{t&&e.onMount&&e.onMount(t),n&&(t?n.mount(t):n.unmount()),i&&("function"===typeof i?i(t):Yj(i)&&(i.current=t))}),[n])}const EB=kB?t.useLayoutEffect:t.useEffect;function _B(e,n,i,r,o){var s,a;const{visualElement:l}=(0,t.useContext)(gB),c=(0,t.useContext)(fB),u=(0,t.useContext)(LL),d=(0,t.useContext)(mB).reducedMotion,h=(0,t.useRef)(null);r=r||c.renderer,!h.current&&r&&(h.current=r(e,{visualState:n,parent:l,props:i,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:d}));const p=h.current,f=(0,t.useContext)(BL);!p||p.projection||!o||"html"!==p.type&&"svg"!==p.type||function(e,t,n,i){const{layoutId:r,layout:o,drag:s,dragConstraints:a,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:IB(e.parent)),e.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:Boolean(s)||a&&Yj(a),visualElement:e,animationType:"string"===typeof o?o:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}(h.current,i,o,f);const m=(0,t.useRef)(!1);(0,t.useInsertionEffect)((()=>{p&&m.current&&p.update(i,u)}));const g=i[VM],v=(0,t.useRef)(Boolean(g)&&!(null===(s=window.MotionHandoffIsComplete)||void 0===s?void 0:s.call(window,g))&&(null===(a=window.MotionHasOptimisedAnimation)||void 0===a?void 0:a.call(window,g)));return EB((()=>{p&&(m.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),qL.render(p.render),v.current&&p.animationState&&p.animationState.animateChanges())})),(0,t.useEffect)((()=>{p&&(!v.current&&p.animationState&&p.animationState.animateChanges(),v.current&&(queueMicrotask((()=>{var e;null===(e=window.MotionHandoffMarkAsComplete)||void 0===e||e.call(window,g)})),v.current=!1))})),p}function IB(e){if(e)return!1!==e.options.allowProjection?e.projection:IB(e.parent)}function RB(e){let{preloadedFeatures:n,createVisualElement:i,useRender:r,useVisualState:o,Component:s}=e;var a,l;function c(e,n){let a;const l={...(0,t.useContext)(mB),...e,layoutId:PB(e)},{isStatic:c}=l,u=yB(e),d=o(e,c);if(!c&&kB){!function(e,n){(0,t.useContext)(fB).strict;0}();const e=function(e){const{drag:t,layout:n}=SB;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===n||void 0===n?void 0:n.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(l);a=e.MeasureLayout,u.visualElement=_B(s,d,l,i,e.ProjectionNode)}return(0,us.jsxs)(gB.Provider,{value:u,children:[a&&u.visualElement?(0,us.jsx)(a,{visualElement:u.visualElement,...l}):null,r(s,e,TB(d,u.visualElement,n),d,c,u.visualElement)]})}n&&function(e){for(const t in e)SB[t]={...SB[t],...e[t]}}(n),c.displayName=`motion.${"string"===typeof s?s:`create(${null!==(l=null!==(a=s.displayName)&&void 0!==a?a:s.name)&&void 0!==l?l:""})`}`;const u=(0,t.forwardRef)(c);return u[CB]=s,u}function PB(e){let{layoutId:n}=e;const i=(0,t.useContext)(FL).id;return i&&void 0!==n?i+"-"+n:n}const AB=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OB(e){return"string"===typeof e&&!e.includes("-")&&!!(AB.indexOf(e)>-1||/[A-Z]/u.test(e))}const MB=e=>(n,i)=>{const r=(0,t.useContext)(gB),o=(0,t.useContext)(LL),s=()=>function(e,t,n,i){let{scrapeMotionValuesFromProps:r,createRenderState:o,onUpdate:s}=e;const a={latestValues:NB(t,n,i,r),renderState:o()};return s&&(a.onMount=e=>s({props:t,current:e,...a}),a.onUpdate=e=>s(e)),a}(e,n,r,o);return i?s():function(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}(s)};function NB(e,t,n,i){const r={},o=i(e,{});for(const h in o)r[h]=ZL(o[h]);let{initial:s,animate:a}=e;const l=vB(e),c=bB(e);t&&c&&!l&&!1!==e.inherit&&(void 0===s&&(s=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===s;const d=u?a:s;if(d&&"boolean"!==typeof d&&!_O(d)){const t=Array.isArray(d)?d:[d];for(let n=0;n<t.length;n++){const i=OO(e,t[n]);if(i){const{transitionEnd:e,transition:t,...n}=i;for(const i in n){let e=n[i];if(Array.isArray(e)){e=e[u?e.length-1:0]}null!==e&&(r[i]=e)}for(const i in e)r[i]=e[i]}}}return r}const DB=(e,t)=>t&&"number"===typeof e?t.transform(e):e,jB={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},LB=gM.length;function FB(e,t,n){const{style:i,vars:r,transformOrigin:o}=e;let s=!1,a=!1;for(const l in t){const e=t[l];if(vM.has(l))s=!0;else if(fD(l))r[l]=e;else{const t=DB(e,GN[l]);l.startsWith("origin")?(a=!0,o[l]=t):i[l]=t}}if(t.transform||(s||n?i.transform=function(e,t,n){let i="",r=!0;for(let o=0;o<LB;o++){const s=gM[o],a=e[s];if(void 0===a)continue;let l=!0;if(l="number"===typeof a?a===(s.startsWith("scale")?1:0):0===parseFloat(a),!l||n){const e=DB(a,GN[s]);l||(r=!1,i+=`${jB[s]||s}(${e}) `),n&&(t[s]=e)}}return i=i.trim(),n?i=n(t,r?"":i):r&&(i="none"),i}(t,e.transform,n):i.transform&&(i.transform="none")),a){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;i.transformOrigin=`${e} ${t} ${n}`}}const BB={offset:"stroke-dashoffset",array:"stroke-dasharray"},UB={offset:"strokeDashoffset",array:"strokeDasharray"};function $B(e,t,n){return"string"===typeof e?e:wN.transform(t+n*e)}function zB(e,t,n,i){let{attrX:r,attrY:o,attrScale:s,originX:a,originY:l,pathLength:c,pathSpacing:u=1,pathOffset:d=0,...h}=t;if(FB(e,h,i),n)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:p,style:f,dimensions:m}=e;p.transform&&(m&&(f.transform=p.transform),delete p.transform),m&&(void 0!==a||void 0!==l||f.transform)&&(f.transformOrigin=function(e,t,n){return`${$B(t,e.x,e.width)} ${$B(n,e.y,e.height)}`}(m,void 0!==a?a:.5,void 0!==l?l:.5)),void 0!==r&&(p.x=r),void 0!==o&&(p.y=o),void 0!==s&&(p.scale=s),void 0!==c&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const o=r?BB:UB;e[o.offset]=wN.transform(-i);const s=wN.transform(t),a=wN.transform(n);e[o.array]=`${s} ${a}`}(p,c,u,d,!1)}const VB=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),HB=()=>({...VB(),attrs:{}}),qB=e=>"string"===typeof e&&"svg"===e.toLowerCase();function WB(e,t,n,i){let{style:r,vars:o}=t;Object.assign(e.style,r,i&&i.getProjectionStyles(n));for(const s in o)e.style.setProperty(s,o[s])}const GB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function KB(e,t,n,i){WB(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(GB.has(r)?r:zM(r),t.attrs[r])}function QB(e,t){let{layout:n,layoutId:i}=t;return vM.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!HL[e]||"opacity"===e)}function XB(e,t,n){var i;const{style:r}=e,o={};for(const s in r)(UM(r[s])||t.style&&UM(t.style[s])||QB(s,e)||void 0!==(null===(i=null===n||void 0===n?void 0:n.getValue(s))||void 0===i?void 0:i.liveStyle))&&(o[s]=r[s]);return o}function YB(e,t,n){const i=XB(e,t,n);for(const r in e)if(UM(e[r])||UM(t[r])){i[-1!==gM.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return i}const JB=["x","y","width","height","cx","cy","r"],ZB={useVisualState:MB({scrapeMotionValuesFromProps:YB,createRenderState:HB,onUpdate:e=>{let{props:t,prevProps:n,current:i,renderState:r,latestValues:o}=e;if(!i)return;let s=!!t.drag;if(!s)for(const l in o)if(vM.has(l)){s=!0;break}if(!s)return;let a=!n;if(n)for(let l=0;l<JB.length;l++){const e=JB[l];t[e]!==n[e]&&(a=!0)}a&&TM.read((()=>{!function(e,t){try{t.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(WU){t.dimensions={x:0,y:0,width:0,height:0}}}(i,r),TM.render((()=>{zB(r,o,qB(i.tagName),t.transformTemplate),KB(i,r)}))}))}})},eU={useVisualState:MB({scrapeMotionValuesFromProps:XB,createRenderState:VB})};function tU(e,t,n){for(const i in t)UM(t[i])||QB(i,n)||(e[i]=t[i])}function nU(e,n){const i={};return tU(i,e.style||{},e),Object.assign(i,function(e,n){let{transformTemplate:i}=e;return(0,t.useMemo)((()=>{const e=VB();return FB(e,n,i),Object.assign({},e.vars,e.style)}),[n])}(e,n)),i}function iU(e,t){const n={},i=nU(e,t);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const rU=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function oU(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||rU.has(e)}let sU=e=>!oU(e);try{(aU=require("@emotion/is-prop-valid").default)&&(sU=e=>e.startsWith("on")?!oU(e):aU(e))}catch(KU){}var aU;function lU(e,n,i,r){const o=(0,t.useMemo)((()=>{const t=HB();return zB(t,n,qB(r),e.transformTemplate),{...t.attrs,style:{...t.style}}}),[n]);if(e.style){const t={};tU(t,e.style,e),o.style={...t,...o.style}}return o}function cU(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(n,i,r,o,s)=>{let{latestValues:a}=o;const l=(OB(n)?lU:iU)(i,a,s,n),c=function(e,t,n){const i={};for(const r in e)"values"===r&&"object"===typeof e.values||(sU(r)||!0===n&&oU(r)||!t&&!oU(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(i,"string"===typeof n,e),u=n!==t.Fragment?{...c,...l,ref:r}:{},{children:d}=i,h=(0,t.useMemo)((()=>UM(d)?d.get():d),[d]);return(0,t.createElement)(n,{...u,children:h})}}function uU(e,t){return function(n){let{forwardMotionProps:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{forwardMotionProps:!1};return RB({...OB(n)?ZB:eU,preloadedFeatures:e,useRender:cU(i),createVisualElement:t,Component:n})}}const dU={current:null},hU={current:!1};const pU=[...kD,_N,BN],fU=new WeakMap;const mU=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class gU{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:s}=e,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=cD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=AM.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,TM.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=s;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=Boolean(o),this.isControllingVariants=vB(n),this.isVariantNode=bB(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in h){const e=h[p];void 0!==l[p]&&UM(e)&&e.set(l[p],!1)}}mount(e){this.current=e,fU.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach(((e,t)=>this.bindToMotionValue(t,e))),hU.current||function(){if(hU.current=!0,kB)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>dU.current=e.matches;e.addListener(t),t()}else dU.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||dU.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fU.delete(this.current),this.projection&&this.projection.unmount(),EM(this.notifyUpdate),EM(this.render),this.valueSubscriptions.forEach((e=>e())),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=vM.has(e),i=t.on("change",(t=>{this.latestValues[e]=t,this.props.onUpdate&&TM.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)})),r=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,(()=>{i(),r(),o&&o(),t.owner&&t.stop()}))}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in SB){const t=SB[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fL()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<mU.length;n++){const t=mU[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const i=e["on"+t];i&&(this.propEventSubscriptions[t]=this.on(t,i))}this.prevMotionValues=function(e,t,n){for(const i in t){const r=t[i],o=n[i];if(UM(r))e.addValue(i,r);else if(UM(o))e.addValue(i,FM(r,{owner:e}));else if(o!==r)if(e.hasValue(i)){const t=e.getValue(i);!0===t.liveStyle?t.jump(r):t.hasAnimated||t.set(r)}else{const t=e.getStaticValue(i);e.addValue(i,FM(void 0!==t?t:r,{owner:e}))}}for(const i in n)void 0===t[i]&&e.removeValue(i);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=FM(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];return void 0!==i&&null!==i&&("string"===typeof i&&(hD(i)||oN(i))?i=parseFloat(i):!(e=>pU.find(xD(e)))(i)&&BN.test(t)&&(i=XN(e,t)),this.setBaseTarget(e,UM(i)?i.get():i)),UM(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if("string"===typeof n||"object"===typeof n){const r=OO(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);r&&(i=r[e])}if(n&&void 0!==i)return i;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||UM(r)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new NM),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e].notify(...n)}}}class vU extends gU{constructor(){super(...arguments),this.KeyframeResolver=SD}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;UM(e)&&(this.childSubscription=e.on("change",(e=>{this.current&&(this.current.textContent=`${e}`)})))}}class bU extends vU{constructor(){super(...arguments),this.type="html",this.renderInstance=WB}readValueFromInstance(e,t){if(vM.has(t)){const e=QN(t);return e&&e.default||0}{const n=function(e){return window.getComputedStyle(e)}(e),i=(fD(t)?n.getPropertyValue(t):n[t])||0;return"string"===typeof i?i.trim():i}}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return AL(e,n)}build(e,t,n){FB(e,t,n.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return XB(e,t,n)}}class yU extends vU{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fL}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(vM.has(t)){const e=QN(t);return e&&e.default||0}return t=GB.has(t)?t:zM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,n){return YB(e,t,n)}build(e,t,n){zB(e,t,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,n,i){KB(e,t,0,i)}mount(e){this.isSVGTag=qB(e.tagName),super.mount(e)}}const xU=EO(uU({...Bj,...hB,...iB,...pB},((e,n)=>OB(e)?new yU(n):new bU(n,{allowProjection:e!==t.Fragment})))),kU=()=>{const e=Array.from({length:8});return(0,us.jsx)("div",{className:"flex justify-center items-center",children:(0,us.jsx)(xU.div,{style:{width:"32px",height:"32px",position:"relative"},animate:{rotate:360},transition:{duration:1.5,repeat:1/0,ease:"linear"},children:e.map(((e,t)=>{const n=t/8*Math.PI*2,i=Math.max(2,4-.25*t);return(0,us.jsx)(xU.div,{style:{position:"absolute",width:`${i}px`,height:`${i}px`,borderRadius:"50%",backgroundColor:"var(--vscode-editor-foreground)",left:"50%",top:"50%",marginLeft:`-${i/2}px`,marginTop:`-${i/2}px`,transform:`translate(${14*Math.cos(n)}px, ${14*Math.sin(n)}px)`}},t)}))})})};function wU(e){let{state:t}=e;return"disconnected"!==t?null:(0,us.jsx)("div",{className:"p-4 bg-yellow-100 text-yellow-800 rounded-md text-center",children:"No agent connected. Please start a conversation."})}function SU(){const[e,n]=(0,t.useState)([]);return(0,t.useEffect)((()=>{const e=setInterval((()=>{n((e=>[...e,"Sample transcription text..."]))}),5e3);return()=>clearInterval(e)}),[]),(0,us.jsx)("div",{className:"transcription-view p-4 bg-gray-100 rounded-md w-full h-full overflow-auto flex-col items-center",children:0===e.length?(0,us.jsx)("p",{className:"text-gray-500 text-center",children:"No transcriptions yet."}):e.map(((e,t)=>(0,us.jsx)("p",{className:"mb-2 text-center w-full",children:e},t)))})}function CU(e){let{isMicActive:t,onMicToggle:n,onCloseCall:i}=e;return(0,us.jsxs)("div",{className:"vc-control-panel",children:[(0,us.jsx)("style",{children:"\n                    .vc-control-panel {\n                        display: flex;\n                        gap: 24px;\n                        padding: 24px;\n                        justify-content: center;\n                        align-items: center;\n                        background: var(--vscode-editor-background);\n                        border-top: 1px solid var(--vscode-panel-border);\n                        position: relative;\n                    }\n                    \n                    .control-button {\n                        width: 52px !important;\n                        height: 52px !important;\n                        border-radius: 26px !important;\n                        min-width: 52px !important;\n                        padding: 0 !important;\n                        display: flex !important;\n                        align-items: center !important;\n                        justify-content: center !important;\n                        border: none !important;\n                        transition: all 0.2s ease !important;\n                        position: relative !important;\n                        overflow: hidden !important;\n                    }\n\n                    .control-button::after {\n                        content: '';\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        right: 0;\n                        bottom: 0;\n                        background: rgba(255, 255, 255, 0.1);\n                        opacity: 0;\n                        transition: opacity 0.2s ease;\n                    }\n\n                    .control-button:hover::after {\n                        opacity: 1;\n                    }\n\n                    .control-button:hover {\n                        transform: translateY(-2px);\n                    }\n\n                    .control-button:active {\n                        transform: translateY(1px);\n                    }\n\n                    .button-icon {\n                        width: 24px;\n                        height: 24px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n                        color: var(--vscode-button-foreground);\n                    }\n\n                    .button-icon svg {\n                        width: 20px;\n                        height: 20px;\n                    }\n                "}),(0,us.jsx)(Jo,{appearance:"secondary",onClick:i,children:"Close Converstaion"})]})}const TU=e=>{let{children:t}=e;return(0,us.jsx)(us.Fragment,{children:t})};const EU=function(e){const t=mO(),{state:n}=TO(),{onCloseAssisstant:i,isMicActive:r,setIsMicActive:o}=e;return(0,us.jsx)("div",{className:"flex flex-col items-center gap-4",children:(0,us.jsx)(TU,{children:"disconnected"!==n&&(0,us.jsx)(xU.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"flex justify-center w-full",style:{padding:"10px 0"},children:(0,us.jsx)(CU,{isMicActive:r,onMicToggle:async function(e){try{e&&!r?(await t.localParticipant.setMicrophoneEnabled(!0),o(!0)):!e&&r&&(await t.localParticipant.setMicrophoneEnabled(!1),o(!1))}catch(n){console.error("Error in handleMicToggle:",n)}},onCloseCall:async()=>{"connected"===t.state&&(await t.disconnect(),hs.postMessage({type:"VoiceAssistantStopRecording"})),await new Promise((e=>setTimeout(e,100))),i()}})})})})};function _U(e){let{localVolumeLevel:n,remoteVolumeLevel:i}=e;const{isDarkTheme:r}=wp(),o=(0,t.useRef)(null),s=(0,t.useRef)(0),a=(0,t.useRef)([]),[l,c]=(0,t.useState)(0),u=(0,t.useRef)(!1),d=function(e){const[n,i]=(0,t.useState)(!1);return(0,t.useEffect)((()=>{const t=window.matchMedia(e);t.matches!==n&&i(t.matches);const r=()=>i(t.matches);return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}),[n,e]),n}("(max-width: 768px)"),h=d?300:500;return(0,t.useEffect)((()=>{o.current&&(o.current.width=h,o.current.height=h);(()=>{const e=[],t=o.current;if(!t)return;const n=t.width/2,i=t.height/2,r=.4*Math.min(t.width,t.height);for(let o=0;o<2e3;o++){const t=Math.random()*Math.PI*2,o=Math.acos(2*Math.random()-1),s=Math.pow(Math.random(),1/3)*r,a=s*Math.sin(o)*Math.cos(t),l=s*Math.sin(o)*Math.sin(t),c=s*Math.cos(o),u=h/500,d=(1+Math.random())*u;e.push({x:n+a,y:i+l,z:c,radius:d,initialX:a,initialY:l,initialZ:c,isPopping:!1,popDistance:0,popSpeed:2+3*Math.random(),popDirection:{x:2*Math.random()-1,y:2*Math.random()-1,z:2*Math.random()-1}})}a.current=e})()}),[h]),(0,t.useEffect)((()=>{const e=()=>{const t=o.current,d=null===t||void 0===t?void 0:t.getContext("2d");if(!t||!d)return;d.clearRect(0,0,t.width,t.height);const p=t.width/2,f=t.height/2,m=.4*Math.min(t.width,t.height),g=500/h*.005;c((e=>e+g));const v=1+.5*n+.5*i,b=[...a.current].sort(((e,t)=>e.z-t.z));b.forEach((e=>{const t=Math.cos(l),o=Math.sin(l);let s,a,c;e.isPopping?(e.popDistance+=e.popSpeed*(h/500),e.popDistance>1.5*m&&n<.2&&i<.2&&(e.isPopping=!1,e.popDistance=0),s=e.initialX*v+e.popDirection.x*e.popDistance,a=e.initialY*v+e.popDirection.y*e.popDistance,c=e.initialZ*v+e.popDirection.z*e.popDistance):(s=e.initialX*v,a=e.initialY*v,c=e.initialZ*v);const u=s*t-c*o,g=s*o+c*t;e.x=p+u,e.y=f+a,e.z=g;const b=(g+m)/(2*m),y=e.radius*Math.max(.2,b),x=Math.max(.1,Math.min(1,1.5*b));d.beginPath(),d.arc(e.x,e.y,y,0,2*Math.PI),d.fillStyle=r?`rgba(255, 255, 255, ${x})`:`rgba(0, 0, 0, ${x})`,d.fill()})),u.current||(s.current=requestAnimationFrame(e))};return s.current=requestAnimationFrame(e),()=>{s.current&&cancelAnimationFrame(s.current)}}),[n,i,l,r,h]),(0,us.jsx)("div",{className:"relative "+(d?"w-[300px] h-[300px]":"w-[500px] h-[500px]"),children:(0,us.jsx)("canvas",{ref:o,className:"absolute top-0 left-0"})})}const IU=function(e){let{localVolumeLevel:t,remoteVolumeLevel:n}=e;const{state:i,videoTrack:r,audioTrack:o}=TO();return r&&r.render?(0,us.jsx)("div",{className:"h-[512px] w-[512px] rounded-lg overflow-hidden",children:r.render()}):(0,us.jsx)("div",{className:"h-[300px] w-[300px] flex items-center justify-center",children:(0,us.jsx)("div",{className:"h-full w-full",children:(0,us.jsx)(_U,{localVolumeLevel:t,remoteVolumeLevel:n})})})},RU=e=>{let{children:t}=e;return(0,us.jsx)(us.Fragment,{children:t})};const PU=function(e){const{localVolumeLevel:t,remoteVolumeLevel:n,onCloseAssisstant:i}=e,{state:r,videoTrack:o,audioTrack:s}=TO();return(0,us.jsx)(us.Fragment,{children:(0,us.jsx)(RU,{children:"connecting"!==r&&"disconnected"!==r||e.error?"disconnected"===r&&e.error?(0,us.jsx)(xU.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"grid items-center justify-center h-full",children:(0,us.jsx)("div",{className:"text-sm space-y-2 mt-4 p-3 rounded",style:{backgroundColor:"var(--vscode-inputValidation-errorBackground)",border:"1px solid var(--vscode-inputValidation-errorBorder)",color:"var(--vscode-inputValidation-errorForeground)"},children:e.error})},"disconnected"):(0,us.jsxs)(xU.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"flex items-center w-full h-full",style:{maxWidth:"800px",margin:"0 auto",padding:"20px"},children:[(0,us.jsxs)("div",{className:"grid grid-cols-1 gap-8 w-full max-w-[600px] mx-auto mb-6",children:[(0,us.jsx)("div",{className:"flex justify-center p-4",children:(0,us.jsx)(IU,{localVolumeLevel:t,remoteVolumeLevel:n})}),(0,us.jsx)("div",{className:"w-full flex flex-col mx-auto items-center text-center",style:{display:"none",minWidth:"300px",height:"150px",overflowY:"auto",backgroundColor:"var(--vscode-input-background)",border:"1px solid var(--vscode-widget-border)",borderRadius:"6px",padding:"12px"},children:(0,us.jsx)(SU,{})}),(0,us.jsx)("div",{className:"w-full flex items-center justify-center text-center p-3",children:(0,us.jsx)(EU,{onCloseAssisstant:i,isMicActive:e.isMicActive,setIsMicActive:e.setIsMicActive})})]}),(0,us.jsx)(wU,{state:r})]},"connected"):(0,us.jsx)(xU.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.3,ease:[.09,1.04,.245,1.055]},className:"flex items-center justify-center h-full gap-3",children:(0,us.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,us.jsx)(kU,{}),(0,us.jsx)("p",{className:"ml-3",style:{fontSize:"1rem",margin:0,lineHeight:"1"},children:e.isDownloadingNodeRTC?"Setting up a seemless voice experience...":"Initializing voice assistant..."})]})},"connecting")})})};function AU(e){let{onCloseAssisstant:n}=e;const[i]=(0,t.useState)(new bP),[r,o]=(0,t.useState)(null),[s,a]=(0,t.useState)(0),[l,c]=(0,t.useState)(0),[u,d]=(0,t.useState)(!1),[h,p]=(0,t.useState)(!1),f=(0,t.useCallback)((async()=>{try{console.log("user manually interrupted agent"),hs.postMessage({type:"VoiceAssistnatSendText",value:"[<<<Interrupt>>]"})}catch(GU){o("Failed to connect to voice assistant. Please try again."),console.error(GU)}}),[i]);return(0,t.useEffect)((()=>{try{console.log("Connecting to voice assistant on mount"),hs.postMessage({type:"voiceAssistantConnect"})}catch(GU){o("Failed to connect to voice assistant. Please try again."),console.error(GU)}const e=async e=>{const t=e.data;switch(t.type){case"VoiceAssistantRTCDownloading":p(!0);break;case"VoiceAssistantRTCDownloaded":break;case"voiceAssistantConnectionDetails":const{serverUrl:e,participantToken:n}=t.data;console.log(e,n),await i.connect(e,n,{autoSubscribe:!1}).catch((e=>{o("Failed to connect to voice assistant. Please try again."),console.error("connection error",e)})),console.log("Remote participants",i.remoteParticipants),console.log("Remote participants",i.localParticipant);console.log(i);break;case"VoiceAssistantError":o(t.text||"An error occurred")}};window.addEventListener("message",e),i.on(o_.MediaDevicesError,OU);const t=async()=>{hs.postMessage({type:"VoiceAssistantStopRecording",data:{immediate:!0}}),i&&i.disconnect()};return window.addEventListener("beforeunload",t,{capture:!0}),window.addEventListener("unload",t,{capture:!0}),window.addEventListener("freeze",t,{capture:!0}),()=>{console.log("ERROR!! DIsconnecting"),i.off(o_.MediaDevicesError,OU),c(0),a(0),hs.postMessage({type:"VoiceAssistantStopRecording"}),i.disconnect(),window.removeEventListener("message",e),window.removeEventListener("beforeunload",t),window.removeEventListener("unload",t),window.removeEventListener("freeze",t)}}),[i]),(0,us.jsx)("main",{className:"grid content-center",style:{height:"98.5dvh",backgroundColor:"var(--vscode-editor-background)",border:"1px solid var(--vscode-widget-border)",borderRadius:"8px"},children:(0,us.jsx)(fO.Provider,{value:i,children:(0,us.jsx)("div",{className:"w-full mx-auto",style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:(0,us.jsx)(PU,{onCloseAssisstant:n,onInterruptAgentStream:f,error:r,localVolumeLevel:l,remoteVolumeLevel:s,isMicActive:u,setIsMicActive:d,isDownloadingNodeRTC:h})})})})}function OU(e){console.error(e),hs.postMessage({type:"showInformationMessage",text:"Error acquiring camera or microphone permissions. Please make sure you grant the necessary permissions and reload."})}const MU=cp(Jo)`
	--danger-button-bg: #c42b2b;
	--danger-button-hover: #a82424;
	--danger-button-active: #8f1f1f;

	background-color: var(--danger-button-bg) !important;
	border-color: var(--danger-button-bg) !important;
	color: #ffffff !important;

	&:hover {
		background-color: var(--danger-button-hover) !important;
		border-color: var(--danger-button-hover) !important;
	}

	&:active {
		background-color: var(--danger-button-active) !important;
		border-color: var(--danger-button-active) !important;
	}
`,NU=e=>(0,us.jsx)(MU,{...e}),DU=cp.button`
	font-size: 12px;
	font-weight: 500;
	padding: 2px 6px;
	border-radius: 2px;
	border: none;
	cursor: pointer;
	background: ${e=>e.$isInstalled?"var(--vscode-button-secondaryBackground)":"var(--vscode-button-background)"};
	color: var(--vscode-button-foreground);

	&:hover:not(:disabled) {
		background: ${e=>e.$isInstalled?"var(--vscode-button-secondaryHoverBackground)":"var(--vscode-button-hoverBackground)"};
	}

	&:active:not(:disabled) {
		background: ${e=>e.$isInstalled?"var(--vscode-button-secondaryBackground)":"var(--vscode-button-background)"};
		opacity: 0.7;
	}

	&:disabled {
		opacity: 0.5;
		cursor: default;
	}
`,jU=e=>{var n,i;let{item:r,installedServers:o}=e;const s=o.some((e=>e.name===r.mcpId)),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),h=(0,t.useRef)(null),p=(0,t.useCallback)((e=>{switch(e.data.type){case"mcpDownloadDetails":l(!1);break;case"relinquishControl":u(!1)}}),[]);d("message",p);const f=(0,t.useMemo)((()=>{const e=new URL(r.githubUrl),t=e.pathname.split("/");return t.length>=2?`${e.origin}/${t[1]}`:r.githubUrl}),[r.githubUrl]);return console.log("lalalalal",r),(0,us.jsxs)(us.Fragment,{children:[(0,us.jsx)("style",{children:"\n\t\t\t\t\t.mcp-card {\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\toutline: none !important;\n\t\t\t\t\t}\n\t\t\t\t\t.mcp-card:hover {\n\t\t\t\t\t\tbackground-color: var(--vscode-list-hoverBackground);\n\t\t\t\t\t}\n\t\t\t\t\t.mcp-card:focus {\n\t\t\t\t\t\toutline: none !important;\n\t\t\t\t\t}\n\t\t\t\t"}),(0,us.jsxs)("a",{href:r.githubUrl,className:"mcp-card",style:{padding:"14px 16px",display:"flex",flexDirection:"column",gap:12,cursor:c?"wait":"pointer",textDecoration:"none",color:"inherit"},children:[(0,us.jsxs)("div",{style:{display:"flex",gap:"12px"},children:[r.logoUrl&&(0,us.jsx)("img",{src:r.logoUrl,alt:`${r.name} logo`,style:{width:42,height:42,borderRadius:4}}),(0,us.jsxs)("div",{style:{flex:1,minWidth:0,display:"flex",flexDirection:"column",justifyContent:"space-between"},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"16px"},children:[(0,us.jsx)("h3",{style:{margin:0,fontSize:"13px",fontWeight:600},children:r.name}),(0,us.jsx)("div",{onClick:e=>{e.preventDefault(),e.stopPropagation(),s||a||(l(!0),hs.postMessage({type:"downloadMcp",mcpId:r.mcpId}),hs.postMessage({type:"chatSettings",chatSettings:{mode:"mcp"}}))},style:{},children:(0,us.jsx)(DU,{disabled:s||a,$isInstalled:s,children:s?"Installed":a?"Installing...":"Install"})})]}),(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",fontSize:"12px",color:"var(--vscode-descriptionForeground)",flexWrap:"wrap",minWidth:0,rowGap:0},children:[(0,us.jsx)("a",{href:f,style:{display:"flex",alignItems:"center",color:"var(--vscode-foreground)",minWidth:0,opacity:.7,textDecoration:"none",border:"none !important"},className:"github-link",onMouseEnter:e=>{e.currentTarget.style.opacity="1",e.currentTarget.style.color="var(--link-active-foreground)"},onMouseLeave:e=>{e.currentTarget.style.opacity="0.7",e.currentTarget.style.color="var(--vscode-foreground)"},children:(0,us.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center"},ref:h,children:[(0,us.jsx)("span",{className:"codicon codicon-github",style:{fontSize:"14px"}}),(0,us.jsx)("span",{style:{overflow:"hidden",textOverflow:"ellipsis",wordBreak:"break-all",minWidth:0},children:r.author})]})}),(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",minWidth:0,flexShrink:0},children:[(0,us.jsx)("span",{className:"codicon codicon-star-full"}),(0,us.jsx)("span",{style:{wordBreak:"break-all"},children:null!==(n=null===(i=r.githubStars)||void 0===i?void 0:i.toLocaleString())&&void 0!==n?n:0})]}),r.requiresApiKey&&(0,us.jsx)("span",{className:"codicon codicon-key",title:"Requires API key",style:{flexShrink:0}})]})]})]}),(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,us.jsx)("p",{style:{fontSize:"13px",margin:0},children:r.description}),(0,us.jsxs)("div",{style:{display:"flex",gap:"6px",flexWrap:"nowrap",overflow:"hidden",position:"relative"},children:[(0,us.jsx)("span",{style:{fontSize:"10px",padding:"1px 4px",borderRadius:"3px",border:"1px solid color-mix(in srgb, var(--vscode-descriptionForeground) 50%, transparent)",color:"var(--vscode-descriptionForeground)",whiteSpace:"nowrap"},children:r.category}),r.tags.map(((e,t)=>(0,us.jsxs)("span",{style:{fontSize:"10px",padding:"1px 4px",borderRadius:"3px",border:"1px solid color-mix(in srgb, var(--vscode-descriptionForeground) 50%, transparent)",color:"var(--vscode-descriptionForeground)",whiteSpace:"nowrap",display:"inline-flex"},children:[e,(r.tags.length,"")]},e))),(0,us.jsx)("div",{style:{position:"absolute",right:0,top:0,bottom:0,width:"32px",background:"linear-gradient(to right, transparent, var(--vscode-sideBar-background))",pointerEvents:"none"}})]})]})]})]})},LU=()=>{const{mcpServers:e}=wp(),[n,i]=(0,t.useState)([]),[r,o]=(0,t.useState)(!0),[s,a]=(0,t.useState)(null),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(""),[h,p]=(0,t.useState)(null),[f,m]=(0,t.useState)("newest"),g=(0,t.useMemo)((()=>{const e=new Set(n.map((e=>e.category)));return Array.from(e).sort()}),[n]),v=(0,t.useMemo)((()=>n.filter((e=>{const t=""===u||e.name.toLowerCase().includes(u.toLowerCase())||e.description.toLowerCase().includes(u.toLowerCase())||e.tags.some((e=>e.toLowerCase().includes(u.toLowerCase()))),n=!h||e.category===h;return t&&n})).sort(((e,t)=>{switch(f){case"stars":return t.githubStars-e.githubStars;case"name":return e.name.localeCompare(t.name);case"newest":return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime();default:return 0}}))),[n,u,h,f]);(0,t.useEffect)((()=>{const e=e=>{const t=e.data;if("mcpMarketplaceCatalog"===t.type){var n;if(t.error)a(t.error);else i((null===(n=t.mcpMarketplaceCatalog)||void 0===n?void 0:n.items)||[]),a(null);o(!1),c(!1)}else"mcpDownloadDetails"===t.type&&t.error&&a(t.error)};return window.addEventListener("message",e),b(),()=>{window.removeEventListener("message",e)}}),[]);const b=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e?c(!0):o(!0),a(null),hs.postMessage({type:"fetchMcpMarketplace",bool:e})};return r||l?(0,us.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px"},children:(0,us.jsx)(ss,{})}):s?(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px",gap:"12px"},children:[(0,us.jsx)("div",{style:{color:"var(--vscode-errorForeground)"},children:s}),(0,us.jsxs)(Jo,{appearance:"secondary",onClick:()=>b(!0),children:[(0,us.jsx)("span",{className:"codicon codicon-refresh",style:{marginRight:"6px"}}),"Retry"]})]}):(0,us.jsxs)("div",{style:{display:"flex",flexDirection:"column",width:"100%"},children:[(0,us.jsxs)("div",{style:{padding:"20px 20px 5px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,us.jsxs)(cs,{style:{width:"100%"},placeholder:"Search MCPs...",value:u,onInput:e=>d(e.target.value),children:[(0,us.jsx)("div",{slot:"start",className:"codicon codicon-search",style:{fontSize:13,opacity:.8}}),u&&(0,us.jsx)("div",{className:"codicon codicon-close","aria-label":"Clear search",onClick:()=>d(""),slot:"end",style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",cursor:"pointer"}})]}),(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,us.jsx)("span",{style:{fontSize:"11px",color:"var(--vscode-descriptionForeground)",textTransform:"uppercase",fontWeight:500,flexShrink:0},children:"Filter:"}),(0,us.jsx)("div",{style:{position:"relative",zIndex:2,flex:1},children:(0,us.jsxs)(es,{style:{width:"100%"},value:h||"",onChange:e=>p(e.target.value||null),children:[(0,us.jsx)(ns,{value:"",children:"All Categories"}),g.map((e=>(0,us.jsx)(ns,{value:e,children:e},e)))]})})]}),(0,us.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,us.jsx)("span",{style:{fontSize:"11px",color:"var(--vscode-descriptionForeground)",textTransform:"uppercase",fontWeight:500,marginTop:"3px"},children:"Sort:"}),(0,us.jsxs)(ls,{style:{display:"flex",flexWrap:"wrap",marginTop:"-2.5px"},value:f,onChange:e=>m(e.target.value),children:[(0,us.jsx)(as,{value:"newest",children:"Newest"}),(0,us.jsx)(as,{value:"stars",children:"GitHub Stars"}),(0,us.jsx)(as,{value:"name",children:"Name"})]})]})]}),(0,us.jsx)("style",{children:"\n\t\t\t\t.mcp-search-input,\n\t\t\t\t.mcp-select {\n\t\t\t\tbox-sizing: border-box;\n\t\t\t\t}\n\t\t\t\t.mcp-search-input {\n\t\t\t\tmin-width: 140px;\n\t\t\t\t}\n\t\t\t\t.mcp-search-input:focus,\n\t\t\t\t.mcp-select:focus {\n\t\t\t\tborder-color: var(--vscode-focusBorder) !important;\n\t\t\t\t}\n\t\t\t\t.mcp-search-input:hover,\n\t\t\t\t.mcp-select:hover {\n\t\t\t\topacity: 0.9;\n\t\t\t\t}\n\t\t\t"}),(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column"},children:0===v.length?(0,us.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",padding:"20px",color:"var(--vscode-descriptionForeground)"},children:u||h?"No matching MCP servers found":"No MCP servers found in the marketplace"}):v.map((t=>(0,us.jsx)(jU,{item:t,installedServers:e},t.mcpId)))})]})},FU=cp.button`
	background: none;
	border: none;
	border-bottom: 2px solid ${e=>e.isActive?"var(--vscode-foreground)":"transparent"};
	color: ${e=>e.isActive?"var(--vscode-foreground)":"var(--vscode-descriptionForeground)"};
	padding: 8px 16px;
	cursor: pointer;
	font-size: 13px;
	margin-bottom: -1px;
	font-family: inherit;

	&:hover {
		color: var(--vscode-foreground);
	}
`,BU=e=>{let{children:t,isActive:n,onClick:i}=e;return(0,us.jsx)(FU,{isActive:n,onClick:i,children:t})},UU=e=>{var n;let{server:i}=e;const{mcpMarketplaceCatalog:r}=wp(),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),c=()=>{hs.postMessage({type:"restartMcpServer",text:i.name})};return(0,us.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,us.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"8px",background:"var(--vscode-textCodeBlock-background)",cursor:i.error?"default":"pointer",borderRadius:o||i.error?"4px 4px 0 0":"4px",opacity:i.disabled?.6:1},onClick:()=>{i.error||s(!o)},children:[!i.error&&(0,us.jsx)("span",{className:"codicon codicon-chevron-"+(o?"down":"right"),style:{marginRight:"8px"}}),(0,us.jsx)("span",{style:{flex:1,overflow:"hidden",wordBreak:"break-all",whiteSpace:"normal",display:"flex",alignItems:"center",marginRight:"4px"},children:$g(i.name,r)}),(0,us.jsx)("div",{style:{display:"flex",alignItems:"center",marginRight:"8px"},onClick:e=>e.stopPropagation(),children:(0,us.jsx)("div",{role:"switch","aria-checked":!i.disabled,tabIndex:0,style:{width:"20px",height:"10px",backgroundColor:i.disabled?"var(--vscode-titleBar-inactiveForeground)":"var(--vscode-testing-iconPassed)",borderRadius:"5px",position:"relative",cursor:"pointer",transition:"background-color 0.2s",opacity:i.disabled?.5:.9},onClick:()=>{hs.postMessage({type:"toggleMcpServer",serverName:i.name,disabled:!i.disabled})},onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),hs.postMessage({type:"toggleMcpServer",serverName:i.name,disabled:!i.disabled}))},children:(0,us.jsx)("div",{style:{width:"6px",height:"6px",backgroundColor:"white",border:"1px solid color-mix(in srgb, #666666 65%, transparent)",borderRadius:"50%",position:"absolute",top:"1px",left:i.disabled?"2px":"12px",transition:"left 0.2s"}})})}),(0,us.jsx)("div",{style:{width:"8px",height:"8px",borderRadius:"50%",background:(()=>{switch(i.status){case"connected":return"var(--vscode-testing-iconPassed)";case"connecting":return"var(--vscode-charts-yellow)";case"disconnected":return"var(--vscode-testing-iconFailed)"}})(),marginLeft:"8px"}})]}),i.error?(0,us.jsxs)("div",{style:{fontSize:"13px",background:"var(--vscode-textCodeBlock-background)",borderRadius:"0 0 4px 4px",width:"100%"},children:[(0,us.jsx)("div",{style:{color:"var(--vscode-testing-iconFailed)",marginBottom:"8px",padding:"0 10px",overflowWrap:"break-word",wordBreak:"break-word"},children:i.error}),(0,us.jsx)(Jo,{appearance:"secondary",onClick:c,disabled:"connecting"===i.status,style:{width:"calc(100% - 20px)",margin:"0 10px 10px 10px"},children:"connecting"===i.status?"Retrying...":"Retry Connection"})]}):o&&(0,us.jsxs)("div",{style:{background:"var(--vscode-textCodeBlock-background)",padding:"0 10px 10px 10px",fontSize:"13px",borderRadius:"0 0 4px 4px"},children:[(0,us.jsxs)(is,{children:[(0,us.jsxs)(rs,{id:"tools",children:["Tools (",(null===(n=i.tools)||void 0===n?void 0:n.length)||0,")"]}),(0,us.jsxs)(rs,{id:"resources",children:["Resources (",[...i.resourceTemplates||[],...i.resources||[]].length||0,")"]}),(0,us.jsx)(os,{id:"tools-view",children:i.tools&&i.tools.length>0?(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:i.tools.map((e=>(0,us.jsx)(sv,{tool:e,serverName:i.name},e.name)))}):(0,us.jsx)("div",{style:{padding:"10px 0",color:"var(--vscode-descriptionForeground)"},children:"No tools found"})}),(0,us.jsx)(os,{id:"resources-view",children:i.resources&&i.resources.length>0||i.resourceTemplates&&i.resourceTemplates.length>0?(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"8px",width:"100%"},children:[...i.resourceTemplates||[],...i.resources||[]].map((e=>(0,us.jsx)(ov,{item:e},"uriTemplate"in e?e.uriTemplate:e.uri)))}):(0,us.jsx)("div",{style:{padding:"10px 0",color:"var(--vscode-descriptionForeground)"},children:"No resources found"})})]}),(0,us.jsx)(Jo,{appearance:"secondary",onClick:c,disabled:"connecting"===i.status,style:{width:"calc(100% - 14px)",margin:"0 7px 3px 7px"},children:"connecting"===i.status?"Restarting...":"Restart Server"}),(0,us.jsx)(NU,{onClick:()=>{l(!0),hs.postMessage({type:"deleteMcpServer",serverName:i.name})},disabled:a,style:{width:"calc(100% - 14px)",margin:"5px 7px 3px 7px"},children:a?"Deleting...":"Delete Server"})]})]})},$U=e=>{let{onDone:n}=e;const{mcpServers:i,mcpMarketplaceEnabled:r}=wp(),[o,s]=(0,t.useState)(r?"marketplace":"installed"),a=e=>{s(e)};return(0,t.useEffect)((()=>{r||"marketplace"!==o||s("installed")}),[r,o]),(0,t.useEffect)((()=>{r&&(hs.postMessage({type:"silentlyRefreshMcpMarketplace"}),hs.postMessage({type:"fetchLatestMcpServersFromHub"}))}),[r]),(0,us.jsxs)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column"},children:[(0,us.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"10px 17px 5px 20px"},children:[(0,us.jsx)("h3",{style:{color:"var(--vscode-foreground)",margin:0},children:"MCP Servers"}),(0,us.jsx)(Jo,{onClick:n,children:"Done"})]}),(0,us.jsxs)("div",{style:{flex:1,overflow:"auto"},children:[(0,us.jsxs)("div",{style:{display:"flex",gap:"1px",padding:"0 20px 0 20px",borderBottom:"1px solid var(--vscode-panel-border)"},children:[r&&(0,us.jsx)(BU,{isActive:"marketplace"===o,onClick:()=>a("marketplace"),children:"Marketplace"}),(0,us.jsx)(BU,{isActive:"installed"===o,onClick:()=>a("installed"),children:"Installed"})]}),(0,us.jsxs)("div",{style:{width:"100%"},children:[r&&"marketplace"===o&&(0,us.jsx)(LU,{}),"installed"===o&&(0,us.jsxs)("div",{style:{padding:"16px 20px"},children:[(0,us.jsxs)("div",{style:{color:"var(--vscode-foreground)",fontSize:"13px",marginBottom:"16px",marginTop:"5px"},children:["The"," ",(0,us.jsx)(ts,{href:"https://github.com/modelcontextprotocol",style:{display:"inline"},children:"Model Context Protocol"})," ","enables communication with locally running MCP servers that provide additional tools and resources to extend blackbox's capabilities. You can use"," ",(0,us.jsx)(ts,{href:"https://github.com/modelcontextprotocol/servers",style:{display:"inline"},children:"community-made servers"})," ",'or ask blackbox to create new tools specific to your workflow (e.g., "add a tool that gets the latest npm docs").'," ",(0,us.jsx)(ts,{href:"https://x.com/sdrzn/status/1867271665086074969",style:{display:"inline"},children:"See a demo here."})]}),i.length>0?(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:i.map((e=>(0,us.jsx)(UU,{server:e},e.name)))}):(0,us.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"12px",marginTop:20,marginBottom:20,color:"var(--vscode-descriptionForeground)"},children:"No MCP servers installed"}),(0,us.jsxs)("div",{style:{marginBottom:"20px",marginTop:10},children:[(0,us.jsxs)(Jo,{appearance:"secondary",style:{width:"100%",marginBottom:"5px"},onClick:()=>{hs.postMessage({type:"openMcpSettings"})},children:[(0,us.jsx)("span",{className:"codicon codicon-server",style:{marginRight:"6px"}}),"Configure MCP Servers"]}),(0,us.jsx)("div",{style:{textAlign:"center"},children:(0,us.jsx)(ts,{onClick:()=>{hs.postMessage({type:"openExtensionSettings",text:"blackbox.mcp"})},style:{fontSize:"12px"},children:"Advanced MCP Settings"})})]})]})]})]})]})},zU={apiProvider:"qwen"},VU=()=>{const{didHydrateState:e,showWelcome:n,paymentMethodId:i}=wp(),[r,o]=(0,t.useState)(!1),[s,a]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[p,f]=(0,t.useState)(""),[m,g]=(0,t.useState)(!1),[v,b]=(0,t.useState)(""),[y,x]=(0,t.useState)((()=>!localStorage.getItem("blackbox_redeem_success"))),[k,w]=(0,t.useState)(!1),[S,C]=(0,t.useState)(null),[T,E]=(0,t.useState)(!1),[_,I]=(0,t.useState)(null),[R,P]=(0,t.useState)(0),[A,O]=(0,t.useState)(!1),M=(0,t.useCallback)((()=>{P((e=>e+1))}),[]),[N,D]=(0,t.useState)(0),[j,L]=(0,t.useState)(!1),[F,B]=(0,t.useState)(!1),[U,$]=(0,t.useState)({...zU}),[z,V]=(0,t.useState)(!1),[H,q]=(0,t.useState)((()=>{const e=localStorage.getItem("auto-fill");return null===e||"true"===e})),[W,G]=(0,t.useState)(!1),[K,Q]=(0,t.useState)((()=>hy.find((e=>9.99===e.price))||hy[0])),[X,Y]=(0,t.useState)(0),[J,Z]=(0,t.useState)((()=>localStorage.getItem("blackbox_redeem_success")?"blackbox-pro":"blackbox-base")),ee=r||s||T||k,te=async(e,t)=>{const n=W?"get-subscription":"purchase-credits",i=await fetch(`${cv}/api/${n}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:p,amount:e.toString(),...t?{paymentMethod:t}:{},...W?{autoConfirm:!0}:{}})});return await i.json()};(0,t.useEffect)((()=>{l&&!F&&re()}),[l]),(0,t.useEffect)((()=>{"true"===localStorage.getItem("blackbox_redeem_success")&&!F&&re()}),[]),(0,t.useEffect)((()=>{if(J&&J!==U.apiProvider){const e="true"===localStorage.getItem("blackbox_redeem_success"),t={...U,apiProvider:J,hasRedeemedCoupon:e};$(t),hs.postMessage({type:"apiConfiguration",apiConfiguration:t})}}),[J,U.apiProvider]);const ne=async function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];try{if(!0){if(!0===F&&""!==p&&H&&N<1){const n=localStorage.getItem("lastAutoFillError");if(z||"true"===n)return void(e&&h(!0));V(!0),await new Promise((e=>setTimeout(e,100)));try{const t=localStorage.getItem("lastAutoFillTimestamp"),n=Date.now();if(t&&n-parseInt(t)<3e5)return void(e&&h(!0));await(async()=>{const e=2e3;try{var t,n;let o=await te(e);if(null!==(t=o)&&void 0!==t&&t.error&&(console.warn(o.error),console.log("retrying auto-refill with stored payment method"),i&&(o=await te(e,i))),null!==(n=o)&&void 0!==n&&n.error||!o.success)throw new Error("Credit purchase failed");var r;if(null!==(r=o)&&void 0!==r&&r.requiresAction)throw new Error("3DS authentication required");{const t=20,n=Math.max(N,0)+t;return hs.postMessage({type:"updateUserCredits",value:n.toString()}),hs.postMessage({type:"showInformationMessage",text:`Successfully purchased ${t} credits!`}),Y(e),!0}}catch(o){return console.error("Credit purchase error:",o),hs.postMessage({type:"showMessage",text:"Failed to purchase credits. Please try again."}),!1}})()?(h(!0),localStorage.removeItem("lastAutoFillError"),localStorage.setItem("lastAutoFillTimestamp",n.toString())):localStorage.setItem("lastAutoFillError","true")}catch(t){console.error("Auto-fill error:",t),localStorage.setItem("lastAutoFillError","true")}finally{await new Promise((e=>setTimeout(e,300))),V(!1)}}return void(e&&h(!0))}let n="https://www.blackbox.ai",r=Yb(),o={productId:"prod_RI1k0eOeA1Xf5u",productName:"cybercoder"},s=`${n}/api/buy-credits?productId=${o.productId}&userId=${r}&productName=${o.productName}`;hs.postMessage({type:"openBrowserLink",text:s})}catch(t){console.error(t),hs.postMessage({type:"showMessage",text:"Failed to upgrade. Please try again."})}};(0,t.useEffect)((()=>{(async()=>{await(e=>new Promise((t=>setTimeout(t,e))))(500),j&&H&&!z&&N<1&&await ne(!1)})()}),[N,H]);const ie=()=>{hs.postMessage({type:"getUserCredits"})},re=(0,t.useCallback)((async e=>{const t=!(null!==e&&void 0!==e&&e.stopUpgrade),n="true"===localStorage.getItem("blackbox_redeem_success");if(!n){t&&ne();const e="qwen",i={...U,apiProvider:e,hasRedeemedCoupon:n};return $(i),hs.postMessage({type:"apiConfiguration",apiConfiguration:i}),void B(!1)}hs.postMessage({type:"toggleProButton",proOnOffValue:!0,hasRedeemedCoupon:n})}),[N,U,$]),oe=(0,t.useCallback)((async e=>{const t=e.data;switch(t.type){case"updateUserCredits":if(t.value){const e=parseFloat(t.value);D(e),L(!0)}else null===t.value&&D(0);break;case"updateCustomerId":t.value?f(t.value):null===t.value&&f("");break;case"getLocalStorageValues":hs.postMessage({type:"syncLocalStorage",localStorageValues:{blackbox_redeem_success:localStorage.getItem("blackbox_redeem_success"),blackbox_coupon_code:localStorage.getItem("blackbox_coupon_code"),blackbox_userId:localStorage.getItem("blackbox_userId")}});break;case"syncLocalStorage":t.localStorageValues&&(t.localStorageValues.blackbox_redeem_success&&(localStorage.setItem("blackbox_redeem_success",t.localStorageValues.blackbox_redeem_success),c("true"===t.localStorageValues.blackbox_redeem_success)),t.localStorageValues.blackbox_coupon_code&&localStorage.setItem("blackbox_coupon_code",t.localStorageValues.blackbox_coupon_code),t.localStorageValues.blackbox_userId&&localStorage.setItem("blackbox_userId",t.localStorageValues.blackbox_userId),t.localStorageValues.agent_mode&&x("chatModeEnabled"===t.localStorageValues.agent_mode));break;case"toggleProButton":Boolean(t.proOnOffValue)?(void 0!==t.hasRedeemedCoupon&&c(t.hasRedeemedCoupon),localStorage.setItem("blackbox_redeem_success","true"),B((e=>{const t="true"===localStorage.getItem("blackbox_redeem_success"),n={...U,apiProvider:"sonnet",hasRedeemedCoupon:t};return $(n),hs.postMessage({type:"apiConfiguration",apiConfiguration:n}),!0}))):B((e=>{const t="true"===localStorage.getItem("blackbox_redeem_success"),n={...U,apiProvider:"qwen",hasRedeemedCoupon:t};return $(n),hs.postMessage({type:"apiConfiguration",apiConfiguration:n}),!1}));break;case"inviteCodeEntered":if(null!==t&&void 0!==t&&t.text)"paymentSuccess"===(null===t||void 0===t?void 0:t.text)&&(localStorage.setItem("blackbox_redeem_success","true"),hs.postMessage({type:"updateGlobalState",key:"blackbox_redeem_success",value:"true"}),c(!0));else{await async function(e){let t=Yb(),n=await fetch(`${Xb}/api/referral/redeem`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({referralId:e,receiverId:t})}),i=await n.json();return i&&null!==i&&void 0!==i&&i.success?i.success:null}(null===t||void 0===t?void 0:t.value)&&(localStorage.setItem("blackbox_redeem_success","true"),hs.postMessage({type:"updateGlobalState",key:"blackbox_redeem_success",value:"true"}),c(!0))}null!==t&&void 0!==t&&t.value&&function(e){try{return!!e&&Sy.includes(e)}catch(t){return!1}}(null===t||void 0===t?void 0:t.value)&&(hs.postMessage({type:"couponCodeEntered",value:t.value}),localStorage.setItem("blackbox_coupon_code",t.value),hs.postMessage({type:"updateGlobalState",key:"blackbox_coupon_code",value:t.value}));break;case"action":switch(t.action){case"settingsButtonClicked":o(!0),a(!1),E(!1),w(!1);break;case"historyButtonClicked":o(!1),a(!0),E(!1),w(!1);break;case"mcpButtonClicked":o(!1),a(!1),E(!1),w(!0);break;case"chatButtonClicked":o(!1),a(!1),w(!1),E(!1),re({stopUpgrade:!0});break;case"groupChatButtonClicked":case"showChatRooms":o(!1),a(!1),E(!0),w(!1),I({...t.data});break;case"joinGroupChatWithRoomId":o(!1),a(!1),E(!0),w(!1),I({...t.data}),M();break;case"showVoiceAssistant":o(!1),a(!1),E(!1),w(!1),O(!0);break;case"hideVoiceAssistant":O(!1)}}}),[]);return d("message",oe),e?(0,us.jsx)(us.Fragment,{children:(0,us.jsxs)(us.Fragment,{children:[r&&(0,us.jsx)(wy,{onDone:()=>o(!1)}),s&&(0,us.jsx)(Sf,{onDone:()=>a(!1)}),k&&(0,us.jsx)($U,{onDone:()=>w(!1)}),A&&!ee&&(0,us.jsx)(AU,{onCloseAssisstant:()=>O(!1)}),(0,us.jsx)(xy,{showHistoryView:()=>{o(!1),w(!1),a(!0)},setRedeemedSuccess:c,redeemedSuccess:l,isHidden:ee||A,handleProVersionToggle:re,redeemInviteForAccess:async()=>{hs.postMessage({type:"showInputBox",options:{prompt:"Enter your invite code",placeHolder:"e.g. ABC123",title:"Redeem Invite Code"}})},isPro:F,setUserCredits:D,apiConfiguration:U,userCredits:N,fetchUserCredits:ie,setApiConfiguration:$,chatModeEnableDisable:y,setChatModeEnableDisable:x,upgradeForAccess:ne,customerId:p,setCustomerId:f,selectedModel:J,setSelectedModel:Z,showVoiceAssistant:A,setShowVoiceAssistant:O,isAutoApprove:m,setIsAutoApprove:g,waitingToResume:S,setWaitingToResume:C}),u&&(0,us.jsx)(Hk,{onClose:()=>{h(!1)},onSuccess:async e=>{if("subscription"===e.mode||null!==e&&void 0!==e&&e.cardElementVisible){const{customer:t,cardElementVisible:n,creditAmount:i}=e;await localStorage.setItem("blackbox_redeem_success","true"),hs.postMessage({type:"updateGlobalState",key:"blackbox_redeem_success",value:"true"}),null!==t&&void 0!==t&&t.id&&null!==t&&void 0!==t&&t.email&&(hs.postMessage({type:"updateGlobalState",key:"customerId",value:null===t||void 0===t?void 0:t.id}),hs.postMessage({type:"updateGlobalState",key:"customerEmail",value:null===t||void 0===t?void 0:t.email}),f(null===t||void 0===t?void 0:t.id),b(null===t||void 0===t?void 0:t.email)),n?hs.postMessage({type:"showInformationMessage",text:`Successfully purchased ${i||0} credits!`}):(hs.postMessage({type:"showInformationMessage",text:"Congratulations! You are successfully subscribed to Pro version."}),"blackbox-base"===J&&Z("blackbox-pro"),K&&hs.postMessage({type:"updateGlobalState",key:"tierId",value:K.id})),ie(),setTimeout((()=>{"true"===localStorage.getItem("blackbox_redeem_success")&&!F&&re({stopUpgrade:!0})}),1e3)}else{const{paymentIntent:t}=e;Y(t.amount);const n=t.amount/100;ie(),hs.postMessage({type:"showInformationMessage",text:`Successfully purchased ${n} credits!`})}localStorage.removeItem("lastAutoFillError"),"wait_for_credits"===S&&C("resume_task"),null!==e&&void 0!==e&&e.paymentMethodId&&hs.postMessage({type:"updatePaymentMethod",paymentMethodId:null===e||void 0===e?void 0:e.paymentMethodId}),h(!1)},planId:"price_example",amount:p?20:19.99,stripePublicKey:"pk_live_NjCA1yGv5ie85lOhnTt2E11z005pitDerS",mode:p?"credits":"subscription",customerId:p,customerEmail:v,enableAutoFill:H,setEnableAutoFill:e=>{q(e),localStorage.setItem("auto-fill",e.toString())},currentCredits:N,setSelectedModel:Z,isMonthly:W,setIsMonthly:G,fetchUserCredits:ie,setSelectedTier:Q,selectedTier:K}),(0,us.jsx)(Qx,{children:(0,us.jsx)(Ik,{paramData:_,isHidden:!T,apiConfiguration:U,setApiConfiguration:$})},R)]})}):null},HU=()=>(0,us.jsx)(kp,{children:(0,us.jsx)(VU,{})}),qU=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:o,getTTFB:s}=t;n(e),i(e),r(e),o(e),s(e)}))};r.createRoot(document.getElementById("root")).render((0,us.jsx)(t.StrictMode,{children:(0,us.jsx)(HU,{})})),qU()})()})();
//# sourceMappingURL=main.js.map